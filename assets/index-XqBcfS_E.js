var Oy=e=>{throw TypeError(e)};var Ih=(e,t,n)=>t.has(e)||Oy("Cannot "+n);var $=(e,t,n)=>(Ih(e,t,"read from private field"),n?n.call(e):t.get(e)),Te=(e,t,n)=>t.has(e)?Oy("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ce=(e,t,n,r)=>(Ih(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ot=(e,t,n)=>(Ih(e,t,"access private method"),n);var Cc=(e,t,n,r)=>({set _(s){ce(e,t,s,n)},get _(){return $(e,t,r)}});function pM(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function p1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var g1={exports:{}},Id={},y1={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rc=Symbol.for("react.element"),gM=Symbol.for("react.portal"),yM=Symbol.for("react.fragment"),vM=Symbol.for("react.strict_mode"),xM=Symbol.for("react.profiler"),wM=Symbol.for("react.provider"),bM=Symbol.for("react.context"),SM=Symbol.for("react.forward_ref"),kM=Symbol.for("react.suspense"),jM=Symbol.for("react.memo"),CM=Symbol.for("react.lazy"),Iy=Symbol.iterator;function EM(e){return e===null||typeof e!="object"?null:(e=Iy&&e[Iy]||e["@@iterator"],typeof e=="function"?e:null)}var v1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x1=Object.assign,w1={};function po(e,t,n){this.props=e,this.context=t,this.refs=w1,this.updater=n||v1}po.prototype.isReactComponent={};po.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};po.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function b1(){}b1.prototype=po.prototype;function o0(e,t,n){this.props=e,this.context=t,this.refs=w1,this.updater=n||v1}var l0=o0.prototype=new b1;l0.constructor=o0;x1(l0,po.prototype);l0.isPureReactComponent=!0;var $y=Array.isArray,S1=Object.prototype.hasOwnProperty,c0={current:null},k1={key:!0,ref:!0,__self:!0,__source:!0};function j1(e,t,n){var r,s={},a=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)S1.call(t,r)&&!k1.hasOwnProperty(r)&&(s[r]=t[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:rc,type:e,key:a,ref:i,props:s,_owner:c0.current}}function TM(e,t){return{$$typeof:rc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function u0(e){return typeof e=="object"&&e!==null&&e.$$typeof===rc}function MM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ly=/\/+/g;function $h(e,t){return typeof e=="object"&&e!==null&&e.key!=null?MM(""+e.key):t.toString(36)}function pu(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case rc:case gM:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+$h(i,0):r,$y(s)?(n="",e!=null&&(n=e.replace(Ly,"$&/")+"/"),pu(s,t,n,"",function(u){return u})):s!=null&&(u0(s)&&(s=TM(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(Ly,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",$y(e))for(var o=0;o<e.length;o++){a=e[o];var c=r+$h(a,o);i+=pu(a,t,n,c,s)}else if(c=EM(e),typeof c=="function")for(e=c.call(e),o=0;!(a=e.next()).done;)a=a.value,c=r+$h(a,o++),i+=pu(a,t,n,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Ec(e,t,n){if(e==null)return e;var r=[],s=0;return pu(e,r,"","",function(a){return t.call(n,a,s++)}),r}function NM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Jt={current:null},gu={transition:null},PM={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:gu,ReactCurrentOwner:c0};function C1(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Ec,forEach:function(e,t,n){Ec(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ec(e,function(){t++}),t},toArray:function(e){return Ec(e,function(t){return t})||[]},only:function(e){if(!u0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};be.Component=po;be.Fragment=yM;be.Profiler=xM;be.PureComponent=o0;be.StrictMode=vM;be.Suspense=kM;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PM;be.act=C1;be.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=x1({},e.props),s=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=c0.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)S1.call(t,c)&&!k1.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:rc,type:e.type,key:s,ref:a,props:r,_owner:i}};be.createContext=function(e){return e={$$typeof:bM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wM,_context:e},e.Consumer=e};be.createElement=j1;be.createFactory=function(e){var t=j1.bind(null,e);return t.type=e,t};be.createRef=function(){return{current:null}};be.forwardRef=function(e){return{$$typeof:SM,render:e}};be.isValidElement=u0;be.lazy=function(e){return{$$typeof:CM,_payload:{_status:-1,_result:e},_init:NM}};be.memo=function(e,t){return{$$typeof:jM,type:e,compare:t===void 0?null:t}};be.startTransition=function(e){var t=gu.transition;gu.transition={};try{e()}finally{gu.transition=t}};be.unstable_act=C1;be.useCallback=function(e,t){return Jt.current.useCallback(e,t)};be.useContext=function(e){return Jt.current.useContext(e)};be.useDebugValue=function(){};be.useDeferredValue=function(e){return Jt.current.useDeferredValue(e)};be.useEffect=function(e,t){return Jt.current.useEffect(e,t)};be.useId=function(){return Jt.current.useId()};be.useImperativeHandle=function(e,t,n){return Jt.current.useImperativeHandle(e,t,n)};be.useInsertionEffect=function(e,t){return Jt.current.useInsertionEffect(e,t)};be.useLayoutEffect=function(e,t){return Jt.current.useLayoutEffect(e,t)};be.useMemo=function(e,t){return Jt.current.useMemo(e,t)};be.useReducer=function(e,t,n){return Jt.current.useReducer(e,t,n)};be.useRef=function(e){return Jt.current.useRef(e)};be.useState=function(e){return Jt.current.useState(e)};be.useSyncExternalStore=function(e,t,n){return Jt.current.useSyncExternalStore(e,t,n)};be.useTransition=function(){return Jt.current.useTransition()};be.version="18.3.1";y1.exports=be;var p=y1.exports;const G=p1(p),d0=pM({__proto__:null,default:G},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _M=p,RM=Symbol.for("react.element"),AM=Symbol.for("react.fragment"),DM=Object.prototype.hasOwnProperty,OM=_M.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,IM={key:!0,ref:!0,__self:!0,__source:!0};function E1(e,t,n){var r,s={},a=null,i=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)DM.call(t,r)&&!IM.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:RM,type:e,key:a,ref:i,props:s,_owner:OM.current}}Id.Fragment=AM;Id.jsx=E1;Id.jsxs=E1;g1.exports=Id;var l=g1.exports,T1={exports:{}},Nn={},M1={exports:{}},N1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,P){var O=_.length;_.push(P);e:for(;0<O;){var I=O-1>>>1,U=_[I];if(0<s(U,P))_[I]=P,_[O]=U,O=I;else break e}}function n(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var P=_[0],O=_.pop();if(O!==P){_[0]=O;e:for(var I=0,U=_.length,B=U>>>1;I<B;){var Z=2*(I+1)-1,K=_[Z],ee=Z+1,V=_[ee];if(0>s(K,O))ee<U&&0>s(V,K)?(_[I]=V,_[ee]=O,I=ee):(_[I]=K,_[Z]=O,I=Z);else if(ee<U&&0>s(V,O))_[I]=V,_[ee]=O,I=ee;else break e}}return P}function s(_,P){var O=_.sortIndex-P.sortIndex;return O!==0?O:_.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],d=1,h=null,f=3,m=!1,y=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(_){for(var P=n(u);P!==null;){if(P.callback===null)r(u);else if(P.startTime<=_)r(u),P.sortIndex=P.expirationTime,t(c,P);else break;P=n(u)}}function S(_){if(g=!1,w(_),!y)if(n(c)!==null)y=!0,R(k);else{var P=n(u);P!==null&&F(S,P.startTime-_)}}function k(_,P){y=!1,g&&(g=!1,x(E),E=-1),m=!0;var O=f;try{for(w(P),h=n(c);h!==null&&(!(h.expirationTime>P)||_&&!T());){var I=h.callback;if(typeof I=="function"){h.callback=null,f=h.priorityLevel;var U=I(h.expirationTime<=P);P=e.unstable_now(),typeof U=="function"?h.callback=U:h===n(c)&&r(c),w(P)}else r(c);h=n(c)}if(h!==null)var B=!0;else{var Z=n(u);Z!==null&&F(S,Z.startTime-P),B=!1}return B}finally{h=null,f=O,m=!1}}var j=!1,C=null,E=-1,M=5,N=-1;function T(){return!(e.unstable_now()-N<M)}function A(){if(C!==null){var _=e.unstable_now();N=_;var P=!0;try{P=C(!0,_)}finally{P?L():(j=!1,C=null)}}else j=!1}var L;if(typeof b=="function")L=function(){b(A)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,H=D.port2;D.port1.onmessage=A,L=function(){H.postMessage(null)}}else L=function(){v(A,0)};function R(_){C=_,j||(j=!0,L())}function F(_,P){E=v(function(){_(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,R(k))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(_){switch(f){case 1:case 2:case 3:var P=3;break;default:P=f}var O=f;f=P;try{return _()}finally{f=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,P){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var O=f;f=_;try{return P()}finally{f=O}},e.unstable_scheduleCallback=function(_,P,O){var I=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?I+O:I):O=I,_){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=O+U,_={id:d++,callback:P,priorityLevel:_,startTime:O,expirationTime:U,sortIndex:-1},O>I?(_.sortIndex=O,t(u,_),n(c)===null&&_===n(u)&&(g?(x(E),E=-1):g=!0,F(S,O-I))):(_.sortIndex=U,t(c,_),y||m||(y=!0,R(k))),_},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(_){var P=f;return function(){var O=f;f=P;try{return _.apply(this,arguments)}finally{f=O}}}})(N1);M1.exports=N1;var $M=M1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LM=p,Tn=$M;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var P1=new Set,gl={};function Ba(e,t){Ji(e,t),Ji(e+"Capture",t)}function Ji(e,t){for(gl[e]=t,e=0;e<t.length;e++)P1.add(t[e])}var Qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),im=Object.prototype.hasOwnProperty,FM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fy={},zy={};function zM(e){return im.call(zy,e)?!0:im.call(Fy,e)?!1:FM.test(e)?zy[e]=!0:(Fy[e]=!0,!1)}function BM(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function VM(e,t,n,r){if(t===null||typeof t>"u"||BM(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Zt(e,t,n,r,s,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var _t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_t[e]=new Zt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_t[t]=new Zt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_t[e]=new Zt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_t[e]=new Zt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_t[e]=new Zt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_t[e]=new Zt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_t[e]=new Zt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_t[e]=new Zt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_t[e]=new Zt(e,5,!1,e.toLowerCase(),null,!1,!1)});var h0=/[\-:]([a-z])/g;function f0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(h0,f0);_t[t]=new Zt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(h0,f0);_t[t]=new Zt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(h0,f0);_t[t]=new Zt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_t[e]=new Zt(e,1,!1,e.toLowerCase(),null,!1,!1)});_t.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_t[e]=new Zt(e,1,!1,e.toLowerCase(),null,!0,!0)});function m0(e,t,n,r){var s=_t.hasOwnProperty(t)?_t[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(VM(t,n,s,r)&&(n=null),r||s===null?zM(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var is=LM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tc=Symbol.for("react.element"),ui=Symbol.for("react.portal"),di=Symbol.for("react.fragment"),p0=Symbol.for("react.strict_mode"),om=Symbol.for("react.profiler"),_1=Symbol.for("react.provider"),R1=Symbol.for("react.context"),g0=Symbol.for("react.forward_ref"),lm=Symbol.for("react.suspense"),cm=Symbol.for("react.suspense_list"),y0=Symbol.for("react.memo"),gs=Symbol.for("react.lazy"),A1=Symbol.for("react.offscreen"),By=Symbol.iterator;function Mo(e){return e===null||typeof e!="object"?null:(e=By&&e[By]||e["@@iterator"],typeof e=="function"?e:null)}var Ze=Object.assign,Lh;function Vo(e){if(Lh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Lh=t&&t[1]||""}return`
`+Lh+e}var Fh=!1;function zh(e,t){if(!e||Fh)return"";Fh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),i=s.length-1,o=a.length-1;1<=i&&0<=o&&s[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==a[o]){if(i!==1||o!==1)do if(i--,o--,0>o||s[i]!==a[o]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{Fh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Vo(e):""}function UM(e){switch(e.tag){case 5:return Vo(e.type);case 16:return Vo("Lazy");case 13:return Vo("Suspense");case 19:return Vo("SuspenseList");case 0:case 2:case 15:return e=zh(e.type,!1),e;case 11:return e=zh(e.type.render,!1),e;case 1:return e=zh(e.type,!0),e;default:return""}}function um(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case di:return"Fragment";case ui:return"Portal";case om:return"Profiler";case p0:return"StrictMode";case lm:return"Suspense";case cm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case R1:return(e.displayName||"Context")+".Consumer";case _1:return(e._context.displayName||"Context")+".Provider";case g0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case y0:return t=e.displayName||null,t!==null?t:um(e.type)||"Memo";case gs:t=e._payload,e=e._init;try{return um(e(t))}catch{}}return null}function WM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return um(t);case 8:return t===p0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function D1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function HM(e){var t=D1(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mc(e){e._valueTracker||(e._valueTracker=HM(e))}function O1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=D1(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function $u(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dm(e,t){var n=t.checked;return Ze({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Vy(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Vs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function I1(e,t){t=t.checked,t!=null&&m0(e,"checked",t,!1)}function hm(e,t){I1(e,t);var n=Vs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?fm(e,t.type,n):t.hasOwnProperty("defaultValue")&&fm(e,t.type,Vs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Uy(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function fm(e,t,n){(t!=="number"||$u(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Uo=Array.isArray;function Pi(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Vs(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function mm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return Ze({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Wy(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(W(92));if(Uo(n)){if(1<n.length)throw Error(W(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Vs(n)}}function $1(e,t){var n=Vs(t.value),r=Vs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Hy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function L1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?L1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Nc,F1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Nc=Nc||document.createElement("div"),Nc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Nc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GM=["Webkit","ms","Moz","O"];Object.keys(Zo).forEach(function(e){GM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zo[t]=Zo[e]})});function z1(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Zo.hasOwnProperty(e)&&Zo[e]?(""+t).trim():t+"px"}function B1(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=z1(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var KM=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gm(e,t){if(t){if(KM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function ym(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vm=null;function v0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xm=null,_i=null,Ri=null;function Gy(e){if(e=ic(e)){if(typeof xm!="function")throw Error(W(280));var t=e.stateNode;t&&(t=Bd(t),xm(e.stateNode,e.type,t))}}function V1(e){_i?Ri?Ri.push(e):Ri=[e]:_i=e}function U1(){if(_i){var e=_i,t=Ri;if(Ri=_i=null,Gy(e),t)for(e=0;e<t.length;e++)Gy(t[e])}}function W1(e,t){return e(t)}function H1(){}var Bh=!1;function G1(e,t,n){if(Bh)return e(t,n);Bh=!0;try{return W1(e,t,n)}finally{Bh=!1,(_i!==null||Ri!==null)&&(H1(),U1())}}function vl(e,t){var n=e.stateNode;if(n===null)return null;var r=Bd(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(W(231,t,typeof n));return n}var wm=!1;if(Qr)try{var No={};Object.defineProperty(No,"passive",{get:function(){wm=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{wm=!1}function qM(e,t,n,r,s,a,i,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var el=!1,Lu=null,Fu=!1,bm=null,YM={onError:function(e){el=!0,Lu=e}};function XM(e,t,n,r,s,a,i,o,c){el=!1,Lu=null,qM.apply(YM,arguments)}function QM(e,t,n,r,s,a,i,o,c){if(XM.apply(this,arguments),el){if(el){var u=Lu;el=!1,Lu=null}else throw Error(W(198));Fu||(Fu=!0,bm=u)}}function Va(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function K1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ky(e){if(Va(e)!==e)throw Error(W(188))}function JM(e){var t=e.alternate;if(!t){if(t=Va(e),t===null)throw Error(W(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Ky(s),e;if(a===r)return Ky(s),t;a=a.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=a;else{for(var i=!1,o=s.child;o;){if(o===n){i=!0,n=s,r=a;break}if(o===r){i=!0,r=s,n=a;break}o=o.sibling}if(!i){for(o=a.child;o;){if(o===n){i=!0,n=a,r=s;break}if(o===r){i=!0,r=a,n=s;break}o=o.sibling}if(!i)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?e:t}function q1(e){return e=JM(e),e!==null?Y1(e):null}function Y1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Y1(e);if(t!==null)return t;e=e.sibling}return null}var X1=Tn.unstable_scheduleCallback,qy=Tn.unstable_cancelCallback,ZM=Tn.unstable_shouldYield,eN=Tn.unstable_requestPaint,lt=Tn.unstable_now,tN=Tn.unstable_getCurrentPriorityLevel,x0=Tn.unstable_ImmediatePriority,Q1=Tn.unstable_UserBlockingPriority,zu=Tn.unstable_NormalPriority,nN=Tn.unstable_LowPriority,J1=Tn.unstable_IdlePriority,$d=null,Mr=null;function rN(e){if(Mr&&typeof Mr.onCommitFiberRoot=="function")try{Mr.onCommitFiberRoot($d,e,void 0,(e.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:iN,sN=Math.log,aN=Math.LN2;function iN(e){return e>>>=0,e===0?32:31-(sN(e)/aN|0)|0}var Pc=64,_c=4194304;function Wo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var o=i&~s;o!==0?r=Wo(o):(a&=i,a!==0&&(r=Wo(a)))}else i=n&~s,i!==0?r=Wo(i):a!==0&&(r=Wo(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-dr(t),s=1<<n,r|=e[n],t&=~s;return r}function oN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lN(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-dr(a),o=1<<i,c=s[i];c===-1?(!(o&n)||o&r)&&(s[i]=oN(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}function Sm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Z1(){var e=Pc;return Pc<<=1,!(Pc&4194240)&&(Pc=64),e}function Vh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function sc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-dr(t),e[t]=n}function cN(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-dr(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function w0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-dr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ae=0;function e2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var t2,b0,n2,r2,s2,km=!1,Rc=[],_s=null,Rs=null,As=null,xl=new Map,wl=new Map,xs=[],uN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yy(e,t){switch(e){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":As=null;break;case"pointerover":case"pointerout":xl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(t.pointerId)}}function Po(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=ic(t),t!==null&&b0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function dN(e,t,n,r,s){switch(t){case"focusin":return _s=Po(_s,e,t,n,r,s),!0;case"dragenter":return Rs=Po(Rs,e,t,n,r,s),!0;case"mouseover":return As=Po(As,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return xl.set(a,Po(xl.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,wl.set(a,Po(wl.get(a)||null,e,t,n,r,s)),!0}return!1}function a2(e){var t=ya(e.target);if(t!==null){var n=Va(t);if(n!==null){if(t=n.tag,t===13){if(t=K1(n),t!==null){e.blockedOn=t,s2(e.priority,function(){n2(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=jm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);vm=r,n.target.dispatchEvent(r),vm=null}else return t=ic(n),t!==null&&b0(t),e.blockedOn=n,!1;t.shift()}return!0}function Xy(e,t,n){yu(e)&&n.delete(t)}function hN(){km=!1,_s!==null&&yu(_s)&&(_s=null),Rs!==null&&yu(Rs)&&(Rs=null),As!==null&&yu(As)&&(As=null),xl.forEach(Xy),wl.forEach(Xy)}function _o(e,t){e.blockedOn===t&&(e.blockedOn=null,km||(km=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,hN)))}function bl(e){function t(s){return _o(s,e)}if(0<Rc.length){_o(Rc[0],e);for(var n=1;n<Rc.length;n++){var r=Rc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_s!==null&&_o(_s,e),Rs!==null&&_o(Rs,e),As!==null&&_o(As,e),xl.forEach(t),wl.forEach(t),n=0;n<xs.length;n++)r=xs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<xs.length&&(n=xs[0],n.blockedOn===null);)a2(n),n.blockedOn===null&&xs.shift()}var Ai=is.ReactCurrentBatchConfig,Vu=!0;function fN(e,t,n,r){var s=Ae,a=Ai.transition;Ai.transition=null;try{Ae=1,S0(e,t,n,r)}finally{Ae=s,Ai.transition=a}}function mN(e,t,n,r){var s=Ae,a=Ai.transition;Ai.transition=null;try{Ae=4,S0(e,t,n,r)}finally{Ae=s,Ai.transition=a}}function S0(e,t,n,r){if(Vu){var s=jm(e,t,n,r);if(s===null)Jh(e,t,r,Uu,n),Yy(e,r);else if(dN(s,e,t,n,r))r.stopPropagation();else if(Yy(e,r),t&4&&-1<uN.indexOf(e)){for(;s!==null;){var a=ic(s);if(a!==null&&t2(a),a=jm(e,t,n,r),a===null&&Jh(e,t,r,Uu,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Jh(e,t,r,null,n)}}var Uu=null;function jm(e,t,n,r){if(Uu=null,e=v0(r),e=ya(e),e!==null)if(t=Va(e),t===null)e=null;else if(n=t.tag,n===13){if(e=K1(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Uu=e,null}function i2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tN()){case x0:return 1;case Q1:return 4;case zu:case nN:return 16;case J1:return 536870912;default:return 16}default:return 16}}var Ts=null,k0=null,vu=null;function o2(){if(vu)return vu;var e,t=k0,n=t.length,r,s="value"in Ts?Ts.value:Ts.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[a-r];r++);return vu=s.slice(e,1<r?1-r:void 0)}function xu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ac(){return!0}function Qy(){return!1}function Pn(e){function t(n,r,s,a,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ac:Qy,this.isPropagationStopped=Qy,this}return Ze(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),t}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},j0=Pn(go),ac=Ze({},go,{view:0,detail:0}),pN=Pn(ac),Uh,Wh,Ro,Ld=Ze({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:C0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ro&&(Ro&&e.type==="mousemove"?(Uh=e.screenX-Ro.screenX,Wh=e.screenY-Ro.screenY):Wh=Uh=0,Ro=e),Uh)},movementY:function(e){return"movementY"in e?e.movementY:Wh}}),Jy=Pn(Ld),gN=Ze({},Ld,{dataTransfer:0}),yN=Pn(gN),vN=Ze({},ac,{relatedTarget:0}),Hh=Pn(vN),xN=Ze({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),wN=Pn(xN),bN=Ze({},go,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),SN=Pn(bN),kN=Ze({},go,{data:0}),Zy=Pn(kN),jN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=EN[e])?!!t[e]:!1}function C0(){return TN}var MN=Ze({},ac,{key:function(e){if(e.key){var t=jN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?CN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:C0,charCode:function(e){return e.type==="keypress"?xu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NN=Pn(MN),PN=Ze({},Ld,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ev=Pn(PN),_N=Ze({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:C0}),RN=Pn(_N),AN=Ze({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),DN=Pn(AN),ON=Ze({},Ld,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),IN=Pn(ON),$N=[9,13,27,32],E0=Qr&&"CompositionEvent"in window,tl=null;Qr&&"documentMode"in document&&(tl=document.documentMode);var LN=Qr&&"TextEvent"in window&&!tl,l2=Qr&&(!E0||tl&&8<tl&&11>=tl),tv=" ",nv=!1;function c2(e,t){switch(e){case"keyup":return $N.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function u2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var hi=!1;function FN(e,t){switch(e){case"compositionend":return u2(t);case"keypress":return t.which!==32?null:(nv=!0,tv);case"textInput":return e=t.data,e===tv&&nv?null:e;default:return null}}function zN(e,t){if(hi)return e==="compositionend"||!E0&&c2(e,t)?(e=o2(),vu=k0=Ts=null,hi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return l2&&t.locale!=="ko"?null:t.data;default:return null}}var BN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!BN[e.type]:t==="textarea"}function d2(e,t,n,r){V1(r),t=Wu(t,"onChange"),0<t.length&&(n=new j0("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var nl=null,Sl=null;function VN(e){S2(e,0)}function Fd(e){var t=pi(e);if(O1(t))return e}function UN(e,t){if(e==="change")return t}var h2=!1;if(Qr){var Gh;if(Qr){var Kh="oninput"in document;if(!Kh){var sv=document.createElement("div");sv.setAttribute("oninput","return;"),Kh=typeof sv.oninput=="function"}Gh=Kh}else Gh=!1;h2=Gh&&(!document.documentMode||9<document.documentMode)}function av(){nl&&(nl.detachEvent("onpropertychange",f2),Sl=nl=null)}function f2(e){if(e.propertyName==="value"&&Fd(Sl)){var t=[];d2(t,Sl,e,v0(e)),G1(VN,t)}}function WN(e,t,n){e==="focusin"?(av(),nl=t,Sl=n,nl.attachEvent("onpropertychange",f2)):e==="focusout"&&av()}function HN(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fd(Sl)}function GN(e,t){if(e==="click")return Fd(t)}function KN(e,t){if(e==="input"||e==="change")return Fd(t)}function qN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fr=typeof Object.is=="function"?Object.is:qN;function kl(e,t){if(fr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!im.call(t,s)||!fr(e[s],t[s]))return!1}return!0}function iv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ov(e,t){var n=iv(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=iv(n)}}function m2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?m2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function p2(){for(var e=window,t=$u();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=$u(e.document)}return t}function T0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function YN(e){var t=p2(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&m2(n.ownerDocument.documentElement,n)){if(r!==null&&T0(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=ov(n,a);var i=ov(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var XN=Qr&&"documentMode"in document&&11>=document.documentMode,fi=null,Cm=null,rl=null,Em=!1;function lv(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Em||fi==null||fi!==$u(r)||(r=fi,"selectionStart"in r&&T0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rl&&kl(rl,r)||(rl=r,r=Wu(Cm,"onSelect"),0<r.length&&(t=new j0("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fi)))}function Dc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mi={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},qh={},g2={};Qr&&(g2=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function zd(e){if(qh[e])return qh[e];if(!mi[e])return e;var t=mi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in g2)return qh[e]=t[n];return e}var y2=zd("animationend"),v2=zd("animationiteration"),x2=zd("animationstart"),w2=zd("transitionend"),b2=new Map,cv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(e,t){b2.set(e,t),Ba(t,[e])}for(var Yh=0;Yh<cv.length;Yh++){var Xh=cv[Yh],QN=Xh.toLowerCase(),JN=Xh[0].toUpperCase()+Xh.slice(1);Qs(QN,"on"+JN)}Qs(y2,"onAnimationEnd");Qs(v2,"onAnimationIteration");Qs(x2,"onAnimationStart");Qs("dblclick","onDoubleClick");Qs("focusin","onFocus");Qs("focusout","onBlur");Qs(w2,"onTransitionEnd");Ji("onMouseEnter",["mouseout","mouseover"]);Ji("onMouseLeave",["mouseout","mouseover"]);Ji("onPointerEnter",["pointerout","pointerover"]);Ji("onPointerLeave",["pointerout","pointerover"]);Ba("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ba("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ba("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ba("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ba("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ba("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function uv(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,QM(r,t,void 0,e),e.currentTarget=null}function S2(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&s.isPropagationStopped())break e;uv(s,o,u),a=c}else for(i=0;i<r.length;i++){if(o=r[i],c=o.instance,u=o.currentTarget,o=o.listener,c!==a&&s.isPropagationStopped())break e;uv(s,o,u),a=c}}}if(Fu)throw e=bm,Fu=!1,bm=null,e}function Be(e,t){var n=t[_m];n===void 0&&(n=t[_m]=new Set);var r=e+"__bubble";n.has(r)||(k2(t,e,2,!1),n.add(r))}function Qh(e,t,n){var r=0;t&&(r|=4),k2(n,e,r,t)}var Oc="_reactListening"+Math.random().toString(36).slice(2);function jl(e){if(!e[Oc]){e[Oc]=!0,P1.forEach(function(n){n!=="selectionchange"&&(ZN.has(n)||Qh(n,!1,e),Qh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Oc]||(t[Oc]=!0,Qh("selectionchange",!1,t))}}function k2(e,t,n,r){switch(i2(t)){case 1:var s=fN;break;case 4:s=mN;break;default:s=S0}n=s.bind(null,t,n,e),s=void 0,!wm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Jh(e,t,n,r,s){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;o!==null;){if(i=ya(o),i===null)return;if(c=i.tag,c===5||c===6){r=a=i;continue e}o=o.parentNode}}r=r.return}G1(function(){var u=a,d=v0(n),h=[];e:{var f=b2.get(e);if(f!==void 0){var m=j0,y=e;switch(e){case"keypress":if(xu(n)===0)break e;case"keydown":case"keyup":m=NN;break;case"focusin":y="focus",m=Hh;break;case"focusout":y="blur",m=Hh;break;case"beforeblur":case"afterblur":m=Hh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Jy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=yN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=RN;break;case y2:case v2:case x2:m=wN;break;case w2:m=DN;break;case"scroll":m=pN;break;case"wheel":m=IN;break;case"copy":case"cut":case"paste":m=SN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=ev}var g=(t&4)!==0,v=!g&&e==="scroll",x=g?f!==null?f+"Capture":null:f;g=[];for(var b=u,w;b!==null;){w=b;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,x!==null&&(S=vl(b,x),S!=null&&g.push(Cl(b,S,w)))),v)break;b=b.return}0<g.length&&(f=new m(f,y,null,n,d),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==vm&&(y=n.relatedTarget||n.fromElement)&&(ya(y)||y[Jr]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?ya(y):null,y!==null&&(v=Va(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(g=Jy,S="onMouseLeave",x="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(g=ev,S="onPointerLeave",x="onPointerEnter",b="pointer"),v=m==null?f:pi(m),w=y==null?f:pi(y),f=new g(S,b+"leave",m,n,d),f.target=v,f.relatedTarget=w,S=null,ya(d)===u&&(g=new g(x,b+"enter",y,n,d),g.target=w,g.relatedTarget=v,S=g),v=S,m&&y)t:{for(g=m,x=y,b=0,w=g;w;w=qa(w))b++;for(w=0,S=x;S;S=qa(S))w++;for(;0<b-w;)g=qa(g),b--;for(;0<w-b;)x=qa(x),w--;for(;b--;){if(g===x||x!==null&&g===x.alternate)break t;g=qa(g),x=qa(x)}g=null}else g=null;m!==null&&dv(h,f,m,g,!1),y!==null&&v!==null&&dv(h,v,y,g,!0)}}e:{if(f=u?pi(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var k=UN;else if(rv(f))if(h2)k=KN;else{k=HN;var j=WN}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=GN);if(k&&(k=k(e,u))){d2(h,k,n,d);break e}j&&j(e,f,u),e==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&fm(f,"number",f.value)}switch(j=u?pi(u):window,e){case"focusin":(rv(j)||j.contentEditable==="true")&&(fi=j,Cm=u,rl=null);break;case"focusout":rl=Cm=fi=null;break;case"mousedown":Em=!0;break;case"contextmenu":case"mouseup":case"dragend":Em=!1,lv(h,n,d);break;case"selectionchange":if(XN)break;case"keydown":case"keyup":lv(h,n,d)}var C;if(E0)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else hi?c2(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(l2&&n.locale!=="ko"&&(hi||E!=="onCompositionStart"?E==="onCompositionEnd"&&hi&&(C=o2()):(Ts=d,k0="value"in Ts?Ts.value:Ts.textContent,hi=!0)),j=Wu(u,E),0<j.length&&(E=new Zy(E,e,null,n,d),h.push({event:E,listeners:j}),C?E.data=C:(C=u2(n),C!==null&&(E.data=C)))),(C=LN?FN(e,n):zN(e,n))&&(u=Wu(u,"onBeforeInput"),0<u.length&&(d=new Zy("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=C))}S2(h,t)})}function Cl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wu(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=vl(e,n),a!=null&&r.unshift(Cl(e,a,s)),a=vl(e,t),a!=null&&r.push(Cl(e,a,s))),e=e.return}return r}function qa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dv(e,t,n,r,s){for(var a=t._reactName,i=[];n!==null&&n!==r;){var o=n,c=o.alternate,u=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&u!==null&&(o=u,s?(c=vl(n,a),c!=null&&i.unshift(Cl(n,c,o))):s||(c=vl(n,a),c!=null&&i.push(Cl(n,c,o)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var eP=/\r\n?/g,tP=/\u0000|\uFFFD/g;function hv(e){return(typeof e=="string"?e:""+e).replace(eP,`
`).replace(tP,"")}function Ic(e,t,n){if(t=hv(t),hv(e)!==t&&n)throw Error(W(425))}function Hu(){}var Tm=null,Mm=null;function Nm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pm=typeof setTimeout=="function"?setTimeout:void 0,nP=typeof clearTimeout=="function"?clearTimeout:void 0,fv=typeof Promise=="function"?Promise:void 0,rP=typeof queueMicrotask=="function"?queueMicrotask:typeof fv<"u"?function(e){return fv.resolve(null).then(e).catch(sP)}:Pm;function sP(e){setTimeout(function(){throw e})}function Zh(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),bl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);bl(t)}function Ds(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function mv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var yo=Math.random().toString(36).slice(2),kr="__reactFiber$"+yo,El="__reactProps$"+yo,Jr="__reactContainer$"+yo,_m="__reactEvents$"+yo,aP="__reactListeners$"+yo,iP="__reactHandles$"+yo;function ya(e){var t=e[kr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jr]||n[kr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=mv(e);e!==null;){if(n=e[kr])return n;e=mv(e)}return t}e=n,n=e.parentNode}return null}function ic(e){return e=e[kr]||e[Jr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function pi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(W(33))}function Bd(e){return e[El]||null}var Rm=[],gi=-1;function Js(e){return{current:e}}function Ve(e){0>gi||(e.current=Rm[gi],Rm[gi]=null,gi--)}function Fe(e,t){gi++,Rm[gi]=e.current,e.current=t}var Us={},Wt=Js(Us),ln=Js(!1),Ra=Us;function Zi(e,t){var n=e.type.contextTypes;if(!n)return Us;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function cn(e){return e=e.childContextTypes,e!=null}function Gu(){Ve(ln),Ve(Wt)}function pv(e,t,n){if(Wt.current!==Us)throw Error(W(168));Fe(Wt,t),Fe(ln,n)}function j2(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(W(108,WM(e)||"Unknown",s));return Ze({},n,r)}function Ku(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Us,Ra=Wt.current,Fe(Wt,e),Fe(ln,ln.current),!0}function gv(e,t,n){var r=e.stateNode;if(!r)throw Error(W(169));n?(e=j2(e,t,Ra),r.__reactInternalMemoizedMergedChildContext=e,Ve(ln),Ve(Wt),Fe(Wt,e)):Ve(ln),Fe(ln,n)}var Ur=null,Vd=!1,ef=!1;function C2(e){Ur===null?Ur=[e]:Ur.push(e)}function oP(e){Vd=!0,C2(e)}function Zs(){if(!ef&&Ur!==null){ef=!0;var e=0,t=Ae;try{var n=Ur;for(Ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ur=null,Vd=!1}catch(s){throw Ur!==null&&(Ur=Ur.slice(e+1)),X1(x0,Zs),s}finally{Ae=t,ef=!1}}return null}var yi=[],vi=0,qu=null,Yu=0,On=[],In=0,Aa=null,Hr=1,Gr="";function ca(e,t){yi[vi++]=Yu,yi[vi++]=qu,qu=e,Yu=t}function E2(e,t,n){On[In++]=Hr,On[In++]=Gr,On[In++]=Aa,Aa=e;var r=Hr;e=Gr;var s=32-dr(r)-1;r&=~(1<<s),n+=1;var a=32-dr(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Hr=1<<32-dr(t)+s|n<<s|r,Gr=a+e}else Hr=1<<a|n<<s|r,Gr=e}function M0(e){e.return!==null&&(ca(e,1),E2(e,1,0))}function N0(e){for(;e===qu;)qu=yi[--vi],yi[vi]=null,Yu=yi[--vi],yi[vi]=null;for(;e===Aa;)Aa=On[--In],On[In]=null,Gr=On[--In],On[In]=null,Hr=On[--In],On[In]=null}var jn=null,bn=null,Ge=!1,cr=null;function T2(e,t){var n=Ln(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function yv(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jn=e,bn=Ds(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jn=e,bn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Aa!==null?{id:Hr,overflow:Gr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ln(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jn=e,bn=null,!0):!1;default:return!1}}function Am(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Dm(e){if(Ge){var t=bn;if(t){var n=t;if(!yv(e,t)){if(Am(e))throw Error(W(418));t=Ds(n.nextSibling);var r=jn;t&&yv(e,t)?T2(r,n):(e.flags=e.flags&-4097|2,Ge=!1,jn=e)}}else{if(Am(e))throw Error(W(418));e.flags=e.flags&-4097|2,Ge=!1,jn=e}}}function vv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jn=e}function $c(e){if(e!==jn)return!1;if(!Ge)return vv(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Nm(e.type,e.memoizedProps)),t&&(t=bn)){if(Am(e))throw M2(),Error(W(418));for(;t;)T2(e,t),t=Ds(t.nextSibling)}if(vv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){bn=Ds(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}bn=null}}else bn=jn?Ds(e.stateNode.nextSibling):null;return!0}function M2(){for(var e=bn;e;)e=Ds(e.nextSibling)}function eo(){bn=jn=null,Ge=!1}function P0(e){cr===null?cr=[e]:cr.push(e)}var lP=is.ReactCurrentBatchConfig;function Ao(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var o=s.refs;i===null?delete o[a]:o[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,e))}return e}function Lc(e,t){throw e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xv(e){var t=e._init;return t(e._payload)}function N2(e){function t(x,b){if(e){var w=x.deletions;w===null?(x.deletions=[b],x.flags|=16):w.push(b)}}function n(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function r(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function s(x,b){return x=Ls(x,b),x.index=0,x.sibling=null,x}function a(x,b,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<b?(x.flags|=2,b):w):(x.flags|=2,b)):(x.flags|=1048576,b)}function i(x){return e&&x.alternate===null&&(x.flags|=2),x}function o(x,b,w,S){return b===null||b.tag!==6?(b=lf(w,x.mode,S),b.return=x,b):(b=s(b,w),b.return=x,b)}function c(x,b,w,S){var k=w.type;return k===di?d(x,b,w.props.children,S,w.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===gs&&xv(k)===b.type)?(S=s(b,w.props),S.ref=Ao(x,b,w),S.return=x,S):(S=Eu(w.type,w.key,w.props,null,x.mode,S),S.ref=Ao(x,b,w),S.return=x,S)}function u(x,b,w,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=cf(w,x.mode,S),b.return=x,b):(b=s(b,w.children||[]),b.return=x,b)}function d(x,b,w,S,k){return b===null||b.tag!==7?(b=Na(w,x.mode,S,k),b.return=x,b):(b=s(b,w),b.return=x,b)}function h(x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=lf(""+b,x.mode,w),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Tc:return w=Eu(b.type,b.key,b.props,null,x.mode,w),w.ref=Ao(x,null,b),w.return=x,w;case ui:return b=cf(b,x.mode,w),b.return=x,b;case gs:var S=b._init;return h(x,S(b._payload),w)}if(Uo(b)||Mo(b))return b=Na(b,x.mode,w,null),b.return=x,b;Lc(x,b)}return null}function f(x,b,w,S){var k=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:o(x,b,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Tc:return w.key===k?c(x,b,w,S):null;case ui:return w.key===k?u(x,b,w,S):null;case gs:return k=w._init,f(x,b,k(w._payload),S)}if(Uo(w)||Mo(w))return k!==null?null:d(x,b,w,S,null);Lc(x,w)}return null}function m(x,b,w,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return x=x.get(w)||null,o(b,x,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Tc:return x=x.get(S.key===null?w:S.key)||null,c(b,x,S,k);case ui:return x=x.get(S.key===null?w:S.key)||null,u(b,x,S,k);case gs:var j=S._init;return m(x,b,w,j(S._payload),k)}if(Uo(S)||Mo(S))return x=x.get(w)||null,d(b,x,S,k,null);Lc(b,S)}return null}function y(x,b,w,S){for(var k=null,j=null,C=b,E=b=0,M=null;C!==null&&E<w.length;E++){C.index>E?(M=C,C=null):M=C.sibling;var N=f(x,C,w[E],S);if(N===null){C===null&&(C=M);break}e&&C&&N.alternate===null&&t(x,C),b=a(N,b,E),j===null?k=N:j.sibling=N,j=N,C=M}if(E===w.length)return n(x,C),Ge&&ca(x,E),k;if(C===null){for(;E<w.length;E++)C=h(x,w[E],S),C!==null&&(b=a(C,b,E),j===null?k=C:j.sibling=C,j=C);return Ge&&ca(x,E),k}for(C=r(x,C);E<w.length;E++)M=m(C,x,E,w[E],S),M!==null&&(e&&M.alternate!==null&&C.delete(M.key===null?E:M.key),b=a(M,b,E),j===null?k=M:j.sibling=M,j=M);return e&&C.forEach(function(T){return t(x,T)}),Ge&&ca(x,E),k}function g(x,b,w,S){var k=Mo(w);if(typeof k!="function")throw Error(W(150));if(w=k.call(w),w==null)throw Error(W(151));for(var j=k=null,C=b,E=b=0,M=null,N=w.next();C!==null&&!N.done;E++,N=w.next()){C.index>E?(M=C,C=null):M=C.sibling;var T=f(x,C,N.value,S);if(T===null){C===null&&(C=M);break}e&&C&&T.alternate===null&&t(x,C),b=a(T,b,E),j===null?k=T:j.sibling=T,j=T,C=M}if(N.done)return n(x,C),Ge&&ca(x,E),k;if(C===null){for(;!N.done;E++,N=w.next())N=h(x,N.value,S),N!==null&&(b=a(N,b,E),j===null?k=N:j.sibling=N,j=N);return Ge&&ca(x,E),k}for(C=r(x,C);!N.done;E++,N=w.next())N=m(C,x,E,N.value,S),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?E:N.key),b=a(N,b,E),j===null?k=N:j.sibling=N,j=N);return e&&C.forEach(function(A){return t(x,A)}),Ge&&ca(x,E),k}function v(x,b,w,S){if(typeof w=="object"&&w!==null&&w.type===di&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Tc:e:{for(var k=w.key,j=b;j!==null;){if(j.key===k){if(k=w.type,k===di){if(j.tag===7){n(x,j.sibling),b=s(j,w.props.children),b.return=x,x=b;break e}}else if(j.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===gs&&xv(k)===j.type){n(x,j.sibling),b=s(j,w.props),b.ref=Ao(x,j,w),b.return=x,x=b;break e}n(x,j);break}else t(x,j);j=j.sibling}w.type===di?(b=Na(w.props.children,x.mode,S,w.key),b.return=x,x=b):(S=Eu(w.type,w.key,w.props,null,x.mode,S),S.ref=Ao(x,b,w),S.return=x,x=S)}return i(x);case ui:e:{for(j=w.key;b!==null;){if(b.key===j)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(x,b.sibling),b=s(b,w.children||[]),b.return=x,x=b;break e}else{n(x,b);break}else t(x,b);b=b.sibling}b=cf(w,x.mode,S),b.return=x,x=b}return i(x);case gs:return j=w._init,v(x,b,j(w._payload),S)}if(Uo(w))return y(x,b,w,S);if(Mo(w))return g(x,b,w,S);Lc(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(x,b.sibling),b=s(b,w),b.return=x,x=b):(n(x,b),b=lf(w,x.mode,S),b.return=x,x=b),i(x)):n(x,b)}return v}var to=N2(!0),P2=N2(!1),Xu=Js(null),Qu=null,xi=null,_0=null;function R0(){_0=xi=Qu=null}function A0(e){var t=Xu.current;Ve(Xu),e._currentValue=t}function Om(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Di(e,t){Qu=e,_0=xi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(on=!0),e.firstContext=null)}function Un(e){var t=e._currentValue;if(_0!==e)if(e={context:e,memoizedValue:t,next:null},xi===null){if(Qu===null)throw Error(W(308));xi=e,Qu.dependencies={lanes:0,firstContext:e}}else xi=xi.next=e;return t}var va=null;function D0(e){va===null?va=[e]:va.push(e)}function _2(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,D0(t)):(n.next=s.next,s.next=n),t.interleaved=n,Zr(e,r)}function Zr(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ys=!1;function O0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function R2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Zr(e,n)}return s=r.interleaved,s===null?(t.next=t,D0(r)):(t.next=s.next,s.next=t),r.interleaved=t,Zr(e,n)}function wu(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,w0(e,n)}}function wv(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ju(e,t,n,r){var s=e.updateQueue;ys=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var c=o,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==i&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;i=0,d=u=c=null,o=a;do{var f=o.lane,m=o.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=e,g=o;switch(f=t,m=n,g.tag){case 1:if(y=g.payload,typeof y=="function"){h=y.call(m,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,f=typeof y=="function"?y.call(m,h,f):y,f==null)break e;h=Ze({},h,f);break e;case 2:ys=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else m={eventTime:m,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,i|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Oa|=i,e.lanes=i,e.memoizedState=h}}function bv(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var oc={},Nr=Js(oc),Tl=Js(oc),Ml=Js(oc);function xa(e){if(e===oc)throw Error(W(174));return e}function I0(e,t){switch(Fe(Ml,t),Fe(Tl,e),Fe(Nr,oc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pm(t,e)}Ve(Nr),Fe(Nr,t)}function no(){Ve(Nr),Ve(Tl),Ve(Ml)}function A2(e){xa(Ml.current);var t=xa(Nr.current),n=pm(t,e.type);t!==n&&(Fe(Tl,e),Fe(Nr,n))}function $0(e){Tl.current===e&&(Ve(Nr),Ve(Tl))}var Ye=Js(0);function Zu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tf=[];function L0(){for(var e=0;e<tf.length;e++)tf[e]._workInProgressVersionPrimary=null;tf.length=0}var bu=is.ReactCurrentDispatcher,nf=is.ReactCurrentBatchConfig,Da=0,Qe=null,vt=null,St=null,ed=!1,sl=!1,Nl=0,cP=0;function It(){throw Error(W(321))}function F0(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!fr(e[n],t[n]))return!1;return!0}function z0(e,t,n,r,s,a){if(Da=a,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bu.current=e===null||e.memoizedState===null?fP:mP,e=n(r,s),sl){a=0;do{if(sl=!1,Nl=0,25<=a)throw Error(W(301));a+=1,St=vt=null,t.updateQueue=null,bu.current=pP,e=n(r,s)}while(sl)}if(bu.current=td,t=vt!==null&&vt.next!==null,Da=0,St=vt=Qe=null,ed=!1,t)throw Error(W(300));return e}function B0(){var e=Nl!==0;return Nl=0,e}function xr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Qe.memoizedState=St=e:St=St.next=e,St}function Wn(){if(vt===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=vt.next;var t=St===null?Qe.memoizedState:St.next;if(t!==null)St=t,vt=e;else{if(e===null)throw Error(W(310));vt=e,e={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},St===null?Qe.memoizedState=St=e:St=St.next=e}return St}function Pl(e,t){return typeof t=="function"?t(e):t}function rf(e){var t=Wn(),n=t.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=e;var r=vt,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var o=i=null,c=null,u=a;do{var d=u.lane;if((Da&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=h,i=r):c=c.next=h,Qe.lanes|=d,Oa|=d}u=u.next}while(u!==null&&u!==a);c===null?i=r:c.next=o,fr(r,t.memoizedState)||(on=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,Qe.lanes|=a,Oa|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function sf(e){var t=Wn(),n=t.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do a=e(a,i.action),i=i.next;while(i!==s);fr(a,t.memoizedState)||(on=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function D2(){}function O2(e,t){var n=Qe,r=Wn(),s=t(),a=!fr(r.memoizedState,s);if(a&&(r.memoizedState=s,on=!0),r=r.queue,V0(L2.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||St!==null&&St.memoizedState.tag&1){if(n.flags|=2048,_l(9,$2.bind(null,n,r,s,t),void 0,null),kt===null)throw Error(W(349));Da&30||I2(n,t,s)}return s}function I2(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $2(e,t,n,r){t.value=n,t.getSnapshot=r,F2(t)&&z2(e)}function L2(e,t,n){return n(function(){F2(t)&&z2(e)})}function F2(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!fr(e,n)}catch{return!0}}function z2(e){var t=Zr(e,1);t!==null&&hr(t,e,1,-1)}function Sv(e){var t=xr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pl,lastRenderedState:e},t.queue=e,e=e.dispatch=hP.bind(null,Qe,e),[t.memoizedState,e]}function _l(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function B2(){return Wn().memoizedState}function Su(e,t,n,r){var s=xr();Qe.flags|=e,s.memoizedState=_l(1|t,n,void 0,r===void 0?null:r)}function Ud(e,t,n,r){var s=Wn();r=r===void 0?null:r;var a=void 0;if(vt!==null){var i=vt.memoizedState;if(a=i.destroy,r!==null&&F0(r,i.deps)){s.memoizedState=_l(t,n,a,r);return}}Qe.flags|=e,s.memoizedState=_l(1|t,n,a,r)}function kv(e,t){return Su(8390656,8,e,t)}function V0(e,t){return Ud(2048,8,e,t)}function V2(e,t){return Ud(4,2,e,t)}function U2(e,t){return Ud(4,4,e,t)}function W2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function H2(e,t,n){return n=n!=null?n.concat([e]):null,Ud(4,4,W2.bind(null,t,e),n)}function U0(){}function G2(e,t){var n=Wn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&F0(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function K2(e,t){var n=Wn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&F0(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function q2(e,t,n){return Da&21?(fr(n,t)||(n=Z1(),Qe.lanes|=n,Oa|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,on=!0),e.memoizedState=n)}function uP(e,t){var n=Ae;Ae=n!==0&&4>n?n:4,e(!0);var r=nf.transition;nf.transition={};try{e(!1),t()}finally{Ae=n,nf.transition=r}}function Y2(){return Wn().memoizedState}function dP(e,t,n){var r=$s(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},X2(e))Q2(t,n);else if(n=_2(e,t,n,r),n!==null){var s=Qt();hr(n,e,r,s),J2(n,t,r)}}function hP(e,t,n){var r=$s(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(X2(e))Q2(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,o=a(i,n);if(s.hasEagerState=!0,s.eagerState=o,fr(o,i)){var c=t.interleaved;c===null?(s.next=s,D0(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=_2(e,t,s,r),n!==null&&(s=Qt(),hr(n,e,r,s),J2(n,t,r))}}function X2(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function Q2(e,t){sl=ed=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function J2(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,w0(e,n)}}var td={readContext:Un,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},fP={readContext:Un,useCallback:function(e,t){return xr().memoizedState=[e,t===void 0?null:t],e},useContext:Un,useEffect:kv,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Su(4194308,4,W2.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Su(4194308,4,e,t)},useInsertionEffect:function(e,t){return Su(4,2,e,t)},useMemo:function(e,t){var n=xr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=dP.bind(null,Qe,e),[r.memoizedState,e]},useRef:function(e){var t=xr();return e={current:e},t.memoizedState=e},useState:Sv,useDebugValue:U0,useDeferredValue:function(e){return xr().memoizedState=e},useTransition:function(){var e=Sv(!1),t=e[0];return e=uP.bind(null,e[1]),xr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Qe,s=xr();if(Ge){if(n===void 0)throw Error(W(407));n=n()}else{if(n=t(),kt===null)throw Error(W(349));Da&30||I2(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,kv(L2.bind(null,r,a,e),[e]),r.flags|=2048,_l(9,$2.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=xr(),t=kt.identifierPrefix;if(Ge){var n=Gr,r=Hr;n=(r&~(1<<32-dr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Nl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=cP++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mP={readContext:Un,useCallback:G2,useContext:Un,useEffect:V0,useImperativeHandle:H2,useInsertionEffect:V2,useLayoutEffect:U2,useMemo:K2,useReducer:rf,useRef:B2,useState:function(){return rf(Pl)},useDebugValue:U0,useDeferredValue:function(e){var t=Wn();return q2(t,vt.memoizedState,e)},useTransition:function(){var e=rf(Pl)[0],t=Wn().memoizedState;return[e,t]},useMutableSource:D2,useSyncExternalStore:O2,useId:Y2,unstable_isNewReconciler:!1},pP={readContext:Un,useCallback:G2,useContext:Un,useEffect:V0,useImperativeHandle:H2,useInsertionEffect:V2,useLayoutEffect:U2,useMemo:K2,useReducer:sf,useRef:B2,useState:function(){return sf(Pl)},useDebugValue:U0,useDeferredValue:function(e){var t=Wn();return vt===null?t.memoizedState=e:q2(t,vt.memoizedState,e)},useTransition:function(){var e=sf(Pl)[0],t=Wn().memoizedState;return[e,t]},useMutableSource:D2,useSyncExternalStore:O2,useId:Y2,unstable_isNewReconciler:!1};function nr(e,t){if(e&&e.defaultProps){t=Ze({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Im(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ze({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Wd={isMounted:function(e){return(e=e._reactInternals)?Va(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Qt(),s=$s(e),a=Kr(r,s);a.payload=t,n!=null&&(a.callback=n),t=Os(e,a,s),t!==null&&(hr(t,e,s,r),wu(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Qt(),s=$s(e),a=Kr(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Os(e,a,s),t!==null&&(hr(t,e,s,r),wu(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Qt(),r=$s(e),s=Kr(n,r);s.tag=2,t!=null&&(s.callback=t),t=Os(e,s,r),t!==null&&(hr(t,e,r,n),wu(t,e,r))}};function jv(e,t,n,r,s,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,i):t.prototype&&t.prototype.isPureReactComponent?!kl(n,r)||!kl(s,a):!0}function Z2(e,t,n){var r=!1,s=Us,a=t.contextType;return typeof a=="object"&&a!==null?a=Un(a):(s=cn(t)?Ra:Wt.current,r=t.contextTypes,a=(r=r!=null)?Zi(e,s):Us),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Cv(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Wd.enqueueReplaceState(t,t.state,null)}function $m(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},O0(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Un(a):(a=cn(t)?Ra:Wt.current,s.context=Zi(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Im(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Wd.enqueueReplaceState(s,s.state,null),Ju(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ro(e,t){try{var n="",r=t;do n+=UM(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function af(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Lm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var gP=typeof WeakMap=="function"?WeakMap:Map;function eS(e,t,n){n=Kr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){rd||(rd=!0,qm=r),Lm(e,t)},n}function tS(e,t,n){n=Kr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Lm(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Lm(e,t),typeof r!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Ev(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new gP;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=PP.bind(null,e,t,n),t.then(e,e))}function Tv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Mv(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Kr(-1,1),t.tag=2,Os(n,t,1))),n.lanes|=1),e)}var yP=is.ReactCurrentOwner,on=!1;function qt(e,t,n,r){t.child=e===null?P2(t,null,n,r):to(t,e.child,n,r)}function Nv(e,t,n,r,s){n=n.render;var a=t.ref;return Di(t,s),r=z0(e,t,n,r,a,s),n=B0(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,es(e,t,s)):(Ge&&n&&M0(t),t.flags|=1,qt(e,t,r,s),t.child)}function Pv(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!Q0(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,nS(e,t,a,r,s)):(e=Eu(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:kl,n(i,r)&&e.ref===t.ref)return es(e,t,s)}return t.flags|=1,e=Ls(a,r),e.ref=t.ref,e.return=t,t.child=e}function nS(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(kl(a,r)&&e.ref===t.ref)if(on=!1,t.pendingProps=r=a,(e.lanes&s)!==0)e.flags&131072&&(on=!0);else return t.lanes=e.lanes,es(e,t,s)}return Fm(e,t,n,r,s)}function rS(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(bi,yn),yn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(bi,yn),yn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Fe(bi,yn),yn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Fe(bi,yn),yn|=r;return qt(e,t,s,n),t.child}function sS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Fm(e,t,n,r,s){var a=cn(n)?Ra:Wt.current;return a=Zi(t,a),Di(t,s),n=z0(e,t,n,r,a,s),r=B0(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,es(e,t,s)):(Ge&&r&&M0(t),t.flags|=1,qt(e,t,n,s),t.child)}function _v(e,t,n,r,s){if(cn(n)){var a=!0;Ku(t)}else a=!1;if(Di(t,s),t.stateNode===null)ku(e,t),Z2(t,n,r),$m(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Un(u):(u=cn(n)?Ra:Wt.current,u=Zi(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||c!==u)&&Cv(t,i,r,u),ys=!1;var f=t.memoizedState;i.state=f,Ju(t,r,i,s),c=t.memoizedState,o!==r||f!==c||ln.current||ys?(typeof d=="function"&&(Im(t,n,d,r),c=t.memoizedState),(o=ys||jv(t,n,o,r,f,c,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,R2(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:nr(t.type,o),i.props=u,h=t.pendingProps,f=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Un(c):(c=cn(n)?Ra:Wt.current,c=Zi(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==h||f!==c)&&Cv(t,i,r,c),ys=!1,f=t.memoizedState,i.state=f,Ju(t,r,i,s);var y=t.memoizedState;o!==h||f!==y||ln.current||ys?(typeof m=="function"&&(Im(t,n,m,r),y=t.memoizedState),(u=ys||jv(t,n,u,r,f,y,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),i.props=r,i.state=y,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return zm(e,t,n,r,a,s)}function zm(e,t,n,r,s,a){sS(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&gv(t,n,!1),es(e,t,a);r=t.stateNode,yP.current=t;var o=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=to(t,e.child,null,a),t.child=to(t,null,o,a)):qt(e,t,o,a),t.memoizedState=r.state,s&&gv(t,n,!0),t.child}function aS(e){var t=e.stateNode;t.pendingContext?pv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pv(e,t.context,!1),I0(e,t.containerInfo)}function Rv(e,t,n,r,s){return eo(),P0(s),t.flags|=256,qt(e,t,n,r),t.child}var Bm={dehydrated:null,treeContext:null,retryLane:0};function Vm(e){return{baseLanes:e,cachePool:null,transitions:null}}function iS(e,t,n){var r=t.pendingProps,s=Ye.current,a=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(s&2)!==0),o?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Fe(Ye,s&1),e===null)return Dm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,a?(r=t.mode,a=t.child,i={mode:"hidden",children:i},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Kd(i,r,0,null),e=Na(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Vm(n),t.memoizedState=Bm,e):W0(t,i));if(s=e.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return vP(e,t,i,r,o,s,n);if(a){a=r.fallback,i=t.mode,s=e.child,o=s.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ls(s,c),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?a=Ls(o,a):(a=Na(a,i,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,i=e.child.memoizedState,i=i===null?Vm(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=Bm,r}return a=e.child,e=a.sibling,r=Ls(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function W0(e,t){return t=Kd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fc(e,t,n,r){return r!==null&&P0(r),to(t,e.child,null,n),e=W0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vP(e,t,n,r,s,a,i){if(n)return t.flags&256?(t.flags&=-257,r=af(Error(W(422))),Fc(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Kd({mode:"visible",children:r.children},s,0,null),a=Na(a,s,i,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&to(t,e.child,null,i),t.child.memoizedState=Vm(i),t.memoizedState=Bm,a);if(!(t.mode&1))return Fc(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(W(419)),r=af(a,r,void 0),Fc(e,t,i,r)}if(o=(i&e.childLanes)!==0,on||o){if(r=kt,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Zr(e,s),hr(r,e,s,-1))}return X0(),r=af(Error(W(421))),Fc(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=_P.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,bn=Ds(s.nextSibling),jn=t,Ge=!0,cr=null,e!==null&&(On[In++]=Hr,On[In++]=Gr,On[In++]=Aa,Hr=e.id,Gr=e.overflow,Aa=t),t=W0(t,r.children),t.flags|=4096,t)}function Av(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Om(e.return,t,n)}function of(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function oS(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(qt(e,t,r.children,n),r=Ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Av(e,n,t);else if(e.tag===19)Av(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Fe(Ye,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Zu(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),of(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Zu(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}of(t,!0,n,null,a);break;case"together":of(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ku(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function es(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Oa|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,n=Ls(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ls(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xP(e,t,n){switch(t.tag){case 3:aS(t),eo();break;case 5:A2(t);break;case 1:cn(t.type)&&Ku(t);break;case 4:I0(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Fe(Xu,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Fe(Ye,Ye.current&1),t.flags|=128,null):n&t.child.childLanes?iS(e,t,n):(Fe(Ye,Ye.current&1),e=es(e,t,n),e!==null?e.sibling:null);Fe(Ye,Ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return oS(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fe(Ye,Ye.current),r)break;return null;case 22:case 23:return t.lanes=0,rS(e,t,n)}return es(e,t,n)}var lS,Um,cS,uS;lS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Um=function(){};cS=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,xa(Nr.current);var a=null;switch(n){case"input":s=dm(e,s),r=dm(e,r),a=[];break;case"select":s=Ze({},s,{value:void 0}),r=Ze({},r,{value:void 0}),a=[];break;case"textarea":s=mm(e,s),r=mm(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Hu)}gm(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var o=s[u];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gl.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(o=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Be("scroll",e),a||o===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};uS=function(e,t,n,r){n!==r&&(t.flags|=4)};function Do(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $t(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function wP(e,t,n){var r=t.pendingProps;switch(N0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(t),null;case 1:return cn(t.type)&&Gu(),$t(t),null;case 3:return r=t.stateNode,no(),Ve(ln),Ve(Wt),L0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&($c(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,cr!==null&&(Qm(cr),cr=null))),Um(e,t),$t(t),null;case 5:$0(t);var s=xa(Ml.current);if(n=t.type,e!==null&&t.stateNode!=null)cS(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(W(166));return $t(t),null}if(e=xa(Nr.current),$c(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[kr]=t,r[El]=a,e=(t.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(s=0;s<Ho.length;s++)Be(Ho[s],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Vy(r,a),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Be("invalid",r);break;case"textarea":Wy(r,a),Be("invalid",r)}gm(n,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var o=a[i];i==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&Ic(r.textContent,o,e),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&Ic(r.textContent,o,e),s=["children",""+o]):gl.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Be("scroll",r)}switch(n){case"input":Mc(r),Uy(r,a,!0);break;case"textarea":Mc(r),Hy(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Hu)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=L1(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[kr]=t,e[El]=r,lS(e,t,!1,!1),t.stateNode=e;e:{switch(i=ym(n,r),n){case"dialog":Be("cancel",e),Be("close",e),s=r;break;case"iframe":case"object":case"embed":Be("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ho.length;s++)Be(Ho[s],e);s=r;break;case"source":Be("error",e),s=r;break;case"img":case"image":case"link":Be("error",e),Be("load",e),s=r;break;case"details":Be("toggle",e),s=r;break;case"input":Vy(e,r),s=dm(e,r),Be("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ze({},r,{value:void 0}),Be("invalid",e);break;case"textarea":Wy(e,r),s=mm(e,r),Be("invalid",e);break;default:s=r}gm(n,s),o=s;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?B1(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&F1(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&yl(e,c):typeof c=="number"&&yl(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(gl.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Be("scroll",e):c!=null&&m0(e,a,c,i))}switch(n){case"input":Mc(e),Uy(e,r,!1);break;case"textarea":Mc(e),Hy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Vs(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Pi(e,!!r.multiple,a,!1):r.defaultValue!=null&&Pi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Hu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $t(t),null;case 6:if(e&&t.stateNode!=null)uS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(W(166));if(n=xa(Ml.current),xa(Nr.current),$c(t)){if(r=t.stateNode,n=t.memoizedProps,r[kr]=t,(a=r.nodeValue!==n)&&(e=jn,e!==null))switch(e.tag){case 3:Ic(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ic(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kr]=t,t.stateNode=r}return $t(t),null;case 13:if(Ve(Ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&bn!==null&&t.mode&1&&!(t.flags&128))M2(),eo(),t.flags|=98560,a=!1;else if(a=$c(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(W(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(W(317));a[kr]=t}else eo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$t(t),a=!1}else cr!==null&&(Qm(cr),cr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ye.current&1?wt===0&&(wt=3):X0())),t.updateQueue!==null&&(t.flags|=4),$t(t),null);case 4:return no(),Um(e,t),e===null&&jl(t.stateNode.containerInfo),$t(t),null;case 10:return A0(t.type._context),$t(t),null;case 17:return cn(t.type)&&Gu(),$t(t),null;case 19:if(Ve(Ye),a=t.memoizedState,a===null)return $t(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)Do(a,!1);else{if(wt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Zu(e),i!==null){for(t.flags|=128,Do(a,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fe(Ye,Ye.current&1|2),t.child}e=e.sibling}a.tail!==null&&lt()>so&&(t.flags|=128,r=!0,Do(a,!1),t.lanes=4194304)}else{if(!r)if(e=Zu(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Do(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!Ge)return $t(t),null}else 2*lt()-a.renderingStartTime>so&&n!==1073741824&&(t.flags|=128,r=!0,Do(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=lt(),t.sibling=null,n=Ye.current,Fe(Ye,r?n&1|2:n&1),t):($t(t),null);case 22:case 23:return Y0(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?yn&1073741824&&($t(t),t.subtreeFlags&6&&(t.flags|=8192)):$t(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function bP(e,t){switch(N0(t),t.tag){case 1:return cn(t.type)&&Gu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return no(),Ve(ln),Ve(Wt),L0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $0(t),null;case 13:if(Ve(Ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));eo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ve(Ye),null;case 4:return no(),null;case 10:return A0(t.type._context),null;case 22:case 23:return Y0(),null;case 24:return null;default:return null}}var zc=!1,Bt=!1,SP=typeof WeakSet=="function"?WeakSet:Set,X=null;function wi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){at(e,t,r)}else n.current=null}function Wm(e,t,n){try{n()}catch(r){at(e,t,r)}}var Dv=!1;function kP(e,t){if(Tm=Vu,e=p2(),T0(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,o=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(o=i+s),h!==a||r!==0&&h.nodeType!==3||(c=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(o=i),f===a&&++d===r&&(c=i),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mm={focusedElem:e,selectionRange:n},Vu=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,v=y.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:nr(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(S){at(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return y=Dv,Dv=!1,y}function al(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Wm(t,n,a)}s=s.next}while(s!==r)}}function Hd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Hm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function dS(e){var t=e.alternate;t!==null&&(e.alternate=null,dS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[kr],delete t[El],delete t[_m],delete t[aP],delete t[iP])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hS(e){return e.tag===5||e.tag===3||e.tag===4}function Ov(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Hu));else if(r!==4&&(e=e.child,e!==null))for(Gm(e,t,n),e=e.sibling;e!==null;)Gm(e,t,n),e=e.sibling}function Km(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Km(e,t,n),e=e.sibling;e!==null;)Km(e,t,n),e=e.sibling}var Tt=null,or=!1;function cs(e,t,n){for(n=n.child;n!==null;)fS(e,t,n),n=n.sibling}function fS(e,t,n){if(Mr&&typeof Mr.onCommitFiberUnmount=="function")try{Mr.onCommitFiberUnmount($d,n)}catch{}switch(n.tag){case 5:Bt||wi(n,t);case 6:var r=Tt,s=or;Tt=null,cs(e,t,n),Tt=r,or=s,Tt!==null&&(or?(e=Tt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&(or?(e=Tt,n=n.stateNode,e.nodeType===8?Zh(e.parentNode,n):e.nodeType===1&&Zh(e,n),bl(e)):Zh(Tt,n.stateNode));break;case 4:r=Tt,s=or,Tt=n.stateNode.containerInfo,or=!0,cs(e,t,n),Tt=r,or=s;break;case 0:case 11:case 14:case 15:if(!Bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&Wm(n,t,i),s=s.next}while(s!==r)}cs(e,t,n);break;case 1:if(!Bt&&(wi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){at(n,t,o)}cs(e,t,n);break;case 21:cs(e,t,n);break;case 22:n.mode&1?(Bt=(r=Bt)||n.memoizedState!==null,cs(e,t,n),Bt=r):cs(e,t,n);break;default:cs(e,t,n)}}function Iv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new SP),t.forEach(function(r){var s=RP.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Yn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:Tt=o.stateNode,or=!1;break e;case 3:Tt=o.stateNode.containerInfo,or=!0;break e;case 4:Tt=o.stateNode.containerInfo,or=!0;break e}o=o.return}if(Tt===null)throw Error(W(160));fS(a,i,s),Tt=null,or=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){at(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mS(t,e),t=t.sibling}function mS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yn(t,e),vr(e),r&4){try{al(3,e,e.return),Hd(3,e)}catch(g){at(e,e.return,g)}try{al(5,e,e.return)}catch(g){at(e,e.return,g)}}break;case 1:Yn(t,e),vr(e),r&512&&n!==null&&wi(n,n.return);break;case 5:if(Yn(t,e),vr(e),r&512&&n!==null&&wi(n,n.return),e.flags&32){var s=e.stateNode;try{yl(s,"")}catch(g){at(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&I1(s,a),ym(o,i);var u=ym(o,a);for(i=0;i<c.length;i+=2){var d=c[i],h=c[i+1];d==="style"?B1(s,h):d==="dangerouslySetInnerHTML"?F1(s,h):d==="children"?yl(s,h):m0(s,d,h,u)}switch(o){case"input":hm(s,a);break;case"textarea":$1(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Pi(s,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?Pi(s,!!a.multiple,a.defaultValue,!0):Pi(s,!!a.multiple,a.multiple?[]:"",!1))}s[El]=a}catch(g){at(e,e.return,g)}}break;case 6:if(Yn(t,e),vr(e),r&4){if(e.stateNode===null)throw Error(W(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){at(e,e.return,g)}}break;case 3:if(Yn(t,e),vr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bl(t.containerInfo)}catch(g){at(e,e.return,g)}break;case 4:Yn(t,e),vr(e);break;case 13:Yn(t,e),vr(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(K0=lt())),r&4&&Iv(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Bt=(u=Bt)||d,Yn(t,e),Bt=u):Yn(t,e),vr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(X=e,d=e.child;d!==null;){for(h=X=d;X!==null;){switch(f=X,m=f.child,f.tag){case 0:case 11:case 14:case 15:al(4,f,f.return);break;case 1:wi(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){at(r,n,g)}}break;case 5:wi(f,f.return);break;case 22:if(f.memoizedState!==null){Lv(h);continue}}m!==null?(m.return=f,X=m):Lv(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=h.stateNode,c=h.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=z1("display",i))}catch(g){at(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){at(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Yn(t,e),vr(e),r&4&&Iv(e);break;case 21:break;default:Yn(t,e),vr(e)}}function vr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(hS(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(yl(s,""),r.flags&=-33);var a=Ov(e);Km(e,a,s);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Ov(e);Gm(e,o,i);break;default:throw Error(W(161))}}catch(c){at(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jP(e,t,n){X=e,pS(e)}function pS(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var s=X,a=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||zc;if(!i){var o=s.alternate,c=o!==null&&o.memoizedState!==null||Bt;o=zc;var u=Bt;if(zc=i,(Bt=c)&&!u)for(X=s;X!==null;)i=X,c=i.child,i.tag===22&&i.memoizedState!==null?Fv(s):c!==null?(c.return=i,X=c):Fv(s);for(;a!==null;)X=a,pS(a),a=a.sibling;X=s,zc=o,Bt=u}$v(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,X=a):$v(e)}}function $v(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Bt||Hd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Bt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:nr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&bv(t,a,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}bv(t,i,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&bl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Bt||t.flags&512&&Hm(t)}catch(f){at(t,t.return,f)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function Lv(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function Fv(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Hd(4,t)}catch(c){at(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){at(t,s,c)}}var a=t.return;try{Hm(t)}catch(c){at(t,a,c)}break;case 5:var i=t.return;try{Hm(t)}catch(c){at(t,i,c)}}}catch(c){at(t,t.return,c)}if(t===e){X=null;break}var o=t.sibling;if(o!==null){o.return=t.return,X=o;break}X=t.return}}var CP=Math.ceil,nd=is.ReactCurrentDispatcher,H0=is.ReactCurrentOwner,Vn=is.ReactCurrentBatchConfig,Ee=0,kt=null,mt=null,Pt=0,yn=0,bi=Js(0),wt=0,Rl=null,Oa=0,Gd=0,G0=0,il=null,sn=null,K0=0,so=1/0,Br=null,rd=!1,qm=null,Is=null,Bc=!1,Ms=null,sd=0,ol=0,Ym=null,ju=-1,Cu=0;function Qt(){return Ee&6?lt():ju!==-1?ju:ju=lt()}function $s(e){return e.mode&1?Ee&2&&Pt!==0?Pt&-Pt:lP.transition!==null?(Cu===0&&(Cu=Z1()),Cu):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:i2(e.type)),e):1}function hr(e,t,n,r){if(50<ol)throw ol=0,Ym=null,Error(W(185));sc(e,n,r),(!(Ee&2)||e!==kt)&&(e===kt&&(!(Ee&2)&&(Gd|=n),wt===4&&ws(e,Pt)),un(e,r),n===1&&Ee===0&&!(t.mode&1)&&(so=lt()+500,Vd&&Zs()))}function un(e,t){var n=e.callbackNode;lN(e,t);var r=Bu(e,e===kt?Pt:0);if(r===0)n!==null&&qy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&qy(n),t===1)e.tag===0?oP(zv.bind(null,e)):C2(zv.bind(null,e)),rP(function(){!(Ee&6)&&Zs()}),n=null;else{switch(e2(r)){case 1:n=x0;break;case 4:n=Q1;break;case 16:n=zu;break;case 536870912:n=J1;break;default:n=zu}n=kS(n,gS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function gS(e,t){if(ju=-1,Cu=0,Ee&6)throw Error(W(327));var n=e.callbackNode;if(Oi()&&e.callbackNode!==n)return null;var r=Bu(e,e===kt?Pt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ad(e,r);else{t=r;var s=Ee;Ee|=2;var a=vS();(kt!==e||Pt!==t)&&(Br=null,so=lt()+500,Ma(e,t));do try{MP();break}catch(o){yS(e,o)}while(!0);R0(),nd.current=a,Ee=s,mt!==null?t=0:(kt=null,Pt=0,t=wt)}if(t!==0){if(t===2&&(s=Sm(e),s!==0&&(r=s,t=Xm(e,s))),t===1)throw n=Rl,Ma(e,0),ws(e,r),un(e,lt()),n;if(t===6)ws(e,r);else{if(s=e.current.alternate,!(r&30)&&!EP(s)&&(t=ad(e,r),t===2&&(a=Sm(e),a!==0&&(r=a,t=Xm(e,a))),t===1))throw n=Rl,Ma(e,0),ws(e,r),un(e,lt()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(W(345));case 2:ua(e,sn,Br);break;case 3:if(ws(e,r),(r&130023424)===r&&(t=K0+500-lt(),10<t)){if(Bu(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Qt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Pm(ua.bind(null,e,sn,Br),t);break}ua(e,sn,Br);break;case 4:if(ws(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-dr(r);a=1<<i,i=t[i],i>s&&(s=i),r&=~a}if(r=s,r=lt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CP(r/1960))-r,10<r){e.timeoutHandle=Pm(ua.bind(null,e,sn,Br),r);break}ua(e,sn,Br);break;case 5:ua(e,sn,Br);break;default:throw Error(W(329))}}}return un(e,lt()),e.callbackNode===n?gS.bind(null,e):null}function Xm(e,t){var n=il;return e.current.memoizedState.isDehydrated&&(Ma(e,t).flags|=256),e=ad(e,t),e!==2&&(t=sn,sn=n,t!==null&&Qm(t)),e}function Qm(e){sn===null?sn=e:sn.push.apply(sn,e)}function EP(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!fr(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ws(e,t){for(t&=~G0,t&=~Gd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-dr(t),r=1<<n;e[n]=-1,t&=~r}}function zv(e){if(Ee&6)throw Error(W(327));Oi();var t=Bu(e,0);if(!(t&1))return un(e,lt()),null;var n=ad(e,t);if(e.tag!==0&&n===2){var r=Sm(e);r!==0&&(t=r,n=Xm(e,r))}if(n===1)throw n=Rl,Ma(e,0),ws(e,t),un(e,lt()),n;if(n===6)throw Error(W(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ua(e,sn,Br),un(e,lt()),null}function q0(e,t){var n=Ee;Ee|=1;try{return e(t)}finally{Ee=n,Ee===0&&(so=lt()+500,Vd&&Zs())}}function Ia(e){Ms!==null&&Ms.tag===0&&!(Ee&6)&&Oi();var t=Ee;Ee|=1;var n=Vn.transition,r=Ae;try{if(Vn.transition=null,Ae=1,e)return e()}finally{Ae=r,Vn.transition=n,Ee=t,!(Ee&6)&&Zs()}}function Y0(){yn=bi.current,Ve(bi)}function Ma(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,nP(n)),mt!==null)for(n=mt.return;n!==null;){var r=n;switch(N0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gu();break;case 3:no(),Ve(ln),Ve(Wt),L0();break;case 5:$0(r);break;case 4:no();break;case 13:Ve(Ye);break;case 19:Ve(Ye);break;case 10:A0(r.type._context);break;case 22:case 23:Y0()}n=n.return}if(kt=e,mt=e=Ls(e.current,null),Pt=yn=t,wt=0,Rl=null,G0=Gd=Oa=0,sn=il=null,va!==null){for(t=0;t<va.length;t++)if(n=va[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var i=a.next;a.next=s,r.next=i}n.pending=r}va=null}return e}function yS(e,t){do{var n=mt;try{if(R0(),bu.current=td,ed){for(var r=Qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ed=!1}if(Da=0,St=vt=Qe=null,sl=!1,Nl=0,H0.current=null,n===null||n.return===null){wt=1,Rl=t,mt=null;break}e:{var a=e,i=n.return,o=n,c=t;if(t=Pt,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Tv(i);if(m!==null){m.flags&=-257,Mv(m,i,o,a,t),m.mode&1&&Ev(a,u,t),t=m,c=u;var y=t.updateQueue;if(y===null){var g=new Set;g.add(c),t.updateQueue=g}else y.add(c);break e}else{if(!(t&1)){Ev(a,u,t),X0();break e}c=Error(W(426))}}else if(Ge&&o.mode&1){var v=Tv(i);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Mv(v,i,o,a,t),P0(ro(c,o));break e}}a=c=ro(c,o),wt!==4&&(wt=2),il===null?il=[a]:il.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=eS(a,c,t);wv(a,x);break e;case 1:o=c;var b=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Is===null||!Is.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var S=tS(a,o,t);wv(a,S);break e}}a=a.return}while(a!==null)}wS(n)}catch(k){t=k,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(!0)}function vS(){var e=nd.current;return nd.current=td,e===null?td:e}function X0(){(wt===0||wt===3||wt===2)&&(wt=4),kt===null||!(Oa&268435455)&&!(Gd&268435455)||ws(kt,Pt)}function ad(e,t){var n=Ee;Ee|=2;var r=vS();(kt!==e||Pt!==t)&&(Br=null,Ma(e,t));do try{TP();break}catch(s){yS(e,s)}while(!0);if(R0(),Ee=n,nd.current=r,mt!==null)throw Error(W(261));return kt=null,Pt=0,wt}function TP(){for(;mt!==null;)xS(mt)}function MP(){for(;mt!==null&&!ZM();)xS(mt)}function xS(e){var t=SS(e.alternate,e,yn);e.memoizedProps=e.pendingProps,t===null?wS(e):mt=t,H0.current=null}function wS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=bP(n,t),n!==null){n.flags&=32767,mt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wt=6,mt=null;return}}else if(n=wP(n,t,yn),n!==null){mt=n;return}if(t=t.sibling,t!==null){mt=t;return}mt=t=e}while(t!==null);wt===0&&(wt=5)}function ua(e,t,n){var r=Ae,s=Vn.transition;try{Vn.transition=null,Ae=1,NP(e,t,n,r)}finally{Vn.transition=s,Ae=r}return null}function NP(e,t,n,r){do Oi();while(Ms!==null);if(Ee&6)throw Error(W(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(W(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(cN(e,a),e===kt&&(mt=kt=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bc||(Bc=!0,kS(zu,function(){return Oi(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Vn.transition,Vn.transition=null;var i=Ae;Ae=1;var o=Ee;Ee|=4,H0.current=null,kP(e,n),mS(n,e),YN(Mm),Vu=!!Tm,Mm=Tm=null,e.current=n,jP(n),eN(),Ee=o,Ae=i,Vn.transition=a}else e.current=n;if(Bc&&(Bc=!1,Ms=e,sd=s),a=e.pendingLanes,a===0&&(Is=null),rN(n.stateNode),un(e,lt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(rd)throw rd=!1,e=qm,qm=null,e;return sd&1&&e.tag!==0&&Oi(),a=e.pendingLanes,a&1?e===Ym?ol++:(ol=0,Ym=e):ol=0,Zs(),null}function Oi(){if(Ms!==null){var e=e2(sd),t=Vn.transition,n=Ae;try{if(Vn.transition=null,Ae=16>e?16:e,Ms===null)var r=!1;else{if(e=Ms,Ms=null,sd=0,Ee&6)throw Error(W(331));var s=Ee;for(Ee|=4,X=e.current;X!==null;){var a=X,i=a.child;if(X.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(X=u;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:al(8,d,a)}var h=d.child;if(h!==null)h.return=d,X=h;else for(;X!==null;){d=X;var f=d.sibling,m=d.return;if(dS(d),d===u){X=null;break}if(f!==null){f.return=m,X=f;break}X=m}}}var y=a.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}X=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,X=i;else e:for(;X!==null;){if(a=X,a.flags&2048)switch(a.tag){case 0:case 11:case 15:al(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,X=x;break e}X=a.return}}var b=e.current;for(X=b;X!==null;){i=X;var w=i.child;if(i.subtreeFlags&2064&&w!==null)w.return=i,X=w;else e:for(i=b;X!==null;){if(o=X,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Hd(9,o)}}catch(k){at(o,o.return,k)}if(o===i){X=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,X=S;break e}X=o.return}}if(Ee=s,Zs(),Mr&&typeof Mr.onPostCommitFiberRoot=="function")try{Mr.onPostCommitFiberRoot($d,e)}catch{}r=!0}return r}finally{Ae=n,Vn.transition=t}}return!1}function Bv(e,t,n){t=ro(n,t),t=eS(e,t,1),e=Os(e,t,1),t=Qt(),e!==null&&(sc(e,1,t),un(e,t))}function at(e,t,n){if(e.tag===3)Bv(e,e,n);else for(;t!==null;){if(t.tag===3){Bv(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Is===null||!Is.has(r))){e=ro(n,e),e=tS(t,e,1),t=Os(t,e,1),e=Qt(),t!==null&&(sc(t,1,e),un(t,e));break}}t=t.return}}function PP(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Qt(),e.pingedLanes|=e.suspendedLanes&n,kt===e&&(Pt&n)===n&&(wt===4||wt===3&&(Pt&130023424)===Pt&&500>lt()-K0?Ma(e,0):G0|=n),un(e,t)}function bS(e,t){t===0&&(e.mode&1?(t=_c,_c<<=1,!(_c&130023424)&&(_c=4194304)):t=1);var n=Qt();e=Zr(e,t),e!==null&&(sc(e,t,n),un(e,n))}function _P(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),bS(e,n)}function RP(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(t),bS(e,n)}var SS;SS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ln.current)on=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return on=!1,xP(e,t,n);on=!!(e.flags&131072)}else on=!1,Ge&&t.flags&1048576&&E2(t,Yu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ku(e,t),e=t.pendingProps;var s=Zi(t,Wt.current);Di(t,n),s=z0(null,t,r,e,s,n);var a=B0();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,cn(r)?(a=!0,Ku(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,O0(t),s.updater=Wd,t.stateNode=s,s._reactInternals=t,$m(t,r,e,n),t=zm(null,t,r,!0,a,n)):(t.tag=0,Ge&&a&&M0(t),qt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ku(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=DP(r),e=nr(r,e),s){case 0:t=Fm(null,t,r,e,n);break e;case 1:t=_v(null,t,r,e,n);break e;case 11:t=Nv(null,t,r,e,n);break e;case 14:t=Pv(null,t,r,nr(r.type,e),n);break e}throw Error(W(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:nr(r,s),Fm(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:nr(r,s),_v(e,t,r,s,n);case 3:e:{if(aS(t),e===null)throw Error(W(387));r=t.pendingProps,a=t.memoizedState,s=a.element,R2(e,t),Ju(t,r,null,n);var i=t.memoizedState;if(r=i.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=ro(Error(W(423)),t),t=Rv(e,t,r,n,s);break e}else if(r!==s){s=ro(Error(W(424)),t),t=Rv(e,t,r,n,s);break e}else for(bn=Ds(t.stateNode.containerInfo.firstChild),jn=t,Ge=!0,cr=null,n=P2(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(eo(),r===s){t=es(e,t,n);break e}qt(e,t,r,n)}t=t.child}return t;case 5:return A2(t),e===null&&Dm(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,Nm(r,s)?i=null:a!==null&&Nm(r,a)&&(t.flags|=32),sS(e,t),qt(e,t,i,n),t.child;case 6:return e===null&&Dm(t),null;case 13:return iS(e,t,n);case 4:return I0(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=to(t,null,r,n):qt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:nr(r,s),Nv(e,t,r,s,n);case 7:return qt(e,t,t.pendingProps,n),t.child;case 8:return qt(e,t,t.pendingProps.children,n),t.child;case 12:return qt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,Fe(Xu,r._currentValue),r._currentValue=i,a!==null)if(fr(a.value,i)){if(a.children===s.children&&!ln.current){t=es(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var o=a.dependencies;if(o!==null){i=a.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Kr(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Om(a.return,n,t),o.lanes|=n;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(W(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Om(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}qt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Di(t,n),s=Un(s),r=r(s),t.flags|=1,qt(e,t,r,n),t.child;case 14:return r=t.type,s=nr(r,t.pendingProps),s=nr(r.type,s),Pv(e,t,r,s,n);case 15:return nS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:nr(r,s),ku(e,t),t.tag=1,cn(r)?(e=!0,Ku(t)):e=!1,Di(t,n),Z2(t,r,s),$m(t,r,s,n),zm(null,t,r,!0,e,n);case 19:return oS(e,t,n);case 22:return rS(e,t,n)}throw Error(W(156,t.tag))};function kS(e,t){return X1(e,t)}function AP(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(e,t,n,r){return new AP(e,t,n,r)}function Q0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function DP(e){if(typeof e=="function")return Q0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===g0)return 11;if(e===y0)return 14}return 2}function Ls(e,t){var n=e.alternate;return n===null?(n=Ln(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Eu(e,t,n,r,s,a){var i=2;if(r=e,typeof e=="function")Q0(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case di:return Na(n.children,s,a,t);case p0:i=8,s|=8;break;case om:return e=Ln(12,n,t,s|2),e.elementType=om,e.lanes=a,e;case lm:return e=Ln(13,n,t,s),e.elementType=lm,e.lanes=a,e;case cm:return e=Ln(19,n,t,s),e.elementType=cm,e.lanes=a,e;case A1:return Kd(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _1:i=10;break e;case R1:i=9;break e;case g0:i=11;break e;case y0:i=14;break e;case gs:i=16,r=null;break e}throw Error(W(130,e==null?e:typeof e,""))}return t=Ln(i,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function Na(e,t,n,r){return e=Ln(7,e,r,t),e.lanes=n,e}function Kd(e,t,n,r){return e=Ln(22,e,r,t),e.elementType=A1,e.lanes=n,e.stateNode={isHidden:!1},e}function lf(e,t,n){return e=Ln(6,e,null,t),e.lanes=n,e}function cf(e,t,n){return t=Ln(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function OP(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vh(0),this.expirationTimes=Vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function J0(e,t,n,r,s,a,i,o,c){return e=new OP(e,t,n,o,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ln(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},O0(a),e}function IP(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ui,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function jS(e){if(!e)return Us;e=e._reactInternals;e:{if(Va(e)!==e||e.tag!==1)throw Error(W(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(cn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(W(171))}if(e.tag===1){var n=e.type;if(cn(n))return j2(e,n,t)}return t}function CS(e,t,n,r,s,a,i,o,c){return e=J0(n,r,!0,e,s,a,i,o,c),e.context=jS(null),n=e.current,r=Qt(),s=$s(n),a=Kr(r,s),a.callback=t??null,Os(n,a,s),e.current.lanes=s,sc(e,s,r),un(e,r),e}function qd(e,t,n,r){var s=t.current,a=Qt(),i=$s(s);return n=jS(n),t.context===null?t.context=n:t.pendingContext=n,t=Kr(a,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Os(s,t,i),e!==null&&(hr(e,s,i,a),wu(e,s,i)),i}function id(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Z0(e,t){Vv(e,t),(e=e.alternate)&&Vv(e,t)}function $P(){return null}var ES=typeof reportError=="function"?reportError:function(e){console.error(e)};function eg(e){this._internalRoot=e}Yd.prototype.render=eg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));qd(e,t,null,null)};Yd.prototype.unmount=eg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ia(function(){qd(null,e,null,null)}),t[Jr]=null}};function Yd(e){this._internalRoot=e}Yd.prototype.unstable_scheduleHydration=function(e){if(e){var t=r2();e={blockedOn:null,target:e,priority:t};for(var n=0;n<xs.length&&t!==0&&t<xs[n].priority;n++);xs.splice(n,0,e),n===0&&a2(e)}};function tg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Xd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Uv(){}function LP(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=id(i);a.call(u)}}var i=CS(t,r,e,0,null,!1,!1,"",Uv);return e._reactRootContainer=i,e[Jr]=i.current,jl(e.nodeType===8?e.parentNode:e),Ia(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var u=id(c);o.call(u)}}var c=J0(e,0,!1,null,null,!1,!1,"",Uv);return e._reactRootContainer=c,e[Jr]=c.current,jl(e.nodeType===8?e.parentNode:e),Ia(function(){qd(t,c,n,r)}),c}function Qd(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var o=s;s=function(){var c=id(i);o.call(c)}}qd(t,i,e,s)}else i=LP(n,t,e,s,r);return id(i)}t2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Wo(t.pendingLanes);n!==0&&(w0(t,n|1),un(t,lt()),!(Ee&6)&&(so=lt()+500,Zs()))}break;case 13:Ia(function(){var r=Zr(e,1);if(r!==null){var s=Qt();hr(r,e,1,s)}}),Z0(e,1)}};b0=function(e){if(e.tag===13){var t=Zr(e,134217728);if(t!==null){var n=Qt();hr(t,e,134217728,n)}Z0(e,134217728)}};n2=function(e){if(e.tag===13){var t=$s(e),n=Zr(e,t);if(n!==null){var r=Qt();hr(n,e,t,r)}Z0(e,t)}};r2=function(){return Ae};s2=function(e,t){var n=Ae;try{return Ae=e,t()}finally{Ae=n}};xm=function(e,t,n){switch(t){case"input":if(hm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Bd(r);if(!s)throw Error(W(90));O1(r),hm(r,s)}}}break;case"textarea":$1(e,n);break;case"select":t=n.value,t!=null&&Pi(e,!!n.multiple,t,!1)}};W1=q0;H1=Ia;var FP={usingClientEntryPoint:!1,Events:[ic,pi,Bd,V1,U1,q0]},Oo={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zP={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:is.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=q1(e),e===null?null:e.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||$P,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{$d=Vc.inject(zP),Mr=Vc}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FP;Nn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tg(t))throw Error(W(200));return IP(e,t,null,n)};Nn.createRoot=function(e,t){if(!tg(e))throw Error(W(299));var n=!1,r="",s=ES;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=J0(e,1,!1,null,null,n,!1,r,s),e[Jr]=t.current,jl(e.nodeType===8?e.parentNode:e),new eg(t)};Nn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=q1(t),e=e===null?null:e.stateNode,e};Nn.flushSync=function(e){return Ia(e)};Nn.hydrate=function(e,t,n){if(!Xd(t))throw Error(W(200));return Qd(null,e,t,!0,n)};Nn.hydrateRoot=function(e,t,n){if(!tg(e))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",i=ES;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=CS(t,null,e,1,n??null,s,!1,a,i),e[Jr]=t.current,jl(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Yd(t)};Nn.render=function(e,t,n){if(!Xd(t))throw Error(W(200));return Qd(null,e,t,!1,n)};Nn.unmountComponentAtNode=function(e){if(!Xd(e))throw Error(W(40));return e._reactRootContainer?(Ia(function(){Qd(null,null,e,!1,function(){e._reactRootContainer=null,e[Jr]=null})}),!0):!1};Nn.unstable_batchedUpdates=q0;Nn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xd(n))throw Error(W(200));if(e==null||e._reactInternals===void 0)throw Error(W(38));return Qd(e,t,n,!1,r)};Nn.version="18.3.1-next-f1338f8080-20240426";function TS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TS)}catch(e){console.error(e)}}TS(),T1.exports=Nn;var ea=T1.exports;const MS=p1(ea);var NS,Wv=ea;NS=Wv.createRoot,Wv.hydrateRoot;const BP=1,VP=1e6;let uf=0;function UP(){return uf=(uf+1)%Number.MAX_SAFE_INTEGER,uf.toString()}const df=new Map,Hv=e=>{if(df.has(e))return;const t=setTimeout(()=>{df.delete(e),ll({type:"REMOVE_TOAST",toastId:e})},VP);df.set(e,t)},WP=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,BP)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Hv(n):e.toasts.forEach(r=>{Hv(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Tu=[];let Mu={toasts:[]};function ll(e){Mu=WP(Mu,e),Tu.forEach(t=>{t(Mu)})}function ii({...e}){const t=UP(),n=s=>ll({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>ll({type:"DISMISS_TOAST",toastId:t});return ll({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function HP(){const[e,t]=p.useState(Mu);return p.useEffect(()=>(Tu.push(t),()=>{const n=Tu.indexOf(t);n>-1&&Tu.splice(n,1)}),[e]),{...e,toast:ii,dismiss:n=>ll({type:"DISMISS_TOAST",toastId:n})}}function Q(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Gv(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function PS(...e){return t=>{let n=!1;const r=e.map(s=>{const a=Gv(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():Gv(e[s],null)}}}}function ye(...e){return p.useCallback(PS(...e),e)}function GP(e,t){const n=p.createContext(t),r=a=>{const{children:i,...o}=a,c=p.useMemo(()=>o,Object.values(o));return l.jsx(n.Provider,{value:c,children:i})};r.displayName=e+"Provider";function s(a){const i=p.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function Gn(e,t=[]){let n=[];function r(a,i){const o=p.createContext(i),c=n.length;n=[...n,i];const u=h=>{var x;const{scope:f,children:m,...y}=h,g=((x=f==null?void 0:f[e])==null?void 0:x[c])||o,v=p.useMemo(()=>y,Object.values(y));return l.jsx(g.Provider,{value:v,children:m})};u.displayName=a+"Provider";function d(h,f){var g;const m=((g=f==null?void 0:f[e])==null?void 0:g[c])||o,y=p.useContext(m);if(y)return y;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=n.map(i=>p.createContext(i));return function(o){const c=(o==null?void 0:o[e])||a;return p.useMemo(()=>({[`__scope${e}`]:{...o,[e]:c}}),[o,c])}};return s.scopeName=e,[r,KP(s,...t)]}function KP(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=r.reduce((o,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...o,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function ao(e){const t=YP(e),n=p.forwardRef((r,s)=>{const{children:a,...i}=r,o=p.Children.toArray(a),c=o.find(QP);if(c){const u=c.props.children,d=o.map(h=>h===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:h);return l.jsx(t,{...i,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return l.jsx(t,{...i,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}var qP=ao("Slot");function YP(e){const t=p.forwardRef((n,r)=>{const{children:s,...a}=n;if(p.isValidElement(s)){const i=ZP(s),o=JP(a,s.props);return s.type!==p.Fragment&&(o.ref=r?PS(r,i):i),p.cloneElement(s,o)}return p.Children.count(s)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var _S=Symbol("radix.slottable");function XP(e){const t=({children:n})=>l.jsx(l.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=_S,t}function QP(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===_S}function JP(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...o)=>{const c=a(...o);return s(...o),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function ZP(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Jd(e){const t=e+"CollectionProvider",[n,r]=Gn(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:v,children:x}=g,b=G.useRef(null),w=G.useRef(new Map).current;return l.jsx(s,{scope:v,itemMap:w,collectionRef:b,children:x})};i.displayName=t;const o=e+"CollectionSlot",c=ao(o),u=G.forwardRef((g,v)=>{const{scope:x,children:b}=g,w=a(o,x),S=ye(v,w.collectionRef);return l.jsx(c,{ref:S,children:b})});u.displayName=o;const d=e+"CollectionItemSlot",h="data-radix-collection-item",f=ao(d),m=G.forwardRef((g,v)=>{const{scope:x,children:b,...w}=g,S=G.useRef(null),k=ye(v,S),j=a(d,x);return G.useEffect(()=>(j.itemMap.set(S,{ref:S,...w}),()=>void j.itemMap.delete(S))),l.jsx(f,{[h]:"",ref:k,children:b})});m.displayName=d;function y(g){const v=a(e+"CollectionConsumer",g);return G.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((j,C)=>w.indexOf(j.ref.current)-w.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:i,Slot:u,ItemSlot:m},y,r]}var e_=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ne=e_.reduce((e,t)=>{const n=ao(`Primitive.${t}`),r=p.forwardRef((s,a)=>{const{asChild:i,...o}=s,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...o,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function RS(e,t){e&&ea.flushSync(()=>e.dispatchEvent(t))}function xt(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function t_(e,t=globalThis==null?void 0:globalThis.document){const n=xt(e);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var n_="DismissableLayer",Jm="dismissableLayer.update",r_="dismissableLayer.pointerDownOutside",s_="dismissableLayer.focusOutside",Kv,AS=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),lc=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:o,...c}=e,u=p.useContext(AS),[d,h]=p.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),y=ye(t,C=>h(C)),g=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(v),b=d?g.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,S=b>=x,k=i_(C=>{const E=C.target,M=[...u.branches].some(N=>N.contains(E));!S||M||(s==null||s(C),i==null||i(C),C.defaultPrevented||o==null||o())},f),j=o_(C=>{const E=C.target;[...u.branches].some(N=>N.contains(E))||(a==null||a(C),i==null||i(C),C.defaultPrevented||o==null||o())},f);return t_(C=>{b===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&o&&(C.preventDefault(),o()))},f),p.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Kv=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),qv(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Kv)}},[d,f,n,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),qv())},[d,u]),p.useEffect(()=>{const C=()=>m({});return document.addEventListener(Jm,C),()=>document.removeEventListener(Jm,C)},[]),l.jsx(ne.div,{...c,ref:y,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:Q(e.onFocusCapture,j.onFocusCapture),onBlurCapture:Q(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:Q(e.onPointerDownCapture,k.onPointerDownCapture)})});lc.displayName=n_;var a_="DismissableLayerBranch",DS=p.forwardRef((e,t)=>{const n=p.useContext(AS),r=p.useRef(null),s=ye(t,r);return p.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),l.jsx(ne.div,{...e,ref:s})});DS.displayName=a_;function i_(e,t=globalThis==null?void 0:globalThis.document){const n=xt(e),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const a=o=>{if(o.target&&!r.current){let c=function(){OS(r_,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function o_(e,t=globalThis==null?void 0:globalThis.document){const n=xt(e),r=p.useRef(!1);return p.useEffect(()=>{const s=a=>{a.target&&!r.current&&OS(s_,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function qv(){const e=new CustomEvent(Jm);document.dispatchEvent(e)}function OS(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?RS(s,a):s.dispatchEvent(a)}var l_=lc,c_=DS,jt=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},u_="Portal",Zd=p.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[s,a]=p.useState(!1);jt(()=>a(!0),[]);const i=n||s&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return i?MS.createPortal(l.jsx(ne.div,{...r,ref:t}),i):null});Zd.displayName=u_;function d_(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var Kn=e=>{const{present:t,children:n}=e,r=h_(t),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),a=ye(r.ref,f_(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:a}):null};Kn.displayName="Presence";function h_(e){const[t,n]=p.useState(),r=p.useRef(null),s=p.useRef(e),a=p.useRef("none"),i=e?"mounted":"unmounted",[o,c]=d_(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Uc(r.current);a.current=o==="mounted"?u:"none"},[o]),jt(()=>{const u=r.current,d=s.current;if(d!==e){const f=a.current,m=Uc(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),jt(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=m=>{const g=Uc(r.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!s.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},f=m=>{m.target===t&&(a.current=Uc(r.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Uc(e){return(e==null?void 0:e.animationName)||"none"}function f_(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var m_=d0[" useInsertionEffect ".trim().toString()]||jt;function Ws({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,i]=p_({defaultProp:t,onChange:n}),o=e!==void 0,c=o?e:s;{const d=p.useRef(e!==void 0);p.useEffect(()=>{const h=d.current;h!==o&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const u=p.useCallback(d=>{var h;if(o){const f=g_(d)?d(e):d;f!==e&&((h=i.current)==null||h.call(i,f))}else a(d)},[o,e,a,i]);return[c,u]}function p_({defaultProp:e,onChange:t}){const[n,r]=p.useState(e),s=p.useRef(n),a=p.useRef(t);return m_(()=>{a.current=t},[t]),p.useEffect(()=>{var i;s.current!==n&&((i=a.current)==null||i.call(a,n),s.current=n)},[n,s]),[n,r,a]}function g_(e){return typeof e=="function"}var IS=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),y_="VisuallyHidden",eh=p.forwardRef((e,t)=>l.jsx(ne.span,{...e,ref:t,style:{...IS,...e.style}}));eh.displayName=y_;var v_=eh,ng="ToastProvider",[rg,x_,w_]=Jd("Toast"),[$S]=Gn("Toast",[w_]),[b_,th]=$S(ng),LS=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:i}=e,[o,c]=p.useState(null),[u,d]=p.useState(0),h=p.useRef(!1),f=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${ng}\`. Expected non-empty \`string\`.`),l.jsx(rg.Provider,{scope:t,children:l.jsx(b_,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:o,onViewportChange:c,onToastAdd:p.useCallback(()=>d(m=>m+1),[]),onToastRemove:p.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:i})})};LS.displayName=ng;var FS="ToastViewport",S_=["F8"],Zm="toast.viewportPause",ep="toast.viewportResume",zS=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=S_,label:s="Notifications ({hotkey})",...a}=e,i=th(FS,n),o=x_(n),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),h=p.useRef(null),f=ye(t,h,i.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=i.toastCount>0;p.useEffect(()=>{const v=x=>{var w;r.length!==0&&r.every(S=>x[S]||x.code===S)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),p.useEffect(()=>{const v=c.current,x=h.current;if(y&&v&&x){const b=()=>{if(!i.isClosePausedRef.current){const j=new CustomEvent(Zm);x.dispatchEvent(j),i.isClosePausedRef.current=!0}},w=()=>{if(i.isClosePausedRef.current){const j=new CustomEvent(ep);x.dispatchEvent(j),i.isClosePausedRef.current=!1}},S=j=>{!v.contains(j.relatedTarget)&&w()},k=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",b),v.addEventListener("focusout",S),v.addEventListener("pointermove",b),v.addEventListener("pointerleave",k),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",b),v.removeEventListener("focusout",S),v.removeEventListener("pointermove",b),v.removeEventListener("pointerleave",k),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[y,i.isClosePausedRef]);const g=p.useCallback(({tabbingDirection:v})=>{const b=o().map(w=>{const S=w.ref.current,k=[S,...O_(S)];return v==="forwards"?k:k.reverse()});return(v==="forwards"?b.reverse():b).flat()},[o]);return p.useEffect(()=>{const v=h.current;if(v){const x=b=>{var k,j,C;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const E=document.activeElement,M=b.shiftKey;if(b.target===v&&M){(k=u.current)==null||k.focus();return}const A=g({tabbingDirection:M?"backwards":"forwards"}),L=A.findIndex(D=>D===E);hf(A.slice(L+1))?b.preventDefault():M?(j=u.current)==null||j.focus():(C=d.current)==null||C.focus()}};return v.addEventListener("keydown",x),()=>v.removeEventListener("keydown",x)}},[o,g]),l.jsxs(c_,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&l.jsx(tp,{ref:u,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});hf(v)}}),l.jsx(rg.Slot,{scope:n,children:l.jsx(ne.ol,{tabIndex:-1,...a,ref:f})}),y&&l.jsx(tp,{ref:d,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});hf(v)}})]})});zS.displayName=FS;var BS="ToastFocusProxy",tp=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,a=th(BS,n);return l.jsx(eh,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:i=>{var u;const o=i.relatedTarget;!((u=a.viewport)!=null&&u.contains(o))&&r()}})});tp.displayName=BS;var cc="Toast",k_="toast.swipeStart",j_="toast.swipeMove",C_="toast.swipeCancel",E_="toast.swipeEnd",VS=p.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...i}=e,[o,c]=Ws({prop:r,defaultProp:s??!0,onChange:a,caller:cc});return l.jsx(Kn,{present:n||o,children:l.jsx(N_,{open:o,...i,ref:t,onClose:()=>c(!1),onPause:xt(e.onPause),onResume:xt(e.onResume),onSwipeStart:Q(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Q(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Q(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Q(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});VS.displayName=cc;var[T_,M_]=$S(cc,{onClose(){}}),N_=p.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:i,onEscapeKeyDown:o,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...y}=e,g=th(cc,n),[v,x]=p.useState(null),b=ye(t,D=>x(D)),w=p.useRef(null),S=p.useRef(null),k=s||g.duration,j=p.useRef(0),C=p.useRef(k),E=p.useRef(0),{onToastAdd:M,onToastRemove:N}=g,T=xt(()=>{var H;(v==null?void 0:v.contains(document.activeElement))&&((H=g.viewport)==null||H.focus()),i()}),A=p.useCallback(D=>{!D||D===1/0||(window.clearTimeout(E.current),j.current=new Date().getTime(),E.current=window.setTimeout(T,D))},[T]);p.useEffect(()=>{const D=g.viewport;if(D){const H=()=>{A(C.current),u==null||u()},R=()=>{const F=new Date().getTime()-j.current;C.current=C.current-F,window.clearTimeout(E.current),c==null||c()};return D.addEventListener(Zm,R),D.addEventListener(ep,H),()=>{D.removeEventListener(Zm,R),D.removeEventListener(ep,H)}}},[g.viewport,k,c,u,A]),p.useEffect(()=>{a&&!g.isClosePausedRef.current&&A(k)},[a,k,g.isClosePausedRef,A]),p.useEffect(()=>(M(),()=>N()),[M,N]);const L=p.useMemo(()=>v?YS(v):null,[v]);return g.viewport?l.jsxs(l.Fragment,{children:[L&&l.jsx(P_,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:L}),l.jsx(T_,{scope:n,onClose:T,children:ea.createPortal(l.jsx(rg.ItemSlot,{scope:n,children:l.jsx(l_,{asChild:!0,onEscapeKeyDown:Q(o,()=>{g.isFocusedToastEscapeKeyDownRef.current||T(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(ne.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Q(e.onKeyDown,D=>{D.key==="Escape"&&(o==null||o(D.nativeEvent),D.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:Q(e.onPointerDown,D=>{D.button===0&&(w.current={x:D.clientX,y:D.clientY})}),onPointerMove:Q(e.onPointerMove,D=>{if(!w.current)return;const H=D.clientX-w.current.x,R=D.clientY-w.current.y,F=!!S.current,_=["left","right"].includes(g.swipeDirection),P=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,O=_?P(0,H):0,I=_?0:P(0,R),U=D.pointerType==="touch"?10:2,B={x:O,y:I},Z={originalEvent:D,delta:B};F?(S.current=B,Wc(j_,h,Z,{discrete:!1})):Yv(B,g.swipeDirection,U)?(S.current=B,Wc(k_,d,Z,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(H)>U||Math.abs(R)>U)&&(w.current=null)}),onPointerUp:Q(e.onPointerUp,D=>{const H=S.current,R=D.target;if(R.hasPointerCapture(D.pointerId)&&R.releasePointerCapture(D.pointerId),S.current=null,w.current=null,H){const F=D.currentTarget,_={originalEvent:D,delta:H};Yv(H,g.swipeDirection,g.swipeThreshold)?Wc(E_,m,_,{discrete:!0}):Wc(C_,f,_,{discrete:!0}),F.addEventListener("click",P=>P.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),P_=e=>{const{__scopeToast:t,children:n,...r}=e,s=th(cc,t),[a,i]=p.useState(!1),[o,c]=p.useState(!1);return A_(()=>i(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),o?null:l.jsx(Zd,{asChild:!0,children:l.jsx(eh,{...r,children:a&&l.jsxs(l.Fragment,{children:[s.label," ",n]})})})},__="ToastTitle",US=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return l.jsx(ne.div,{...r,ref:t})});US.displayName=__;var R_="ToastDescription",WS=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return l.jsx(ne.div,{...r,ref:t})});WS.displayName=R_;var HS="ToastAction",GS=p.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?l.jsx(qS,{altText:n,asChild:!0,children:l.jsx(sg,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${HS}\`. Expected non-empty \`string\`.`),null)});GS.displayName=HS;var KS="ToastClose",sg=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=M_(KS,n);return l.jsx(qS,{asChild:!0,children:l.jsx(ne.button,{type:"button",...r,ref:t,onClick:Q(e.onClick,s.onClose)})})});sg.displayName=KS;var qS=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return l.jsx(ne.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function YS(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),D_(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...YS(r))}}),t}function Wc(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?RS(s,a):s.dispatchEvent(a)}var Yv=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),a=r>s;return t==="left"||t==="right"?a&&r>n:!a&&s>n};function A_(e=()=>{}){const t=xt(e);jt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function D_(e){return e.nodeType===e.ELEMENT_NODE}function O_(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function hf(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var I_=LS,XS=zS,QS=VS,JS=US,ZS=WS,e5=GS,t5=sg;function n5(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=n5(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function r5(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=n5(e))&&(r&&(r+=" "),r+=t);return r}const Xv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Qv=r5,nh=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return Qv(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=a==null?void 0:a[u];if(d===null)return null;const f=Xv(d)||Xv(h);return s[u][f]}),o=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(y=>{let[g,v]=y;return Array.isArray(v)?v.includes({...a,...o}[g]):{...a,...o}[g]===v})?[...u,h,f]:u},[]);return Qv(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s5=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var L_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...o},c)=>p.createElement("svg",{ref:c,...L_,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:s5("lucide",s),...o},[...i.map(([u,d])=>p.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=(e,t)=>{const n=p.forwardRef(({className:r,...s},a)=>p.createElement(F_,{ref:a,iconNode:t,className:s5(`lucide-${$_(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=re("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=re("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=re("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=re("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=re("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=re("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=re("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=re("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=re("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=re("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=re("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=re("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=re("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=re("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=re("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=re("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=re("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=re("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J_=re("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=re("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=re("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=re("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=re("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sp=re("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=re("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=re("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=re("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=re("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=re("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),cg="-",oR=e=>{const t=cR(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const o=i.split(cg);return o[0]===""&&o.length!==1&&o.shift(),f5(o,t)||lR(i)},getConflictingClassGroupIds:(i,o)=>{const c=n[i]||[];return o&&r[i]?[...c,...r[i]]:c}}},f5=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?f5(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(cg);return(i=t.validators.find(({validator:o})=>o(a)))==null?void 0:i.classGroupId},Zv=/^\[(.+)\]$/,lR=e=>{if(Zv.test(e)){const t=Zv.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},cR=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return dR(Object.entries(e.classGroups),n).forEach(([a,i])=>{ap(i,r,a,t)}),r},ap=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:ex(t,s);a.classGroupId=n;return}if(typeof s=="function"){if(uR(s)){ap(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,i])=>{ap(i,ex(t,a),n,r)})})},ex=(e,t)=>{let n=e;return t.split(cg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},uR=e=>e.isThemeGetter,dR=(e,t)=>t?e.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,o])=>[t+i,o])):a);return[n,s]}):e,hR=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(a,i)=>{n.set(a,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let i=n.get(a);if(i!==void 0)return i;if((i=r.get(a))!==void 0)return s(a,i),i},set(a,i){n.has(a)?n.set(a,i):s(a,i)}}},m5="!",fR=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],a=t.length,i=o=>{const c=[];let u=0,d=0,h;for(let v=0;v<o.length;v++){let x=o[v];if(u===0){if(x===s&&(r||o.slice(v,v+a)===t)){c.push(o.slice(d,v)),d=v+a;continue}if(x==="/"){h=v;continue}}x==="["?u++:x==="]"&&u--}const f=c.length===0?o:o.substring(d),m=f.startsWith(m5),y=m?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:g}};return n?o=>n({className:o,parseClassName:i}):i},mR=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},pR=e=>({cache:hR(e.cacheSize),parseClassName:fR(e),...oR(e)}),gR=/\s+/,yR=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],i=e.trim().split(gR);let o="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(u);let y=!!m,g=r(y?f.substring(0,m):f);if(!g){if(!y){o=u+(o.length>0?" "+o:o);continue}if(g=r(f),!g){o=u+(o.length>0?" "+o:o);continue}y=!1}const v=mR(d).join(":"),x=h?v+m5:v,b=x+g;if(a.includes(b))continue;a.push(b);const w=s(g,y);for(let S=0;S<w.length;++S){const k=w[S];a.push(x+k)}o=u+(o.length>0?" "+o:o)}return o};function vR(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=p5(t))&&(r&&(r+=" "),r+=n);return r}const p5=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=p5(e[r]))&&(n&&(n+=" "),n+=t);return n};function xR(e,...t){let n,r,s,a=i;function i(c){const u=t.reduce((d,h)=>h(d),e());return n=pR(u),r=n.cache.get,s=n.cache.set,a=o,o(c)}function o(c){const u=r(c);if(u)return u;const d=yR(c,n);return s(c,d),d}return function(){return a(vR.apply(null,arguments))}}const ze=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},g5=/^\[(?:([a-z-]+):)?(.+)\]$/i,wR=/^\d+\/\d+$/,bR=new Set(["px","full","screen"]),SR=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,kR=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jR=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,CR=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ER=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lr=e=>Ii(e)||bR.has(e)||wR.test(e),us=e=>xo(e,"length",DR),Ii=e=>!!e&&!Number.isNaN(Number(e)),mf=e=>xo(e,"number",Ii),Io=e=>!!e&&Number.isInteger(Number(e)),TR=e=>e.endsWith("%")&&Ii(e.slice(0,-1)),fe=e=>g5.test(e),ds=e=>SR.test(e),MR=new Set(["length","size","percentage"]),NR=e=>xo(e,MR,y5),PR=e=>xo(e,"position",y5),_R=new Set(["image","url"]),RR=e=>xo(e,_R,IR),AR=e=>xo(e,"",OR),$o=()=>!0,xo=(e,t,n)=>{const r=g5.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},DR=e=>kR.test(e)&&!jR.test(e),y5=()=>!1,OR=e=>CR.test(e),IR=e=>ER.test(e),$R=()=>{const e=ze("colors"),t=ze("spacing"),n=ze("blur"),r=ze("brightness"),s=ze("borderColor"),a=ze("borderRadius"),i=ze("borderSpacing"),o=ze("borderWidth"),c=ze("contrast"),u=ze("grayscale"),d=ze("hueRotate"),h=ze("invert"),f=ze("gap"),m=ze("gradientColorStops"),y=ze("gradientColorStopPositions"),g=ze("inset"),v=ze("margin"),x=ze("opacity"),b=ze("padding"),w=ze("saturate"),S=ze("scale"),k=ze("sepia"),j=ze("skew"),C=ze("space"),E=ze("translate"),M=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",fe,t],A=()=>[fe,t],L=()=>["",Lr,us],D=()=>["auto",Ii,fe],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],R=()=>["solid","dashed","dotted","double","none"],F=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],_=()=>["start","end","center","between","around","evenly","stretch"],P=()=>["","0",fe],O=()=>["auto","avoid","all","avoid-page","page","left","right","column"],I=()=>[Ii,fe];return{cacheSize:500,separator:":",theme:{colors:[$o],spacing:[Lr,us],blur:["none","",ds,fe],brightness:I(),borderColor:[e],borderRadius:["none","","full",ds,fe],borderSpacing:A(),borderWidth:L(),contrast:I(),grayscale:P(),hueRotate:I(),invert:P(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[TR,us],inset:T(),margin:T(),opacity:I(),padding:A(),saturate:I(),scale:I(),sepia:P(),skew:I(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",fe]}],container:["container"],columns:[{columns:[ds]}],"break-after":[{"break-after":O()}],"break-before":[{"break-before":O()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),fe]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Io,fe]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fe]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",Io,fe]}],"grid-cols":[{"grid-cols":[$o]}],"col-start-end":[{col:["auto",{span:["full",Io,fe]},fe]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[$o]}],"row-start-end":[{row:["auto",{span:[Io,fe]},fe]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fe]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",..._()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",..._(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[..._(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",fe,t]}],"min-w":[{"min-w":[fe,t,"min","max","fit"]}],"max-w":[{"max-w":[fe,t,"none","full","min","max","fit","prose",{screen:[ds]},ds]}],h:[{h:[fe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[fe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[fe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[fe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ds,us]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",mf]}],"font-family":[{font:[$o]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fe]}],"line-clamp":[{"line-clamp":["none",Ii,mf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Lr,fe]}],"list-image":[{"list-image":["none",fe]}],"list-style-type":[{list:["none","disc","decimal",fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...R(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Lr,us]}],"underline-offset":[{"underline-offset":["auto",Lr,fe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),PR]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",NR]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},RR]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...R(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:R()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...R()]}],"outline-offset":[{"outline-offset":[Lr,fe]}],"outline-w":[{outline:[Lr,us]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Lr,us]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ds,AR]}],"shadow-color":[{shadow:[$o]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...F(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":F()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ds,fe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fe]}],duration:[{duration:I()}],ease:[{ease:["linear","in","out","in-out",fe]}],delay:[{delay:I()}],animate:[{animate:["none","spin","ping","pulse","bounce",fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Io,fe]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Lr,us,mf]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},LR=xR($R);function q(...e){return LR(r5(e))}const FR=I_,v5=p.forwardRef(({className:e,...t},n)=>l.jsx(XS,{ref:n,className:q("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));v5.displayName=XS.displayName;const zR=nh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),x5=p.forwardRef(({className:e,variant:t,...n},r)=>l.jsx(QS,{ref:r,className:q(zR({variant:t}),e),...n}));x5.displayName=QS.displayName;const BR=p.forwardRef(({className:e,...t},n)=>l.jsx(e5,{ref:n,className:q("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));BR.displayName=e5.displayName;const w5=p.forwardRef(({className:e,...t},n)=>l.jsx(t5,{ref:n,className:q("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:l.jsx(vo,{className:"h-4 w-4"})}));w5.displayName=t5.displayName;const b5=p.forwardRef(({className:e,...t},n)=>l.jsx(JS,{ref:n,className:q("text-sm font-semibold",e),...t}));b5.displayName=JS.displayName;const S5=p.forwardRef(({className:e,...t},n)=>l.jsx(ZS,{ref:n,className:q("text-sm opacity-90",e),...t}));S5.displayName=ZS.displayName;function VR(){const{toasts:e}=HP();return l.jsxs(FR,{children:[e.map(function({id:t,title:n,description:r,action:s,...a}){return l.jsxs(x5,{...a,children:[l.jsxs("div",{className:"grid gap-1",children:[n&&l.jsx(b5,{children:n}),r&&l.jsx(S5,{children:r})]}),s,l.jsx(w5,{})]},t)}),l.jsx(v5,{})]})}var tx=["light","dark"],UR="(prefers-color-scheme: dark)",WR=p.createContext(void 0),HR={setTheme:e=>{},themes:[]},GR=()=>{var e;return(e=p.useContext(WR))!=null?e:HR};p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:i,attrs:o,nonce:c})=>{let u=a==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?tx.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(y,g=!1,v=!0)=>{let x=i?i[y]:y,b=g?y+"|| ''":`'${x}'`,w="";return s&&v&&!g&&tx.includes(y)&&(w+=`d.style.colorScheme = '${y}';`),n==="class"?g||x?w+=`c.add(${b})`:w+="null":x&&(w+=`d[s](n,${b})`),w},m=e?`!function(){${d}${f(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${UR}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}${u?"":"else{"+f(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var KR=e=>{switch(e){case"success":return XR;case"info":return JR;case"warning":return QR;case"error":return ZR;default:return null}},qR=Array(12).fill(0),YR=({visible:e,className:t})=>G.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},G.createElement("div",{className:"sonner-spinner"},qR.map((n,r)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),XR=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),QR=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),JR=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ZR=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),eA=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),tA=()=>{let[e,t]=G.useState(document.hidden);return G.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},ip=1,nA=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:ip++,a=this.toasts.find(o=>o.id===s),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(o=>o.id===s?(this.publish({...o,...e,id:s,title:n}),{...o,...e,id:s,dismissible:i,title:n}):o):this.addToast({title:n,...r,dismissible:i,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0,a,i=r.then(async c=>{if(a=["resolve",c],G.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(sA(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(a=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),o=()=>new Promise((c,u)=>i.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:o}:Object.assign(n,{unwrap:o})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||ip++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},rn=new nA,rA=(e,t)=>{let n=(t==null?void 0:t.id)||ip++;return rn.addToast({title:e,...t,id:n}),n},sA=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",aA=rA,iA=()=>rn.toasts,oA=()=>rn.getActiveToasts(),an=Object.assign(aA,{success:rn.success,info:rn.info,warning:rn.warning,error:rn.error,custom:rn.custom,message:rn.message,promise:rn.promise,dismiss:rn.dismiss,loading:rn.loading},{getHistory:iA,getToasts:oA});function lA(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}lA(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Hc(e){return e.label!==void 0}var cA=3,uA="32px",dA="16px",nx=4e3,hA=356,fA=14,mA=20,pA=200;function Xn(...e){return e.filter(Boolean).join(" ")}function gA(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var yA=e=>{var t,n,r,s,a,i,o,c,u,d,h;let{invert:f,toast:m,unstyled:y,interacting:g,setHeights:v,visibleToasts:x,heights:b,index:w,toasts:S,expanded:k,removeToast:j,defaultRichColors:C,closeButton:E,style:M,cancelButtonStyle:N,actionButtonStyle:T,className:A="",descriptionClassName:L="",duration:D,position:H,gap:R,loadingIcon:F,expandByDefault:_,classNames:P,icons:O,closeButtonAriaLabel:I="Close toast",pauseWhenPageIsHidden:U}=e,[B,Z]=G.useState(null),[K,ee]=G.useState(null),[V,xe]=G.useState(!1),[De,ke]=G.useState(!1),[ve,we]=G.useState(!1),[pe,J]=G.useState(!1),[ue,je]=G.useState(!1),[gt,Rt]=G.useState(0),[_n,hn]=G.useState(0),Pe=G.useRef(m.duration||D||nx),bt=G.useRef(null),ct=G.useRef(null),en=w===0,yr=w+1<=x,ut=m.type,At=m.dismissible!==!1,$r=m.className||"",Ka=m.descriptionClassName||"",z=G.useMemo(()=>b.findIndex(le=>le.toastId===m.id)||0,[b,m.id]),ge=G.useMemo(()=>{var le;return(le=m.closeButton)!=null?le:E},[m.closeButton,E]),Y=G.useMemo(()=>m.duration||D||nx,[m.duration,D]),oe=G.useRef(0),de=G.useRef(0),Se=G.useRef(0),Ce=G.useRef(null),[et,We]=H.split("-"),ls=G.useMemo(()=>b.reduce((le,Me,Ie)=>Ie>=z?le:le+Me.height,0),[b,z]),tt=tA(),He=m.invert||f,Oe=ut==="loading";de.current=G.useMemo(()=>z*R+ls,[z,ls]),G.useEffect(()=>{Pe.current=Y},[Y]),G.useEffect(()=>{xe(!0)},[]),G.useEffect(()=>{let le=ct.current;if(le){let Me=le.getBoundingClientRect().height;return hn(Me),v(Ie=>[{toastId:m.id,height:Me,position:m.position},...Ie]),()=>v(Ie=>Ie.filter(Dt=>Dt.toastId!==m.id))}},[v,m.id]),G.useLayoutEffect(()=>{if(!V)return;let le=ct.current,Me=le.style.height;le.style.height="auto";let Ie=le.getBoundingClientRect().height;le.style.height=Me,hn(Ie),v(Dt=>Dt.find(he=>he.toastId===m.id)?Dt.map(he=>he.toastId===m.id?{...he,height:Ie}:he):[{toastId:m.id,height:Ie,position:m.position},...Dt])},[V,m.title,m.description,v,m.id]);let fn=G.useCallback(()=>{ke(!0),Rt(de.current),v(le=>le.filter(Me=>Me.toastId!==m.id)),setTimeout(()=>{j(m)},pA)},[m,j,v,de]);G.useEffect(()=>{if(m.promise&&ut==="loading"||m.duration===1/0||m.type==="loading")return;let le;return k||g||U&&tt?(()=>{if(Se.current<oe.current){let Me=new Date().getTime()-oe.current;Pe.current=Pe.current-Me}Se.current=new Date().getTime()})():Pe.current!==1/0&&(oe.current=new Date().getTime(),le=setTimeout(()=>{var Me;(Me=m.onAutoClose)==null||Me.call(m,m),fn()},Pe.current)),()=>clearTimeout(le)},[k,g,m,ut,U,tt,fn]),G.useEffect(()=>{m.delete&&fn()},[fn,m.delete]);function aa(){var le,Me,Ie;return O!=null&&O.loading?G.createElement("div",{className:Xn(P==null?void 0:P.loader,(le=m==null?void 0:m.classNames)==null?void 0:le.loader,"sonner-loader"),"data-visible":ut==="loading"},O.loading):F?G.createElement("div",{className:Xn(P==null?void 0:P.loader,(Me=m==null?void 0:m.classNames)==null?void 0:Me.loader,"sonner-loader"),"data-visible":ut==="loading"},F):G.createElement(YR,{className:Xn(P==null?void 0:P.loader,(Ie=m==null?void 0:m.classNames)==null?void 0:Ie.loader),visible:ut==="loading"})}return G.createElement("li",{tabIndex:0,ref:ct,className:Xn(A,$r,P==null?void 0:P.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,P==null?void 0:P.default,P==null?void 0:P[ut],(n=m==null?void 0:m.classNames)==null?void 0:n[ut]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:C,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":V,"data-promise":!!m.promise,"data-swiped":ue,"data-removed":De,"data-visible":yr,"data-y-position":et,"data-x-position":We,"data-index":w,"data-front":en,"data-swiping":ve,"data-dismissible":At,"data-type":ut,"data-invert":He,"data-swipe-out":pe,"data-swipe-direction":K,"data-expanded":!!(k||_&&V),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${De?gt:de.current}px`,"--initial-height":_?"auto":`${_n}px`,...M,...m.style},onDragEnd:()=>{we(!1),Z(null),Ce.current=null},onPointerDown:le=>{Oe||!At||(bt.current=new Date,Rt(de.current),le.target.setPointerCapture(le.pointerId),le.target.tagName!=="BUTTON"&&(we(!0),Ce.current={x:le.clientX,y:le.clientY}))},onPointerUp:()=>{var le,Me,Ie,Dt;if(pe||!At)return;Ce.current=null;let he=Number(((le=ct.current)==null?void 0:le.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),tn=Number(((Me=ct.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ht=new Date().getTime()-((Ie=bt.current)==null?void 0:Ie.getTime()),dt=B==="x"?he:tn,Gt=Math.abs(dt)/Ht;if(Math.abs(dt)>=mA||Gt>.11){Rt(de.current),(Dt=m.onDismiss)==null||Dt.call(m,m),ee(B==="x"?he>0?"right":"left":tn>0?"down":"up"),fn(),J(!0),je(!1);return}we(!1),Z(null)},onPointerMove:le=>{var Me,Ie,Dt,he;if(!Ce.current||!At||((Me=window.getSelection())==null?void 0:Me.toString().length)>0)return;let tn=le.clientY-Ce.current.y,Ht=le.clientX-Ce.current.x,dt=(Ie=e.swipeDirections)!=null?Ie:gA(H);!B&&(Math.abs(Ht)>1||Math.abs(tn)>1)&&Z(Math.abs(Ht)>Math.abs(tn)?"x":"y");let Gt={x:0,y:0};B==="y"?(dt.includes("top")||dt.includes("bottom"))&&(dt.includes("top")&&tn<0||dt.includes("bottom")&&tn>0)&&(Gt.y=tn):B==="x"&&(dt.includes("left")||dt.includes("right"))&&(dt.includes("left")&&Ht<0||dt.includes("right")&&Ht>0)&&(Gt.x=Ht),(Math.abs(Gt.x)>0||Math.abs(Gt.y)>0)&&je(!0),(Dt=ct.current)==null||Dt.style.setProperty("--swipe-amount-x",`${Gt.x}px`),(he=ct.current)==null||he.style.setProperty("--swipe-amount-y",`${Gt.y}px`)}},ge&&!m.jsx?G.createElement("button",{"aria-label":I,"data-disabled":Oe,"data-close-button":!0,onClick:Oe||!At?()=>{}:()=>{var le;fn(),(le=m.onDismiss)==null||le.call(m,m)},className:Xn(P==null?void 0:P.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(a=O==null?void 0:O.close)!=null?a:eA):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:G.createElement(G.Fragment,null,ut||m.icon||m.promise?G.createElement("div",{"data-icon":"",className:Xn(P==null?void 0:P.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||aa():null,m.type!=="loading"?m.icon||(O==null?void 0:O[ut])||KR(ut):null):null,G.createElement("div",{"data-content":"",className:Xn(P==null?void 0:P.content,(o=m==null?void 0:m.classNames)==null?void 0:o.content)},G.createElement("div",{"data-title":"",className:Xn(P==null?void 0:P.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?G.createElement("div",{"data-description":"",className:Xn(L,Ka,P==null?void 0:P.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&Hc(m.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||N,onClick:le=>{var Me,Ie;Hc(m.cancel)&&At&&((Ie=(Me=m.cancel).onClick)==null||Ie.call(Me,le),fn())},className:Xn(P==null?void 0:P.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&Hc(m.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||T,onClick:le=>{var Me,Ie;Hc(m.action)&&((Ie=(Me=m.action).onClick)==null||Ie.call(Me,le),!le.defaultPrevented&&fn())},className:Xn(P==null?void 0:P.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function rx(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function vA(e,t){let n={};return[e,t].forEach((r,s)=>{let a=s===1,i=a?"--mobile-offset":"--offset",o=a?dA:uA;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${i}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${i}-${u}`]=o:n[`${i}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(o)}),n}var xA=p.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:i,className:o,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:y=cA,toastOptions:g,dir:v=rx(),gap:x=fA,loadingIcon:b,icons:w,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:k}=e,[j,C]=G.useState([]),E=G.useMemo(()=>Array.from(new Set([r].concat(j.filter(U=>U.position).map(U=>U.position)))),[j,r]),[M,N]=G.useState([]),[T,A]=G.useState(!1),[L,D]=G.useState(!1),[H,R]=G.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),F=G.useRef(null),_=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),P=G.useRef(null),O=G.useRef(!1),I=G.useCallback(U=>{C(B=>{var Z;return(Z=B.find(K=>K.id===U.id))!=null&&Z.delete||rn.dismiss(U.id),B.filter(({id:K})=>K!==U.id)})},[]);return G.useEffect(()=>rn.subscribe(U=>{if(U.dismiss){C(B=>B.map(Z=>Z.id===U.id?{...Z,delete:!0}:Z));return}setTimeout(()=>{MS.flushSync(()=>{C(B=>{let Z=B.findIndex(K=>K.id===U.id);return Z!==-1?[...B.slice(0,Z),{...B[Z],...U},...B.slice(Z+1)]:[U,...B]})})})}),[]),G.useEffect(()=>{if(d!=="system"){R(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?R("dark"):R("light")),typeof window>"u")return;let U=window.matchMedia("(prefers-color-scheme: dark)");try{U.addEventListener("change",({matches:B})=>{R(B?"dark":"light")})}catch{U.addListener(({matches:Z})=>{try{R(Z?"dark":"light")}catch(K){console.error(K)}})}},[d]),G.useEffect(()=>{j.length<=1&&A(!1)},[j]),G.useEffect(()=>{let U=B=>{var Z,K;s.every(ee=>B[ee]||B.code===ee)&&(A(!0),(Z=F.current)==null||Z.focus()),B.code==="Escape"&&(document.activeElement===F.current||(K=F.current)!=null&&K.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[s]),G.useEffect(()=>{if(F.current)return()=>{P.current&&(P.current.focus({preventScroll:!0}),P.current=null,O.current=!1)}},[F.current]),G.createElement("section",{ref:t,"aria-label":`${S} ${_}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((U,B)=>{var Z;let[K,ee]=U.split("-");return j.length?G.createElement("ol",{key:U,dir:v==="auto"?rx():v,tabIndex:-1,ref:F,className:o,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":K,"data-lifted":T&&j.length>1&&!a,"data-x-position":ee,style:{"--front-toast-height":`${((Z=M[0])==null?void 0:Z.height)||0}px`,"--width":`${hA}px`,"--gap":`${x}px`,...m,...vA(c,u)},onBlur:V=>{O.current&&!V.currentTarget.contains(V.relatedTarget)&&(O.current=!1,P.current&&(P.current.focus({preventScroll:!0}),P.current=null))},onFocus:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||O.current||(O.current=!0,P.current=V.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{L||A(!1)},onDragEnd:()=>A(!1),onPointerDown:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||D(!0)},onPointerUp:()=>D(!1)},j.filter(V=>!V.position&&B===0||V.position===U).map((V,xe)=>{var De,ke;return G.createElement(yA,{key:V.id,icons:w,index:xe,toast:V,defaultRichColors:h,duration:(De=g==null?void 0:g.duration)!=null?De:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:y,closeButton:(ke=g==null?void 0:g.closeButton)!=null?ke:i,interacting:L,position:U,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:I,toasts:j.filter(ve=>ve.position==V.position),heights:M.filter(ve=>ve.position==V.position),setHeights:N,expandByDefault:a,gap:x,loadingIcon:b,expanded:T,pauseWhenPageIsHidden:k,swipeDirections:e.swipeDirections})})):null}))});const wA=({...e})=>{const{theme:t="system"}=GR();return l.jsx(xA,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var bA=d0[" useId ".trim().toString()]||(()=>{}),SA=0;function Fs(e){const[t,n]=p.useState(bA());return jt(()=>{n(r=>r??String(SA++))},[e]),t?`radix-${t}`:""}const kA=["top","right","bottom","left"],Gs=Math.min,vn=Math.max,ld=Math.round,Gc=Math.floor,_r=e=>({x:e,y:e}),jA={left:"right",right:"left",bottom:"top",top:"bottom"},CA={start:"end",end:"start"};function op(e,t,n){return vn(e,Gs(t,n))}function ns(e,t){return typeof e=="function"?e(t):e}function rs(e){return e.split("-")[0]}function wo(e){return e.split("-")[1]}function ug(e){return e==="x"?"y":"x"}function dg(e){return e==="y"?"height":"width"}const EA=new Set(["top","bottom"]);function Tr(e){return EA.has(rs(e))?"y":"x"}function hg(e){return ug(Tr(e))}function TA(e,t,n){n===void 0&&(n=!1);const r=wo(e),s=hg(e),a=dg(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=cd(i)),[i,cd(i)]}function MA(e){const t=cd(e);return[lp(e),t,lp(t)]}function lp(e){return e.replace(/start|end/g,t=>CA[t])}const sx=["left","right"],ax=["right","left"],NA=["top","bottom"],PA=["bottom","top"];function _A(e,t,n){switch(e){case"top":case"bottom":return n?t?ax:sx:t?sx:ax;case"left":case"right":return t?NA:PA;default:return[]}}function RA(e,t,n,r){const s=wo(e);let a=_A(rs(e),n==="start",r);return s&&(a=a.map(i=>i+"-"+s),t&&(a=a.concat(a.map(lp)))),a}function cd(e){return e.replace(/left|right|bottom|top/g,t=>jA[t])}function AA(e){return{top:0,right:0,bottom:0,left:0,...e}}function k5(e){return typeof e!="number"?AA(e):{top:e,right:e,bottom:e,left:e}}function ud(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function ix(e,t,n){let{reference:r,floating:s}=e;const a=Tr(t),i=hg(t),o=dg(i),c=rs(t),u=a==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[o]/2-s[o]/2;let m;switch(c){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(wo(t)){case"start":m[i]-=f*(n&&u?-1:1);break;case"end":m[i]+=f*(n&&u?-1:1);break}return m}const DA=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:i}=n,o=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=ix(u,r,c),f=r,m={},y=0;for(let g=0;g<o.length;g++){const{name:v,fn:x}=o[g],{x:b,y:w,data:S,reset:k}=await x({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:u,platform:i,elements:{reference:e,floating:t}});d=b??d,h=w??h,m={...m,[v]:{...m[v],...S}},k&&y<=50&&(y++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(u=k.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):k.rects),{x:d,y:h}=ix(u,f,c)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function Ol(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:i,elements:o,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=ns(t,e),y=k5(m),v=o[f?h==="floating"?"reference":"floating":h],x=ud(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(v)))==null||n?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:c})),b=h==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),S=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},k=ud(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:b,offsetParent:w,strategy:c}):b);return{top:(x.top-k.top+y.top)/S.y,bottom:(k.bottom-x.bottom+y.bottom)/S.y,left:(x.left-k.left+y.left)/S.x,right:(k.right-x.right+y.right)/S.x}}const OA=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:i,elements:o,middlewareData:c}=t,{element:u,padding:d=0}=ns(e,t)||{};if(u==null)return{};const h=k5(d),f={x:n,y:r},m=hg(s),y=dg(m),g=await i.getDimensions(u),v=m==="y",x=v?"top":"left",b=v?"bottom":"right",w=v?"clientHeight":"clientWidth",S=a.reference[y]+a.reference[m]-f[m]-a.floating[y],k=f[m]-a.reference[m],j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let C=j?j[w]:0;(!C||!await(i.isElement==null?void 0:i.isElement(j)))&&(C=o.floating[w]||a.floating[y]);const E=S/2-k/2,M=C/2-g[y]/2-1,N=Gs(h[x],M),T=Gs(h[b],M),A=N,L=C-g[y]-T,D=C/2-g[y]/2+E,H=op(A,D,L),R=!c.arrow&&wo(s)!=null&&D!==H&&a.reference[y]/2-(D<A?N:T)-g[y]/2<0,F=R?D<A?D-A:D-L:0;return{[m]:f[m]+F,data:{[m]:H,centerOffset:D-H-F,...R&&{alignmentOffset:F}},reset:R}}}),IA=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:i,initialPlacement:o,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...v}=ns(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=rs(s),b=Tr(o),w=rs(o)===o,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),k=f||(w||!g?[cd(o)]:MA(o)),j=y!=="none";!f&&j&&k.push(...RA(o,g,y,S));const C=[o,...k],E=await Ol(t,v),M=[];let N=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&M.push(E[x]),h){const D=TA(s,i,S);M.push(E[D[0]],E[D[1]])}if(N=[...N,{placement:s,overflows:M}],!M.every(D=>D<=0)){var T,A;const D=(((T=a.flip)==null?void 0:T.index)||0)+1,H=C[D];if(H&&(!(h==="alignment"?b!==Tr(H):!1)||N.every(_=>_.overflows[0]>0&&Tr(_.placement)===b)))return{data:{index:D,overflows:N},reset:{placement:H}};let R=(A=N.filter(F=>F.overflows[0]<=0).sort((F,_)=>F.overflows[1]-_.overflows[1])[0])==null?void 0:A.placement;if(!R)switch(m){case"bestFit":{var L;const F=(L=N.filter(_=>{if(j){const P=Tr(_.placement);return P===b||P==="y"}return!0}).map(_=>[_.placement,_.overflows.filter(P=>P>0).reduce((P,O)=>P+O,0)]).sort((_,P)=>_[1]-P[1])[0])==null?void 0:L[0];F&&(R=F);break}case"initialPlacement":R=o;break}if(s!==R)return{reset:{placement:R}}}return{}}}};function ox(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function lx(e){return kA.some(t=>e[t]>=0)}const $A=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=ns(e,t);switch(r){case"referenceHidden":{const a=await Ol(t,{...s,elementContext:"reference"}),i=ox(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:lx(i)}}}case"escaped":{const a=await Ol(t,{...s,altBoundary:!0}),i=ox(a,n.floating);return{data:{escapedOffsets:i,escaped:lx(i)}}}default:return{}}}}},j5=new Set(["left","top"]);async function LA(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=rs(n),o=wo(n),c=Tr(n)==="y",u=j5.has(i)?-1:1,d=a&&c?-1:1,h=ns(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:y}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof y=="number"&&(m=o==="end"?y*-1:y),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const FA=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:i,middlewareData:o}=t,c=await LA(t,e);return i===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},zA=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:o={fn:v=>{let{x,y:b}=v;return{x,y:b}}},...c}=ns(e,t),u={x:n,y:r},d=await Ol(t,c),h=Tr(rs(s)),f=ug(h);let m=u[f],y=u[h];if(a){const v=f==="y"?"top":"left",x=f==="y"?"bottom":"right",b=m+d[v],w=m-d[x];m=op(b,m,w)}if(i){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",b=y+d[v],w=y-d[x];y=op(b,y,w)}const g=o.fn({...t,[f]:m,[h]:y});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:a,[h]:i}}}}}},BA=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:i}=t,{offset:o=0,mainAxis:c=!0,crossAxis:u=!0}=ns(e,t),d={x:n,y:r},h=Tr(s),f=ug(h);let m=d[f],y=d[h];const g=ns(o,t),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=f==="y"?"height":"width",S=a.reference[f]-a.floating[w]+v.mainAxis,k=a.reference[f]+a.reference[w]-v.mainAxis;m<S?m=S:m>k&&(m=k)}if(u){var x,b;const w=f==="y"?"width":"height",S=j5.has(rs(s)),k=a.reference[h]-a.floating[w]+(S&&((x=i.offset)==null?void 0:x[h])||0)+(S?0:v.crossAxis),j=a.reference[h]+a.reference[w]+(S?0:((b=i.offset)==null?void 0:b[h])||0)-(S?v.crossAxis:0);y<k?y=k:y>j&&(y=j)}return{[f]:m,[h]:y}}}},VA=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:i,elements:o}=t,{apply:c=()=>{},...u}=ns(e,t),d=await Ol(t,u),h=rs(s),f=wo(s),m=Tr(s)==="y",{width:y,height:g}=a.floating;let v,x;h==="top"||h==="bottom"?(v=h,x=f===(await(i.isRTL==null?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(x=h,v=f==="end"?"top":"bottom");const b=g-d.top-d.bottom,w=y-d.left-d.right,S=Gs(g-d[v],b),k=Gs(y-d[x],w),j=!t.middlewareData.shift;let C=S,E=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(E=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(C=b),j&&!f){const N=vn(d.left,0),T=vn(d.right,0),A=vn(d.top,0),L=vn(d.bottom,0);m?E=y-2*(N!==0||T!==0?N+T:vn(d.left,d.right)):C=g-2*(A!==0||L!==0?A+L:vn(d.top,d.bottom))}await c({...t,availableWidth:E,availableHeight:C});const M=await i.getDimensions(o.floating);return y!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function sh(){return typeof window<"u"}function bo(e){return C5(e)?(e.nodeName||"").toLowerCase():"#document"}function Cn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Or(e){var t;return(t=(C5(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function C5(e){return sh()?e instanceof Node||e instanceof Cn(e).Node:!1}function mr(e){return sh()?e instanceof Element||e instanceof Cn(e).Element:!1}function Dr(e){return sh()?e instanceof HTMLElement||e instanceof Cn(e).HTMLElement:!1}function cx(e){return!sh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Cn(e).ShadowRoot}const UA=new Set(["inline","contents"]);function hc(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=pr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!UA.has(s)}const WA=new Set(["table","td","th"]);function HA(e){return WA.has(bo(e))}const GA=[":popover-open",":modal"];function ah(e){return GA.some(t=>{try{return e.matches(t)}catch{return!1}})}const KA=["transform","translate","scale","rotate","perspective"],qA=["transform","translate","scale","rotate","perspective","filter"],YA=["paint","layout","strict","content"];function fg(e){const t=mg(),n=mr(e)?pr(e):e;return KA.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||qA.some(r=>(n.willChange||"").includes(r))||YA.some(r=>(n.contain||"").includes(r))}function XA(e){let t=Ks(e);for(;Dr(t)&&!lo(t);){if(fg(t))return t;if(ah(t))return null;t=Ks(t)}return null}function mg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const QA=new Set(["html","body","#document"]);function lo(e){return QA.has(bo(e))}function pr(e){return Cn(e).getComputedStyle(e)}function ih(e){return mr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ks(e){if(bo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||cx(e)&&e.host||Or(e);return cx(t)?t.host:t}function E5(e){const t=Ks(e);return lo(t)?e.ownerDocument?e.ownerDocument.body:e.body:Dr(t)&&hc(t)?t:E5(t)}function Il(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=E5(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),i=Cn(s);if(a){const o=cp(i);return t.concat(i,i.visualViewport||[],hc(s)?s:[],o&&n?Il(o):[])}return t.concat(s,Il(s,[],n))}function cp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function T5(e){const t=pr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Dr(e),a=s?e.offsetWidth:n,i=s?e.offsetHeight:r,o=ld(n)!==a||ld(r)!==i;return o&&(n=a,r=i),{width:n,height:r,$:o}}function pg(e){return mr(e)?e:e.contextElement}function $i(e){const t=pg(e);if(!Dr(t))return _r(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=T5(t);let i=(a?ld(n.width):n.width)/r,o=(a?ld(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!o||!Number.isFinite(o))&&(o=1),{x:i,y:o}}const JA=_r(0);function M5(e){const t=Cn(e);return!mg()||!t.visualViewport?JA:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ZA(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Cn(e)?!1:t}function $a(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=pg(e);let i=_r(1);t&&(r?mr(r)&&(i=$i(r)):i=$i(e));const o=ZA(a,n,r)?M5(a):_r(0);let c=(s.left+o.x)/i.x,u=(s.top+o.y)/i.y,d=s.width/i.x,h=s.height/i.y;if(a){const f=Cn(a),m=r&&mr(r)?Cn(r):r;let y=f,g=cp(y);for(;g&&r&&m!==y;){const v=$i(g),x=g.getBoundingClientRect(),b=pr(g),w=x.left+(g.clientLeft+parseFloat(b.paddingLeft))*v.x,S=x.top+(g.clientTop+parseFloat(b.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,h*=v.y,c+=w,u+=S,y=Cn(g),g=cp(y)}}return ud({width:d,height:h,x:c,y:u})}function gg(e,t){const n=ih(e).scrollLeft;return t?t.left+n:$a(Or(e)).left+n}function N5(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:gg(e,r)),a=r.top+t.scrollTop;return{x:s,y:a}}function e3(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",i=Or(r),o=t?ah(t.floating):!1;if(r===i||o&&a)return n;let c={scrollLeft:0,scrollTop:0},u=_r(1);const d=_r(0),h=Dr(r);if((h||!h&&!a)&&((bo(r)!=="body"||hc(i))&&(c=ih(r)),Dr(r))){const m=$a(r);u=$i(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=i&&!h&&!a?N5(i,c,!0):_r(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function t3(e){return Array.from(e.getClientRects())}function n3(e){const t=Or(e),n=ih(e),r=e.ownerDocument.body,s=vn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=vn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+gg(e);const o=-n.scrollTop;return pr(r).direction==="rtl"&&(i+=vn(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:i,y:o}}function r3(e,t){const n=Cn(e),r=Or(e),s=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,o=0,c=0;if(s){a=s.width,i=s.height;const u=mg();(!u||u&&t==="fixed")&&(o=s.offsetLeft,c=s.offsetTop)}return{width:a,height:i,x:o,y:c}}const s3=new Set(["absolute","fixed"]);function a3(e,t){const n=$a(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=Dr(e)?$i(e):_r(1),i=e.clientWidth*a.x,o=e.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:i,height:o,x:c,y:u}}function ux(e,t,n){let r;if(t==="viewport")r=r3(e,n);else if(t==="document")r=n3(Or(e));else if(mr(t))r=a3(t,n);else{const s=M5(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return ud(r)}function P5(e,t){const n=Ks(e);return n===t||!mr(n)||lo(n)?!1:pr(n).position==="fixed"||P5(n,t)}function i3(e,t){const n=t.get(e);if(n)return n;let r=Il(e,[],!1).filter(o=>mr(o)&&bo(o)!=="body"),s=null;const a=pr(e).position==="fixed";let i=a?Ks(e):e;for(;mr(i)&&!lo(i);){const o=pr(i),c=fg(i);!c&&o.position==="fixed"&&(s=null),(a?!c&&!s:!c&&o.position==="static"&&!!s&&s3.has(s.position)||hc(i)&&!c&&P5(e,i))?r=r.filter(d=>d!==i):s=o,i=Ks(i)}return t.set(e,r),r}function o3(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?ah(t)?[]:i3(t,this._c):[].concat(n),r],o=i[0],c=i.reduce((u,d)=>{const h=ux(t,d,s);return u.top=vn(h.top,u.top),u.right=Gs(h.right,u.right),u.bottom=Gs(h.bottom,u.bottom),u.left=vn(h.left,u.left),u},ux(t,o,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function l3(e){const{width:t,height:n}=T5(e);return{width:t,height:n}}function c3(e,t,n){const r=Dr(t),s=Or(t),a=n==="fixed",i=$a(e,!0,a,t);let o={scrollLeft:0,scrollTop:0};const c=_r(0);function u(){c.x=gg(s)}if(r||!r&&!a)if((bo(t)!=="body"||hc(s))&&(o=ih(t)),r){const m=$a(t,!0,a,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else s&&u();a&&!r&&s&&u();const d=s&&!r&&!a?N5(s,o):_r(0),h=i.left+o.scrollLeft-c.x-d.x,f=i.top+o.scrollTop-c.y-d.y;return{x:h,y:f,width:i.width,height:i.height}}function pf(e){return pr(e).position==="static"}function dx(e,t){if(!Dr(e)||pr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Or(e)===n&&(n=n.ownerDocument.body),n}function _5(e,t){const n=Cn(e);if(ah(e))return n;if(!Dr(e)){let s=Ks(e);for(;s&&!lo(s);){if(mr(s)&&!pf(s))return s;s=Ks(s)}return n}let r=dx(e,t);for(;r&&HA(r)&&pf(r);)r=dx(r,t);return r&&lo(r)&&pf(r)&&!fg(r)?n:r||XA(e)||n}const u3=async function(e){const t=this.getOffsetParent||_5,n=this.getDimensions,r=await n(e.floating);return{reference:c3(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function d3(e){return pr(e).direction==="rtl"}const h3={convertOffsetParentRelativeRectToViewportRelativeRect:e3,getDocumentElement:Or,getClippingRect:o3,getOffsetParent:_5,getElementRects:u3,getClientRects:t3,getDimensions:l3,getScale:$i,isElement:mr,isRTL:d3};function R5(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function f3(e,t){let n=null,r;const s=Or(e);function a(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function i(o,c){o===void 0&&(o=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(o||t(),!f||!m)return;const y=Gc(h),g=Gc(s.clientWidth-(d+f)),v=Gc(s.clientHeight-(h+m)),x=Gc(d),w={rootMargin:-y+"px "+-g+"px "+-v+"px "+-x+"px",threshold:vn(0,Gs(1,c))||1};let S=!0;function k(j){const C=j[0].intersectionRatio;if(C!==c){if(!S)return i();C?i(!1,C):r=setTimeout(()=>{i(!1,1e-7)},1e3)}C===1&&!R5(u,e.getBoundingClientRect())&&i(),S=!1}try{n=new IntersectionObserver(k,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(k,w)}n.observe(e)}return i(!0),a}function m3(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=pg(e),d=s||a?[...u?Il(u):[],...Il(t)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const h=u&&o?f3(u,n):null;let f=-1,m=null;i&&(m=new ResizeObserver(x=>{let[b]=x;b&&b.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let y,g=c?$a(e):null;c&&v();function v(){const x=$a(e);g&&!R5(g,x)&&n(),g=x,y=requestAnimationFrame(v)}return n(),()=>{var x;d.forEach(b=>{s&&b.removeEventListener("scroll",n),a&&b.removeEventListener("resize",n)}),h==null||h(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(y)}}const p3=FA,g3=zA,y3=IA,v3=VA,x3=$A,hx=OA,w3=BA,b3=(e,t,n)=>{const r=new Map,s={platform:h3,...n},a={...s.platform,_c:r};return DA(e,t,{...s,platform:a})};var S3=typeof document<"u",k3=function(){},Nu=S3?p.useLayoutEffect:k3;function dd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!dd(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!dd(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function A5(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function fx(e,t){const n=A5(e);return Math.round(t*n)/n}function gf(e){const t=p.useRef(e);return Nu(()=>{t.current=e}),t}function j3(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:i}={},transform:o=!0,whileElementsMounted:c,open:u}=e,[d,h]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=p.useState(r);dd(f,r)||m(r);const[y,g]=p.useState(null),[v,x]=p.useState(null),b=p.useCallback(_=>{_!==j.current&&(j.current=_,g(_))},[]),w=p.useCallback(_=>{_!==C.current&&(C.current=_,x(_))},[]),S=a||y,k=i||v,j=p.useRef(null),C=p.useRef(null),E=p.useRef(d),M=c!=null,N=gf(c),T=gf(s),A=gf(u),L=p.useCallback(()=>{if(!j.current||!C.current)return;const _={placement:t,strategy:n,middleware:f};T.current&&(_.platform=T.current),b3(j.current,C.current,_).then(P=>{const O={...P,isPositioned:A.current!==!1};D.current&&!dd(E.current,O)&&(E.current=O,ea.flushSync(()=>{h(O)}))})},[f,t,n,T,A]);Nu(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(_=>({..._,isPositioned:!1})))},[u]);const D=p.useRef(!1);Nu(()=>(D.current=!0,()=>{D.current=!1}),[]),Nu(()=>{if(S&&(j.current=S),k&&(C.current=k),S&&k){if(N.current)return N.current(S,k,L);L()}},[S,k,L,N,M]);const H=p.useMemo(()=>({reference:j,floating:C,setReference:b,setFloating:w}),[b,w]),R=p.useMemo(()=>({reference:S,floating:k}),[S,k]),F=p.useMemo(()=>{const _={position:n,left:0,top:0};if(!R.floating)return _;const P=fx(R.floating,d.x),O=fx(R.floating,d.y);return o?{..._,transform:"translate("+P+"px, "+O+"px)",...A5(R.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:P,top:O}},[n,o,R.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:L,refs:H,elements:R,floatingStyles:F}),[d,L,H,R,F])}const C3=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?hx({element:r.current,padding:s}).fn(n):{}:r?hx({element:r,padding:s}).fn(n):{}}}},E3=(e,t)=>({...p3(e),options:[e,t]}),T3=(e,t)=>({...g3(e),options:[e,t]}),M3=(e,t)=>({...w3(e),options:[e,t]}),N3=(e,t)=>({...y3(e),options:[e,t]}),P3=(e,t)=>({...v3(e),options:[e,t]}),_3=(e,t)=>({...x3(e),options:[e,t]}),R3=(e,t)=>({...C3(e),options:[e,t]});var A3="Arrow",D5=p.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return l.jsx(ne.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});D5.displayName=A3;var D3=D5;function yg(e){const[t,n]=p.useState(void 0);return jt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,o;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,o=u.blockSize}else i=e.offsetWidth,o=e.offsetHeight;n({width:i,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var vg="Popper",[O5,oh]=Gn(vg),[O3,I5]=O5(vg),$5=e=>{const{__scopePopper:t,children:n}=e,[r,s]=p.useState(null);return l.jsx(O3,{scope:t,anchor:r,onAnchorChange:s,children:n})};$5.displayName=vg;var L5="PopperAnchor",F5=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=I5(L5,n),i=p.useRef(null),o=ye(t,i);return p.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:l.jsx(ne.div,{...s,ref:o})});F5.displayName=L5;var xg="PopperContent",[I3,$3]=O5(xg),z5=p.forwardRef((e,t)=>{var V,xe,De,ke,ve,we;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:o=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:y,...g}=e,v=I5(xg,n),[x,b]=p.useState(null),w=ye(t,pe=>b(pe)),[S,k]=p.useState(null),j=yg(S),C=(j==null?void 0:j.width)??0,E=(j==null?void 0:j.height)??0,M=r+(a!=="center"?"-"+a:""),N=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},T=Array.isArray(u)?u:[u],A=T.length>0,L={padding:N,boundary:T.filter(F3),altBoundary:A},{refs:D,floatingStyles:H,placement:R,isPositioned:F,middlewareData:_}=j3({strategy:"fixed",placement:M,whileElementsMounted:(...pe)=>m3(...pe,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[E3({mainAxis:s+E,alignmentAxis:i}),c&&T3({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?M3():void 0,...L}),c&&N3({...L}),P3({...L,apply:({elements:pe,rects:J,availableWidth:ue,availableHeight:je})=>{const{width:gt,height:Rt}=J.reference,_n=pe.floating.style;_n.setProperty("--radix-popper-available-width",`${ue}px`),_n.setProperty("--radix-popper-available-height",`${je}px`),_n.setProperty("--radix-popper-anchor-width",`${gt}px`),_n.setProperty("--radix-popper-anchor-height",`${Rt}px`)}}),S&&R3({element:S,padding:o}),z3({arrowWidth:C,arrowHeight:E}),f&&_3({strategy:"referenceHidden",...L})]}),[P,O]=U5(R),I=xt(y);jt(()=>{F&&(I==null||I())},[F,I]);const U=(V=_.arrow)==null?void 0:V.x,B=(xe=_.arrow)==null?void 0:xe.y,Z=((De=_.arrow)==null?void 0:De.centerOffset)!==0,[K,ee]=p.useState();return jt(()=>{x&&ee(window.getComputedStyle(x).zIndex)},[x]),l.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:F?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(ke=_.transformOrigin)==null?void 0:ke.x,(ve=_.transformOrigin)==null?void 0:ve.y].join(" "),...((we=_.hide)==null?void 0:we.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:l.jsx(I3,{scope:n,placedSide:P,onArrowChange:k,arrowX:U,arrowY:B,shouldHideArrow:Z,children:l.jsx(ne.div,{"data-side":P,"data-align":O,...g,ref:w,style:{...g.style,animation:F?void 0:"none"}})})})});z5.displayName=xg;var B5="PopperArrow",L3={top:"bottom",right:"left",bottom:"top",left:"right"},V5=p.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=$3(B5,r),i=L3[a.placedSide];return l.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:l.jsx(D3,{...s,ref:n,style:{...s.style,display:"block"}})})});V5.displayName=B5;function F3(e){return e!==null}var z3=e=>({name:"transformOrigin",options:e,fn(t){var v,x,b;const{placement:n,rects:r,middlewareData:s}=t,i=((v=s.arrow)==null?void 0:v.centerOffset)!==0,o=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,d]=U5(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((x=s.arrow)==null?void 0:x.x)??0)+o/2,m=(((b=s.arrow)==null?void 0:b.y)??0)+c/2;let y="",g="";return u==="bottom"?(y=i?h:`${f}px`,g=`${-c}px`):u==="top"?(y=i?h:`${f}px`,g=`${r.floating.height+c}px`):u==="right"?(y=`${-c}px`,g=i?h:`${m}px`):u==="left"&&(y=`${r.floating.width+c}px`,g=i?h:`${m}px`),{data:{x:y,y:g}}}});function U5(e){const[t,n="center"]=e.split("-");return[t,n]}var B3=$5,W5=F5,H5=z5,G5=V5,[lh]=Gn("Tooltip",[oh]),wg=oh(),K5="TooltipProvider",V3=700,mx="tooltip.open",[U3,q5]=lh(K5),Y5=e=>{const{__scopeTooltip:t,delayDuration:n=V3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,i=p.useRef(!0),o=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),l.jsx(U3,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:p.useCallback(u=>{o.current=u},[]),disableHoverableContent:s,children:a})};Y5.displayName=K5;var X5="Tooltip",[aK,ch]=lh(X5),up="TooltipTrigger",W3=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=ch(up,n),a=q5(up,n),i=wg(n),o=p.useRef(null),c=ye(t,o,s.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),h=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),l.jsx(W5,{asChild:!0,...i,children:l.jsx(ne.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Q(e.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Q(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Q(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Q(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:Q(e.onBlur,s.onClose),onClick:Q(e.onClick,s.onClose)})})});W3.displayName=up;var H3="TooltipPortal",[iK,G3]=lh(H3,{forceMount:void 0}),co="TooltipContent",Q5=p.forwardRef((e,t)=>{const n=G3(co,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,i=ch(co,e.__scopeTooltip);return l.jsx(Kn,{present:r||i.open,children:i.disableHoverableContent?l.jsx(J5,{side:s,...a,ref:t}):l.jsx(K3,{side:s,...a,ref:t})})}),K3=p.forwardRef((e,t)=>{const n=ch(co,e.__scopeTooltip),r=q5(co,e.__scopeTooltip),s=p.useRef(null),a=ye(t,s),[i,o]=p.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,f=p.useCallback(()=>{o(null),h(!1)},[h]),m=p.useCallback((y,g)=>{const v=y.currentTarget,x={x:y.clientX,y:y.clientY},b=J3(x,v.getBoundingClientRect()),w=Z3(x,b),S=e4(g.getBoundingClientRect()),k=n4([...w,...S]);o(k),h(!0)},[h]);return p.useEffect(()=>()=>f(),[f]),p.useEffect(()=>{if(c&&d){const y=v=>m(v,d),g=v=>m(v,c);return c.addEventListener("pointerleave",y),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",g)}}},[c,d,m,f]),p.useEffect(()=>{if(i){const y=g=>{const v=g.target,x={x:g.clientX,y:g.clientY},b=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),w=!t4(x,i);b?f():w&&(f(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,d,i,u,f]),l.jsx(J5,{...e,ref:a})}),[q3,Y3]=lh(X5,{isInside:!1}),X3=XP("TooltipContent"),J5=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...o}=e,c=ch(co,n),u=wg(n),{onClose:d}=c;return p.useEffect(()=>(document.addEventListener(mx,d),()=>document.removeEventListener(mx,d)),[d]),p.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),l.jsx(lc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:l.jsxs(H5,{"data-state":c.stateAttribute,...u,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(X3,{children:r}),l.jsx(q3,{scope:n,isInside:!0,children:l.jsx(v_,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Q5.displayName=co;var Z5="TooltipArrow",Q3=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=wg(n);return Y3(Z5,n).isInside?null:l.jsx(G5,{...s,...r,ref:t})});Q3.displayName=Z5;function J3(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Z3(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function e4(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function t4(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const o=t[a],c=t[i],u=o.x,d=o.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function n4(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),r4(t)}function r4(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var s4=Y5,ek=Q5;const a4=s4,i4=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>l.jsx(ek,{ref:r,sideOffset:t,className:q("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));i4.displayName=ek.displayName;var uh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dh=typeof window>"u"||"Deno"in globalThis;function rr(){}function o4(e,t){return typeof e=="function"?e(t):e}function l4(e){return typeof e=="number"&&e>=0&&e!==1/0}function c4(e,t){return Math.max(e+(t||0)-Date.now(),0)}function dp(e,t){return typeof e=="function"?e(t):e}function u4(e,t){return typeof e=="function"?e(t):e}function px(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:i,stale:o}=e;if(i){if(r){if(t.queryHash!==bg(i,t.options))return!1}else if(!Ll(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||s&&s!==t.state.fetchStatus||a&&!a(t))}function gx(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if($l(t.options.mutationKey)!==$l(a))return!1}else if(!Ll(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function bg(e,t){return((t==null?void 0:t.queryKeyHashFn)||$l)(e)}function $l(e){return JSON.stringify(e,(t,n)=>hp(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ll(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Ll(e[n],t[n])):!1}function tk(e,t){if(e===t)return e;const n=yx(e)&&yx(t);if(n||hp(e)&&hp(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),i=a.length,o=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<i;d++){const h=n?d:a[d];(!n&&c.has(h)||n)&&e[h]===void 0&&t[h]===void 0?(o[h]=void 0,u++):(o[h]=tk(e[h],t[h]),o[h]===e[h]&&e[h]!==void 0&&u++)}return s===i&&u===s?e:o}return t}function yx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function hp(e){if(!vx(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!vx(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function vx(e){return Object.prototype.toString.call(e)==="[object Object]"}function d4(e){return new Promise(t=>{setTimeout(t,e)})}function h4(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?tk(e,t):t}function f4(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function m4(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Sg=Symbol();function nk(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Sg?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Sa,Ss,Wi,o1,p4=(o1=class extends uh{constructor(){super();Te(this,Sa);Te(this,Ss);Te(this,Wi);ce(this,Wi,t=>{if(!dh&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){$(this,Ss)||this.setEventListener($(this,Wi))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,Ss))==null||t.call(this),ce(this,Ss,void 0))}setEventListener(t){var n;ce(this,Wi,t),(n=$(this,Ss))==null||n.call(this),ce(this,Ss,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){$(this,Sa)!==t&&(ce(this,Sa,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof $(this,Sa)=="boolean"?$(this,Sa):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Sa=new WeakMap,Ss=new WeakMap,Wi=new WeakMap,o1),rk=new p4,Hi,ks,Gi,l1,g4=(l1=class extends uh{constructor(){super();Te(this,Hi,!0);Te(this,ks);Te(this,Gi);ce(this,Gi,t=>{if(!dh&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){$(this,ks)||this.setEventListener($(this,Gi))}onUnsubscribe(){var t;this.hasListeners()||((t=$(this,ks))==null||t.call(this),ce(this,ks,void 0))}setEventListener(t){var n;ce(this,Gi,t),(n=$(this,ks))==null||n.call(this),ce(this,ks,t(this.setOnline.bind(this)))}setOnline(t){$(this,Hi)!==t&&(ce(this,Hi,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return $(this,Hi)}},Hi=new WeakMap,ks=new WeakMap,Gi=new WeakMap,l1),hd=new g4;function y4(){let e,t;const n=new Promise((s,a)=>{e=s,t=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function v4(e){return Math.min(1e3*2**e,3e4)}function sk(e){return(e??"online")==="online"?hd.isOnline():!0}var ak=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function yf(e){return e instanceof ak}function ik(e){let t=!1,n=0,r=!1,s;const a=y4(),i=g=>{var v;r||(f(new ak(g)),(v=e.abort)==null||v.call(e))},o=()=>{t=!0},c=()=>{t=!1},u=()=>rk.isFocused()&&(e.networkMode==="always"||hd.isOnline())&&e.canRun(),d=()=>sk(e.networkMode)&&e.canRun(),h=g=>{var v;r||(r=!0,(v=e.onSuccess)==null||v.call(e,g),s==null||s(),a.resolve(g))},f=g=>{var v;r||(r=!0,(v=e.onError)==null||v.call(e,g),s==null||s(),a.reject(g))},m=()=>new Promise(g=>{var v;s=x=>{(r||u())&&g(x)},(v=e.onPause)==null||v.call(e)}).then(()=>{var g;s=void 0,r||(g=e.onContinue)==null||g.call(e)}),y=()=>{if(r)return;let g;const v=n===0?e.initialPromise:void 0;try{g=v??e.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(h).catch(x=>{var j;if(r)return;const b=e.retry??(dh?0:3),w=e.retryDelay??v4,S=typeof w=="function"?w(n,x):w,k=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,x);if(t||!k){f(x);return}n++,(j=e.onFail)==null||j.call(e,n,x),d4(S).then(()=>u()?void 0:m()).then(()=>{t?f(x):y()})})};return{promise:a,cancel:i,continue:()=>(s==null||s(),a),cancelRetry:o,continueRetry:c,canStart:d,start:()=>(d()?y():m().then(y),a)}}var x4=e=>setTimeout(e,0);function w4(){let e=[],t=0,n=o=>{o()},r=o=>{o()},s=x4;const a=o=>{t?e.push(o):s(()=>{n(o)})},i=()=>{const o=e;e=[],o.length&&s(()=>{r(()=>{o.forEach(c=>{n(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||i()}return c},batchCalls:o=>(...c)=>{a(()=>{o(...c)})},schedule:a,setNotifyFunction:o=>{n=o},setBatchNotifyFunction:o=>{r=o},setScheduler:o=>{s=o}}}var Yt=w4(),ka,c1,ok=(c1=class{constructor(){Te(this,ka)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),l4(this.gcTime)&&ce(this,ka,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(dh?1/0:5*60*1e3))}clearGcTimeout(){$(this,ka)&&(clearTimeout($(this,ka)),ce(this,ka,void 0))}},ka=new WeakMap,c1),Ki,ja,Dn,Ca,Lt,tc,Ea,ar,zr,u1,b4=(u1=class extends ok{constructor(t){super();Te(this,ar);Te(this,Ki);Te(this,ja);Te(this,Dn);Te(this,Ca);Te(this,Lt);Te(this,tc);Te(this,Ea);ce(this,Ea,!1),ce(this,tc,t.defaultOptions),this.setOptions(t.options),this.observers=[],ce(this,Ca,t.client),ce(this,Dn,$(this,Ca).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ce(this,Ki,k4(this.options)),this.state=t.state??$(this,Ki),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=$(this,Lt))==null?void 0:t.promise}setOptions(t){this.options={...$(this,tc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&$(this,Dn).remove(this)}setData(t,n){const r=h4(this.state.data,t,this.options);return Ot(this,ar,zr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Ot(this,ar,zr).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=$(this,Lt))==null?void 0:r.promise;return(s=$(this,Lt))==null||s.cancel(t),n?n.then(rr).catch(rr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState($(this,Ki))}isActive(){return this.observers.some(t=>u4(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Sg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>dp(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!c4(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=$(this,Lt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=$(this,Lt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),$(this,Dn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||($(this,Lt)&&($(this,Ea)?$(this,Lt).cancel({revert:!0}):$(this,Lt).cancelRetry()),this.scheduleGc()),$(this,Dn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ot(this,ar,zr).call(this,{type:"invalidate"})}fetch(t,n){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if($(this,Lt))return $(this,Lt).continueRetry(),$(this,Lt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(ce(this,Ea,!0),r.signal)})},a=()=>{const f=nk(this.options,n),y=(()=>{const g={client:$(this,Ca),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return ce(this,Ea,!1),this.options.persister?this.options.persister(f,y,this):f(y)},o=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:$(this,Ca),state:this.state,fetchFn:a};return s(f),f})();(u=this.options.behavior)==null||u.onFetch(o,this),ce(this,ja,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&Ot(this,ar,zr).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const c=f=>{var m,y,g,v;yf(f)&&f.silent||Ot(this,ar,zr).call(this,{type:"error",error:f}),yf(f)||((y=(m=$(this,Dn).config).onError)==null||y.call(m,f,this),(v=(g=$(this,Dn).config).onSettled)==null||v.call(g,this.state.data,f,this)),this.scheduleGc()};return ce(this,Lt,ik({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var m,y,g,v;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(x){c(x);return}(y=(m=$(this,Dn).config).onSuccess)==null||y.call(m,f,this),(v=(g=$(this,Dn).config).onSettled)==null||v.call(g,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,m)=>{Ot(this,ar,zr).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{Ot(this,ar,zr).call(this,{type:"pause"})},onContinue:()=>{Ot(this,ar,zr).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),$(this,Lt).start()}},Ki=new WeakMap,ja=new WeakMap,Dn=new WeakMap,Ca=new WeakMap,Lt=new WeakMap,tc=new WeakMap,Ea=new WeakMap,ar=new WeakSet,zr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...S4(r.data,this.options),fetchMeta:t.meta??null};case"success":return ce(this,ja,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return yf(s)&&s.revert&&$(this,ja)?{...$(this,ja),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Yt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),$(this,Dn).notify({query:this,type:"updated",action:t})})},u1);function S4(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sk(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function k4(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var wr,d1,j4=(d1=class extends uh{constructor(t={}){super();Te(this,wr);this.config=t,ce(this,wr,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??bg(s,n);let i=this.get(a);return i||(i=new b4({client:t,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(i)),i}add(t){$(this,wr).has(t.queryHash)||($(this,wr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=$(this,wr).get(t.queryHash);n&&(t.destroy(),n===t&&$(this,wr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Yt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return $(this,wr).get(t)}getAll(){return[...$(this,wr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>px(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>px(t,r)):n}notify(t){Yt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Yt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Yt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},wr=new WeakMap,d1),br,Kt,Ta,Sr,fs,h1,C4=(h1=class extends ok{constructor(t){super();Te(this,Sr);Te(this,br);Te(this,Kt);Te(this,Ta);this.mutationId=t.mutationId,ce(this,Kt,t.mutationCache),ce(this,br,[]),this.state=t.state||E4(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){$(this,br).includes(t)||($(this,br).push(t),this.clearGcTimeout(),$(this,Kt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ce(this,br,$(this,br).filter(n=>n!==t)),this.scheduleGc(),$(this,Kt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){$(this,br).length||(this.state.status==="pending"?this.scheduleGc():$(this,Kt).remove(this))}continue(){var t;return((t=$(this,Ta))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,o,c,u,d,h,f,m,y,g,v,x,b,w,S,k,j,C,E;const n=()=>{Ot(this,Sr,fs).call(this,{type:"continue"})};ce(this,Ta,ik({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(M,N)=>{Ot(this,Sr,fs).call(this,{type:"failed",failureCount:M,error:N})},onPause:()=>{Ot(this,Sr,fs).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>$(this,Kt).canRun(this)}));const r=this.state.status==="pending",s=!$(this,Ta).canStart();try{if(r)n();else{Ot(this,Sr,fs).call(this,{type:"pending",variables:t,isPaused:s}),await((i=(a=$(this,Kt).config).onMutate)==null?void 0:i.call(a,t,this));const N=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,t));N!==this.state.context&&Ot(this,Sr,fs).call(this,{type:"pending",context:N,variables:t,isPaused:s})}const M=await $(this,Ta).start();return await((d=(u=$(this,Kt).config).onSuccess)==null?void 0:d.call(u,M,t,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,M,t,this.state.context)),await((y=(m=$(this,Kt).config).onSettled)==null?void 0:y.call(m,M,null,this.state.variables,this.state.context,this)),await((v=(g=this.options).onSettled)==null?void 0:v.call(g,M,null,t,this.state.context)),Ot(this,Sr,fs).call(this,{type:"success",data:M}),M}catch(M){try{throw await((b=(x=$(this,Kt).config).onError)==null?void 0:b.call(x,M,t,this.state.context,this)),await((S=(w=this.options).onError)==null?void 0:S.call(w,M,t,this.state.context)),await((j=(k=$(this,Kt).config).onSettled)==null?void 0:j.call(k,void 0,M,this.state.variables,this.state.context,this)),await((E=(C=this.options).onSettled)==null?void 0:E.call(C,void 0,M,t,this.state.context)),M}finally{Ot(this,Sr,fs).call(this,{type:"error",error:M})}}finally{$(this,Kt).runNext(this)}}},br=new WeakMap,Kt=new WeakMap,Ta=new WeakMap,Sr=new WeakSet,fs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Yt.batch(()=>{$(this,br).forEach(r=>{r.onMutationUpdate(t)}),$(this,Kt).notify({mutation:this,type:"updated",action:t})})},h1);function E4(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Wr,ir,nc,f1,T4=(f1=class extends uh{constructor(t={}){super();Te(this,Wr);Te(this,ir);Te(this,nc);this.config=t,ce(this,Wr,new Set),ce(this,ir,new Map),ce(this,nc,0)}build(t,n,r){const s=new C4({mutationCache:this,mutationId:++Cc(this,nc)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){$(this,Wr).add(t);const n=Kc(t);if(typeof n=="string"){const r=$(this,ir).get(n);r?r.push(t):$(this,ir).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if($(this,Wr).delete(t)){const n=Kc(t);if(typeof n=="string"){const r=$(this,ir).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&$(this,ir).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Kc(t);if(typeof n=="string"){const r=$(this,ir).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Kc(t);if(typeof n=="string"){const s=(r=$(this,ir).get(n))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Yt.batch(()=>{$(this,Wr).forEach(t=>{this.notify({type:"removed",mutation:t})}),$(this,Wr).clear(),$(this,ir).clear()})}getAll(){return Array.from($(this,Wr))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>gx(n,r))}findAll(t={}){return this.getAll().filter(n=>gx(t,n))}notify(t){Yt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Yt.batch(()=>Promise.all(t.map(n=>n.continue().catch(rr))))}},Wr=new WeakMap,ir=new WeakMap,nc=new WeakMap,f1);function Kc(e){var t;return(t=e.options.scope)==null?void 0:t.id}function xx(e){return{onFetch:(t,n)=>{var d,h,f,m,y;const r=t.options,s=(f=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],i=((y=t.state.data)==null?void 0:y.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},x=nk(t.options,t.fetchOptions),b=async(w,S,k)=>{if(g)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const C=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:S,direction:k?"backward":"forward",meta:t.options.meta};return v(T),T})(),E=await x(C),{maxPages:M}=t.options,N=k?m4:f4;return{pages:N(w.pages,E,M),pageParams:N(w.pageParams,S,M)}};if(s&&a.length){const w=s==="backward",S=w?M4:wx,k={pages:a,pageParams:i},j=S(r,k);o=await b(k,j,w)}else{const w=e??a.length;do{const S=c===0?i[0]??r.initialPageParam:wx(r,o);if(c>0&&S==null)break;o=await b(o,S),c++}while(c<w)}return o};t.options.persister?t.fetchFn=()=>{var g,v;return(v=(g=t.options).persister)==null?void 0:v.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function wx(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function M4(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var nt,js,Cs,qi,Yi,Es,Xi,Qi,m1,N4=(m1=class{constructor(e={}){Te(this,nt);Te(this,js);Te(this,Cs);Te(this,qi);Te(this,Yi);Te(this,Es);Te(this,Xi);Te(this,Qi);ce(this,nt,e.queryCache||new j4),ce(this,js,e.mutationCache||new T4),ce(this,Cs,e.defaultOptions||{}),ce(this,qi,new Map),ce(this,Yi,new Map),ce(this,Es,0)}mount(){Cc(this,Es)._++,$(this,Es)===1&&(ce(this,Xi,rk.subscribe(async e=>{e&&(await this.resumePausedMutations(),$(this,nt).onFocus())})),ce(this,Qi,hd.subscribe(async e=>{e&&(await this.resumePausedMutations(),$(this,nt).onOnline())})))}unmount(){var e,t;Cc(this,Es)._--,$(this,Es)===0&&((e=$(this,Xi))==null||e.call(this),ce(this,Xi,void 0),(t=$(this,Qi))==null||t.call(this),ce(this,Qi,void 0))}isFetching(e){return $(this,nt).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return $(this,js).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=$(this,nt).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=$(this,nt).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(dp(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return $(this,nt).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=$(this,nt).get(r.queryHash),a=s==null?void 0:s.state.data,i=o4(t,a);if(i!==void 0)return $(this,nt).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return Yt.batch(()=>$(this,nt).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=$(this,nt).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=$(this,nt);Yt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=$(this,nt);return Yt.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Yt.batch(()=>$(this,nt).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(rr).catch(rr)}invalidateQueries(e,t={}){return Yt.batch(()=>($(this,nt).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Yt.batch(()=>$(this,nt).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(rr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(rr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=$(this,nt).build(this,t);return n.isStaleByTime(dp(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(rr).catch(rr)}fetchInfiniteQuery(e){return e.behavior=xx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(rr).catch(rr)}ensureInfiniteQueryData(e){return e.behavior=xx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return hd.isOnline()?$(this,js).resumePausedMutations():Promise.resolve()}getQueryCache(){return $(this,nt)}getMutationCache(){return $(this,js)}getDefaultOptions(){return $(this,Cs)}setDefaultOptions(e){ce(this,Cs,e)}setQueryDefaults(e,t){$(this,qi).set($l(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...$(this,qi).values()],n={};return t.forEach(r=>{Ll(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){$(this,Yi).set($l(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...$(this,Yi).values()],n={};return t.forEach(r=>{Ll(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...$(this,Cs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=bg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Sg&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...$(this,Cs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){$(this,nt).clear(),$(this,js).clear()}},nt=new WeakMap,js=new WeakMap,Cs=new WeakMap,qi=new WeakMap,Yi=new WeakMap,Es=new WeakMap,Xi=new WeakMap,Qi=new WeakMap,m1),P4=p.createContext(void 0),_4=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),l.jsx(P4.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fl.apply(this,arguments)}var Ns;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ns||(Ns={}));const bx="popstate";function R4(e){e===void 0&&(e={});function t(r,s){let{pathname:a,search:i,hash:o}=r.location;return fp("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:fd(s)}return D4(t,n,null,e)}function pt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function lk(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function A4(){return Math.random().toString(36).substr(2,8)}function Sx(e,t){return{usr:e.state,key:e.key,idx:t}}function fp(e,t,n,r){return n===void 0&&(n=null),Fl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?So(t):t,{state:n,key:t&&t.key||r||A4()})}function fd(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function So(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function D4(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,o=Ns.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(Fl({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function h(){o=Ns.Pop;let v=d(),x=v==null?null:v-u;u=v,c&&c({action:o,location:g.location,delta:x})}function f(v,x){o=Ns.Push;let b=fp(g.location,v,x);u=d()+1;let w=Sx(b,u),S=g.createHref(b);try{i.pushState(w,"",S)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(S)}a&&c&&c({action:o,location:g.location,delta:1})}function m(v,x){o=Ns.Replace;let b=fp(g.location,v,x);u=d();let w=Sx(b,u),S=g.createHref(b);i.replaceState(w,"",S),a&&c&&c({action:o,location:g.location,delta:0})}function y(v){let x=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof v=="string"?v:fd(v);return b=b.replace(/ $/,"%20"),pt(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let g={get action(){return o},get location(){return e(s,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(bx,h),c=v,()=>{s.removeEventListener(bx,h),c=null}},createHref(v){return t(s,v)},createURL:y,encodeLocation(v){let x=y(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:m,go(v){return i.go(v)}};return g}var kx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(kx||(kx={}));function O4(e,t,n){return n===void 0&&(n="/"),I4(e,t,n)}function I4(e,t,n,r){let s=typeof t=="string"?So(t):t,a=kg(s.pathname||"/",n);if(a==null)return null;let i=ck(e);$4(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let u=Y4(a);o=G4(i[c],u)}return o}function ck(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,i,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(pt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=zs([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(pt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ck(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:W4(u,a.index),routesMeta:d})};return e.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))s(a,i);else for(let c of uk(a.path))s(a,i,c)}),t}function uk(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let i=uk(r.join("/")),o=[];return o.push(...i.map(c=>c===""?a:[a,c].join("/"))),s&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function $4(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:H4(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const L4=/^:[\w-]+$/,F4=3,z4=2,B4=1,V4=10,U4=-2,jx=e=>e==="*";function W4(e,t){let n=e.split("/"),r=n.length;return n.some(jx)&&(r+=U4),t&&(r+=z4),n.filter(s=>!jx(s)).reduce((s,a)=>s+(L4.test(a)?F4:a===""?B4:V4),r)}function H4(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function G4(e,t,n){let{routesMeta:r}=e,s={},a="/",i=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,d=a==="/"?t:t.slice(a.length)||"/",h=K4({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:zs([a,h.pathname]),pathnameBase:Z4(zs([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=zs([a,h.pathnameBase]))}return i}function K4(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=q4(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=o[h]||"";i=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const y=o[h];return m&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function q4(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),lk(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Y4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return lk(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function kg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function X4(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?So(e):e;return{pathname:n?n.startsWith("/")?n:Q4(n,t):t,search:eD(r),hash:tD(s)}}function Q4(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function vf(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function J4(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function dk(e,t){let n=J4(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hk(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=So(e):(s=Fl({},e),pt(!s.pathname||!s.pathname.includes("?"),vf("?","pathname","search",s)),pt(!s.pathname||!s.pathname.includes("#"),vf("#","pathname","hash",s)),pt(!s.search||!s.search.includes("#"),vf("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=n;else{let h=t.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}o=h>=0?t[h]:"/"}let c=X4(s,o),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const zs=e=>e.join("/").replace(/\/\/+/g,"/"),Z4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),eD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,tD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function nD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const fk=["post","put","patch","delete"];new Set(fk);const rD=["get",...fk];new Set(rD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zl.apply(this,arguments)}const jg=p.createContext(null),sD=p.createContext(null),Ua=p.createContext(null),hh=p.createContext(null),ta=p.createContext({outlet:null,matches:[],isDataRoute:!1}),mk=p.createContext(null);function aD(e,t){let{relative:n}=t===void 0?{}:t;fc()||pt(!1);let{basename:r,navigator:s}=p.useContext(Ua),{hash:a,pathname:i,search:o}=gk(e,{relative:n}),c=i;return r!=="/"&&(c=i==="/"?r:zs([r,i])),s.createHref({pathname:c,search:o,hash:a})}function fc(){return p.useContext(hh)!=null}function Wa(){return fc()||pt(!1),p.useContext(hh).location}function pk(e){p.useContext(Ua).static||p.useLayoutEffect(e)}function Cg(){let{isDataRoute:e}=p.useContext(ta);return e?xD():iD()}function iD(){fc()||pt(!1);let e=p.useContext(jg),{basename:t,future:n,navigator:r}=p.useContext(Ua),{matches:s}=p.useContext(ta),{pathname:a}=Wa(),i=JSON.stringify(dk(s,n.v7_relativeSplatPath)),o=p.useRef(!1);return pk(()=>{o.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){r.go(u);return}let h=hk(u,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:zs([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,i,a,e])}function oD(){let{matches:e}=p.useContext(ta),t=e[e.length-1];return t?t.params:{}}function gk(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=p.useContext(Ua),{matches:s}=p.useContext(ta),{pathname:a}=Wa(),i=JSON.stringify(dk(s,r.v7_relativeSplatPath));return p.useMemo(()=>hk(e,JSON.parse(i),a,n==="path"),[e,i,a,n])}function lD(e,t){return cD(e,t)}function cD(e,t,n,r){fc()||pt(!1);let{navigator:s}=p.useContext(Ua),{matches:a}=p.useContext(ta),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=Wa(),d;if(t){var h;let v=typeof t=="string"?So(t):t;c==="/"||(h=v.pathname)!=null&&h.startsWith(c)||pt(!1),d=v}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=O4(e,{pathname:m}),g=mD(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:zs([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:zs([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,n,r);return t&&g?p.createElement(hh.Provider,{value:{location:zl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ns.Pop}},g):g}function uD(){let e=vD(),t=nD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:s},n):null,null)}const dD=p.createElement(uD,null);class hD extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement(ta.Provider,{value:this.props.routeContext},p.createElement(mk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fD(e){let{routeContext:t,match:n,children:r}=e,s=p.useContext(jg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(ta.Provider,{value:t},r)}function mD(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=(s=n)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);d>=0||pt(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,y=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||y){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let m,y=!1,g=null,v=null;n&&(m=o&&h.route.id?o[h.route.id]:void 0,g=h.route.errorElement||dD,c&&(u<0&&f===0?(wD("route-fallback"),y=!0,v=null):u===f&&(y=!0,v=h.route.hydrateFallbackElement||null)));let x=t.concat(i.slice(0,f+1)),b=()=>{let w;return m?w=g:y?w=v:h.route.Component?w=p.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,p.createElement(fD,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?p.createElement(hD,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var yk=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(yk||{}),vk=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(vk||{});function pD(e){let t=p.useContext(jg);return t||pt(!1),t}function gD(e){let t=p.useContext(sD);return t||pt(!1),t}function yD(e){let t=p.useContext(ta);return t||pt(!1),t}function xk(e){let t=yD(),n=t.matches[t.matches.length-1];return n.route.id||pt(!1),n.route.id}function vD(){var e;let t=p.useContext(mk),n=gD(),r=xk();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function xD(){let{router:e}=pD(yk.UseNavigateStable),t=xk(vk.UseNavigateStable),n=p.useRef(!1);return pk(()=>{n.current=!0}),p.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,zl({fromRouteId:t},a)))},[e,t])}const Cx={};function wD(e,t,n){Cx[e]||(Cx[e]=!0)}function bD(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Jn(e){pt(!1)}function SD(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Ns.Pop,navigator:a,static:i=!1,future:o}=e;fc()&&pt(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:a,static:i,future:zl({v7_relativeSplatPath:!1},o)}),[c,o,a,i]);typeof r=="string"&&(r=So(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:y="default"}=r,g=p.useMemo(()=>{let v=kg(d,c);return v==null?null:{location:{pathname:v,search:h,hash:f,state:m,key:y},navigationType:s}},[c,d,h,f,m,y,s]);return g==null?null:p.createElement(Ua.Provider,{value:u},p.createElement(hh.Provider,{children:n,value:g}))}function Ex(e){let{children:t,location:n}=e;return lD(mp(t),n)}new Promise(()=>{});function mp(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,s)=>{if(!p.isValidElement(r))return;let a=[...t,s];if(r.type===p.Fragment){n.push.apply(n,mp(r.props.children,a));return}r.type!==Jn&&pt(!1),!r.props.index||!r.props.children||pt(!1);let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=mp(r.props.children,a)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pp(){return pp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pp.apply(this,arguments)}function kD(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function jD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function CD(e,t){return e.button===0&&(!t||t==="_self")&&!jD(e)}const ED=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],TD="6";try{window.__reactRouterVersion=TD}catch{}const MD="startTransition",Tx=d0[MD];function ND(e){let{basename:t,children:n,future:r,window:s}=e,a=p.useRef();a.current==null&&(a.current=R4({window:s,v5Compat:!0}));let i=a.current,[o,c]=p.useState({action:i.action,location:i.location}),{v7_startTransition:u}=r||{},d=p.useCallback(h=>{u&&Tx?Tx(()=>c(h)):c(h)},[c,u]);return p.useLayoutEffect(()=>i.listen(d),[i,d]),p.useEffect(()=>bD(r),[r]),p.createElement(SD,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const PD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_D=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dn=p.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:a,replace:i,state:o,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=kD(t,ED),{basename:m}=p.useContext(Ua),y,g=!1;if(typeof u=="string"&&_D.test(u)&&(y=u,PD))try{let w=new URL(window.location.href),S=u.startsWith("//")?new URL(w.protocol+u):new URL(u),k=kg(S.pathname,m);S.origin===w.origin&&k!=null?u=k+S.search+S.hash:g=!0}catch{}let v=aD(u,{relative:s}),x=RD(u,{replace:i,state:o,target:c,preventScrollReset:d,relative:s,viewTransition:h});function b(w){r&&r(w),w.defaultPrevented||x(w)}return p.createElement("a",pp({},f,{href:y||v,onClick:g||a?r:b,ref:n,target:c}))});var Mx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Mx||(Mx={}));var Nx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Nx||(Nx={}));function RD(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:i,viewTransition:o}=t===void 0?{}:t,c=Cg(),u=Wa(),d=gk(e,{relative:i});return p.useCallback(h=>{if(CD(h,n)){h.preventDefault();let f=r!==void 0?r:fd(u)===fd(d);c(e,{replace:f,state:s,preventScrollReset:a,relative:i,viewTransition:o})}},[u,c,d,r,s,n,e,a,i,o])}function mc(){const[e,t]=p.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return p.useEffect(()=>{const n=window.matchMedia("(prefers-reduced-motion: reduce)"),r=s=>{t(s.matches)};return n.addEventListener?n.addEventListener("change",r):n.addListener(r),()=>{n.removeEventListener?n.removeEventListener("change",r):n.removeListener(r)}},[]),e}function AD(){const[e,t]=p.useState([]),[n,r]=p.useState(!1);p.useEffect(()=>{const i=()=>{const c=document.documentElement.getAttribute("data-mythic-theme");r(c==="pixelDreamMoon")};i();const o=new MutationObserver(i);return o.observe(document.documentElement,{attributes:!0,attributeFilter:["data-mythic-theme"]}),()=>o.disconnect()},[]);const s=i=>{if(!n)return;const o=i.currentTarget.getBoundingClientRect(),c=i.clientX-o.left,u=i.clientY-o.top,d={id:Date.now(),x:c,y:u,time:0};t(h=>[...h,d]),setTimeout(()=>{t(h=>h.filter(f=>f.id!==d.id))},600)};return p.useEffect(()=>{if(e.length===0)return;const i=setInterval(()=>{t(o=>o.map(c=>({...c,time:c.time+1})))},50);return()=>clearInterval(i)},[e.length]),{createRipple:s,RippleEffect:()=>!n||e.length===0?null:l.jsx(l.Fragment,{children:e.map(i=>{const o=i.time*15,c=Math.max(0,1-i.time/12);return l.jsxs("div",{className:"absolute pointer-events-none",style:{left:i.x,top:i.y,transform:"translate(-50%, -50%)",imageRendering:"pixelated"},children:[l.jsx("div",{style:{width:`${o}px`,height:`${o}px`,border:"3px solid #818cf8",borderRadius:"0",opacity:c*.8,boxShadow:`0 0 ${Math.floor(o/4)}px #818cf8`,transition:"none"}}),l.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:`${o*.6}px`,height:`${o*.6}px`,border:"2px solid #06b6d4",borderRadius:"0",opacity:c,boxShadow:`0 0 ${Math.floor(o/6)}px #06b6d4`}}),i.time<8&&[{x:-o/2,y:-o/2},{x:o/2,y:-o/2},{x:-o/2,y:o/2},{x:o/2,y:o/2}].map((u,d)=>l.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:`translate(calc(-50% + ${u.x}px), calc(-50% + ${u.y}px))`,width:"4px",height:"4px",backgroundColor:"#ffffff",boxShadow:"0 0 4px #ffffff",opacity:c}},d))]},i.id)})}),isPixelTheme:n}}function DD({data:e}){return e?l.jsxs("div",{"aria-hidden":"true",className:"contents",children:[l.jsxs("div",{className:"absolute left-0 right-0 h-[12px] z-50 pointer-events-none overflow-hidden",style:{top:"-12px"},children:[l.jsx("div",{className:"absolute bottom-0 left-0",style:{width:"200%",height:"100%",display:"flex",animation:"pixelWaveScroll 12s linear infinite"},children:[...Array(120)].map((t,n)=>{const r=n*.5%8,s=Math.sin(r*Math.PI/4),a=Math.floor((s+1)*3.5)+2;let i;return a<=3?i="#1e3a8a":a<=5?i="#3b82f6":a<=7?i="#06b6d4":a<=8?i="#22d3ee":i="#ffffff",l.jsx("div",{className:"absolute bottom-0",style:{left:`${n*.8333}%`,width:"0.9%",height:`${a}px`,backgroundColor:i,imageRendering:"pixelated",boxShadow:a>6?`0 0 6px ${i}`:"none"}},n)})}),l.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(90deg, transparent 0%, rgba(6,182,212,0.3) 25%, rgba(255,255,255,0.5) 50%, rgba(6,182,212,0.3) 75%, transparent 100%)",animation:"pixelWaveGlow 2.5s linear infinite"}})]}),l.jsx("div",{className:"absolute left-0 right-0 h-[8px] z-40 pointer-events-none",style:{top:"-8px"},children:[...Array(6)].map((t,n)=>l.jsx("div",{className:"absolute w-[3px] h-[3px]",style:{left:`${15+n*15}%`,top:"2px",backgroundColor:"#ffffff",boxShadow:"0 0 6px #06b6d4",animation:`pixelTwinkle ${1+n*.3}s steps(2) infinite`,imageRendering:"pixelated"}},n))}),l.jsx("style",{children:`
        @keyframes pixelTwinkle {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.3; transform: scale(0.7); }
        }
        @keyframes pixelWaveFloat {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-2px); }
        }
        @keyframes pixelWaveGlow {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        @keyframes pixelWaveScroll {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); }
        }
      `}),l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[l.jsx("div",{className:"absolute left-0 right-0 h-[4px] z-50",style:{top:"-4px",background:"linear-gradient(90deg, transparent 0%, transparent 20%, #ffffff 40%, #ffffff 60%, transparent 80%, transparent 100%)",backgroundSize:"200% 100%",opacity:1,animation:"pixelBeam 2s linear infinite",boxShadow:"0 0 4px #ffffff"}}),l.jsx("style",{children:`
          @keyframes pixelBeam { 
            0% { background-position: 200% 0; } 
            100% { background-position: -200% 0; } 
          }
        `}),l.jsxs("div",{className:"absolute inset-x-0 top-0 h-[60%] overflow-hidden",children:[e.staticStars.map((t,n)=>l.jsx("div",{className:"absolute bg-white opacity-60",style:{width:"2px",height:"2px",top:t.top,left:t.left,boxShadow:"0 0 1px white"}},`star-static-${n}`)),e.twinkleStars.map((t,n)=>l.jsx("div",{className:"absolute bg-[#a5b4fc]",style:{width:"3px",height:"3px",top:t.top,left:t.left,animation:`pulse ${t.duration}s infinite alternate`}},`star-twinkle-${n}`)),l.jsx("div",{className:"absolute top-0 left-[20%]",style:{width:"4px",height:"4px",background:"#ffffff",boxShadow:"2px 2px 0 #c7d2fe, 4px 4px 0 #818cf8, 6px 6px 0 #4338ca",animation:"shootingStar 4s ease-in-out infinite"},children:l.jsx("style",{children:`
              @keyframes shootingStar {
                0% { transform: translate(-100px, -100px); opacity: 0; }
                10% { opacity: 1; }
                20% { transform: translate(200px, 200px); opacity: 0; }
                100% { transform: translate(200px, 200px); opacity: 0; }
              }
            `})})]}),l.jsxs("div",{className:"absolute inset-x-0 bottom-0 h-[60%]",children:[l.jsx("div",{className:"absolute inset-0 opacity-30 transform -rotate-12 scale-150",style:{background:"radial-gradient(ellipse at 50% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 60%)",pointerEvents:"none"}}),e.milkyStars.map((t,n)=>l.jsx("div",{className:"absolute bg-white opacity-40",style:{width:"1px",height:"1px",top:t.top,left:t.left,animation:`twinkle ${t.duration}s infinite`}},`star-milky-${n}`)),l.jsx("div",{className:"absolute top-[10%] left-[20%] w-[2px] h-[2px] bg-white rounded-full z-0 opacity-0",style:{boxShadow:"0 0 4px white, 2px 2px 0 rgba(255,255,255,0.5)",animation:"shootingStar 6s ease-in-out infinite"}}),l.jsx("div",{className:"absolute top-[30%] left-[50%] w-[1px] h-[1px] bg-cyan-200 rounded-full z-0 opacity-0",style:{boxShadow:"0 0 2px cyan",animation:"shootingStar 9s ease-in-out infinite 3s"}}),[...Array(3)].map((t,n)=>l.jsxs("div",{className:"absolute opacity-20",style:{top:`${20+n*15}%`,left:`${n*30}%`,animation:`cloudDrift ${15+n*5}s linear ${n*3}s infinite`},children:[l.jsx("div",{className:"w-[8px] h-[3px] bg-white rounded-sm"}),l.jsx("div",{className:"absolute top-[-2px] left-[2px] w-[4px] h-[3px] bg-white rounded-sm"}),l.jsx("div",{className:"absolute top-[-2px] right-[1px] w-[3px] h-[2px] bg-white rounded-sm"})]},`cloud-${n}`)),l.jsx("style",{children:"@keyframes cloudDrift { 0% { transform: translateX(0); } 100% { transform: translateX(100vw); } }"}),l.jsxs("div",{className:"absolute top-[15%] left-[5%] opacity-70",children:[l.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:0,left:0}}),l.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:"10px",left:"20px"}}),l.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:"25px",left:"35px"}}),l.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:"35px",left:"55px"}}),l.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:"45px",left:"55px"}}),l.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:"45px",left:"80px"}}),l.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:"35px",left:"80px"}}),l.jsx("svg",{className:"absolute top-0 left-0 w-[100px] h-[60px] opacity-20 pointer-events-none",children:l.jsx("polyline",{points:"1,1 21,11 36,26 56,36 56,46 81,46 81,36 56,36",fill:"none",stroke:"white",strokeWidth:"0.5"})})]}),[10,20,70,85].map((t,n)=>l.jsxs("div",{className:"absolute bottom-[35%]",style:{left:`${t}%`},children:[l.jsxs("div",{style:{width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:"16px solid #164e63",transform:`scale(${1+n*.1})`,transformOrigin:"bottom center",animation:`treeSway ${4+n}s ease-in-out infinite alternate`},children:[l.jsx("div",{className:"absolute top-[4px] left-[-2px] w-[1px] h-[1px] bg-[#0eaaaf] opacity-50"}),l.jsx("div",{className:"absolute top-[8px] right-[-2px] w-[1px] h-[1px] bg-[#0eaaaf] opacity-50"})]}),n===1&&l.jsxs("div",{className:"absolute top-[6px] right-[-4px] animate-pulse",style:{animation:`treeSway ${4+n}s ease-in-out infinite alternate`},children:[l.jsx("div",{className:"w-[2px] h-[3px] bg-[#fbbf24] shadow-[0_0_4px_#fbbf24]"}),l.jsx("div",{className:"absolute -top-[1px] left-0 w-[2px] h-[1px] bg-[#78350f]"})]})]},`tree-detailed-${n}`)),l.jsx("div",{className:"absolute inset-0 w-[150%] -left-[20%] rounded-[100%] bg-[#155e75] shadow-[inset_0_2px_0_#164e63]",style:{transform:"scaleY(0.5) translateY(40%)",opacity:.8}}),l.jsx("div",{className:"absolute bottom-6 left-[45%] z-10",style:{width:"0",height:"0",borderLeft:"10px solid transparent",borderRight:"10px solid transparent",borderBottom:"12px solid #ef4444",filter:"drop-shadow(2px 0 0 #7f1d1d)"},children:l.jsx("div",{className:"absolute top-[2px] left-[-2px] w-0 h-0 border-l-[2px] border-r-[2px] border-b-[8px] border-b-[#1e293b] border-l-transparent border-r-transparent"})}),l.jsxs("div",{className:"absolute bottom-4 left-[42%] z-10",style:{animation:"foxBreathe 2s ease-in-out infinite"},children:[l.jsx("div",{className:"w-[6px] h-[4px] bg-[#f97316] rounded-t-lg rounded-bl-lg"})," ",l.jsx("div",{className:"absolute -top-[2px] left-0 w-[2px] h-[2px] bg-[#f97316]"})," ",l.jsx("div",{className:"absolute top-[1px] -right-[2px] w-[3px] h-[3px] bg-[#fff7ed] rounded-full"})," ",l.jsx("div",{className:"absolute -top-[6px] -right-[4px] text-[6px] text-white opacity-60",style:{animation:"zzz 3s ease-in-out infinite"},children:"z"})]}),l.jsx("style",{children:`
            @keyframes foxBreathe { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
            @keyframes zzz { 0%, 100% { transform: translateY(0); opacity: 0; } 50% { transform: translateY(-8px); opacity: 0.6; } }
          `}),l.jsxs("div",{className:"absolute bottom-5 left-[50%] w-1 h-1 bg-orange-500 rounded-full z-10",style:{boxShadow:"0 0 6px orange, 0 -2px 8px rgba(255, 69, 0, 0.8)",animation:"flicker 0.2s infinite alternate"},children:[l.jsx("div",{className:"absolute -bottom-[2px] -left-[2px] w-2 h-[2px] bg-[#78350f]"}),e.embers.map((t,n)=>l.jsx("div",{className:"absolute w-[1px] h-[1px] bg-orange-400 rounded-full",style:{bottom:"2px",left:`${t.left}px`,animation:`emberRise ${t.duration}s ease-out ${t.delay}s infinite`}},`ember-${n}`))]}),l.jsx("style",{children:"@keyframes emberRise { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-20px) scale(0.3); opacity: 0; } }"}),l.jsxs("div",{className:"absolute bottom-5 left-[52%] z-10",style:{animation:"guitarVibrate 0.5s ease-in-out infinite alternate"},children:[l.jsx("div",{className:"w-[3px] h-[8px] bg-[#92400e] rounded-[1px] shadow-[1px_1px_0_#000] rotate-12"}),l.jsx("div",{className:"absolute top-[2px] left-[1px] w-[1px] h-[4px] bg-[#fbbf24] opacity-30"})]}),l.jsx("style",{children:"@keyframes guitarVibrate { from { transform: rotate(-1deg); } to { transform: rotate(1deg); } }"}),[15,25,60,75,80].map((t,n)=>l.jsxs("div",{className:"absolute bottom-4 z-10",style:{left:`${t}%`},children:[l.jsx("div",{className:"w-[4px] h-[3px] bg-[#ef4444] rounded-t-sm"})," ",l.jsx("div",{className:"absolute top-[1px] left-[1px] w-[1px] h-[1px] bg-white"})," ",l.jsx("div",{className:"absolute bottom-[-2px] left-[1px] w-[2px] h-[2px] bg-[#fcd34d]"})," "]},`mushroom-${n}`)),e.grass.map((t,n)=>l.jsx("div",{className:"absolute bottom-3 w-[1px] h-[3px] bg-[#4ade80]",style:{left:t.left,opacity:.6,animation:`grassSway ${t.duration}s ease-in-out ${t.delay}s infinite alternate`,transformOrigin:"bottom"}},`grass-${n}`)),l.jsx("style",{children:"@keyframes grassSway { from { transform: rotate(-5deg); } to { transform: rotate(5deg); } }"}),e.fireflies.map((t,n)=>l.jsx("div",{className:"absolute w-[1px] h-[1px] bg-[#fcd34d] rounded-full",style:{bottom:t.bottom,left:t.left,boxShadow:"0 0 3px #fcd34d",animation:`fireflyBounce ${t.duration}s ease-in-out ${t.delay}s infinite`,"--fx1":t.fx1,"--fy1":t.fy1,"--fx2":t.fx2,"--fy2":t.fy2,"--fx3":t.fx3,"--fy3":t.fy3}},`firefly-${n}`)),l.jsx("style",{children:`
            @keyframes fireflyBounce { 
              0%, 100% { transform: translate(0, 0); opacity: 0.3; } 
              25% { transform: translate(var(--fx1), var(--fy1)); opacity: 1; }
              50% { transform: translate(var(--fx2), var(--fy2)); opacity: 0.8; }
              75% { transform: translate(var(--fx3), var(--fy3)); opacity: 1; }
            }
          `}),l.jsx("div",{className:"absolute bottom-0 left-0 w-[200%] h-12 pointer-events-none opacity-30",style:{background:"linear-gradient(to top, rgba(255,255,255,0.4), transparent)",maskImage:"linear-gradient(90deg, transparent, black 50%, transparent)",WebkitMaskImage:"linear-gradient(90deg, transparent, black 50%, transparent)",animation:"fogDrift 20s linear infinite"},children:l.jsx("style",{children:"@keyframes fogDrift { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }"})})]}),l.jsx("div",{className:"absolute top-[15%] right-[-20px] pointer-events-none opacity-80",style:{width:"6px",height:"2px",background:"#ec4899",boxShadow:"2px -2px 0 #22d3ee, -2px -2px 0 #22d3ee, 0 -4px 0 #e879f9",animation:"ufoFly 30s linear 5s infinite"},children:l.jsx("style",{children:"@keyframes ufoFly { 0% { transform: translateX(0) translateY(0); } 25% { transform: translateX(-150px) translateY(10px); } 50% { transform: translateX(-300px) translateY(-5px); } 100% { transform: translateX(-120vw) translateY(20px); } }"})})]})]}):null}function OD({data:e}){return e?l.jsxs("div",{"aria-hidden":"true",className:"contents",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[l.jsx("div",{className:"absolute inset-0 bg-black/80"}),l.jsx("div",{className:"absolute inset-0 opacity-60",style:{background:"radial-gradient(circle at 40% 60%, rgba(180, 0, 50, 0.5), transparent 50%)",filter:"blur(20px)",animation:"plasmaFlow 10s ease-in-out infinite alternate"}}),l.jsx("div",{className:"absolute inset-0 opacity-60 mix-blend-screen",style:{background:"radial-gradient(circle at 60% 40%, rgba(50, 60, 200, 0.6), transparent 50%)",filter:"blur(15px)",animation:"plasmaFlow 8s ease-in-out infinite alternate-reverse"}}),e.stars.map((t,n)=>l.jsx("div",{className:"absolute rounded-full bg-white blur-[0.5px]",style:{width:`${t.size}px`,height:`${t.size}px`,top:t.top,left:t.left,animation:`starFloat ${t.floatDuration}s infinite linear, starTwinkle ${t.twinkleDuration}s infinite ease-in-out alternate`}},`super-blue-star-${n}`)),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-20",style:{background:"linear-gradient(90deg, transparent, rgba(255, 50, 50, 0.8), rgba(200, 100, 255, 1), rgba(50, 100, 255, 0.8), transparent)",backgroundSize:"200% 100%",animation:"flowRight 3s linear infinite",boxShadow:"0 0 15px rgba(200, 50, 200, 0.6)"}})]}),l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[l.jsx("div",{className:"absolute inset-0 bg-[#050510]"}),l.jsx("div",{className:"absolute inset-0 opacity-80",style:{background:"radial-gradient(circle at 50% 100%, rgba(80, 0, 100, 0.4), transparent 80%)"}}),l.jsx("div",{className:"absolute inset-0 opacity-70",style:{backgroundImage:"radial-gradient(1.5px 1.5px at 20% 20%, #aaddff 10%, transparent 0), radial-gradient(1.5px 1.5px at 80% 80%, #ffaaaa 10%, transparent 0)",backgroundSize:"250px 250px",animation:"pulse 5s ease-in-out infinite"}}),l.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-[35%] w-[320px] h-[320px] rounded-full z-10",style:{background:"radial-gradient(circle at 30% 30%, #1e1b4b 0%, #4c0519 60%, #000000 100%)",boxShadow:"0 0 60px rgba(100, 50, 255, 0.4), inset -10px -10px 50px rgba(100, 0, 50, 0.8)",filter:"contrast(1.3) brightness(1.1)"},children:[l.jsx("div",{className:"absolute inset-0 rounded-full opacity-50 mix-blend-overlay",style:{backgroundImage:"radial-gradient(circle at 30% 40%, rgba(50,50,100,0.5) 5%, transparent 15%), radial-gradient(circle at 70% 60%, rgba(100,50,50,0.5) 8%, transparent 20%)"}}),l.jsx("div",{className:"absolute inset-0 rounded-full",style:{boxShadow:"inset 10px 10px 30px rgba(100, 150, 255, 0.6), inset -10px -10px 30px rgba(255, 50, 100, 0.4)",mixBlendMode:"screen"}})]})]})]}):null}function ID({data:e}){return e?l.jsx("div",{"aria-hidden":"true",className:"contents",children:l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 3s ease-out forwards"},children:[l.jsx("div",{className:"absolute inset-0 bg-black"}),l.jsx("div",{className:"absolute inset-0 opacity-80",style:{background:"radial-gradient(circle at 50% 100%, rgba(50, 0, 0, 0.8), transparent 80%)"}}),l.jsx("div",{className:"absolute inset-0 opacity-60",style:{backgroundImage:"radial-gradient(1px 1px at 20% 20%, #ffaaaa 10%, transparent 0), radial-gradient(1.5px 1.5px at 60% 80%, #ff4444 10%, transparent 0)",backgroundSize:"200px 200px",animation:"pulse 4s ease-in-out infinite"}}),l.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-[35%] w-[320px] h-[320px] rounded-full z-10",style:{background:"radial-gradient(circle at 35% 35%, #800000 0%, #500000 40%, #2a0a0a 100%)",boxShadow:"0 0 60px rgba(255, 30, 30, 0.6), inset -10px -10px 40px rgba(0,0,0,0.9)",filter:"contrast(1.2) brightness(1.2)"},children:[l.jsx("div",{className:"absolute inset-0 rounded-full opacity-60 mix-blend-multiply",style:{backgroundImage:"radial-gradient(circle at 20% 40%, rgba(0,0,0,0.7) 4%, transparent 12%), radial-gradient(circle at 65% 60%, rgba(0,0,0,0.6) 8%, transparent 20%), radial-gradient(circle at 45% 75%, rgba(0,0,0,0.5) 5%, transparent 15%), radial-gradient(circle at 80% 30%, rgba(0,0,0,0.6) 3%, transparent 10%)"}}),l.jsx("div",{className:"absolute inset-0 rounded-full",style:{boxShadow:"inset 0 0 20px rgba(255, 100, 100, 0.8), 0 0 10px rgba(255, 50, 50, 0.5)",mixBlendMode:"screen"}}),l.jsx("div",{className:"absolute inset-0 rounded-full opacity-40 mix-blend-overlay",style:{background:"radial-gradient(circle at 50% 50%, rgba(255, 0, 0, 0.6), transparent 70%)",animation:"flashPulse 4s ease-in-out infinite"}})]}),l.jsx("div",{className:"absolute inset-0 z-20",style:{background:"linear-gradient(to top, rgba(50, 0, 0, 0.6), transparent)",maskImage:"linear-gradient(to top, black, transparent)",WebkitMaskImage:"linear-gradient(to top, black, transparent)"},children:e.mist.map((t,n)=>l.jsx("div",{className:"absolute rounded-full bg-red-600/20 blur-xl",style:{width:`${t.size}px`,height:`${t.size}px`,bottom:"-50px",left:t.left,animation:`singularFloat ${t.duration}s linear infinite reverse`}},`blood-mist-${n}`))}),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[3px] z-30",style:{background:"linear-gradient(90deg, transparent, #ff0000, #ff4444, #ff0000, transparent)",backgroundSize:"200% 100%",animation:"borderFlow 3s linear infinite",boxShadow:"0 0 20px rgba(255, 0, 0, 0.6)"}})]})}):null}function $D({data:e}){return e?l.jsx("div",{"aria-hidden":"true",className:"contents",children:l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 2.5s ease-out forwards"},children:[l.jsx("div",{className:"absolute inset-0 bg-[#1a0b2e]/95 backdrop-blur-md"}),l.jsx("div",{className:"absolute inset-0 opacity-60 mix-blend-screen",style:{background:"radial-gradient(circle at 30% 50%, rgba(255, 0, 150, 0.3), transparent 60%), radial-gradient(circle at 70% 50%, rgba(0, 200, 255, 0.3), transparent 60%)",filter:"blur(10px)",animation:"nebulaPulse 6s ease-in-out infinite"}}),l.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-color-dodge",style:{backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIj48ZmlsdGVyIGlkPSJnoiPjxmZVR1cmJ1bGVuY2UgdHlwZT0iZnJhY3RhbE5vaXNlIiBiYXNlRnJlcXVlbmN5PSIwLjAyIiBudW1PY3RhdmVzPSIzIiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PC9maWx0ZXI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsdGVyPSJ1cmwoI2cpIiBvcGFjaXR5PSIwLjUiLz48L3N2Zz4=')",animation:"mistFlow 10s linear infinite"}}),e.stardust.map((t,n)=>l.jsx("div",{className:"absolute bg-white rounded-full",style:{width:`${t.size}px`,height:`${t.size}px`,top:t.top,left:t.left,opacity:t.opacity,animation:`stardustTwinkle ${t.duration}s ease-in-out infinite ${t.delay}s`,boxShadow:`0 0 ${t.glow}px ${t.color}`}},`nebula-dust-${n}`)),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-20",style:{background:"linear-gradient(90deg, transparent, #ff00ff, #00ffff, transparent)",boxShadow:"0 0 15px rgba(255, 0, 255, 0.5), 0 0 30px rgba(0, 255, 255, 0.3)"}})]})}):null}function LD({data:e}){return e?l.jsx("div",{"aria-hidden":"true",className:"contents",children:l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[l.jsx("div",{className:"absolute inset-0 bg-[#0b0515]/95"}),l.jsx("div",{className:"absolute inset-y-0 left-0 w-[200%] opacity-50 mix-blend-screen",style:{backgroundImage:"linear-gradient(90deg, transparent, rgba(100, 20, 200, 0.3), rgba(60, 20, 150, 0.5), rgba(100, 20, 200, 0.3), transparent)",backgroundSize:"50% 100%",backgroundRepeat:"repeat-x",animation:"mistScroll 5s linear infinite"}}),e.warpStars.map((t,n)=>l.jsx("div",{className:"absolute w-[2px] bg-white rounded-full mix-blend-screen opacity-40",style:{height:`${t.height}px`,top:t.top,left:t.left,animation:`warpSpeed ${t.duration}s linear infinite ${t.delay}s`,boxShadow:"0 0 2px rgba(200, 200, 255, 0.5)"}},`warp-star-${n}`)),e.staticStars.map((t,n)=>l.jsx("div",{className:"absolute w-[1px] h-[1px] bg-white rounded-full opacity-60",style:{top:t.top,left:t.left,animation:`pulse ${t.duration}s ease-in-out infinite`}},`cosmic-static-${n}`)),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] z-20 opacity-40",style:{background:"linear-gradient(90deg, transparent, #8a2be2, transparent)"}}),l.jsx("div",{className:"absolute top-[-1px] left-0 right-0 h-[3px] z-21 mix-blend-screen",style:{background:"linear-gradient(90deg, transparent, rgba(150, 50, 255, 0), rgba(255, 200, 255, 1) 50%, rgba(150, 50, 255, 0), transparent)",backgroundSize:"200% 100%",boxShadow:"0 0 20px rgba(220, 150, 255, 0.8), 0 0 40px rgba(150, 50, 255, 0.5)",animation:"mistFlow 1.5s linear infinite"}})]})}):null}const FD=[{path:"/",icon:q_,label:"Home"},{path:"/logs",icon:V_,label:"Logs"},{path:"/library",icon:ig,label:"Library"},{path:"/story",icon:rh,label:"Story"},{path:"/statistics",icon:ag,label:"Stats"},{path:"/about",icon:u5,label:"About"}],$e=(e,t)=>Math.random()*(t-e)+e,Px={superBloodMoon:{background:"linear-gradient(to top, rgba(50, 0, 0, 0.95), rgba(80, 10, 10, 0.9), rgba(100, 20, 20, 0.8))",borderTop:"1px solid rgba(255, 50, 50, 0.6)",boxShadow:"0 -10px 40px rgba(220, 20, 60, 0.6), 0 -2px 10px rgba(255, 0, 0, 0.4), inset 0 2px 20px rgba(255, 50, 50, 0.2)",animation:"bloodPulse 3s ease-in-out infinite",backdropFilter:"blur(20px) saturate(150%)"},superBlueBloodMoon:{background:"linear-gradient(135deg, rgba(20, 0, 40, 0.95), rgba(60, 20, 80, 0.9), rgba(100, 40, 120, 0.8))",borderTop:"1px solid rgba(200, 100, 255, 0.6)",borderImage:"linear-gradient(90deg, transparent, rgba(200, 100, 255, 1), rgba(100, 200, 255, 1), transparent) 1",boxShadow:"0 -10px 40px rgba(120, 20, 220, 0.6), 0 -2px 10px rgba(200, 100, 255, 0.4), inset 0 2px 20px rgba(200, 100, 255, 0.2)",animation:"royalShimmer 4s ease-in-out infinite",backdropFilter:"blur(20px) saturate(180%)"},lunarTransientPhenomena:{background:"linear-gradient(to top, rgba(10, 10, 20, 0.95), rgba(30, 30, 60, 0.9))",borderTop:"1px solid rgba(150, 255, 255, 0.8)",boxShadow:"0 -5px 30px rgba(100, 255, 255, 0.5), 0 0 15px rgba(100, 255, 255, 0.3), inset 0 0 20px rgba(100, 255, 255, 0.1)",animation:"electricGlitch 3s steps(5) infinite",backdropFilter:"blur(15px) brightness(1.2)"},hybridEclipse:{background:"linear-gradient(to top, rgba(20, 10, 0, 0.95), rgba(60, 40, 10, 0.9))",borderTop:"1px solid rgba(255, 200, 100, 0.8)",boxShadow:"0 -5px 35px rgba(255, 160, 50, 0.6), 0 0 15px rgba(255, 200, 100, 0.4), inset 0 2px 10px rgba(255, 200, 100, 0.2)",animation:"eclipsePulse 4s ease-in-out infinite",backdropFilter:"blur(18px) contrast(1.1)"},stillMoon:{background:"linear-gradient(to top, rgba(200, 220, 255, 0.15), rgba(255, 255, 255, 0.05))",borderTop:"1px solid rgba(255, 255, 255, 0.6)",boxShadow:"0 -5px 30px rgba(200, 230, 255, 0.4), inset 0 0 30px rgba(200, 230, 255, 0.2)",backdropFilter:"blur(30px) brightness(1.1)",animation:"stillFreeze 10s linear infinite"},echoMoon:{background:"linear-gradient(to top, rgba(30, 15, 60, 0.98), rgba(15, 5, 30, 0.98))",backgroundSize:"200% 100%",borderTop:"2px solid rgba(180, 130, 255, 0.8)",borderImage:"repeating-linear-gradient(90deg, rgba(160, 100, 255, 0.5) 0, rgba(200, 150, 255, 1) 20px, rgba(160, 100, 255, 0.5) 40px) 1",boxShadow:`
      0 -5px 25px rgba(140, 70, 255, 0.6),
      0 -10px 50px rgba(124, 58, 237, 0.3),
      inset 0 4px 20px rgba(200, 160, 255, 0.2)
    `,animation:"echoRipple 3s infinite linear",backdropFilter:"blur(25px)"},brokenMoon:{background:"linear-gradient(to top, rgba(10, 10, 12, 0.95), rgba(30, 30, 35, 0.9))",borderTop:"2px dashed rgba(255, 255, 255, 0.4)",boxShadow:"0 -5px 25px rgba(255, 255, 255, 0.2), inset 0 0 10px rgba(255, 255, 255, 0.1)",backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.05) 10px, rgba(255,255,255,0.05) 11px)",backdropFilter:"blur(15px) grayscale(0.8)"},emptySky:{background:"#050505",borderTop:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 -10px 50px rgba(0, 0, 0, 1), 0 0 20px rgba(255, 255, 255, 0.1) inset",backdropFilter:"blur(50px) brightness(0.5)"},crystalMoon:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(200, 240, 255, 0.2))",borderTop:"1px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 -5px 35px rgba(200, 240, 255, 0.6), inset 0 0 20px rgba(255, 255, 255, 0.4)",backdropFilter:"blur(25px) contrast(1.2)",animation:"crystalFacet 5s ease-in-out infinite"},arcticMoon:{background:"linear-gradient(to top, rgba(20, 40, 60, 0.9), rgba(50, 100, 150, 0.8))",borderTop:"1px solid rgba(150, 230, 255, 0.8)",boxShadow:"0 -8px 30px rgba(100, 200, 255, 0.5), inset 0 0 20px rgba(150, 230, 255, 0.3)",backdropFilter:"blur(20px) brightness(1.1)"},shatteredMoon:{background:"linear-gradient(to top, rgba(20, 20, 25, 0.95), rgba(50, 50, 60, 0.9))",borderTop:"1px double rgba(255, 255, 255, 0.5)",boxShadow:"0 -5px 25px rgba(255, 255, 255, 0.25), inset 0 0 10px rgba(255, 255, 255, 0.1)",backdropFilter:"blur(15px)"},cosmicVoyageMoon:{background:"linear-gradient(to top, rgba(30, 10, 60, 0.95), rgba(60, 20, 100, 0.9))",borderTop:"1px solid rgba(200, 100, 255, 0.7)",boxShadow:"0 -8px 35px rgba(150, 50, 255, 0.5), inset 0 0 15px rgba(200, 100, 255, 0.2)",backdropFilter:"blur(20px)"},nebulaDreamMoon:{background:"linear-gradient(to top, rgba(40, 20, 60, 0.95), rgba(80, 40, 100, 0.9))",borderTop:"1px solid rgba(255, 150, 255, 0.7)",boxShadow:"0 -8px 35px rgba(255, 100, 255, 0.5), 0 0 20px rgba(255, 100, 255, 0.2) inset",backdropFilter:"blur(20px)",animation:"nebulaSwirl 6s ease-in-out infinite"},pixelDreamMoon:{background:"linear-gradient(to bottom, #1e1b4b 60%, #0e7490 60%)",borderTop:"4px solid #3730a3",boxShadow:`
      0 -4px 0 #c7d2fe,              /* Top Highlight (Light Blue) */
      0 4px 0 #312e81,               /* Bottom Shadow (Deep Indigo) */
      0 8px 0 rgba(15, 23, 42, 0.5)  /* Drop Shadow */
    `,imageRendering:"pixelated"}};function fh(){const e=Wa(),[t,n]=p.useState(null),s=mc()||typeof window<"u"&&window.innerWidth<=480,a=p.useMemo(()=>{if(t!=="arcticMoon")return[];const g=s?6:15;return Array.from({length:g}).map(()=>({size:Math.random()*2+1,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,duration:Math.random()*3+2,opacity:Math.random()*.8+.2}))},[t,s]),i=p.useMemo(()=>{if(t!=="arcticMoon")return[];const g=s?2:6;return Array.from({length:g}).map(()=>({top:-Math.random()*100-50,right:Math.random()*100-20,width:Math.random()*120+80,color:Math.random()>.5?"white":"#a5f3fc",glow:Math.random()>.5?"white":"cyan",duration:Math.random()*5+3,delay:Math.random()*10}))},[t,s]),o=p.useMemo(()=>{if(t!=="pixelDreamMoon")return null;const g=s?8:15,v=s?3:6,x=s?16:30,b=s?8:15,w=s?6:12;return{staticStars:Array.from({length:g}).map(()=>({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`})),twinkleStars:Array.from({length:v}).map(()=>({top:`${Math.random()*80+10}%`,left:`${Math.random()*90+5}%`,duration:$e(1,3)})),milkyStars:Array.from({length:x}).map(()=>({top:`${Math.random()*80}%`,left:`${Math.random()*80+10}%`,duration:$e(2,5)})),embers:Array.from({length:3}).map((S,k)=>({left:k,duration:$e(1,3),delay:k*.3})),grass:Array.from({length:b}).map(()=>({left:`${Math.random()*90+5}%`,duration:$e(1,3),delay:Math.random()})),fireflies:Array.from({length:w}).map(()=>({bottom:`${Math.random()*40}%`,left:`${Math.random()*100}%`,duration:$e(2,4),delay:$e(0,2),fx1:`${$e(-10,10)}px`,fy1:`${-$e(5,20)}px`,fx2:`${$e(-10,10)}px`,fy2:`${-$e(10,20)}px`,fx3:`${$e(-10,10)}px`,fy3:`${-$e(3,15)}px`}))}},[t,s]),c=p.useMemo(()=>{if(t!=="superBlueBloodMoon")return null;const g=s?8:15;return{stars:Array.from({length:g}).map(()=>({size:$e(1,3),top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,floatDuration:$e(10,20),twinkleDuration:$e(.5,1.5)}))}},[t,s]),u=p.useMemo(()=>{if(t!=="superBloodMoon")return null;const g=s?4:8;return{mist:Array.from({length:g}).map(()=>({size:$e(50,150),left:`${Math.random()*100}%`,duration:$e(10,20)}))}},[t,s]),d=p.useMemo(()=>{if(t!=="nebulaDreamMoon")return null;const g=s?8:15;return{stardust:Array.from({length:g}).map((v,x)=>({size:$e(1,3),top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,opacity:$e(.2,1),duration:$e(1,3),delay:$e(0,1),glow:$e(2,6),color:x%2===0?"#ff00ff":"#00ffff"}))}},[t,s]),h=p.useMemo(()=>{if(t!=="cosmicVoyageMoon")return null;const g=s?8:15,v=s?10:20;return{warpStars:Array.from({length:g}).map(()=>({height:$e(10,40),top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,duration:$e(1.5,3.5),delay:$e(0,3)})),staticStars:Array.from({length:v}).map(()=>({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,duration:$e(1,3)}))}},[t,s]),{createRipple:f,RippleEffect:m}=AD();p.useEffect(()=>{const g=document.documentElement.getAttribute("data-mythic-theme");n(g);const v=new MutationObserver(()=>{const x=document.documentElement.getAttribute("data-mythic-theme");n(x)});return v.observe(document.documentElement,{attributes:!0,attributeFilter:["data-mythic-theme"]}),()=>v.disconnect()},[]);const y=t&&Px[t]?{...Px[t]}:void 0;if(y){const g=y.animation||"";y.animation=`mythicThemeEntrance 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards${g?`, ${g}`:""}`}return l.jsxs("nav",{className:q("mythic-bottom-nav fixed bottom-0 left-0 right-0 border-t z-20",!t&&"bg-background"),style:y,children:[t==="hybridEclipse"&&l.jsx("div",{"aria-hidden":"true",className:"absolute top-0 left-0 right-0 h-[3px] pointer-events-none",style:{background:"linear-gradient(90deg, transparent, rgba(255, 220, 120, 0.8) 50%, transparent)",animation:"goldenWave 3s ease-in-out infinite"}}),l.jsx(DD,{data:o}),l.jsx(OD,{data:c}),l.jsx(ID,{data:u}),l.jsx($D,{data:d}),l.jsx(LD,{data:h}),t==="arcticMoon"&&l.jsxs("div",{"aria-hidden":"true",className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 2.5s ease-out forwards"},children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0b1026] via-[#1b2735] to-[#090a0f]"}),l.jsx("div",{className:"absolute inset-0 opacity-60",style:{backgroundImage:"radial-gradient(1px 1px at 10% 10%, white 10%, transparent 0), radial-gradient(1.5px 1.5px at 50% 40%, white 10%, transparent 0), radial-gradient(2px 2px at 80% 20%, white 10%, transparent 0), radial-gradient(1px 1px at 30% 70%, white 20%, transparent 0)",backgroundSize:"200px 200px"}}),l.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-color-dodge",style:{background:"linear-gradient(120deg, rgba(0,255,150,0.3), rgba(0,0,0,0), rgba(150,0,255,0.3))",backgroundSize:"200% 200%",animation:"auroraShift 15s ease-in-out infinite"}}),l.jsx("div",{className:"absolute inset-0 opacity-80 mix-blend-screen",style:{background:"radial-gradient(ellipse at 50% 100%, rgba(0, 255, 180, 0.5), transparent 70%), linear-gradient(90deg, transparent, rgba(50, 255, 200, 0.3), transparent)",filter:"blur(15px)",transformOrigin:"bottom center",animation:"auroraWave 8s ease-in-out infinite"}}),l.jsx("div",{className:"absolute inset-0 opacity-70 mix-blend-screen",style:{background:"radial-gradient(ellipse at 80% 80%, rgba(220, 50, 255, 0.4), transparent 60%)",filter:"blur(20px)",transformOrigin:"bottom center",animation:"auroraWave 12s ease-in-out infinite reverse"}}),l.jsx("div",{className:"absolute top-0 left-0 w-[200%] h-full opacity-50 mix-blend-overlay",style:{background:"linear-gradient(90deg, transparent, rgba(100, 255, 218, 0.8), rgba(180, 100, 255, 0.6), transparent)",transform:"skewX(-20deg)",backgroundSize:"200% 100%",animation:"borderFlow 6s linear infinite"}}),a.map((g,v)=>l.jsx("div",{className:"absolute bg-white rounded-full blur-[0.5px]",style:{width:`${g.size}px`,height:`${g.size}px`,top:g.top,left:g.left,animation:`twinkle ${g.duration}s ease-in-out infinite`,opacity:g.opacity}},v)),l.jsx("div",{className:"absolute inset-0 z-40 mix-blend-overlay pointer-events-none",style:{background:"radial-gradient(circle at 50% -20%, rgba(200, 255, 255, 0.8), transparent 70%)",animation:"auroraFlare 18s ease-in-out infinite"}}),i.map((g,v)=>l.jsx("div",{className:"absolute z-20",style:{top:`${g.top}%`,right:`${g.right}%`,width:`${g.width}px`,height:"2px",opacity:0,background:`linear-gradient(to right, transparent, ${g.color}, transparent)`,filter:`drop-shadow(0 0 3px ${g.glow})`,animation:`shootingStar ${g.duration}s linear infinite ${g.delay}s both`,transform:"rotate(-45deg)"}},v)),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[40px] z-10",style:{background:"linear-gradient(to top, rgba(100, 200, 255, 0.2), transparent)"}}),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-50 opacity-90",style:{background:"linear-gradient(90deg, transparent, #00ffcc, #bd00ff, #00ffcc, transparent)",backgroundSize:"200% 100%",animation:"borderFlow 3s linear infinite",boxShadow:"0 0 10px rgba(0, 255, 200, 0.6), 0 0 20px rgba(189, 0, 255, 0.4)"}}),l.jsx("div",{className:"absolute top-[2px] left-0 right-0 h-[1px] z-40 opacity-50 mix-blend-overlay",style:{background:"white"}})]}),t==="echoMoon"&&l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[l.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, rgba(20, 10, 40, 0.6), transparent)"}}),l.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[l.jsx("div",{className:"absolute rounded-full border border-white/30",style:{width:"100px",height:"100px",animation:"waterRipple 3s infinite ease-out"}}),l.jsx("div",{className:"absolute rounded-full border border-white/20",style:{width:"100px",height:"100px",animation:"waterRipple 3s infinite ease-out 1s"}}),l.jsx("div",{className:"absolute rounded-full border border-white/10",style:{width:"100px",height:"100px",animation:"waterRipple 3s infinite ease-out 2s"}})]}),l.jsx("div",{className:"absolute left-[20%] top-[40%] rounded-full border border-white/20",style:{width:"50px",height:"50px",animation:"waterRipple 4s infinite ease-out 0.5s"}}),l.jsx("div",{className:"absolute right-[20%] top-[30%] rounded-full border border-white/20",style:{width:"60px",height:"60px",animation:"waterRipple 5s infinite ease-out 2.5s"}}),[...Array(5)].map((g,v)=>l.jsx("div",{className:"absolute rounded-full bg-white blur-[1px]",style:{width:Math.random()*3+1+"px",height:Math.random()*3+1+"px",top:Math.random()*100+"%",left:Math.random()*100+"%",animation:`echoParticle ${Math.random()*2+2}s infinite ease-in-out ${Math.random()}s`}},v)),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[3px] z-20",style:{background:"linear-gradient(90deg, rgba(160, 100, 255, 0), rgba(200, 160, 255, 0.8), rgba(255, 255, 255, 1), rgba(200, 160, 255, 0.8), rgba(160, 100, 255, 0))",backgroundSize:"200% 100%",animation:"liquidBorder 3s linear infinite",boxShadow:"0 2px 10px rgba(180, 130, 255, 0.5)"}})]}),t==="hybridEclipse"&&l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[l.jsx("div",{className:"absolute inset-0 bg-[#0a0500]/95"}),l.jsx("div",{className:"absolute inset-y-0 left-0 w-[200%] opacity-40 mix-blend-screen",style:{backgroundImage:"linear-gradient(90deg, transparent, rgba(255, 180, 50, 0.3), rgba(255, 220, 100, 0.5), rgba(255, 180, 50, 0.3), transparent)",backgroundSize:"50% 100%",backgroundRepeat:"repeat-x",animation:"mistScroll 10s linear infinite"}}),l.jsx("div",{className:"absolute inset-y-0 left-0 w-[200%] opacity-30 mix-blend-screen",style:{backgroundImage:"linear-gradient(90deg, transparent, rgba(255, 140, 0, 0.2), transparent)",backgroundSize:"25% 100%",backgroundRepeat:"repeat-x",animation:"mistScroll 7s linear infinite reverse"}}),l.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E")`,mixBlendMode:"overlay"}}),[...Array(8)].map((g,v)=>l.jsx("div",{className:"absolute rounded-full bg-yellow-100 blur-[1px]",style:{width:Math.random()*2+1+"px",height:Math.random()*2+1+"px",top:Math.random()*100+"%",left:Math.random()*100+"%",boxShadow:"0 0 5px rgba(255, 200, 50, 0.8)",animation:`starFloat ${Math.random()*5+3}s infinite ease-in-out ${Math.random()}s`}},v)),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-20",style:{background:"linear-gradient(90deg, transparent, rgba(200, 120, 20, 0), rgba(255, 200, 100, 1), rgba(200, 120, 20, 0), transparent)",backgroundSize:"200% 100%",animation:"flowRight 4s linear infinite",boxShadow:"0 1px 15px rgba(255, 160, 50, 0.5)"}})]}),t==="brokenMoon"&&l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[l.jsx("div",{className:"absolute inset-0 bg-[#0c0c16]/98"}),l.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-overlay",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent 0, transparent 20px, rgba(160, 160, 200, 0.1) 21px, transparent 22px), repeating-linear-gradient(-45deg, transparent 0, transparent 35px, rgba(160, 160, 200, 0.1) 36px, transparent 37px)",animation:"voidCracks 5s ease-in-out infinite"}}),l.jsx("div",{className:"absolute inset-0 mix-blend-color-dodge opacity-20",style:{background:"linear-gradient(90deg, transparent, rgba(100, 100, 255, 0.2), transparent)",backgroundSize:"200% 100%",animation:"flowRight 0.2s steps(4) infinite",clipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)"}}),[...Array(10)].map((g,v)=>l.jsx("div",{className:"absolute bg-white/40",style:{width:Math.random()*4+2+"px",height:Math.random()*4+2+"px",top:Math.random()*100+"%",left:Math.random()*100+"%",clipPath:"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)",animation:`shardFloat ${Math.random()*4+2}s linear infinite ${Math.random()*2}s`}},v)),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-20",style:{background:"linear-gradient(90deg, transparent, rgba(150, 150, 200, 0.5), rgba(200, 200, 255, 0.9), rgba(150, 150, 200, 0.5), transparent)",boxShadow:"0 0 10px rgba(180, 180, 255, 0.4)",animation:"glitchBorder 3s infinite"}})]}),t==="crystalMoon"&&l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[l.jsx("div",{className:"absolute inset-0 bg-[#0f1525]/90"}),l.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-screen",style:{background:"linear-gradient(135deg, rgba(200, 240, 255, 0.1), rgba(255, 200, 250, 0.15), rgba(200, 240, 255, 0.1), transparent)",backgroundSize:"200% 200%",animation:"prismReflect 5s ease-in-out infinite"}}),[...Array(6)].map((g,v)=>l.jsx("div",{className:"absolute bg-white/20 border border-white/40",style:{width:Math.random()*8+4+"px",height:Math.random()*8+4+"px",top:Math.random()*80+10+"%",left:Math.random()*90+5+"%",clipPath:"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)",animation:`crystalFloat ${Math.random()*4+3}s ease-in-out infinite ${Math.random()*2}s`,backdropFilter:"blur(2px)"}},v)),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] z-20 bg-white/40"}),l.jsx("div",{className:"absolute top-[-1px] left-0 right-0 h-[3px] z-21 mix-blend-overlay",style:{background:"linear-gradient(90deg, transparent, rgba(255, 0, 0, 0.5), rgba(255, 165, 0, 0.5), rgba(255, 255, 0, 0.5), rgba(0, 255, 0, 0.5), rgba(0, 0, 255, 0.5), rgba(238, 130, 238, 0.5), transparent)",backgroundSize:"200% 100%",animation:"prismFlow 3s linear infinite, rainbowBorder 6s linear infinite"}})]}),t==="stillMoon"&&l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 2s ease-out forwards"},children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#b3e5fc] via-[#e1f5fe] to-[#ffffff]"}),l.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-multiply",style:{backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIj48ZmlsdGVyIGlkPSJnoiPjxmZVR1cmJ1bGVuY2UgdHlwZT0iZnJhY3RhbE5vaXNlIiBiYXNlRnJlcXVlbmN5PSIwLjgiIG51bU9jdGF2ZXM9IjMiIHN0aXRjaFRpbGVzPSJzdGl0Y2giLz48L2ZpbHRlcj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWx0ZXI9InVybCgjZykiIG9wYWNpdHk9IjAuNSIvPjwvc3ZnPg==')",filter:"contrast(180%)"}}),l.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[150%] bg-white/20 backdrop-blur-sm z-10",style:{clipPath:"polygon(0 0, 100% 0, 80% 100%, 0 100%)",boxShadow:"inset 0 0 20px rgba(255,255,255,0.5)"}}),l.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-[60%] h-[150%] bg-white/10 backdrop-blur-md z-10",style:{clipPath:"polygon(20% 0, 100% 0, 100% 100%, 0 100%)",borderLeft:"1px solid rgba(255,255,255,0.4)"}}),[...Array(20)].map((g,v)=>l.jsx("div",{className:"absolute bg-white z-20",style:{width:Math.random()<.2?"3px":"1.5px",height:Math.random()<.2?"3px":"1.5px",top:Math.random()*100+"%",left:Math.random()*100+"%",opacity:Math.random()*.6+.4,boxShadow:"0 0 4px rgba(255,255,255,0.9)",animation:`pulse ${Math.random()*4+2}s ease-in-out infinite alternate`}},v)),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-30 bg-white",style:{boxShadow:"0 0 15px rgba(200, 240, 255, 1), 0 0 30px rgba(200, 240, 255, 0.6)"}})]}),(t==="brokenMoon"||t==="shatteredMoon")&&l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 2s ease-out forwards"},children:[l.jsx("div",{className:"absolute inset-0 bg-[#020205]"}),l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[95%] h-[12px] z-20",style:{background:"linear-gradient(90deg, #2e004d, #ffffff, #2e004d)",clipPath:"polygon(0% 45%, 10% 30%, 20% 60%, 30% 35%, 40% 65%, 50% 20%, 60% 70%, 70% 30%, 80% 60%, 90% 40%, 100% 50%, 100% 55%, 90% 45%, 80% 65%, 70% 35%, 60% 75%, 50% 25%, 40% 70%, 30% 40%, 20% 65%, 10% 35%, 0% 55%)",filter:"drop-shadow(0 0 10px rgba(100, 150, 255, 0.8)) drop-shadow(0 0 20px rgba(180, 50, 255, 0.6))",animation:"pulse 3s ease-in-out infinite alternate"},children:l.jsx("div",{className:"absolute inset-0 bg-white opacity-80 mix-blend-overlay",style:{animation:"flashPulse 0.1s infinite alternate"}})}),l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-[60px] z-10 opacity-30",style:{background:"radial-gradient(ellipse at 50% 50%, rgba(100, 200, 255, 0.4) 0%, transparent 70%)",filter:"blur(10px)",animation:"pulse 4s ease-in-out infinite"}}),[...Array(20)].map((g,v)=>l.jsx("div",{className:"absolute bg-white rounded-full z-30",style:{width:Math.random()<.5?"1px":"2px",height:Math.random()<.5?"1px":"2px",top:Math.random()*100+"%",left:Math.random()*100+"%",boxShadow:"0 0 4px white",opacity:Math.random()*.7+.3,animation:`twinkle ${Math.random()*2+1}s infinite alternate`}},v)),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-[#a855f7] to-transparent opacity-50"}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-[#3b82f6] to-transparent opacity-50"})]}),t==="lunarTransientPhenomena"&&l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 1.5s ease-out forwards"},children:[l.jsx("div",{className:"absolute inset-0 bg-[#050510]/95 backdrop-blur-xl"}),l.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px)",backgroundSize:"20px 20px",maskImage:"radial-gradient(circle at 50% 50%, black 40%, transparent 80%)"}}),[...Array(6)].map((g,v)=>l.jsx("div",{className:"absolute top-0 h-[2px] bg-gradient-to-r from-transparent via-[#00ffcc] to-transparent",style:{width:"30%",top:v*20+"%",opacity:.7,animation:`dataStream ${Math.random()*2+2}s linear infinite ${Math.random()*2}s`,boxShadow:"0 0 8px #00ffcc"}},v)),l.jsx("div",{className:"absolute top-0 h-[3px] w-[50%] z-20",style:{background:"linear-gradient(90deg, transparent, #ff00ff, #00ffff, transparent)",animation:"laserScan 3s linear infinite",boxShadow:"0 0 15px rgba(255, 0, 255, 0.8)"}}),l.jsx("div",{className:"absolute inset-0 bg-white/10 mix-blend-overlay",style:{animation:"flashPulse 4s infinite random"}}),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-white/20"})]}),t==="emptySky"&&l.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 4s ease-out forwards"},children:[l.jsx("div",{className:"absolute inset-0 bg-black"}),l.jsx("div",{className:"absolute inset-0 opacity-60",style:{background:"radial-gradient(circle at 50% 50%, rgba(70, 0, 150, 0.2), transparent 60%)",filter:"blur(20px)"}}),l.jsx("div",{className:"absolute inset-0 opacity-80",style:{backgroundImage:"radial-gradient(1px 1px at 10% 10%, white 10%, transparent 0), radial-gradient(1.5px 1.5px at 80% 40%, #b080ff 10%, transparent 0), radial-gradient(2px 2px at 40% 80%, white 10%, transparent 0)",backgroundSize:"300px 300px",animation:"accretionSpin 120s linear infinite"}}),l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] z-10 pointer-events-none rounded-full",style:{background:"radial-gradient(circle, transparent 30%, rgba(150, 50, 255, 0.05) 40%, transparent 70%)",backdropFilter:"blur(2px) contrast(1.1)",transform:"scale(1.2)"}}),l.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] pointer-events-none z-40 flex items-center justify-center scale-60",children:[l.jsx("div",{className:"absolute w-[280px] h-[280px] rounded-full opacity-60 mix-blend-screen",style:{background:"radial-gradient(circle at 50% 50%, transparent 60%, rgba(120, 50, 255, 0.6) 65%, transparent 70%)",animation:"diskPulse 4s ease-in-out infinite",filter:"blur(4px)"}}),l.jsx("div",{className:"absolute w-[160px] h-[160px] rounded-full z-20",style:{background:"conic-gradient(from 0deg, #4c1d95 0%, #8b5cf6 25%, #ffffff 50%, #8b5cf6 75%, #4c1d95 100%)",maskImage:"radial-gradient(transparent 64%, black 66%)",WebkitMaskImage:"radial-gradient(transparent 64%, black 66%)",animation:"accretionSpin 0.9s linear infinite",boxShadow:"0 0 30px rgba(139, 92, 246, 0.6)"}}),l.jsx("div",{className:"absolute w-[150px] h-[150px] rounded-full z-10 bg-black box-border border border-purple-500/30"})]}),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-30 opacity-100",style:{background:"linear-gradient(90deg, transparent 0%, #4c1d95 20%, #8b5cf6 45%, #ffffff 50%, #8b5cf6 55%, #4c1d95 80%, transparent 100%)",backgroundSize:"200% 100%",animation:"borderFlow 0.4s linear infinite",boxShadow:"0 0 15px rgba(139, 92, 246, 0.7)"}}),l.jsx("div",{className:"absolute top-0 left-0 right-0 h-[40px] z-20 opacity-30 pointer-events-none",style:{background:"radial-gradient(ellipse at 50% 0%, rgba(150, 50, 255, 0.5), transparent 70%)"}}),[...Array(12)].map((g,v)=>l.jsx("div",{className:"absolute bg-zinc-800 rounded-full z-20 opacity-80",style:{width:Math.random()*4+2+"px",height:Math.random()*3+2+"px",top:Math.random()*100+"%",left:Math.random()*100+"%",animation:`singularFloat ${Math.random()*15+10}s linear infinite`,boxShadow:"inset 1px 1px 2px rgba(0,0,0,0.8)"}},v))]}),l.jsx("div",{className:"flex justify-around items-center h-16 max-w-md mx-auto relative z-50",children:FD.map(({path:g,icon:v,label:x})=>{const b=e.pathname===g||g!=="/"&&e.pathname.startsWith(g);return l.jsxs(dn,{to:g,className:q("mythic-nav-item flex flex-col items-center justify-center gap-1 px-3 py-2 transition-colors min-w-[60px] relative overflow-hidden",b?"text-primary bg-primary/10 rounded-lg mythic-nav-active":"text-muted-foreground hover:text-foreground hover:bg-accent rounded-lg"),onMouseEnter:f,style:t==="cosmicVoyageMoon"&&b?{background:"transparent"}:void 0,children:[l.jsx(m,{}),t==="cosmicVoyageMoon"&&b&&l.jsx("div",{className:"absolute inset-0 rounded-lg -z-10",style:{background:"linear-gradient(45deg, transparent, rgba(128, 144, 192, 0.3), transparent)",boxShadow:"0 0 15px rgba(100, 100, 255, 0.4)",animation:"pulse 2s ease-in-out infinite"}}),t==="superBloodMoon"&&b&&l.jsx(l.Fragment,{children:l.jsx("div",{className:"absolute inset-0 rounded-lg -z-10",style:{boxShadow:"0 0 20px rgba(220, 20, 60, 0.5), inset 0 0 10px rgba(255, 50, 80, 0.2)",animation:"bloodGlow 2s ease-in-out infinite"}})}),t==="lunarTransientPhenomena"&&b&&l.jsx("div",{className:"absolute inset-0 rounded-lg -z-10",style:{boxShadow:"0 0 15px rgba(200, 168, 248, 0.6), 0 0 5px rgba(255, 255, 255, 0.8)",animation:"electricSpark 0.5s steps(5) infinite"}}),t==="crystalMoon"&&b&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute inset-0 rounded-lg -z-10",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(220, 240, 255, 0.12), rgba(200, 230, 255, 0.15), rgba(240, 250, 255, 0.1))",boxShadow:"inset 0 0 15px rgba(255, 255, 255, 0.3), 0 0 20px rgba(220, 240, 255, 0.4)",animation:"crystalSparkle 3s ease-in-out infinite"}}),l.jsx("div",{className:"absolute inset-0 rounded-lg -z-10",style:{background:"radial-gradient(circle at 30% 50%, rgba(255, 255, 255, 0.2) 0%, transparent 50%), radial-gradient(circle at 70% 50%, rgba(200, 230, 255, 0.15) 0%, transparent 50%)",animation:"crystalSparkle 3s ease-in-out infinite reverse"}})]}),t==="nebulaDreamMoon"&&b&&l.jsx("div",{className:"absolute inset-0 rounded-lg -z-10 overflow-hidden",children:l.jsx("div",{style:{position:"absolute",inset:"-20%",background:"radial-gradient(circle, rgba(184, 136, 216, 0.3) 0%, transparent 70%)",animation:"nebulaRotate 8s linear infinite"}})}),t==="emptySky"&&b&&l.jsx("div",{className:"absolute inset-0 rounded-lg -z-10",style:{background:"radial-gradient(circle at center, rgba(40, 40, 60, 0.3) 0%, rgba(20, 20, 40, 0.2) 50%, transparent 100%)",boxShadow:"inset 0 0 15px rgba(10, 10, 25, 0.5), 0 0 10px rgba(30, 30, 50, 0.4)",animation:"voidDrift 4s ease-in-out infinite"}}),t==="pixelDreamMoon"&&b&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"absolute inset-0 -z-10",style:{borderRadius:"8px",border:"3px solid #818cf8",background:"linear-gradient(135deg, rgba(30, 27, 75, 0.8), rgba(14, 116, 144, 0.6))",boxShadow:`
                        0 0 20px rgba(129, 140, 248, 0.8),
                        inset 0 0 15px rgba(129, 140, 248, 0.3),
                        0 4px 0 rgba(49, 46, 129, 0.5)
                      `,imageRendering:"pixelated",animation:"pixelPulse 2s steps(4) infinite"}}),[{top:"-2px",left:"-2px"},{top:"-2px",right:"-2px"},{bottom:"-2px",left:"-2px"},{bottom:"-2px",right:"-2px"}].map((w,S)=>l.jsx("div",{className:"absolute w-[4px] h-[4px] bg-[#06b6d4] -z-10",style:{...w,boxShadow:"0 0 6px #06b6d4",animation:`pixelCornerBlink ${1+S*.2}s steps(2) infinite`}},S)),[...Array(8)].map((w,S)=>l.jsx("div",{className:"absolute w-[2px] h-[2px] -z-10",style:{left:`${20+S*10}%`,top:`${10+S%3*30}%`,backgroundColor:S%2===0?"#818cf8":"#06b6d4",boxShadow:`0 0 4px ${S%2===0?"#818cf8":"#06b6d4"}`,animation:`pixelFloat ${2+S*.3}s ease-in-out infinite`,animationDelay:`${S*.1}s`,imageRendering:"pixelated"}},S)),l.jsx("div",{className:"absolute -top-[14px] left-1/2 -translate-x-1/2 w-0 h-0",style:{borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"8px solid #818cf8",filter:"drop-shadow(0 0 6px #818cf8)",animation:"pixelBounce 1s steps(4) infinite"}})]}),l.jsx("style",{children:`
                @keyframes pixelPulse {
                  0%, 100% { transform: scale(1); opacity: 1; }
                  50% { transform: scale(1.05); opacity: 0.9; }
                }
                @keyframes pixelCornerBlink {
                  0%, 100% { opacity: 1; }
                  50% { opacity: 0.3; }
                }
                @keyframes pixelFloat {
                  0%, 100% { transform: translateY(0px); }
                  50% { transform: translateY(-4px); }
                }
                @keyframes pixelBounce {
                  0%, 100% { transform: translate(-50%, 0); }
                  50% { transform: translate(-50%, -3px); }
                }
              `}),l.jsx(v,{className:q("w-5 h-5 transition-all duration-300",t&&b&&"drop-shadow-lg"),style:t&&b?{filter:t==="superBloodMoon"?"drop-shadow(0 0 6px rgba(220, 20, 60, 0.8))":t==="emptySky"?"drop-shadow(0 0 5px rgba(60, 60, 80, 0.7))":t==="lunarTransientPhenomena"?"drop-shadow(0 0 6px rgba(200, 168, 248, 0.8))":t==="crystalMoon"?"drop-shadow(0 0 6px rgba(224, 240, 255, 0.8))":t==="arcticMoon"?"drop-shadow(0 0 6px rgba(144, 220, 255, 0.8))":t==="nebulaDreamMoon"?"drop-shadow(0 0 6px rgba(184, 136, 216, 0.8))":t==="pixelDreamMoon"?"drop-shadow(3px 3px 0 rgba(0,0,0,1)) drop-shadow(0 0 8px rgba(129,140,248,0.9))":void 0,animation:t==="lunarTransientPhenomena"?"iconFlicker 0.3s steps(3) infinite":t==="pixelDreamMoon"?"pixelIconBob 0.6s steps(2) infinite":void 0,color:t==="pixelDreamMoon"&&b?"#ffffff":void 0,imageRendering:t==="pixelDreamMoon"?"pixelated":void 0}:void 0}),l.jsx("style",{children:`
                @keyframes pixelIconBob {
                  0%, 100% { transform: translateY(0); }
                  50% { transform: translateY(-2px); }
                }
              `}),l.jsx("span",{className:q("text-[10px] font-medium transition-all duration-300",t==="pixelDreamMoon"&&b?"text-[#818cf8] font-['Press_Start_2P'] text-[8px] drop-shadow-[0_0_4px_rgba(129,140,248,0.8)]":t==="pixelDreamMoon"&&!b?"text-white/80 font-['Press_Start_2P'] text-[6px]":""),children:x})]},g)})})]})}function zD({children:e}){return Wa(),l.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[l.jsx("header",{className:"border-b border-border sticky top-0 bg-background z-10",children:l.jsx("div",{className:"container-app py-3",children:l.jsxs(dn,{to:"/",className:"text-lg font-semibold",children:["Dream book"," ",l.jsx("span",{className:"text-muted-foreground font-normal",children:"by Bon"})]})})}),l.jsx("main",{className:"flex-1 container-app pb-24",children:e}),l.jsx(fh,{})]})}var jr=function(){return jr=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},jr.apply(this,arguments)};function ko(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function BD(e,t,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function o(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,c)}u((r=r.apply(e,t||[])).next())})}function VD(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}const UD=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Eg extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class WD extends Eg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class _x extends Eg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Rx extends Eg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var gp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(gp||(gp={}));class HD{constructor(t,{headers:n={},customFetch:r,region:s=gp.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=UD(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return BD(this,arguments,void 0,function*(n,r={}){var s;let a,i;try{const{headers:o,method:c,body:u,signal:d,timeout:h}=r;let f={},{region:m}=r;m||(m=this.region);const y=new URL(`${this.url}/${n}`);m&&m!=="any"&&(f["x-region"]=m,y.searchParams.set("forceFunctionRegion",m));let g;u&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(f["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(f["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let v=d;h&&(i=new AbortController,a=setTimeout(()=>i.abort(),h),d?(v=i.signal,d.addEventListener("abort",()=>i.abort())):v=i.signal);const x=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:g,signal:v}).catch(k=>{throw new WD(k)}),b=x.headers.get("x-relay-error");if(b&&b==="true")throw new _x(x);if(!x.ok)throw new Rx(x);let w=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield x.json():w==="application/octet-stream"||w==="application/pdf"?S=yield x.blob():w==="text/event-stream"?S=x:w==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(o){return{data:null,error:o,response:o instanceof Rx||o instanceof _x?o.context:void 0}}finally{a&&clearTimeout(a)}})}}var GD=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},KD=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let i=null,o=null,c=null,u=a.status,d=a.statusText;if(a.ok){var h,f;if(n.method!=="HEAD"){var m;const x=await a.text();x===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((m=n.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?o=x:o=JSON.parse(x))}const g=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),v=(f=a.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&v&&v.length>1&&(c=parseInt(v[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,c=null,u=406,d="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var y;const g=await a.text();try{i=JSON.parse(g),Array.isArray(i)&&a.status===404&&(o=[],i=null,u=200,d="OK")}catch{a.status===404&&g===""?(u=204,d="No Content"):i={message:g}}if(i&&n.isMaybeSingle&&(!(i==null||(y=i.details)===null||y===void 0)&&y.includes("0 rows"))&&(i=null,u=200,d="OK"),i&&n.shouldThrowOnError)throw new GD(i)}return{error:i,data:o,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(a=>{var i;let o="";const c=a==null?void 0:a.cause;if(c){var u,d,h,f;const y=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",g=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";o=`${(h=a==null?void 0:a.name)!==null&&h!==void 0?h:"FetchError"}: ${a==null?void 0:a.message}`,o+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${y}`,g&&(o+=` (${g})`),c!=null&&c.stack&&(o+=`
${c.stack}`)}else{var m;o=(m=a==null?void 0:a.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},qD=class extends KD{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(i=this.headers.get("Accept"))!==null&&i!==void 0?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${o};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const Ax=new RegExp("[,()]");var oi=class extends qD{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Ax.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Ax.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},YD=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join(""),{url:o,headers:c}=this.cloneRequestState();return o.searchParams.set("select",i),r&&c.append("Prefer",`count=${r}`),new oi({method:s,url:o,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST",{url:a,headers:i}=this.cloneRequestState();if(t&&i.append("Prefer",`count=${t}`),n||i.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(o.length>0){const c=[...new Set(o)].map(u=>`"${u}"`);a.searchParams.set("columns",c.join(","))}}return new oi({method:s,url:a,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var a;const i="POST",{url:o,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&o.searchParams.set("on_conflict",t),r&&c.append("Prefer",`count=${r}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);o.searchParams.set("columns",d.join(","))}}return new oi({method:i,url:o,headers:c,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var n;const r="PATCH",{url:s,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new oi({method:r,url:s,headers:a,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new oi({method:n,url:r,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},XD=class wk{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new YD(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new wk(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:a}={}){var i;let o;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(d)),h=r&&Object.values(n).some(d);h?(o="POST",u=n):r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([m,y])=>y!==void 0).map(([m,y])=>[m,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([m,y])=>{c.searchParams.append(m,y)})):(o="POST",u=n);const f=new Headers(this.headers);return h?f.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&f.set("Prefer",`count=${a}`),new oi({method:o,url:c,headers:f,schema:this.schemaName,body:u,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};class QD{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const JD="2.91.0",ZD=`realtime-js/${JD}`,eO="1.0.0",bk="2.0.0",Dx=bk,yp=1e4,tO=1e3,nO=100;var vs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(vs||(vs={}));var yt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(yt||(yt={}));var lr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(lr||(lr={}));var vp;(function(e){e.websocket="websocket"})(vp||(vp={}));var pa;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(pa||(pa={}));class rO{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},i=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,i)}_encodeUserBroadcastPush(t,n,r){var s,a;const i=t.topic,o=(s=t.ref)!==null&&s!==void 0?s:"",c=(a=t.join_ref)!==null&&a!==void 0?a:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(i.length>255)throw new Error(`topic length ${i.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+o.length+i.length+u.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let y=new DataView(m),g=0;y.setUint8(g++,this.KINDS.userBroadcastPush),y.setUint8(g++,c.length),y.setUint8(g++,o.length),y.setUint8(g++,i.length),y.setUint8(g++,u.length),y.setUint8(g++,h.length),y.setUint8(g++,n),Array.from(c,x=>y.setUint8(g++,x.charCodeAt(0))),Array.from(o,x=>y.setUint8(g++,x.charCodeAt(0))),Array.from(i,x=>y.setUint8(g++,x.charCodeAt(0))),Array.from(u,x=>y.setUint8(g++,x.charCodeAt(0))),Array.from(h,x=>y.setUint8(g++,x.charCodeAt(0)));var v=new Uint8Array(m.byteLength+r.byteLength);return v.set(new Uint8Array(m),0),v.set(new Uint8Array(r),m.byteLength),v.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,a,i,o,c]=r;return n({join_ref:s,ref:a,topic:i,event:o,payload:c})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),a=n.getUint8(2),i=n.getUint8(3),o=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(t.slice(c,c+s));c=c+s;const d=r.decode(t.slice(c,c+a));c=c+a;const h=r.decode(t.slice(c,c+i));c=c+i;const f=t.slice(c,t.byteLength),m=o===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,y={type:this.BROADCAST_EVENT,event:d,payload:m};return i>0&&(y.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class Sk{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Le||(Le={}));const Ox=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,i)=>(a[i]=sO(i,e,t,s),a),{}):{}},sO=(e,t,n,r)=>{const s=t.find(o=>o.name===e),a=s==null?void 0:s.type,i=n[e];return a&&!r.includes(a)?kk(a,i):xp(i)},kk=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return lO(t,n)}switch(e){case Le.bool:return aO(t);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return iO(t);case Le.json:case Le.jsonb:return oO(t);case Le.timestamp:return cO(t);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return xp(t);default:return xp(t)}},xp=e=>e,aO=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},iO=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},oO=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},lO=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const i=e.slice(1,n);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(o=>kk(t,o))}return e},cO=e=>typeof e=="string"?e.replace(" ","T"):e,jk=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class xf{constructor(t,n,r={},s=yp){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ix;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ix||(Ix={}));class ul{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:i,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ul.syncState(this.state,s,a,i),this.pendingDiffs.forEach(c=>{this.state=ul.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ul.syncDiff(this.state,s,a,i),o())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const a=this.cloneDeep(t),i=this.transformState(n),o={},c={};return this.map(a,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const h=a[u];if(h){const f=d.map(v=>v.presence_ref),m=h.map(v=>v.presence_ref),y=d.filter(v=>m.indexOf(v.presence_ref)<0),g=h.filter(v=>f.indexOf(v.presence_ref)<0);y.length>0&&(o[u]=y),g.length>0&&(c[u]=g)}else o[u]=d}),this.syncDiff(a,{joins:o,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:a,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(o,c)=>{var u;const d=(u=t[o])!==null&&u!==void 0?u:[];if(t[o]=this.cloneDeep(c),d.length>0){const h=t[o].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[o].unshift(...f)}r(o,d,c)}),this.map(i,(o,c)=>{let u=t[o];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[o]=u,s(o,u,c),u.length===0&&delete t[o]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $x;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})($x||($x={}));var dl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(dl||(dl={}));var Vr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Vr||(Vr={}));class Si{constructor(t,n={config:{}},r){var s,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=yt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new xf(this,lr.join,this.params,this.timeout),this.rejoinTimer=new Sk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(lr.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new ul(this),this.broadcastEndpointURL=jk(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==yt.closed){const{config:{broadcast:i,presence:o,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[dl.PRESENCE]&&this.bindings[dl.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Vr.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Vr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(Vr.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,x=[];for(let b=0;b<v;b++){const w=g[b],{filter:{event:S,schema:k,table:j,filter:C}}=w,E=m&&m[b];if(E&&E.event===S&&Si.isFilterValueEqual(E.schema,k)&&Si.isFilterValueEqual(E.table,j)&&Si.isFilterValueEqual(E.filter,C))x.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),this.state=yt.errored,t==null||t(Vr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Vr.SUBSCRIBED);return}}).receive("error",m=>{this.state=yt.errored,t==null||t(Vr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Vr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===yt.joined&&t===dl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const i={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const u=await o.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:i}=t,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,o,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(i=this.params)===null||i===void 0?void 0:i.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=yt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(lr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new xf(this,lr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),i}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new xf(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>nO){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,a;const i=t.toLocaleLowerCase(),{close:o,error:c,leave:u,join:d}=lr;if(r&&[o,c,u,d].indexOf(i)>=0&&r!==this._joinRef())return;let f=this._onMessage(i,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var y,g,v;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(g=m.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===i}).map(m=>m.callback(f,r)):(a=this.bindings[i])===null||a===void 0||a.filter(m=>{var y,g,v,x,b,w,S,k;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const j=m.id,C=(y=m.filter)===null||y===void 0?void 0:y.event;return j&&((g=n.ids)===null||g===void 0?void 0:g.includes(j))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))&&(!(!((x=m.filter)===null||x===void 0)&&x.table)||m.filter.table===((b=n.data)===null||b===void 0?void 0:b.table))}else{const j=(S=(w=m==null?void 0:m.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return j==="*"||j===((k=n==null?void 0:n.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:g,table:v,commit_timestamp:x,type:b,errors:w}=y;f=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:x,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(y))}m.callback(f,r)})}_isClosed(){return this.state===yt.closed}_isJoined(){return this.state===yt.joined}_isJoining(){return this.state===yt.joining}_isLeaving(){return this.state===yt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Si.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(lr.close,{},t)}_onError(t){this._on(lr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Ox(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Ox(t.columns,t.old_record)),n}}const wf=()=>{},qc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uO=[1e3,2e3,5e3,1e4],dO=1e4,hO=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fO{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yp,this.transport=null,this.heartbeatIntervalMs=qc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wf,this.ref=0,this.reconnectTimer=null,this.vsn=Dx,this.logger=wf,this.conn=null,this.sendBuffer=[],this.serializer=new rO,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${vp.websocket}`,this.httpEndpoint=jk(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=QD.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case vs.connecting:return pa.Connecting;case vs.open:return pa.Open;case vs.closing:return pa.Closing;default:return pa.Closed}}isConnected(){return this.connectionState()===pa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new Si(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:s,ref:a}=t,i=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(tO,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},qc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:a,ref:i}=n,o=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${r} ${s} ${o}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,a,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===vs.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===vs.open||this.conn.readyState===vs.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(lr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([hO],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:ZD};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(lr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Sk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,a,i,o,c,u,d,h,f,m;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:yp,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:qc.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:wf,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:Dx,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:y=>uO[y-1]||dO,this.vsn){case eO:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(y,g)=>g(JSON.stringify(y)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(y,g)=>g(JSON.parse(y));break;case bk:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Bl=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function mO(e,t,n){const r=new URL(t,e);if(n)for(const[s,a]of Object.entries(n))a!==void 0&&r.searchParams.set(s,a);return r.toString()}async function pO(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function gO(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:a,headers:i}){const o=mO(e.baseUrl,r,s),c=await pO(e.auth),u=await t(o,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...c,...i},body:a?JSON.stringify(a):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const m=h?f:void 0,y=m==null?void 0:m.error;throw new Bl((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:m})}return{status:u.status,headers:u.headers,data:f}}}}function Yc(e){return e.join("")}var yO=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Yc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Yc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Yc(e.namespace)}`}),!0}catch(t){if(t instanceof Bl&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Bl&&n.status===409)return;throw n}}};function Ya(e){return e.join("")}var vO=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ya(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ya(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ya(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ya(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ya(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ya(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Bl&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Bl&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},xO=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=gO({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new yO(this.client,t),this.tableOps=new vO(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},mh=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Ke(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var wO=class extends mh{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},wp=class extends mh{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Tg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),bO=()=>Response,bp=e=>{if(Array.isArray(e))return e.map(n=>bp(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=bp(r)}),t},SO=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},kO=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Vl(e){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vl(e)}function jO(e,t){if(Vl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Vl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CO(e){var t=jO(e,"string");return Vl(t)=="symbol"?t:t+""}function EO(e,t,n){return(t=CO(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lx(Object(n),!0).forEach(function(r){EO(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lx(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const bf=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},TO=async(e,t,n)=>{e instanceof await bO()&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const s=e.status||500,a=(r==null?void 0:r.statusCode)||s+"";t(new wO(bf(r),s,a))}).catch(r=>{t(new wp(bf(r),r))}):t(new wp(bf(e),e))},MO=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(SO(r)?(s.headers=ie({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),ie(ie({},s),n))};async function pc(e,t,n,r,s,a){return new Promise((i,o)=>{e(n,MO(t,r,s,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>TO(c,o,r))})}async function Ul(e,t,n,r){return pc(e,"GET",t,n,r)}async function sr(e,t,n,r,s){return pc(e,"POST",t,r,s,n)}async function Sp(e,t,n,r,s){return pc(e,"PUT",t,r,s,n)}async function NO(e,t,n,r){return pc(e,"HEAD",t,ie(ie({},n),{},{noResolveJson:!0}),r)}async function Mg(e,t,n,r,s){return pc(e,"DELETE",t,r,s,n)}var PO=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}}};let Ck;Ck=Symbol.toStringTag;var _O=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Ck]="BlobDownloadBuilder",this.promise=null}asStream(){return new PO(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Ke(t))return{data:null,error:t};throw t}}};const RO={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var AO=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Tg(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var s=this;try{let a;const i=ie(ie({},Fx),r);let o=ie(ie({},s.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",s.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",i.cacheControl),c&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(c))):(a=n,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType,c&&(o["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!i.duplex&&(i.duplex="half")),r!=null&&r.headers&&(o=ie(ie({},o),r.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),h=await(e=="PUT"?Sp:sr)(s.fetch,`${s.url}/object/${d}`,a,ie({headers:o},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Ke(a))return{data:null,error:a};throw a}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const a=s._removeEmptyFolders(e),i=s._getFinalPath(a),o=new URL(s.url+`/object/upload/sign/${i}`);o.searchParams.set("token",t);try{let c;const u=ie({upsert:Fx.upsert},r),d=ie(ie({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:a,fullPath:(await Sp(s.fetch,o.toString(),c,{headers:d})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(Ke(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const s=ie({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const a=await sr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(n.url+a.url),o=i.searchParams.get("token");if(!o)throw new mh("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await sr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}}async copy(e,t,n){var r=this;try{return{data:{path:(await sr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,n){var r=this;try{let s=r._getFinalPath(e),a=await sr(r.fetch,`${r.url}/object/sign/${s}`,ie({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${r.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,n){var r=this;try{const s=await sr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>ie(ie({},i),{},{signedUrl:i.signedURL?encodeURI(`${r.url}${i.signedURL}${a}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=r?`?${r}`:"",a=this._getFinalPath(e),i=()=>Ul(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new _O(i,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:bp(await Ul(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await NO(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Ke(r)&&r instanceof wp){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});i!==""&&r.push(i);let o=r.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${o}`)}}}async remove(e){var t=this;try{return{data:await Mg(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const s=ie(ie(ie({},RO),t),{},{prefix:e||""});return{data:await sr(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Ke(s))return{data:null,error:s};throw s}}async listV2(e,t){var n=this;try{const r=ie({},e);return{data:await sr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Ek="2.91.0",Tk={"X-Client-Info":`storage-js/${Ek}`};var DO=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=ie(ie({},Tk),t),this.fetch=Tg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await Ul(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await Ul(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await sr(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await Sp(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ke(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await sr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Mg(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},OO=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ie(ie({},Tk),t),this.fetch=Tg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await sr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await Ul(t.fetch,s,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Mg(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Ke(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!kO(e))throw new mh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new xO({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,a){const i=s[a];return typeof i!="function"?i:async(...o)=>{try{return{data:await i.apply(s,o),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}};const Ng={"X-Client-Info":`storage-js/${Ek}`,"Content-Type":"application/json"};var Mk=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function xn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Sf=class extends Mk{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},IO=class extends Mk{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Pg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),$O=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},zx=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),LO=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,s=e;if(typeof s.json=="function")s.json().then(a=>{const i=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||r+"";t(new Sf(zx(a),r,i))}).catch(()=>{const a=r+"";t(new Sf(s.statusText||`HTTP ${r} error`,r,a))});else{const a=r+"";t(new Sf(s.statusText||`HTTP ${r} error`,r,a))}}else t(new IO(zx(e),e))},FO=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return r?($O(r)?(s.headers=ie({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,ie(ie({},s),n)):s};async function zO(e,t,n,r,s,a){return new Promise((i,o)=>{e(n,FO(t,r,s,a)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>LO(c,o,r))})}async function wn(e,t,n,r,s){return zO(e,"POST",t,r,s,n)}var BO=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ie(ie({},Ng),t),this.fetch=Pg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await wn(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await wn(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(xn(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await wn(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await wn(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(xn(r))return{data:null,error:r};throw r}}},VO=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ie(ie({},Ng),t),this.fetch=Pg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await wn(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await wn(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await wn(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await wn(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await wn(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}}},UO=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=ie(ie({},Ng),t),this.fetch=Pg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await wn(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await wn(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await wn(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await wn(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(xn(n))return{data:null,error:n};throw n}}},WO=class extends UO{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new HO(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},HO=class extends BO{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,ie(ie({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,ie(ie({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new GO(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},GO=class extends VO{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,ie(ie({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,ie(ie({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,ie(ie({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,ie(ie({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,ie(ie({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},KO=class extends DO{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new AO(this.url,this.headers,e,this.fetch)}get vectors(){return new WO(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new OO(this.url+"/iceberg",this.headers,this.fetch)}};const Nk="2.91.0",li=30*1e3,kp=3,kf=kp*li,qO="http://localhost:9999",YO="supabase.auth.token",XO={"X-Client-Info":`gotrue-js/${Nk}`},jp="X-Supabase-Api-Version",Pk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},QO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JO=10*60*1e3;class Wl extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function te(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class ZO extends Wl{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function eI(e){return te(e)&&e.name==="AuthApiError"}class ga extends Wl{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class os extends Wl{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class gn extends os{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function tI(e){return te(e)&&e.name==="AuthSessionMissingError"}class Xa extends os{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Xc extends os{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Qc extends os{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function nI(e){return te(e)&&e.name==="AuthImplicitGrantRedirectError"}class Bx extends os{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rI extends os{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Cp extends os{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function jf(e){return te(e)&&e.name==="AuthRetryableFetchError"}class Vx extends os{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Ep extends os{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const md="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ux=` 	
\r=`.split(""),sI=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ux.length;t+=1)e[Ux[t].charCodeAt(0)]=-2;for(let t=0;t<md.length;t+=1)e[md[t].charCodeAt(0)]=t;return e})();function Wx(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(md[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(md[r]),t.queuedBits-=6}}function _k(e,t,n){const r=sI[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Hx(e){const t=[],n=i=>{t.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=i=>{oI(i,r,n)};for(let i=0;i<e.length;i+=1)_k(e.charCodeAt(i),s,a);return t.join("")}function aI(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function iI(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}aI(r,t)}}function oI(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Li(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)_k(e.charCodeAt(s),n,r);return new Uint8Array(t)}function lI(e){const t=[];return iI(e,n=>t.push(n)),new Uint8Array(t)}function wa(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>Wx(s,n,r)),Wx(null,n,r),t.join("")}function cI(e){return Math.round(Date.now()/1e3)+e}function uI(){return Symbol("auth-callback")}const Et=()=>typeof window<"u"&&typeof document<"u",ia={tested:!1,writable:!1},Rk=()=>{if(!Et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ia.tested)return ia.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ia.tested=!0,ia.writable=!0}catch{ia.tested=!0,ia.writable=!1}return ia.writable};function dI(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const Ak=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),hI=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ci=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},oa=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ct=async(e,t)=>{await e.removeItem(t)};class ph{constructor(){this.promise=new ph.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}ph.promiseConstructor=Promise;function Cf(e){const t=e.split(".");if(t.length!==3)throw new Ep("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!QO.test(t[r]))throw new Ep("JWT not in base64url format");return{header:JSON.parse(Hx(t[0])),payload:JSON.parse(Hx(t[1])),signature:Li(t[2]),raw:{header:t[0],payload:t[1]}}}async function fI(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function mI(e,t){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await e(a);if(!t(a,null,i)){r(i);return}}catch(i){if(!t(a,i)){s(i);return}}})()})}function pI(e){return("0"+e.toString(16)).substr(-2)}function gI(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,pI).join("")}async function yI(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function vI(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await yI(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Qa(e,t,n=!1){const r=gI();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ci(e,`${t}-code-verifier`,s);const a=await vI(r);return[a,r===a?"plain":"s256"]}const xI=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function wI(e){const t=e.headers.get(jp);if(!t||!t.match(xI))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function bI(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function SI(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kI=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ja(e){if(!kI.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ef(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function jI(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function Gx(e){return JSON.parse(JSON.stringify(e))}const da=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),CI=[502,503,504];async function Kx(e){var t;if(!hI(e))throw new Cp(da(e),0);if(CI.includes(e.status))throw new Cp(da(e),e.status);let n;try{n=await e.json()}catch(a){throw new ga(da(a),a)}let r;const s=wI(e);if(s&&s.getTime()>=Pk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Vx(da(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new gn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Vx(da(n),e.status,n.weak_password.reasons);throw new ZO(da(n),e.status||500,r)}const EI=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function se(e,t,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[jp]||(a[jp]=Pk["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await TI(e,t,n+o,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function TI(e,t,n,r,s,a){const i=EI(t,r,s,a);let o;try{o=await e(n,Object.assign({},i))}catch(c){throw console.error(c),new Cp(da(c),0)}if(o.ok||await Kx(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(c){await Kx(c)}}function Zn(e){var t;let n=null;PI(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=cI(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function qx(e){const t=Zn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function bs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function MI(e){return{data:e,error:null}}function NI(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,i=ko(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},c=Object.assign({},i);return{data:{properties:o,user:c},error:null}}function Yx(e){return e}function PI(e){return e.access_token&&e.refresh_token&&e.expires_in}const Tf=["global","local","others"];class _I{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Ak(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Tf[0]){if(Tf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tf.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:bs})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=ko(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:NI,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(te(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:bs})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,a,i,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Yx});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(te(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ja(t);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:bs})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Ja(t);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:bs})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Ja(t);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:bs})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Ja(t.userId);try{const{data:n,error:r}=await se(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(te(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Ja(t.userId),Ja(t.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(te(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,a,i,o,c;try{const u={nextPage:null,lastPage:0,total:0},d=await se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:Yx});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(te(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(te(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(te(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(te(n))return{data:null,error:n};throw n}}}function Xx(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Za={debug:!!(globalThis&&Rk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Dk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class RI extends Dk{}async function AI(e,t,n){Za.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Za.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Za.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Za.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Za.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new RI(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Za.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function DI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ok(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function OI(e){return parseInt(e,16)}function II(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function $I(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:i,notBefore:o,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=Ok(e.address),y=d?`${d}://${r}`:r,g=e.statement?`${e.statement}
`:"",v=`${y} wants you to sign in with your Ethereum account:
${m}

${g}`;let x=`URI: ${h}
Version: ${f}
Chain ID: ${n}${i?`
Nonce: ${i}`:""}
Issued At: ${a.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),o&&(x+=`
Not Before: ${o.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let b=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);b+=`
- ${w}`}x+=b}return`${v}
${x}`}class ft extends Error{constructor({message:t,code:n,cause:r,name:s}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class pd extends ft{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function LI({error:e,options:t}){var n,r,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ft({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ft({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ft({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ft({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ft({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ft({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new ft({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ft({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(Ik(i)){if(a.rp.id!==i)return new ft({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new ft({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ft({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function FI({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ft({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ft({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(Ik(r)){if(n.rpId!==r)return new ft({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ft({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class zI{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const BI=new zI;function VI(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=ko(e,["challenge","user","excludeCredentials"]),a=Li(t).buffer,i=Object.assign(Object.assign({},n),{id:Li(n.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:a,user:i});if(r&&r.length>0){o.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];o.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Li(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function UI(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=ko(e,["challenge","allowCredentials"]),s=Li(t).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let i=0;i<n.length;i++){const o=n[i];a.allowCredentials[i]=Object.assign(Object.assign({},o),{id:Li(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return a}function WI(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:wa(new Uint8Array(e.response.attestationObject)),clientDataJSON:wa(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function HI(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:wa(new Uint8Array(s.authenticatorData)),clientDataJSON:wa(new Uint8Array(s.clientDataJSON)),signature:wa(new Uint8Array(s.signature)),userHandle:s.userHandle?wa(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Ik(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Qx(){var e,t;return!!(Et()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function GI(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new pd("Browser returned unexpected credential type",t)}:{data:null,error:new pd("Empty credential response",t)}}catch(t){return{data:null,error:LI({error:t,options:e})}}}async function KI(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new pd("Browser returned unexpected credential type",t)}:{data:null,error:new pd("Empty credential response",t)}}catch(t){return{data:null,error:FI({error:t,options:e})}}}const qI={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},YI={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function gd(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const a in s){const i=s[a];if(i!==void 0)if(Array.isArray(i))r[a]=i;else if(n(i))r[a]=i;else if(t(i)){const o=r[a];t(o)?r[a]=gd(o,i):r[a]=gd(i)}else r[a]=i}return r}function XI(e,t){return gd(qI,e,t||{})}function QI(e,t){return gd(YI,e,t||{})}class JI{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},a){try{const{data:i,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!i)return{data:null,error:o};const c=s??BI.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:u}=i.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(i.webauthn.type){case"create":{const u=XI(i.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:h}=await GI({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=QI(i.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:h}=await KI(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(i){return te(i)?{data:null,error:i}:{data:null,error:new ga("Unexpected error in challenge",i)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new Wl("rpId is required for WebAuthn authentication")};try{if(!Qx())return{data:null,error:new ga("Browser does not support WebAuthn",null)};const{data:i,error:o}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:a});if(!i)return{data:null,error:o};const{webauthn:c}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(i){return te(i)?{data:null,error:i}:{data:null,error:new ga("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new Wl("rpId is required for WebAuthn registration")};try{if(!Qx())return{data:null,error:new ga("Browser does not support WebAuthn",null)};const{data:i,error:o}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:o};const{data:c,error:u}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:a});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(i){return te(i)?{data:null,error:i}:{data:null,error:new ga("Unexpected error in register",i)}}}}DI();const ZI={url:qO,storageKey:YO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:XO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Jx(e,t,n){return await n()}const ei={};class Hl{get jwks(){var t,n;return(n=(t=ei[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){ei[this.storageKey]=Object.assign(Object.assign({},ei[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=ei[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ei[this.storageKey]=Object.assign(Object.assign({},ei[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},ZI),t);if(this.storageKey=a.storageKey,this.instanceID=(n=Hl.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Hl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Et()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new _I({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Ak(a.fetch),this.lock=a.lock||Jx,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Et()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=AI:this.lock=Jx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new JI(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:Rk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Xx(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Xx(this.memoryStorage)),Et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Nk}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Et()&&(n=dI(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Et()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),nI(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:i,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return te(n)?this._returnResult({error:n}):this._returnResult({error:new ga("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const a=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Zn}),{data:i,error:o}=a;if(o||!i)return this._returnResult({data:{user:null,session:null},error:o});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(te(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,s;try{let a;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await Qa(this.storage,this.storageKey)),a=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:y},xform:Zn})}else if("phone"in t){const{phone:d,password:h,options:f}=t;a=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Zn})}else throw new Xc("You must provide either an email or phone number and a password");const{data:i,error:o}=a;if(o||!i)return await Ct(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),te(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:i,options:o}=t;n=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:qx})}else if("phone"in t){const{phone:a,password:i,options:o}=t;n=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:qx})}else throw new Xc("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const a=new Xa;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(te(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,a,i,o,c,u,d,h,f;let m,y;if("message"in t)m=t.message,y=t.signature;else{const{chain:g,wallet:v,statement:x,options:b}=t;let w;if(Et())if(typeof v=="object")w=v;else{const M=window;if("ethereum"in M&&typeof M.ethereum=="object"&&"request"in M.ethereum&&typeof M.ethereum.request=="function")w=M.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const S=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href),k=await w.request({method:"eth_requestAccounts"}).then(M=>M).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=Ok(k[0]);let C=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!C){const M=await w.request({method:"eth_chainId"});C=OI(M)}const E={domain:S.host,address:j,statement:x,uri:S.href,version:"1",chainId:C,nonce:(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(o=b==null?void 0:b.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=$I(E),y=await w.request({method:"personal_sign",params:[II(m),j]})}try{const{data:g,error:v}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:y},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Zn});if(v)throw v;if(!g||!g.session||!g.user){const x=new Xa;return this._returnResult({data:{user:null,session:null},error:x})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:v})}catch(g){if(te(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var n,r,s,a,i,o,c,u,d,h,f,m;let y,g;if("message"in t)y=t.message,g=t.signature;else{const{chain:v,wallet:x,statement:b,options:w}=t;let S;if(Et())if(typeof x=="object")S=x;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))S=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=x}const k=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const j=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),b?{statement:b}:null));let C;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")C=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)C=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)y=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${k.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const j=await S.signMessage(new TextEncoder().encode(y),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=j}}try{const{data:v,error:x}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:wa(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Zn});if(x)throw x;if(!v||!v.session||!v.user){const b=new Xa;return this._returnResult({data:{user:null,session:null},error:b})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:x})}catch(v){if(te(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(t){const n=await oa(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new rI;const{data:a,error:i}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Zn});if(await Ct(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!a||!a.session||!a.user){const o=new Xa;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return a.session&&(await this._saveSession(a.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",a.session)},0)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),te(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:a,nonce:i}=t,o=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Zn}),{data:c,error:u}=o;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new Xa;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(te(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,a,i;try{if("email"in t){const{email:o,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Qa(this.storage,this.storageKey));const{error:h}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:o,options:c}=t,{data:u,error:d}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Xc("You must provide either an email or phone number.")}catch(o){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),te(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var n,r;try{let s,a;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:o}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Zn});if(o)throw o;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(te(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,a,i;try{let o=null,c=null;this.flowType==="pkce"&&([o,c]=await Qa(this.storage,this.storageKey));const u=await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:c}),headers:this.headers,xform:MI});return!((a=u.data)===null||a===void 0)&&a.url&&Et()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(o){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),te(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new gn;const{error:s}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(te(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:a}=t,{error:i}=await se(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in t){const{phone:r,type:s,options:a}=t,{data:i,error:o}=await se(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:o})}throw new Xc("You must provide either an email or phone number and a type")}catch(n){if(te(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await oa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<kf:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const i=await oa(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=Ef()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};t.user=jI(t.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:bs}):await this._useSession(async n=>{var r,s,a;const{data:i,error:o}=n;if(o)throw o;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new gn}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:bs})})}catch(n){if(te(n))return tI(n)&&(await this._removeSession(),await Ct(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new gn;const i=s.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Qa(this.storage,this.storageKey));const{data:u,error:d}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:i.access_token,xform:bs});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(r){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),te(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new gn;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:i}=Cf(t.access_token);if(i.exp&&(r=i.exp,s=r<=n),s){const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};a=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(te(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:i,error:o}=n;if(o)throw o;t=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new gn;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(te(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Et())throw new Qc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Qc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Bx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Qc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bx("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:o,expires_at:c,token_type:u}=t;if(!a||!o||!i||!u)throw new Qc("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(o);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=li&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:g,error:v}=await this._getUser(a);if(v)throw v;const x={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:f,refresh_token:i,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:t.type},error:null})}catch(r){if(te(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await oa(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({error:a});const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:o}=await this.admin.signOut(i,t);if(o&&!(eI(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await Ct(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=uI(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Qa(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),te(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(te(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var i,o,c,u,d;const{data:h,error:f}=a;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Et()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(te(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:i,provider:o,token:c,access_token:u,nonce:d}=t,h=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:o,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Zn}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Xa}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(await Ct(this.storage,`${this.storageKey}-code-verifier`),te(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:i}=n;if(i)throw i;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(te(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await mI(async s=>(s>0&&await fI(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Zn})),(s,a)=>{const i=200*Math.pow(2,s);return a&&jf(a)&&Date.now()+i-r<li})}catch(r){if(this._debug(n,"error",r),te(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Et()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await oa(this.storage,this.storageKey);if(s&&this.userStorage){let i=await oa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await ci(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:Ef()}else if(s&&!s.user&&!s.user){const i=await oa(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Ct(this.storage,this.storageKey+"-user"),await ci(this.storage,this.storageKey,s)):s.user=Ef()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<kf;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${kf}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),jf(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:o}=await this._getUser(s.access_token);!o&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new gn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ph;const{data:a,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!a.session)throw new gn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const o={data:a.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(a){if(this._debug(s,"error",a),te(a)){const i={data:null,error:a};return jf(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,n)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let o=0;o<a.length;o+=1)console.error(a[o]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ct(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ci(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=Gx(s);await ci(this.storage,this.storageKey,a)}else{const s=Gx(n);await ci(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ct(this.storage,this.storageKey),await Ct(this.storage,this.storageKey+"-code-verifier"),await Ct(this.storage,this.storageKey+"-user"),this.userStorage&&await Ct(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Et()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),li);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/li);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${li}ms, refresh threshold is ${kp} ticks`),s<=kp&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Dk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Et()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,i]=await Qa(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?this._returnResult({data:null,error:a}):await se(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(te(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await se(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(te(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?WI(t.webauthn.credential_response):HI(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:c}=await se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(n){if(te(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const i=await se(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(i.error)return i;const{data:o}=i;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:VI(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:UI(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(te(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Cf(r.access_token);let i=null;a.aal&&(i=a.aal);let o=i;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(o="aal2");const u=a.amr||[];return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await se(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new gn})})}catch(n){if(te(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new gn});const i=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return i.data&&i.data.redirect_url&&Et()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new gn});const i=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return i.data&&i.data.redirect_url&&Et()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new gn})})}catch(t){if(te(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new gn})})}catch(n){if(te(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+JO>s)return r;const{data:a,error:i}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(o=>o.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:y}=await this.getSession();if(y||!m.session)return this._returnResult({data:null,error:y});r=m.session.access_token}const{header:s,payload:a,signature:i,raw:{header:o,payload:c}}=Cf(r);n!=null&&n.allowExpired||bI(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:a,header:s,signature:i},error:null}}const d=SI(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,lI(`${o}.${c}`)))throw new Ep("Invalid JWT signature");return{data:{claims:a,header:s,signature:i},error:null}}catch(r){if(te(r))return this._returnResult({data:null,error:r});throw r}}}Hl.nextInstanceID={};const e8=Hl,t8="2.91.0";let Go="";typeof Deno<"u"?Go="deno":typeof document<"u"?Go="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Go="react-native":Go="node";const n8={"X-Client-Info":`supabase-js-${Go}/${t8}`},r8={headers:n8},s8={schema:"public"},a8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},i8={};function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function o8(e,t){if(Gl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Gl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l8(e){var t=o8(e,"string");return Gl(t)=="symbol"?t:t+""}function c8(e,t,n){return(t=l8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zx(Object(n),!0).forEach(function(r){c8(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zx(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const u8=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),d8=()=>Headers,h8=(e,t,n)=>{const r=u8(n),s=d8();return async(a,i)=>{var o;const c=(o=await t())!==null&&o!==void 0?o:e;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(a,rt(rt({},i),{},{headers:u}))}};function f8(e){return e.endsWith("/")?e:e+"/"}function m8(e,t){var n,r;const{db:s,auth:a,realtime:i,global:o}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:rt(rt({},c),s),auth:rt(rt({},u),a),realtime:rt(rt({},d),i),storage:{},global:rt(rt(rt({},h),o),{},{headers:rt(rt({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=o==null?void 0:o.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function p8(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(f8(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var g8=class extends e8{constructor(e){super(e)}},y8=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const a=p8(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const i=`sb-${a.hostname.split(".")[0]}-auth-token`,o={db:s8,realtime:i8,auth:rt(rt({},a8),{},{storageKey:i}),global:r8},c=m8(n??{},o);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=h8(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(rt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new XD(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new KO(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new HD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:a,flowType:i,lock:o,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new g8({url:this.authUrl.href,headers:rt(rt({},f),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:i,lock:o,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new fO(this.realtimeUrl.href,rt(rt({},e),{},{params:rt(rt({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const v8=(e,t,n)=>new y8(e,t,n);function x8(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}x8()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const w8="https://rapxqrjhrehfhqsafovf.supabase.co",b8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhcHhxcmpocmVoZmhxc2Fmb3ZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5MjczOTYsImV4cCI6MjA4NDUwMzM5Nn0.OpoDaXxYH0wDGj9S4AYRDwVVfW2xhOsBjY8Nh8zl2co",ot=v8(w8,b8,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});async function Ha(){const{data:e,error:t}=await ot.from("dream_logs").select(`
      *,
      world:worlds(id, name),
      entities:dream_log_entities(entity:entities(id, name))
    `).order("date",{ascending:!1});return t?(console.error("Error fetching dream logs:",t),[]):(e||[]).map(n=>{var r,s;return{id:n.dream_id,date:n.date,wakeTime:n.wake_time,world:((r=n.world)==null?void 0:r.name)||"",timeSystem:n.time_system,environments:n.environments||[],entities:((s=n.entities)==null?void 0:s.map(a=>{var i;return(i=a.entity)==null?void 0:i.name}).filter(Boolean))||[],threatLevel:n.threat_level,safetyOverride:n.safety_override,exit:n.exit,notes:n.notes||void 0,createdAt:n.created_at}})}async function $k(e){let t=null;if(e.world){const{data:s}=await ot.from("worlds").select("id").eq("name",e.world).maybeSingle();if(s)t=s.id;else{const{data:a}=await ot.from("worlds").insert({name:e.world,type:"transient",stability:3}).select("id").single();t=(a==null?void 0:a.id)||null}}const{data:n,error:r}=await ot.from("dream_logs").insert({dream_id:"",date:e.date,wake_time:e.wakeTime,world_id:t,time_system:e.timeSystem,environments:e.environments,threat_level:e.threatLevel,safety_override:e.safetyOverride,exit:e.exit,notes:e.notes}).select().single();if(r||!n)return console.error("Error adding dream log:",r),null;for(const s of e.entities){let a;const{data:i}=await ot.from("entities").select("id").eq("name",s).maybeSingle();if(i)a=i.id;else{const{data:o}=await ot.from("entities").insert({name:s,role:"observer"}).select("id").single();a=(o==null?void 0:o.id)||""}a&&await ot.from("dream_log_entities").insert({dream_log_id:n.id,entity_id:a})}return{id:n.dream_id,date:n.date,wakeTime:n.wake_time,world:e.world,timeSystem:n.time_system,environments:n.environments||[],entities:e.entities,threatLevel:n.threat_level,safetyOverride:n.safety_override,exit:n.exit,notes:n.notes||void 0,createdAt:n.created_at}}async function S8(e,t){const{data:n}=await ot.from("dream_logs").select("*").eq("dream_id",e).single();if(!n)return null;let r=n.world_id;if(t.world){const{data:o}=await ot.from("worlds").select("id").eq("name",t.world).maybeSingle();if(o)r=o.id;else{const{data:c}=await ot.from("worlds").insert({name:t.world,type:"transient",stability:3}).select("id").single();r=(c==null?void 0:c.id)||r}}const{data:s,error:a}=await ot.from("dream_logs").update({world_id:r,time_system:t.timeSystem||n.time_system,environments:t.environments||n.environments,threat_level:t.threatLevel!==void 0?t.threatLevel:n.threat_level,safety_override:t.safetyOverride||n.safety_override,exit:t.exit||n.exit,notes:t.notes!==void 0?t.notes:n.notes}).eq("dream_id",e).select().single();if(a||!s)return console.error("Error updating dream log:",a),null;if(t.entities){await ot.from("dream_log_entities").delete().eq("dream_log_id",s.id);for(const o of t.entities){let c;const{data:u}=await ot.from("entities").select("id").eq("name",o).maybeSingle();if(u)c=u.id;else{const{data:d}=await ot.from("entities").insert({name:o,role:"observer"}).select("id").single();c=(d==null?void 0:d.id)||""}c&&await ot.from("dream_log_entities").insert({dream_log_id:s.id,entity_id:c})}}let i=t.world||"";if(!i&&r){const{data:o}=await ot.from("worlds").select("name").eq("id",r).maybeSingle();i=(o==null?void 0:o.name)||""}return{id:s.dream_id,date:s.date,wakeTime:s.wake_time,world:i,timeSystem:s.time_system,environments:s.environments||[],entities:t.entities||[],threatLevel:s.threat_level,safetyOverride:s.safety_override,exit:s.exit,notes:s.notes||void 0,createdAt:s.created_at}}async function k8(e){const{error:t}=await ot.from("dream_logs").delete().eq("dream_id",e);return!t}async function gc(){const{data:e,error:t}=await ot.from("worlds").select(`
      *,
      dream_logs(dream_id)
    `).order("name");return t?(console.error("Error fetching worlds:",t),[]):(e||[]).map(n=>{var r;return{id:n.id,name:n.name,type:n.type,stability:n.stability,description:n.description||void 0,dreamIds:((r=n.dream_logs)==null?void 0:r.map(s=>s.dream_id))||[]}})}async function gh(){const{data:e,error:t}=await ot.from("entities").select(`
      *,
      dream_log_entities(dream_log:dream_logs(dream_id))
    `).order("name");return t?(console.error("Error fetching entities:",t),[]):(e||[]).map(n=>{var r;return{id:n.id,name:n.name,role:n.role,description:n.description||void 0,dreamIds:((r=n.dream_log_entities)==null?void 0:r.map(s=>{var a;return(a=s.dream_log)==null?void 0:a.dream_id}).filter(Boolean))||[]}})}async function j8(){const{data:e,error:t}=await ot.from("threats").select(`
      *,
      dream_log_threats(dream_log:dream_logs(dream_id))
    `).order("name");return t?(console.error("Error fetching threats:",t),[]):(e||[]).map(n=>{var r;return{id:n.id,name:n.name,level:n.level,response:n.response||void 0,dreamIds:((r=n.dream_log_threats)==null?void 0:r.map(s=>{var a;return(a=s.dream_log)==null?void 0:a.dream_id}).filter(Boolean))||[]}})}async function C8(e,t,n,r){const s=await fetch("https://rapxqrjhrehfhqsafovf.supabase.co/functions/v1/suggest-tags",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhcHhxcmpocmVoZmhxc2Fmb3ZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5MjczOTYsImV4cCI6MjA4NDUwMzM5Nn0.OpoDaXxYH0wDGj9S4AYRDwVVfW2xhOsBjY8Nh8zl2co"},body:JSON.stringify({text:e,existingWorlds:t,existingEntities:n,existingEnvironments:r})});return s.ok?s.json():{world:null,environments:[],entities:[],threatLevel:0,safetyOverride:"unknown",exit:"unknown",timeSystem:"unknown"}}const $n={newMoon:{id:"newMoon",name:"",nameEn:"New Moon",rarity:"normal",moonTint:"#2a2a3a",skyPalette:["#000000","#0a0a1a","#14142a"],uiAccent:"#5a5a7a",transitionSpeed:35,starDensity:1,cloudOpacity:.15,cloudSpeed:.7,shootingStarChance:.2,emotionTag:"new_beginning",subtitle:""},waxingCrescent:{id:"waxingCrescent",name:"",nameEn:"Waxing Crescent",rarity:"normal",moonTint:"#D8D8E8",skyPalette:["#0a0e27","#1a1e37","#2a2e47"],uiAccent:"#8888a8",transitionSpeed:30,starDensity:.85,cloudOpacity:.25,cloudSpeed:.9,shootingStarChance:.22,emotionTag:"growing",subtitle:" "},firstQuarter:{id:"firstQuarter",name:"",nameEn:"First Quarter",rarity:"normal",moonTint:"#E0E0F0",skyPalette:["#0c1028","#1c2038","#2c3048"],uiAccent:"#9090b0",transitionSpeed:30,starDensity:.8,cloudOpacity:.3,cloudSpeed:1,shootingStarChance:.25,emotionTag:"balanced",subtitle:""},waxingGibbous:{id:"waxingGibbous",name:"",nameEn:"Waxing Gibbous",rarity:"normal",moonTint:"#E8E8F8",skyPalette:["#0a0e2a","#1a1e3a","#2a2e4a"],uiAccent:"#9898c8",transitionSpeed:30,starDensity:.75,cloudOpacity:.35,cloudSpeed:1.1,shootingStarChance:.28,emotionTag:"anticipation",subtitle:""},fullMoon:{id:"fullMoon",name:"",nameEn:"Full Moon",rarity:"normal",moonTint:"#E6E6FA",skyPalette:["#0a0e27","#1a1e3e","#2a2e4e"],uiAccent:"#9090c0",transitionSpeed:30,starDensity:.8,cloudOpacity:.3,cloudSpeed:1,shootingStarChance:.25,emotionTag:"peaceful",subtitle:""},waningGibbous:{id:"waningGibbous",name:"",nameEn:"Waning Gibbous",rarity:"normal",moonTint:"#D0D0E0",skyPalette:["#0a0e25","#1a1e35","#2a2e45"],uiAccent:"#8080a0",transitionSpeed:32,starDensity:.82,cloudOpacity:.28,cloudSpeed:.95,shootingStarChance:.23,emotionTag:"reflection",subtitle:""},lastQuarter:{id:"lastQuarter",name:"",nameEn:"Last Quarter",rarity:"normal",moonTint:"#C8C8D8",skyPalette:["#0b0f26","#1b1f36","#2b2f46"],uiAccent:"#7878a8",transitionSpeed:33,starDensity:.85,cloudOpacity:.25,cloudSpeed:.9,shootingStarChance:.2,emotionTag:"letting_go",subtitle:""},waningCrescent:{id:"waningCrescent",name:"",nameEn:"Waning Crescent",rarity:"normal",moonTint:"#B8B8C8",skyPalette:["#080c24","#181c34","#282c44"],uiAccent:"#6868a0",transitionSpeed:35,starDensity:.9,cloudOpacity:.2,cloudSpeed:.8,shootingStarChance:.18,emotionTag:"fading",subtitle:" "},penumbralEclipse:{id:"penumbralEclipse",name:"",nameEn:"Penumbral Lunar Eclipse",rarity:"rare",moonTint:"#A8A8B8",skyPalette:["#0a0a1a","#1a1a2a","#2a2a3a"],uiAccent:"#7878a8",transitionSpeed:40,starDensity:.85,cloudOpacity:.25,cloudSpeed:.8,shootingStarChance:.3,emotionTag:"subtle_change",subtitle:""},partialEclipse:{id:"partialEclipse",name:"",nameEn:"Partial Lunar Eclipse",rarity:"very_rare",moonTint:"#987070",skyPalette:["#150a0a","#251a1a","#352a2a"],uiAccent:"#a87878",transitionSpeed:45,starDensity:.75,cloudOpacity:.35,cloudSpeed:1,shootingStarChance:.35,emotionTag:"partial_shadow",subtitle:""},totalEclipse:{id:"totalEclipse",name:"",nameEn:"Total Lunar Eclipse",rarity:"legendary",moonTint:"#8B4545",skyPalette:["#1a0a0a","#2a1a1a","#3a2a2a"],uiAccent:"#a85555",transitionSpeed:45,starDensity:.7,cloudOpacity:.4,cloudSpeed:1.2,shootingStarChance:.4,specialEffect:"bloodRing",effectIntensity:.75,emotionTag:"intense",subtitle:""},superBloodMoon:{id:"superBloodMoon",name:"",nameEn:"Super Blood Moon",rarity:"mythic",moonTint:"#A03030",skyPalette:["#200505","#301515","#402525"],uiAccent:"#c84040",transitionSpeed:50,starDensity:.65,cloudOpacity:.45,cloudSpeed:1.3,shootingStarChance:.5,specialEffect:"meteorShower",effectIntensity:.9,emotionTag:"dramatic",subtitle:"",moonSize:1.5},superBlueBloodMoon:{id:"superBlueBloodMoon",name:"",nameEn:"Super Blue Blood Moon",rarity:"mythic",moonTint:"#B84060",skyPalette:["#1a0510","#2a1520","#3a2530"],uiAccent:"#d85080",transitionSpeed:60,starDensity:.95,cloudOpacity:.35,cloudSpeed:1.4,shootingStarChance:.6,specialEffect:"meteorShower",effectIntensity:.7,emotionTag:"once_in_lifetime",subtitle:"",moonSize:1.5},lunarTransientPhenomena:{id:"lunarTransientPhenomena",name:"",nameEn:"Lunar Transient Phenomena",rarity:"mythic",moonTint:"#E8D8FF",skyPalette:["#0e0a1e","#1e1a2e","#2e2a3e"],uiAccent:"#c8a8f8",transitionSpeed:55,starDensity:.9,cloudOpacity:.2,cloudSpeed:.9,shootingStarChance:.45,specialEffect:"flash",effectIntensity:.8,emotionTag:"mysterious_flash",subtitle:"",moonSize:1.4},hybridEclipse:{id:"hybridEclipse",name:"",nameEn:"Hybrid Eclipse",rarity:"mythic",moonTint:"#D8A860",skyPalette:["#1a1008","#2a2018","#3a3028"],uiAccent:"#e8b870",transitionSpeed:58,starDensity:.7,cloudOpacity:.3,cloudSpeed:1.1,shootingStarChance:.35,specialEffect:"fog",effectIntensity:.7,emotionTag:"dual_nature",subtitle:"",moonSize:1.4},supermoon:{id:"supermoon",name:"",nameEn:"Supermoon",rarity:"rare",moonTint:"#F0F0FF",skyPalette:["#0a0e2c","#1a1e3c","#2a2e4c"],uiAccent:"#a0a0d0",transitionSpeed:35,starDensity:.75,cloudOpacity:.35,cloudSpeed:1.1,shootingStarChance:.3,emotionTag:"grand",subtitle:""},micromoon:{id:"micromoon",name:"",nameEn:"Micromoon",rarity:"rare",moonTint:"#C0C0D0",skyPalette:["#0a0e22","#1a1e32","#2a2e42"],uiAccent:"#7070a0",transitionSpeed:38,starDensity:.9,cloudOpacity:.2,cloudSpeed:.8,shootingStarChance:.2,emotionTag:"distant",subtitle:""},perigeeMoon:{id:"perigeeMoon",name:"",nameEn:"Perigee Moon",rarity:"rare",moonTint:"#F8F8FF",skyPalette:["#0a0e2e","#1a1e3e","#2a2e4e"],uiAccent:"#a8a8d8",transitionSpeed:35,starDensity:.75,cloudOpacity:.35,cloudSpeed:1.15,shootingStarChance:.32,emotionTag:"close",subtitle:""},apogeeMoon:{id:"apogeeMoon",name:"",nameEn:"Apogee Moon",rarity:"rare",moonTint:"#B0B0C0",skyPalette:["#0a0e20","#1a1e30","#2a2e40"],uiAccent:"#6060a0",transitionSpeed:40,starDensity:.95,cloudOpacity:.15,cloudSpeed:.7,shootingStarChance:.18,emotionTag:"far",subtitle:""},earthshine:{id:"earthshine",name:"",nameEn:"Earthshine Moon",rarity:"rare",moonTint:"#FFE4B5",skyPalette:["#0d0a1f","#1d1a2f","#2d2a3f"],uiAccent:"#d4a574",transitionSpeed:40,starDensity:.9,cloudOpacity:.2,cloudSpeed:.8,shootingStarChance:.35,emotionTag:"warm",subtitle:""},moonHalo:{id:"moonHalo",name:"",nameEn:"Moon Halo",rarity:"very_rare",moonTint:"#E0E0FA",skyPalette:["#0a0e28","#1a1e38","#2a2e48"],uiAccent:"#9898c8",transitionSpeed:42,starDensity:.8,cloudOpacity:.4,cloudSpeed:.9,shootingStarChance:.28,emotionTag:"mystical",subtitle:""},moonCorona:{id:"moonCorona",name:"",nameEn:"Moon Corona",rarity:"very_rare",moonTint:"#D8D8F8",skyPalette:["#0a0e29","#1a1e39","#2a2e49"],uiAccent:"#8888c8",transitionSpeed:43,starDensity:.75,cloudOpacity:.45,cloudSpeed:.85,shootingStarChance:.3,emotionTag:"crowned",subtitle:""},coloredMoon:{id:"coloredMoon",name:"",nameEn:"Colored Moon",rarity:"rare",moonTint:"#E8C8D8",skyPalette:["#0c0a1e","#1c1a2e","#2c2a3e"],uiAccent:"#b898a8",transitionSpeed:38,starDensity:.85,cloudOpacity:.3,cloudSpeed:1,shootingStarChance:.27,emotionTag:"colorful",subtitle:""},moonIllusion:{id:"moonIllusion",name:"",nameEn:"Moon Illusion",rarity:"rare",moonTint:"#F8E8D8",skyPalette:["#0d0b1d","#1d1b2d","#2d2b3d"],uiAccent:"#c8b898",transitionSpeed:37,starDensity:.8,cloudOpacity:.35,cloudSpeed:1.05,shootingStarChance:.25,emotionTag:"illusory",subtitle:""},blueMoon:{id:"blueMoon",name:"",nameEn:"Blue Moon",rarity:"very_rare",moonTint:"#B0C8E0",skyPalette:["#0a0e2a","#1a1e3a","#2a2e4a"],uiAccent:"#8098c0",transitionSpeed:45,starDensity:.85,cloudOpacity:.25,cloudSpeed:.9,shootingStarChance:.33,emotionTag:"rare",subtitle:""},blackMoon:{id:"blackMoon",name:"",nameEn:"Black Moon",rarity:"very_rare",moonTint:"#1a1a2e",skyPalette:["#000000","#0a0a1a","#14142a"],uiAccent:"#4a4a6a",transitionSpeed:50,starDensity:1,cloudOpacity:.1,cloudSpeed:.5,shootingStarChance:.15,emotionTag:"mysterious",subtitle:""},harvestMoon:{id:"harvestMoon",name:"",nameEn:"Harvest Moon",rarity:"rare",moonTint:"#FFD8A0",skyPalette:["#1a1008","#2a2018","#3a3028"],uiAccent:"#d8a870",transitionSpeed:38,starDensity:.75,cloudOpacity:.3,cloudSpeed:1,shootingStarChance:.28,specialEffect:"fireflies",effectIntensity:.6,emotionTag:"abundant",subtitle:""},hunterMoon:{id:"hunterMoon",name:"",nameEn:"Hunter Moon",rarity:"rare",moonTint:"#E8B878",skyPalette:["#1a1208","#2a2218","#3a3228"],uiAccent:"#c89858",transitionSpeed:38,starDensity:.8,cloudOpacity:.25,cloudSpeed:1.1,shootingStarChance:.3,emotionTag:"alert",subtitle:""},pinkMoon:{id:"pinkMoon",name:"",nameEn:"Pink Moon",rarity:"rare",moonTint:"#FFD8E8",skyPalette:["#1a0e18","#2a1e28","#3a2e38"],uiAccent:"#d8a8b8",transitionSpeed:35,starDensity:.85,cloudOpacity:.3,cloudSpeed:.95,shootingStarChance:.27,emotionTag:"gentle",subtitle:""},wolfMoon:{id:"wolfMoon",name:"",nameEn:"Wolf Moon",rarity:"rare",moonTint:"#D8D8E8",skyPalette:["#0a0e24","#1a1e34","#2a2e44"],uiAccent:"#9898b8",transitionSpeed:40,starDensity:.9,cloudOpacity:.2,cloudSpeed:.8,shootingStarChance:.25,emotionTag:"wild",subtitle:""},snowMoon:{id:"snowMoon",name:"",nameEn:"Snow Moon",rarity:"rare",moonTint:"#F0F0FF",skyPalette:["#0a0e2e","#1a1e3e","#2a2e4e"],uiAccent:"#b0b0d0",transitionSpeed:42,starDensity:.95,cloudOpacity:.4,cloudSpeed:.7,shootingStarChance:.22,specialEffect:"snow",effectIntensity:.7,emotionTag:"cold",subtitle:""},strawberryMoon:{id:"strawberryMoon",name:"",nameEn:"Strawberry Moon",rarity:"rare",moonTint:"#FFE0D0",skyPalette:["#1a0e0e","#2a1e1e","#3a2e2e"],uiAccent:"#d8b0a0",transitionSpeed:36,starDensity:.8,cloudOpacity:.3,cloudSpeed:1,shootingStarChance:.28,emotionTag:"sweet",subtitle:""},stillMoon:{id:"stillMoon",name:"",nameEn:"Still Moon",rarity:"mythic",moonTint:"#B0C4DE",skyPalette:["#0f0f1f","#1f1f2f","#2f2f3f"],uiAccent:"#7090b0",transitionSpeed:60,starDensity:.6,cloudOpacity:.5,cloudSpeed:.1,shootingStarChance:0,specialEffect:"frozenTime",effectIntensity:.75,emotionTag:"frozen",subtitle:"",moonSize:1.4},fadingMoon:{id:"fadingMoon",name:"",nameEn:"Fading Moon",rarity:"legendary",moonTint:"#A0A0B0",skyPalette:["#0a0a1a","#1a1a2a","#2a2a3a"],uiAccent:"#707090",transitionSpeed:55,starDensity:.7,cloudOpacity:.45,cloudSpeed:.6,shootingStarChance:.15,specialEffect:"fadeParticles",effectIntensity:.7,emotionTag:"disappearing",subtitle:" "},veiledMoon:{id:"veiledMoon",name:"",nameEn:"Veiled Moon",rarity:"very_rare",moonTint:"#C0C0D0",skyPalette:["#0c0c1c","#1c1c2c","#2c2c3c"],uiAccent:"#8080a0",transitionSpeed:48,starDensity:.65,cloudOpacity:.6,cloudSpeed:.8,shootingStarChance:.18,emotionTag:"obscured",subtitle:""},echoMoon:{id:"echoMoon",name:"",nameEn:"Echo Moon",rarity:"mythic",moonTint:"#D0D0E8",skyPalette:["#0e0e1e","#1e1e2e","#2e2e3e"],uiAccent:"#9090b8",transitionSpeed:52,starDensity:.75,cloudOpacity:.35,cloudSpeed:.9,shootingStarChance:.25,specialEffect:"echo",effectIntensity:.75,emotionTag:"repeating",subtitle:"",moonSize:1.4},silentMoon:{id:"silentMoon",name:"",nameEn:"Silent Moon",rarity:"legendary",moonTint:"#A8A8C8",skyPalette:["#08081a","#18182a","#28283a"],uiAccent:"#6868a8",transitionSpeed:58,starDensity:0,cloudOpacity:.2,cloudSpeed:.5,shootingStarChance:0,specialEffect:"silence",effectIntensity:.8,emotionTag:"silent",subtitle:" "},brokenMoon:{id:"brokenMoon",name:"",nameEn:"Broken Moon",rarity:"mythic",moonTint:"#9898B8",skyPalette:["#0a0a1c","#1a1a2c","#2a2a3c"],uiAccent:"#6868a8",transitionSpeed:54,starDensity:.8,cloudOpacity:.3,cloudSpeed:1,shootingStarChance:.2,emotionTag:"fractured",subtitle:"",moonSize:1.4},emptySky:{id:"emptySky",name:"",nameEn:"Empty Sky",rarity:"mythic",moonTint:"#404050",skyPalette:["#000000","#050510","#0a0a20"],uiAccent:"#505070",transitionSpeed:60,starDensity:0,cloudOpacity:0,cloudSpeed:0,shootingStarChance:0,specialEffect:"voidRipples",effectIntensity:.6,emotionTag:"void",subtitle:"",moonSize:1.4},dreamMoon:{id:"dreamMoon",name:"",nameEn:"Dream Moon",rarity:"legendary",moonTint:"#C8B8D8",skyPalette:["#0e0a1e","#1e1a2e","#2e2a3e"],uiAccent:"#a888c8",transitionSpeed:50,starDensity:.85,cloudOpacity:.4,cloudSpeed:.7,shootingStarChance:.35,specialEffect:"dreamDust",effectIntensity:.75,emotionTag:"dreamy",subtitle:""},whisperingMoon:{id:"whisperingMoon",name:"",nameEn:"Whispering Moon",rarity:"very_rare",moonTint:"#D8C8E8",skyPalette:["#0c0a1c","#1c1a2c","#2c2a3c"],uiAccent:"#b898d8",transitionSpeed:46,starDensity:.8,cloudOpacity:.35,cloudSpeed:.85,shootingStarChance:.28,emotionTag:"whispering",subtitle:""},forgottenMoon:{id:"forgottenMoon",name:"",nameEn:"Forgotten Moon",rarity:"legendary",moonTint:"#888898",skyPalette:["#0a0a18","#1a1a28","#2a2a38"],uiAccent:"#585878",transitionSpeed:56,starDensity:.5,cloudOpacity:.5,cloudSpeed:.4,shootingStarChance:.1,specialEffect:"memoryFragments",effectIntensity:.65,emotionTag:"forgotten",subtitle:""},mirrorMoon:{id:"mirrorMoon",name:"",nameEn:"Mirror Moon",rarity:"very_rare",moonTint:"#E8E8F8",skyPalette:["#0a0e2a","#1a1e3a","#2a2e4a"],uiAccent:"#a8a8d8",transitionSpeed:44,starDensity:.9,cloudOpacity:.25,cloudSpeed:1,shootingStarChance:.3,emotionTag:"reflective",subtitle:""},twilightMoon:{id:"twilightMoon",name:"",nameEn:"Twilight Moon",rarity:"rare",moonTint:"#C8B8D8",skyPalette:["#1a1428","#2a2438","#3a3448"],uiAccent:"#9888b8",transitionSpeed:40,starDensity:.7,cloudOpacity:.4,cloudSpeed:.9,shootingStarChance:.25,emotionTag:"transition",subtitle:""},ancientMoon:{id:"ancientMoon",name:"",nameEn:"Ancient Moon",rarity:"legendary",moonTint:"#B8A888",skyPalette:["#1a1408","#2a2418","#3a3428"],uiAccent:"#988868",transitionSpeed:52,starDensity:.85,cloudOpacity:.3,cloudSpeed:.6,shootingStarChance:.22,specialEffect:"ancientRunes",effectIntensity:.7,emotionTag:"ancient",subtitle:""},crystalMoon:{id:"crystalMoon",name:"",nameEn:"Crystal Moon",rarity:"mythic",moonTint:"#E0F0FF",skyPalette:["#0a0e30","#1a1e40","#2a2e50"],uiAccent:"#b0c0e0",transitionSpeed:48,starDensity:1,cloudOpacity:.15,cloudSpeed:.8,shootingStarChance:.4,specialEffect:"prismLights",effectIntensity:.9,emotionTag:"crystalline",subtitle:"",moonSize:1.5},shadowMoon:{id:"shadowMoon",name:"",nameEn:"Shadow Moon",rarity:"very_rare",moonTint:"#606078",skyPalette:["#050510","#151520","#252530"],uiAccent:"#404068",transitionSpeed:50,starDensity:.6,cloudOpacity:.5,cloudSpeed:.7,shootingStarChance:.15,emotionTag:"shadowy",subtitle:""},luminousMoon:{id:"luminousMoon",name:"",nameEn:"Luminous Moon",rarity:"legendary",moonTint:"#F8F8FF",skyPalette:["#0a0e32","#1a1e42","#2a2e52"],uiAccent:"#c8c8f0",transitionSpeed:46,starDensity:.95,cloudOpacity:.2,cloudSpeed:1.1,shootingStarChance:.38,specialEffect:"lightRays",effectIntensity:.8,emotionTag:"radiant",subtitle:""},arcticMoon:{id:"arcticMoon",name:"",nameEn:"Arctic Moon",rarity:"mythic",moonTint:"#D0E8F8",skyPalette:["#000814","#001428","#00243c"],uiAccent:"#90c0d8",transitionSpeed:50,starDensity:.9,cloudOpacity:.1,cloudSpeed:.5,shootingStarChance:.15,specialEffect:"aurora",effectIntensity:.85,emotionTag:"ethereal",subtitle:"",moonSize:1.4},meteorShowerMoon:{id:"meteorShowerMoon",name:"",nameEn:"Meteor Shower Moon",rarity:"legendary",moonTint:"#E8E8FF",skyPalette:["#0a0a20","#1a1a30","#2a2a40"],uiAccent:"#a8a8d8",transitionSpeed:44,starDensity:1,cloudOpacity:.15,cloudSpeed:.8,shootingStarChance:0,specialEffect:"shootingStars",effectIntensity:.85,emotionTag:"spectacular",subtitle:""},shatteredMoon:{id:"shatteredMoon",name:"",nameEn:"Shattered Moon",rarity:"mythic",moonTint:"#E8E8F8",skyPalette:["#0a0a1f","#141428","#1e1e38"],uiAccent:"#9898c8",transitionSpeed:52,starDensity:.85,cloudOpacity:.15,cloudSpeed:.4,shootingStarChance:.22,moonSize:1.6,specialEffect:"shattered",effectIntensity:1,emotionTag:"broken",subtitle:""},cosmicVoyageMoon:{id:"cosmicVoyageMoon",name:"",nameEn:"Cosmic Voyage Moon",rarity:"mythic",moonTint:"#E0E8FF",skyPalette:["#000510","#001020","#001530"],uiAccent:"#8090C0",transitionSpeed:55,starDensity:.95,cloudOpacity:.05,cloudSpeed:.3,shootingStarChance:.25,moonSize:1.3,specialEffect:"starfield",effectIntensity:1,emotionTag:"cosmic",subtitle:""},nebulaDreamMoon:{id:"nebulaDreamMoon",name:"",nameEn:"Nebula Dream Moon",rarity:"mythic",moonTint:"#F0D8FF",skyPalette:["#0a0515","#150a25","#200f35"],uiAccent:"#B888D8",transitionSpeed:58,starDensity:.9,cloudOpacity:.1,cloudSpeed:.4,shootingStarChance:.2,moonSize:1.5,specialEffect:"nebula",effectIntensity:.9,emotionTag:"dreamy",subtitle:""},pixelDreamMoon:{id:"pixelDreamMoon",name:"",nameEn:"Pixel Dream Moon",rarity:"mythic",moonTint:"#5fffd2",skyPalette:["#070614","#140a2a","#241042"],uiAccent:"#ff8fd6",transitionSpeed:62,starDensity:1,cloudOpacity:.36,cloudSpeed:.35,shootingStarChance:.18,moonSize:1.55,specialEffect:"pixel",effectIntensity:1,emotionTag:"pixel_dream",subtitle:""}},E8=()=>Object.values($n),ew={normal:70,rare:20,very_rare:15,legendary:10,mythic:5},Pu="dreambook_moon_phenomenon",_u="dreambook_moon_expiry",T8="mythic-moon-collection",M8="mythic-locked-moon",N8=30*60*1e3,P8=()=>{const e=E8(),t=e.reduce((r,s)=>r+ew[s.rarity],0);let n=Math.random()*t;for(const r of e)if(n-=ew[r.rarity],n<=0)return r;return e[0]},_8=e=>{var t;try{const n=localStorage.getItem(T8);if(n)return((t=JSON.parse(n)[e])==null?void 0:t.themeDurationBoost)||0}catch(n){console.error("Failed to get duration boost:",n)}return 0},R8=e=>{const n=_8(e.id)*1e3;return N8+n},A8=()=>{const e=localStorage.getItem(M8);return e&&$n[e]?$n[e]:null},Kl=()=>{const e=A8();if(e)return console.log(` Using locked moon: ${e.name}`),localStorage.setItem(Pu,JSON.stringify(e)),localStorage.removeItem(_u),{phenomenon:e,isNewEncounter:!1};const t=Date.now(),n=localStorage.getItem(Pu),r=localStorage.getItem(_u);if(n&&r)try{const c=JSON.parse(n),u=parseInt(r,10);if(c&&c.id&&t<u){const d=u-t,h=Math.round(d/6e4);return console.log(` Moon theme valid for ${h} more minutes`),{phenomenon:c,isNewEncounter:!1}}t>=u&&console.log(" Moon theme expired, selecting new one...")}catch(c){console.error("Failed to parse stored phenomenon:",c)}const s=P8(),a=R8(s),i=t+a;localStorage.setItem(Pu,JSON.stringify(s)),localStorage.setItem(_u,i.toString());const o=Math.round(a/6e4);return console.log(` New moon selected: ${s.name} (duration: ${o} minutes)`),{phenomenon:s,isNewEncounter:!0}},D8=()=>{localStorage.removeItem(Pu),localStorage.removeItem(_u),console.log(" Moon phenomenon cleared")},yd=e=>{const t=document.documentElement,n=e.transitionSpeed;t.style.setProperty("--sky-transition-duration",`${n*.8}s`),t.style.setProperty("--moon-transition-duration",`${n}s`),t.style.setProperty("--ui-transition-duration",`${n*1.5}s`),t.style.setProperty("--moon-accent",e.uiAccent);const r=Lk(e.uiAccent);if(r){const s=O8(r.r,r.g,r.b);if(e.rarity==="mythic"){t.setAttribute("data-mythic-theme",e.id),console.log(` Applied Mythic Theme: ${e.id}`),console.log(" Attribute set on:",t),console.log(` Check CSS selector: :root[data-mythic-theme="${e.id}"]`);const h={superBloodMoon:{background:"0 50% 5%",foreground:"0 100% 95%",card:"0 50% 8%",primary:"0 84% 60%",bgColor:"#100505"},superBlueBloodMoon:{background:"270 50% 5%",foreground:"270 100% 95%",card:"270 50% 8%",primary:"290 80% 60%",bgColor:"#1a0520"},lunarTransientPhenomena:{background:"250 50% 4%",foreground:"250 100% 95%",card:"250 50% 7%",primary:"260 100% 70%",bgColor:"#050510"},hybridEclipse:{background:"30 40% 5%",foreground:"40 80% 90%",card:"30 40% 8%",primary:"40 100% 60%",bgColor:"#1a1008"},stillMoon:{background:"210 50% 10%",foreground:"210 20% 95%",card:"210 30% 15%",primary:"210 80% 70%",bgColor:"#0f1f2f"},echoMoon:{background:"240 20% 8%",foreground:"240 20% 90%",card:"240 20% 12%",primary:"245 40% 70%",bgColor:"#0e0e1e"},brokenMoon:{background:"250 15% 8%",foreground:"250 15% 90%",card:"250 15% 11%",primary:"255 30% 65%",bgColor:"#0a0a1c"},emptySky:{background:"0 0% 0%",foreground:"0 0% 80%",card:"0 0% 5%",primary:"0 0% 60%",bgColor:"#000000"},crystalMoon:{background:"220 50% 8%",foreground:"220 50% 95%",card:"220 40% 12%",primary:"200 80% 70%",bgColor:"#0a0e30"},arcticMoon:{background:"200 60% 6%",foreground:"200 50% 95%",card:"200 50% 10%",primary:"190 90% 65%",bgColor:"#001428"},shatteredMoon:{background:"260 20% 8%",foreground:"260 20% 90%",card:"260 20% 12%",primary:"250 50% 60%",bgColor:"#0a0a1f"},cosmicVoyageMoon:{background:"230 60% 4%",foreground:"230 40% 95%",card:"230 50% 8%",primary:"220 80% 70%",bgColor:"#000510"},nebulaDreamMoon:{background:"280 40% 8%",foreground:"280 40% 95%",card:"280 40% 12%",primary:"290 70% 70%",bgColor:"#150a25"},pixelDreamMoon:{background:"270 55% 6%",foreground:"300 80% 95%",card:"270 40% 10%",primary:"320 90% 70%",bgColor:"#120826",glowColor:"#ff8fd6"}}[e.id];h&&(t.style.setProperty("--background",h.background),t.style.setProperty("--foreground",h.foreground),t.style.setProperty("--card",h.card),t.style.setProperty("--card-foreground",h.foreground),t.style.setProperty("--primary",h.primary),t.style.setProperty("--primary-foreground","0 0% 100%"),document.body.style.backgroundColor=h.bgColor,console.log(" Mythic theme colors applied via JavaScript"));return}else t.removeAttribute("data-mythic-theme"),console.log(` Moon Rarity: ${e.rarity} - Using dynamic theme`);t.style.setProperty("--primary",`${s.h} ${s.s}% ${s.l}%`),t.style.setProperty("--primary-foreground","0 0% 100%"),t.style.setProperty("--accent",`${s.h} ${s.s}% ${Math.min(s.l+10,95)}%`),t.style.setProperty("--accent-foreground",`${s.h} ${s.s}% ${Math.max(s.l-40,10)}%`),t.style.setProperty("--ring",`${s.h} ${s.s}% ${s.l}%`),t.style.setProperty("--border",`${s.h} ${Math.max(s.s-30,10)}% ${Math.min(s.l+30,90)}%`),t.style.setProperty("--input",`${s.h} ${Math.max(s.s-30,10)}% ${Math.min(s.l+30,90)}%`),t.style.setProperty("--card",`${s.h} ${Math.max(s.s-50,15)}% 95%`),t.style.setProperty("--card-foreground",`${s.h} ${Math.max(s.s-60,10)}% 10%`),t.style.setProperty("--popover",`${s.h} ${Math.max(s.s-50,15)}% 96%`),t.style.setProperty("--popover-foreground",`${s.h} ${Math.max(s.s-60,10)}% 10%`),t.style.setProperty("--secondary",`${s.h} ${Math.max(s.s-40,20)}% 90%`),t.style.setProperty("--secondary-foreground",`${s.h} ${s.s}% ${Math.max(s.l-30,10)}%`),t.style.setProperty("--muted",`${s.h} ${Math.max(s.s-40,20)}% 88%`),t.style.setProperty("--muted-foreground",`${s.h} ${Math.max(s.s-40,15)}% 45%`),t.style.setProperty("--background",`${s.h} ${Math.max(s.s-50,20)}% 92%`),t.style.setProperty("--foreground",`${s.h} ${Math.max(s.s-60,10)}% 5%`),t.style.setProperty("--sidebar-background",`${s.h} ${Math.max(s.s-50,20)}% 93%`),t.style.setProperty("--sidebar-foreground",`${s.h} ${Math.max(s.s-60,10)}% 5%`),t.style.setProperty("--sidebar-primary",`${s.h} ${s.s}% ${s.l}%`),t.style.setProperty("--sidebar-primary-foreground","0 0% 100%"),t.style.setProperty("--sidebar-accent",`${s.h} ${Math.max(s.s-40,20)}% 88%`),t.style.setProperty("--sidebar-accent-foreground",`${s.h} ${Math.max(s.s-50,15)}% 10%`),t.style.setProperty("--sidebar-border",`${s.h} ${Math.max(s.s-30,10)}% 85%`),t.style.setProperty("--sidebar-ring",`${s.h} ${s.s}% ${s.l}%`);const a=Mf(e.uiAccent,1.2);t.style.setProperty("--moon-text",a);const i=Mf(e.uiAccent,.6);t.style.setProperty("--moon-placeholder",i);const o=`rgba(${r.r}, ${r.g}, ${r.b}, 0.2)`;t.style.setProperty("--moon-divider",o),t.style.setProperty("--moon-caret",e.uiAccent);const c=`rgba(${r.r}, ${r.g}, ${r.b}, 0.3)`;t.style.setProperty("--moon-selection",c);const u=Mf(e.uiAccent,1.1);t.style.setProperty("--moon-button-hover",u)}console.log(" Applied complete system-wide moon theme:",e.name)},Lk=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},O8=(e,t,n)=>{e/=255,t/=255,n/=255;const r=Math.max(e,t,n),s=Math.min(e,t,n);let a=0,i=0;const o=(r+s)/2;if(r!==s){const c=r-s;switch(i=o>.5?c/(2-r-s):c/(r+s),r){case e:a=((t-n)/c+(t<n?6:0))/6;break;case t:a=((n-e)/c+2)/6;break;case n:a=((e-t)/c+4)/6;break}}return{h:Math.round(a*360),s:Math.round(i*100),l:Math.round(o*100)}},Mf=(e,t)=>{const n=Lk(e);if(!n)return e;const r=Math.min(255,Math.floor(n.r*t)),s=Math.min(255,Math.floor(n.g*t)),a=Math.min(255,Math.floor(n.b*t));return`#${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}`},vd=(e=new Date)=>{const t=new Date("2000-01-06T18:14:00Z"),n=29.530588853,s=(e.getTime()-t.getTime())/(1e3*60*60*24)%n,a=s/n,i=(1-Math.cos(a*Math.PI*2))/2;let o,c;return a<.033||a>.967?(o="New Moon",c=""):a<.216?(o="Waxing Crescent",c=""):a<.283?(o="First Quarter",c=""):a<.467?(o="Waxing Gibbous",c=""):a<.533?(o="Full Moon",c=""):a<.717?(o="Waning Gibbous",c=""):a<.783?(o="Last Quarter",c=""):(o="Waning Crescent",c=""),{phase:a,phaseName:o,phaseNameTh:c,illumination:i,age:s}};function I8(){const e=p.useRef({x:0,y:0});return p.useEffect(()=>{const t=n=>{let r=0,s=0;n instanceof MouseEvent?(r=(n.clientX/window.innerWidth-.5)*20,s=(n.clientY/window.innerHeight-.5)*20):window.DeviceOrientationEvent&&n instanceof DeviceOrientationEvent&&(n.gamma!==null&&(r=Math.max(-20,Math.min(20,n.gamma/2))),n.beta!==null&&(s=Math.max(-20,Math.min(20,(n.beta-45)/2)))),e.current={x:r,y:s}};return window.addEventListener("mousemove",t),window.addEventListener("deviceorientation",t),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("deviceorientation",t)}},[]),e}function $8(e={}){const{targetFPS:t=60,enableAdaptive:n=!0,minFPS:r=20,maxFPS:s=60}=e,a=p.useRef(0),i=p.useRef(0),o=p.useRef([]),c=p.useRef(t),u=p.useRef(0),[d,h]=p.useState({currentFPS:t,averageFPS:t,isThrottled:!1}),[f,m]=p.useState(!1);p.useEffect(()=>{var S;const x=(S=navigator.getBattery)==null?void 0:S.bind(navigator);if(!x)return;let b=!0,w;return x().then(k=>{if(!b)return;const j=()=>{m(k.level<.2&&!k.charging)};j(),k.addEventListener("levelchange",j),k.addEventListener("chargingchange",j),w=()=>{k.removeEventListener("levelchange",j),k.removeEventListener("chargingchange",j)}}).catch(k=>{console.warn("Battery API unavailable:",k)}),()=>{b=!1,w==null||w()}},[]);const y=p.useCallback(()=>{let x=c.current;return f&&(x=Math.min(x,30)),1e3/x},[f]),g=p.useCallback(x=>{const b=y();if(x-a.current>=b){if(i.current++,x-u.current>=1e3){const S=i.current;o.current.push(S),o.current.length>5&&o.current.shift();const k=o.current.reduce((j,C)=>j+C,0)/o.current.length;n&&(S<c.current*.8?c.current=Math.max(r,c.current-5):S>=c.current*.95&&c.current<s&&(c.current=Math.min(s,c.current+2))),h({currentFPS:S,averageFPS:Math.round(k),isThrottled:c.current<t}),i.current=0,u.current=x}return a.current=x,!0}return!1},[y,n,r,s,t]),v=p.useCallback(()=>{a.current=0,i.current=0,o.current=[],c.current=t,u.current=0},[t]);return{shouldRenderFrame:g,resetThrottle:v,metrics:d,isLowPowerMode:f,currentTargetFPS:c.current}}const L8=()=>[],Fk=(e,t,n=40)=>{const r=Math.random()*Math.PI*2,s=Math.random()*n*.8;return{x:e+Math.cos(r)*s,y:t+Math.sin(r)*s,size:Math.random()*8+4,opacity:1,lifetime:0,maxLifetime:30+Math.random()*20}},F8=(e,t)=>t.map(n=>{if(n.lifetime++,n.opacity=1-n.lifetime/n.maxLifetime,n.opacity>0){const r=e.createRadialGradient(n.x,n.y,0,n.x,n.y,n.size);r.addColorStop(0,`rgba(255,255,255,${n.opacity})`),r.addColorStop(.5,`rgba(200,200,255,${n.opacity*.6})`),r.addColorStop(1,"rgba(150,150,255,0)"),e.fillStyle=r,e.beginPath(),e.arc(n.x,n.y,n.size,0,Math.PI*2),e.fill()}return n}).filter(n=>n.lifetime<n.maxLifetime),Nf=(e=20,t="#B84060",n="#d85080",r=.01,s=.02)=>Array.from({length:e},(a,i)=>({angle:Math.PI*2*i/e,distance:50+Math.random()*30,size:Math.random()*3+1,speed:r+Math.random()*(s-r),color:i%2===0?t:n,opacity:Math.random()*.5+.3})),z8=(e,t,n,r)=>{t.forEach(s=>{s.angle+=s.speed;const a=n+Math.cos(s.angle)*s.distance,i=r+Math.sin(s.angle)*s.distance,o=e.createRadialGradient(a,i,0,a,i,s.size*2);o.addColorStop(0,`${s.color}${Math.floor(s.opacity*255).toString(16).padStart(2,"0")}`),o.addColorStop(1,`${s.color}00`),e.fillStyle=o,e.beginPath(),e.arc(a,i,s.size*2,0,Math.PI*2),e.fill(),e.fillStyle=s.color,e.globalAlpha=s.opacity,e.beginPath(),e.arc(a,i,s.size,0,Math.PI*2),e.fill(),e.globalAlpha=1})},zk=(e,t,n=40)=>Array.from({length:50},()=>{const r=Math.random()*Math.PI*2,s=Math.random()*n*1.8;return{x:e+Math.cos(r)*s,y:t+Math.sin(r)*s,size:Math.random()*4+1.5,opacity:Math.random()*.9+.3,twinklePhase:Math.random()*Math.PI*2,twinkleSpeed:.03+Math.random()*.05}}),B8=(e,t)=>{t.forEach(n=>{n.twinklePhase+=n.twinkleSpeed;const r=(Math.sin(n.twinklePhase)+1)/2,s=n.opacity*r;if(s>.1){e.save(),e.translate(n.x,n.y),e.rotate(n.twinklePhase*.2);const a=e.createRadialGradient(0,0,0,0,0,n.size*6),i=n.twinklePhase*50%360;a.addColorStop(0,`hsla(${i}, 70%, 85%, ${s*.4})`),a.addColorStop(.3,`hsla(${i+60}, 60%, 80%, ${s*.3})`),a.addColorStop(.6,`hsla(${i+120}, 50%, 75%, ${s*.2})`),a.addColorStop(1,"rgba(176, 192, 224, 0)"),e.fillStyle=a,e.beginPath(),e.arc(0,0,n.size*6,0,Math.PI*2),e.fill();const o=e.createRadialGradient(0,0,0,0,0,n.size*4);o.addColorStop(0,`rgba(240, 248, 255, ${s})`),o.addColorStop(.4,`rgba(200, 220, 255, ${s*.7})`),o.addColorStop(.7,`rgba(176, 192, 224, ${s*.4})`),o.addColorStop(1,"rgba(176, 192, 224, 0)"),e.fillStyle=o,e.beginPath(),e.arc(0,0,n.size*4,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(255, 255, 255, ${s*.8})`,e.beginPath();for(let c=0;c<6;c++){const u=c*Math.PI/3,d=Math.cos(u)*n.size*1.2,h=Math.sin(u)*n.size*1.2;c===0?e.moveTo(d,h):e.lineTo(d,h)}e.closePath(),e.fill(),e.fillStyle=`rgba(200, 220, 255, ${s*.6})`,e.beginPath();for(let c=0;c<6;c++){const u=c*Math.PI/3,d=Math.cos(u)*n.size*.6,h=Math.sin(u)*n.size*.6;c===0?e.moveTo(d,h):e.lineTo(d,h)}e.closePath(),e.fill(),e.fillStyle=`rgba(255, 255, 255, ${s})`,e.beginPath(),e.arc(0,0,n.size*.3,0,Math.PI*2),e.fill(),e.strokeStyle=`rgba(240, 248, 255, ${s*.9})`,e.lineWidth=1.5,e.lineCap="round";for(let c=0;c<6;c++){const u=c*Math.PI/3,d=n.size*6;e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(u)*d,Math.sin(u)*d),e.stroke()}e.strokeStyle=`rgba(200, 220, 255, ${s*.5})`,e.lineWidth=.8;for(let c=0;c<12;c++){const u=c*Math.PI/6+Math.PI/12,d=n.size*4;e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(u)*d,Math.sin(u)*d),e.stroke()}e.restore()}})},V8=(e,t,n,r=4)=>Array.from({length:r},(s,a)=>({x:e,y:t,radius:n,opacity:.6-a*.15,delay:a*15,scale:1+a*.15,phaseOffset:0})),U8=(e,t,n,r,s,a)=>{t.forEach((i,o)=>{i.phaseOffset+=.001;const c=n,u=r+Math.sin(s-i.phaseOffset*50)*3;i.x+=(c-i.x)*(.05/(o+1)),i.y+=(u-i.y)*(.05/(o+1));const d=i.radius*i.scale,h=e.createRadialGradient(i.x,i.y,d*.3,i.x,i.y,d*2);h.addColorStop(0,`${a}${Math.floor(i.opacity*.4*255).toString(16).padStart(2,"0")}`),h.addColorStop(.5,`${a}${Math.floor(i.opacity*.2*255).toString(16).padStart(2,"0")}`),h.addColorStop(1,`${a}00`),e.fillStyle=h,e.beginPath(),e.arc(i.x,i.y,d*2,0,Math.PI*2),e.fill();const f=e.createRadialGradient(i.x-d*.25,i.y-d*.25,0,i.x,i.y,d);f.addColorStop(0,`${a}${Math.floor(i.opacity*.8*255).toString(16).padStart(2,"0")}`),f.addColorStop(.7,`${a}${Math.floor(i.opacity*.5*255).toString(16).padStart(2,"0")}`),f.addColorStop(1,`${a}${Math.floor(i.opacity*.2*255).toString(16).padStart(2,"0")}`),e.fillStyle=f,e.beginPath(),e.arc(i.x,i.y,d,0,Math.PI*2),e.fill(),e.strokeStyle=`rgba(255, 255, 255, ${i.opacity*.3})`,e.lineWidth=1.5,e.beginPath(),e.arc(i.x-d*.3,i.y-d*.3,d*.6,Math.PI,Math.PI*2),e.stroke();const m=(Date.now()/1e3+o*.5)%2;for(let y=0;y<3;y++){const g=d*(1.2+m*.5+y*.3),v=i.opacity*(1-m/2)*.4;v>.05&&(e.strokeStyle=`rgba(208, 208, 232, ${v})`,e.lineWidth=2,e.beginPath(),e.arc(i.x,i.y,g,0,Math.PI*2),e.stroke())}})},W8=e=>{const t=["#00ff88","#00ddaa","#00ccbb"];return Array.from({length:3},(n,r)=>({y:e*.3+r*80,amplitude:25+Math.random()*20,frequency:.003+Math.random()*.004,phase:Math.random()*Math.PI*2,speed:.004+Math.random()*.005,color:t[r],opacity:.08+Math.random()*.06}))},H8=(e,t,n)=>{t.forEach((r,s)=>{r.phase+=r.speed;const a=r.opacity*(1+Math.sin(r.phase*.5)*.3);e.beginPath(),e.moveTo(0,r.y);for(let c=0;c<=n;c+=2){const u=r.y+Math.sin(c*r.frequency+r.phase)*r.amplitude,d=Math.sin(c*r.frequency*2+r.phase*1.5)*(r.amplitude*.3),h=Math.sin(c*r.frequency*4+r.phase*2)*(r.amplitude*.15),f=Math.sin(c*.05+r.phase*3)*5;e.lineTo(c,u+d+h+f)}const i=e.createLinearGradient(0,r.y,n,r.y);i.addColorStop(0,`${r.color}${Math.floor(a*.4*255).toString(16).padStart(2,"0")}`),i.addColorStop(.25,`${r.color}${Math.floor(a*.7*255).toString(16).padStart(2,"0")}`),i.addColorStop(.5,`${r.color}${Math.floor(a*255).toString(16).padStart(2,"0")}`),i.addColorStop(.75,`${r.color}${Math.floor(a*.7*255).toString(16).padStart(2,"0")}`),i.addColorStop(1,`${r.color}${Math.floor(a*.4*255).toString(16).padStart(2,"0")}`),e.strokeStyle=i,e.lineWidth=70,e.lineCap="round",e.lineJoin="round",e.shadowBlur=40,e.shadowColor=r.color,e.stroke(),e.shadowBlur=0;const o=e.createLinearGradient(0,r.y-r.amplitude*2,0,r.y+r.amplitude*3);if(o.addColorStop(0,`${r.color}00`),o.addColorStop(.2,`${r.color}${Math.floor(a*.5*255).toString(16).padStart(2,"0")}`),o.addColorStop(.5,`${r.color}${Math.floor(a*.8*255).toString(16).padStart(2,"0")}`),o.addColorStop(.8,`${r.color}${Math.floor(a*.4*255).toString(16).padStart(2,"0")}`),o.addColorStop(1,`${r.color}00`),e.strokeStyle=o,e.lineWidth=50,e.globalAlpha=.6,e.stroke(),e.globalAlpha=1,Math.random()<.3)for(let c=0;c<3;c++){const u=Math.random()*n,d=r.y+Math.sin(u*r.frequency+r.phase)*r.amplitude,h=2+Math.random()*3,f=e.createRadialGradient(u,d,0,u,d,h*3);f.addColorStop(0,`rgba(255, 255, 255, ${a*.6})`),f.addColorStop(.5,`${r.color}${Math.floor(a*.4*255).toString(16).padStart(2,"0")}`),f.addColorStop(1,`${r.color}00`),e.fillStyle=f,e.beginPath(),e.arc(u,d,h*3,0,Math.PI*2),e.fill()}})},G8=(e,t,n=20)=>Array.from({length:n},()=>{const r=Math.random()*e,s=t*.5+Math.random()*t*.4;return{x:r,y:s,vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5,size:2+Math.random()*2,opacity:0,blinkPhase:Math.random()*Math.PI*2,blinkSpeed:.05+Math.random()*.05,targetX:r,targetY:s}}),K8=(e,t,n,r)=>{t.forEach(s=>{if(s.blinkPhase+=s.blinkSpeed,s.opacity=Math.max(0,Math.sin(s.blinkPhase))*.8,Math.random()<.02&&(s.targetX=Math.random()*n,s.targetY=r*.5+Math.random()*r*.4),s.vx+=(s.targetX-s.x)*.001,s.vy+=(s.targetY-s.y)*.001,s.vx*=.95,s.vy*=.95,s.x+=s.vx,s.y+=s.vy,s.opacity>0){const a=e.createRadialGradient(s.x,s.y,0,s.x,s.y,s.size*3);a.addColorStop(0,`rgba(255,255,150,${s.opacity})`),a.addColorStop(.5,`rgba(255,200,100,${s.opacity*.5})`),a.addColorStop(1,"rgba(255,200,100,0)"),e.fillStyle=a,e.beginPath(),e.arc(s.x,s.y,s.size*3,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(255,255,200,${s.opacity})`,e.beginPath(),e.arc(s.x,s.y,s.size,0,Math.PI*2),e.fill()}})},q8=(e,t,n=100)=>Array.from({length:n},()=>({x:Math.random()*e,y:Math.random()*-100,size:Math.random()*3+1,speed:Math.random()*.5+.3,drift:(Math.random()-.5)*.5,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.02,opacity:Math.random()*.6+.4})),Y8=(e,t,n,r)=>{t.forEach(s=>{s.y+=s.speed,s.x+=s.drift,s.rotation+=s.rotationSpeed,s.y>r&&(s.y=-10,s.x=Math.random()*n),e.save(),e.translate(s.x,s.y),e.rotate(s.rotation),e.globalAlpha=s.opacity,e.strokeStyle="#ffffff",e.lineWidth=1,e.lineCap="round";for(let a=0;a<6;a++)e.rotate(Math.PI/3),e.beginPath(),e.moveTo(0,0),e.lineTo(0,s.size*2),e.stroke(),e.beginPath(),e.moveTo(0,s.size),e.lineTo(-s.size*.5,s.size*1.5),e.stroke(),e.beginPath(),e.moveTo(0,s.size),e.lineTo(s.size*.5,s.size*1.5),e.stroke();e.restore()})},X8=(e,t,n=3)=>{const r=["#f0e8e0","#e8d8d0","#d8c8c0"];return Array.from({length:5},(s,a)=>({x:-e-Math.random()*e*.5,y:t*.5+a*40,width:e*2.5,height:100+a*20,speed:.06+a*.04,opacity:.1+a*.04,color:r[a%r.length],wave:Math.random()*Math.PI*2,waveSpeed:.01+Math.random()*.01}))},Q8=(e,t,n,r)=>{t.forEach((s,a)=>{s.x+=s.speed,s.wave+=s.waveSpeed,s.x>n*.3&&(s.x=-s.width);const i=Math.sin(s.wave)*15,o=s.y+i,c=e.createRadialGradient(s.x+s.width*.5,o+s.height*.5,0,s.x+s.width*.5,o+s.height*.5,s.width*.6);if(c.addColorStop(0,`${s.color}${Math.floor(s.opacity*255*.5).toString(16).padStart(2,"0")}`),c.addColorStop(.3,`${s.color}${Math.floor(s.opacity*255*.9).toString(16).padStart(2,"0")}`),c.addColorStop(.7,`${s.color}${Math.floor(s.opacity*255*.4).toString(16).padStart(2,"0")}`),c.addColorStop(1,`${s.color}00`),e.save(),e.globalCompositeOperation="lighter",e.fillStyle=c,e.fillRect(s.x,o,s.width,s.height),s.x>0?e.fillRect(s.x-s.width,o,s.width,s.height):s.x+s.width<n,e.fillRect(s.x-s.width,o,s.width,s.height),e.restore(),a%2===0&&Math.random()<.02){const u=s.x+Math.random()*s.width,d=o+Math.random()*s.height,h=e.createRadialGradient(u,d,0,u,d,3);h.addColorStop(0,"rgba(255,255,255,0.3)"),h.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=h,e.beginPath(),e.arc(u,d,3,0,Math.PI*2),e.fill()}e.restore()})},J8=e=>Array.from({length:3},(t,n)=>({radius:e*(1.15+n*.2),opacity:.6-n*.15,pulsePhase:Math.PI*2*n/3,thickness:3-n*.5})),Z8=(e,t,n,r)=>{t.forEach(s=>{s.pulsePhase+=.02;const a=Math.sin(s.pulsePhase)*.2+.8,i=s.opacity*a;e.strokeStyle=`rgba(160, 48, 48, ${i})`,e.lineWidth=s.thickness,e.shadowBlur=10,e.shadowColor=`rgba(200, 64, 64, ${i})`,e.beginPath(),e.arc(n,r,s.radius,0,Math.PI*2),e.stroke(),e.shadowBlur=0})},e$=(e,t,n=30)=>Array.from({length:n},()=>({x:Math.random()*e,y:Math.random()*t,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3,size:Math.random()*4+2,opacity:Math.random()*.8+.2,fadeSpeed:.002+Math.random()*.003,lifetime:0,maxLifetime:200+Math.random()*200})),t$=(e,t)=>{t.forEach(n=>{if(n.x+=n.vx,n.y+=n.vy,n.lifetime++,n.opacity-=n.fadeSpeed,(n.lifetime>=n.maxLifetime||n.opacity<=0)&&(n.x=Math.random()*e.canvas.width,n.y=Math.random()*e.canvas.height,n.opacity=Math.random()*.8+.2,n.lifetime=0),n.opacity>0){const r=e.createRadialGradient(n.x,n.y,0,n.x,n.y,n.size*3);r.addColorStop(0,`rgba(160, 160, 176, ${n.opacity})`),r.addColorStop(.5,`rgba(160, 160, 176, ${n.opacity*.5})`),r.addColorStop(1,"rgba(160, 160, 176, 0)"),e.fillStyle=r,e.beginPath(),e.arc(n.x,n.y,n.size*3,0,Math.PI*2),e.fill()}})},n$=()=>[],r$=(e,t,n,r,s)=>(Math.random()<.015&&t.push({radius:s,opacity:.6,lifetime:0,maxLifetime:120}),t.map(a=>(a.lifetime++,a.radius+=1,a.opacity=(1-a.lifetime/a.maxLifetime)*.6,a.lifetime<a.maxLifetime&&a.opacity>.05&&(e.strokeStyle=`rgba(168, 168, 200, ${a.opacity})`,e.lineWidth=2,e.setLineDash([5,5]),e.beginPath(),e.arc(n,r,a.radius,0,Math.PI*2),e.stroke(),e.setLineDash([])),a)).filter(a=>a.lifetime<a.maxLifetime)),s$=(e,t,n=40)=>{const r=["#C8B8D8","#B8A8C8","#D8C8E8"];return Array.from({length:n},()=>({x:Math.random()*e,y:Math.random()*t,vx:(Math.random()-.5)*.4,vy:-.2-Math.random()*.3,size:Math.random()*3+1.5,opacity:Math.random()*.7+.3,color:r[Math.floor(Math.random()*r.length)],floatPhase:Math.random()*Math.PI*2,floatSpeed:.02+Math.random()*.03}))},a$=(e,t)=>{t.forEach(n=>{n.floatPhase+=n.floatSpeed,n.x+=n.vx+Math.sin(n.floatPhase)*.3,n.y+=n.vy,n.y<-10&&(n.y=e.canvas.height+10,n.x=Math.random()*e.canvas.width),n.x<-10&&(n.x=e.canvas.width+10),n.x>e.canvas.width+10&&(n.x=-10);const r=e.createRadialGradient(n.x,n.y,0,n.x,n.y,n.size*2.5);r.addColorStop(0,`${n.color}${Math.floor(n.opacity*255).toString(16).padStart(2,"0")}`),r.addColorStop(.5,`${n.color}${Math.floor(n.opacity*128).toString(16).padStart(2,"0")}`),r.addColorStop(1,`${n.color}00`),e.fillStyle=r,e.beginPath(),e.arc(n.x,n.y,n.size*2.5,0,Math.PI*2),e.fill(),e.fillStyle=`${n.color}${Math.floor(n.opacity*200).toString(16).padStart(2,"0")}`,e.beginPath(),e.arc(n.x,n.y,n.size*.8,0,Math.PI*2),e.fill()})},i$=(e,t,n=25)=>Array.from({length:n},()=>({x:Math.random()*e,y:Math.random()*t,vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5,size:Math.random()*6+3,opacity:Math.random()*.4+.2,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.03,lifetime:0,maxLifetime:300+Math.random()*300,fragmentType:Math.floor(Math.random()*3)})),o$=(e,t)=>{t.forEach(n=>{n.x+=n.vx,n.y+=n.vy,n.rotation+=n.rotationSpeed,n.lifetime++,n.x<0&&(n.x=e.canvas.width),n.x>e.canvas.width&&(n.x=0),n.y<0&&(n.y=e.canvas.height),n.y>e.canvas.height&&(n.y=0),n.lifetime>=n.maxLifetime&&(n.lifetime=0,n.opacity=Math.random()*.4+.2);const r=n.lifetime<60?n.lifetime/60:(n.maxLifetime-n.lifetime)/60,s=Math.min(n.opacity,r);if(s>.05){if(e.save(),e.translate(n.x,n.y),e.rotate(n.rotation),e.globalAlpha=s,e.strokeStyle="#888898",e.fillStyle="rgba(136, 136, 152, 0.3)",e.lineWidth=1.5,e.beginPath(),n.fragmentType===0)e.moveTo(0,-n.size),e.lineTo(n.size,n.size),e.lineTo(-n.size,n.size);else if(n.fragmentType===1)e.rect(-n.size/2,-n.size/2,n.size,n.size);else for(let a=0;a<5;a++){const i=Math.PI*2*a/5-Math.PI/2,o=Math.cos(i)*n.size,c=Math.sin(i)*n.size;a===0?e.moveTo(o,c):e.lineTo(o,c)}e.closePath(),e.fill(),e.stroke(),e.restore()}})},l$=(e,t,n)=>{const r=["","","","","",""];return Array.from({length:6},(s,a)=>({x:e,y:t,symbol:r[a],size:12+Math.random()*8,opacity:.6+Math.random()*.3,rotation:0,pulsePhase:Math.PI*2*a/6,orbitAngle:Math.PI*2*a/6,orbitSpeed:.005+Math.random()*.003,orbitRadius:n*(1.4+Math.random()*.3)}))},c$=(e,t,n,r)=>{t.forEach(s=>{s.orbitAngle+=s.orbitSpeed,s.pulsePhase+=.02,s.rotation+=.01;const a=n+Math.cos(s.orbitAngle)*s.orbitRadius,i=r+Math.sin(s.orbitAngle)*s.orbitRadius,o=Math.sin(s.pulsePhase)*.3+.7,c=s.opacity*o,u=e.createRadialGradient(a,i,0,a,i,s.size*2);u.addColorStop(0,`rgba(184, 168, 136, ${c*.5})`),u.addColorStop(1,"rgba(184, 168, 136, 0)"),e.fillStyle=u,e.beginPath(),e.arc(a,i,s.size*2,0,Math.PI*2),e.fill(),e.save(),e.translate(a,i),e.rotate(s.rotation),e.fillStyle=`rgba(184, 168, 136, ${c})`,e.font=`${s.size}px serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(s.symbol,0,0),e.restore()})},u$=(e=12)=>Array.from({length:e},(t,n)=>({angle:Math.PI*2*n/e,length:50+Math.random()*30,opacity:.3+Math.random()*.4,width:2+Math.random()*3,pulsePhase:Math.random()*Math.PI*2,speed:.02+Math.random()*.02})),d$=(e,t,n,r,s)=>{if(!isFinite(n)||!isFinite(r)||!isFinite(s)){console.warn("Invalid moon parameters in drawLightRays:",{moonX:n,moonY:r,moonRadius:s});return}t.forEach(a=>{a.pulsePhase+=a.speed,a.angle+=.003;const i=Math.sin(a.pulsePhase)*.4+.6,o=a.opacity*i,c=n+Math.cos(a.angle)*s,u=r+Math.sin(a.angle)*s,d=n+Math.cos(a.angle)*(s+a.length),h=r+Math.sin(a.angle)*(s+a.length);if(!isFinite(c)||!isFinite(u)||!isFinite(d)||!isFinite(h))return;const f=e.createLinearGradient(c,u,d,h);f.addColorStop(0,`rgba(248, 248, 255, ${o})`),f.addColorStop(.5,`rgba(248, 248, 255, ${o*.6})`),f.addColorStop(1,"rgba(248, 248, 255, 0)"),e.strokeStyle=f,e.lineWidth=a.width,e.lineCap="round",e.beginPath(),e.moveTo(c,u),e.lineTo(d,h),e.stroke()})},tw=[{core:"#fff4d6",mid:"#ffd28a",tail:"#7ac9ff",glow:"#ffe0b3"},{core:"#fff0ff",mid:"#ff8dd4",tail:"#8a6bff",glow:"#ffb7e8"},{core:"#f7fbff",mid:"#9fe6ff",tail:"#5aa8ff",glow:"#d2f4ff"},{core:"#f9f2ff",mid:"#c7a3ff",tail:"#6f5bff",glow:"#d9c2ff"},{core:"#fff2e6",mid:"#ffb07a",tail:"#ff6a8f",glow:"#ffd3b8"}],h$=Math.PI/4.6,f$=.16,nw=[420,720],rw=[900,1800],m$=new WeakMap,xd=e=>e[0]+Math.floor(Math.random()*(e[1]-e[0]+1)),p$=(e,t,n,r)=>{const s=e.get(t);if(s)return s;const a=Math.random()<.6,i=xd(n),o=xd(r),c=Math.floor(Math.random()*(a?i:o)),u={active:a,timer:c,activeDuration:i,cooldownDuration:o};return e.set(t,u),u},g$=()=>{const e=(Math.random()-.5)*f$;return h$+e},y$=(e,t)=>{const n=Math.max(e,t)*.14;return Math.random()<.65?{x:Math.random()*(e*.65+n)-n,y:-n-Math.random()*n}:{x:-n-Math.random()*n,y:Math.random()*(t*.65+n)-n*.2}},mn=(e,t)=>{const n=Math.min(1,Math.max(0,t));return`${e}${Math.round(n*255).toString(16).padStart(2,"0")}`},Tp=(e,t,n=!1)=>{const r=Math.random()<.22?"hero":"streak",s=tw[Math.floor(Math.random()*tw.length)],a=g$(),i=(r==="hero"?9:6)+Math.random()*(r==="hero"?6:4),o=Math.cos(a)*i,c=Math.sin(a)*i,u=r==="hero"?180+Math.random()*120:90+Math.random()*80,d=r==="hero"?2.4+Math.random()*1.4:1.1+Math.random()*.7,h=r==="hero"?7+Math.random()*5:4+Math.random()*3,f=y$(e,t),m=f.x,y=f.y,g=r==="hero"?140+Math.random()*70:95+Math.random()*60,v=Math.random()*g*.6;return{x:m,y,vx:o,vy:c,length:u,opacity:.5+Math.random()*.3,coreColor:s.core,midColor:s.mid,tailColor:s.tail,glowColor:s.glow,width:d,headSize:h,life:v,maxLife:g,flickerPhase:Math.random()*Math.PI*2,flickerSpeed:.02+Math.random()*.03,offset:(Math.random()-.5)*(r==="hero"?3.5:2),kind:r,active:n?!0:Math.random()<.7}},v$=(e,t,n,r)=>{if(n<=0)return;const s=Math.hypot(t.vx,t.vy);if(s<=.001)return;const a=t.vx/s,i=t.vy/s,o=t.x-a*t.length,c=t.y-i*t.length,u=-i,d=a,h=u*t.offset,f=d*t.offset,m=t.x+h,y=t.y+f,g=o+h,v=c+f;e.save(),e.globalCompositeOperation="lighter",e.globalAlpha=n;const x=e.createLinearGradient(m,y,g,v);x.addColorStop(0,mn(t.coreColor,.95)),x.addColorStop(.35,mn(t.midColor,.8)),x.addColorStop(.7,mn(t.tailColor,.55)),x.addColorStop(1,mn(t.tailColor,0)),e.strokeStyle=x,e.lineWidth=t.width,e.lineCap="round",e.beginPath(),e.moveTo(m,y),e.lineTo(g,v),e.stroke(),e.strokeStyle=mn(t.tailColor,.4),e.lineWidth=Math.max(.45,t.width*.4),e.beginPath(),e.moveTo(m-h*.3,y-f*.3),e.lineTo(g-h*.3,v-f*.3),e.stroke(),e.strokeStyle=mn("#ffffff",.9),e.lineWidth=Math.max(.4,t.width*.35),e.beginPath(),e.moveTo(m,y),e.lineTo(g,v),e.stroke();const b=e.createRadialGradient(m,y,0,m,y,t.headSize*2.6);if(b.addColorStop(0,mn("#ffffff",.95)),b.addColorStop(.4,mn(t.glowColor,.8)),b.addColorStop(1,mn(t.glowColor,0)),e.fillStyle=b,e.beginPath(),e.arc(m,y,t.headSize*2.2,0,Math.PI*2),e.fill(),e.fillStyle=mn("#ffffff",.9),e.beginPath(),e.arc(m,y,Math.max(1.2,t.headSize*.25),0,Math.PI*2),e.fill(),Math.random()<r){const w=Math.random()*.6+.15,S=m-a*t.length*w,k=y-i*t.length*w,j=t.width*(.8+Math.random()*.8),C=e.createRadialGradient(S,k,0,S,k,j*4);C.addColorStop(0,mn("#ffffff",.8)),C.addColorStop(.4,mn(t.tailColor,.6)),C.addColorStop(1,mn(t.tailColor,0)),e.fillStyle=C,e.beginPath(),e.arc(S,k,j*1.8,0,Math.PI*2),e.fill()}e.restore()},x$=(e,t,n=15)=>{const r=Math.max(10,Math.round(n*1.05));return Array.from({length:r},()=>Tp(e,t))},w$=(e,t,n,r)=>{const s=p$(m$,t,nw,rw);s.timer+=1,s.active&&s.timer>=s.activeDuration?(s.active=!1,s.timer=0,s.cooldownDuration=xd(rw)):!s.active&&s.timer>=s.cooldownDuration&&(s.active=!0,s.timer=0,s.activeDuration=xd(nw));const a=s.active,i=Math.max(n,r)*.25;for(let o=0;o<t.length;o+=1){const c=t[o];if(!c.active){a&&Math.random()<.03&&(t[o]=Tp(n,r,!0));continue}c.x+=c.vx,c.y+=c.vy,c.life+=1,c.flickerPhase+=c.flickerSpeed;const u=c.life/c.maxLife,d=u<.12?u/.12:1,h=u>.85?(1-u)/.15:1,f=Math.max(0,Math.min(1,Math.min(d,h))),m=.85+Math.sin(c.flickerPhase)*.15,y=c.opacity*f*m;y>.02&&v$(e,c,y*.7,c.kind==="hero"?.14:.08),(c.x>n+i||c.y>r+i||c.life>=c.maxLife)&&(a?t[o]=Tp(n,r,!0):c.active=!1)}},b$=(e,t,n=6)=>[],sw=[{core:"#fff4d6",mid:"#ffd28a",tail:"#7ac9ff",glow:"#ffe0b3"},{core:"#fff0ff",mid:"#ff8dd4",tail:"#8a6bff",glow:"#ffb7e8"},{core:"#f7fbff",mid:"#9fe6ff",tail:"#5aa8ff",glow:"#d2f4ff"},{core:"#f9f2ff",mid:"#c7a3ff",tail:"#6f5bff",glow:"#d9c2ff"},{core:"#fff2e6",mid:"#ffb07a",tail:"#ff6a8f",glow:"#ffd3b8"}],S$=Math.PI/4.6,k$=.16,aw=[360,600],iw=[900,1500],j$=new WeakMap,wd=e=>e[0]+Math.floor(Math.random()*(e[1]-e[0]+1)),C$=(e,t,n,r)=>{const s=e.get(t);if(s)return s;const a=Math.random()<.6,i=wd(n),o=wd(r),c=Math.floor(Math.random()*(a?i:o)),u={active:a,timer:c,activeDuration:i,cooldownDuration:o};return e.set(t,u),u},E$=()=>{const e=(Math.random()-.5)*k$;return S$+e},T$=(e,t)=>{const n=Math.max(e,t)*.14;return Math.random()<.65?{x:Math.random()*(e*.65+n)-n,y:-n-Math.random()*n}:{x:-n-Math.random()*n,y:Math.random()*(t*.65+n)-n*.2}},pn=(e,t)=>{const n=Math.min(1,Math.max(0,t));return`${e}${Math.round(n*255).toString(16).padStart(2,"0")}`},M$=(e,t)=>{const n=Math.random()<.35?"hero":"streak",r=sw[Math.floor(Math.random()*sw.length)],s=E$(),a=(n==="hero"?12:9)+Math.random()*(n==="hero"?7:5),i=Math.cos(s)*a,o=Math.sin(s)*a,c=n==="hero"?220+Math.random()*140:120+Math.random()*100,u=n==="hero"?2.8+Math.random()*1.6:1.2+Math.random()*.8,d=n==="hero"?8+Math.random()*6:5+Math.random()*3,h=T$(e,t),f=h.x,m=h.y,y=n==="hero"?120+Math.random()*80:90+Math.random()*60;return{x:f,y:m,vx:i,vy:o,length:c,opacity:.7+Math.random()*.3,coreColor:r.core,midColor:r.mid,tailColor:r.tail,glowColor:r.glow,width:u,headSize:d,life:0,maxLife:y,flickerPhase:Math.random()*Math.PI*2,flickerSpeed:.018+Math.random()*.03,offset:(Math.random()-.5)*(n==="hero"?3.8:2.2),kind:n}},N$=(e,t,n,r)=>{if(n<=0)return;const s=Math.hypot(t.vx,t.vy);if(s<=.001)return;const a=t.vx/s,i=t.vy/s,o=t.x-a*t.length,c=t.y-i*t.length,u=-i,d=a,h=u*t.offset,f=d*t.offset,m=t.x+h,y=t.y+f,g=o+h,v=c+f;e.save(),e.globalCompositeOperation="lighter",e.globalAlpha=n;const x=e.createLinearGradient(m,y,g,v);x.addColorStop(0,pn(t.coreColor,.95)),x.addColorStop(.35,pn(t.midColor,.8)),x.addColorStop(.7,pn(t.tailColor,.55)),x.addColorStop(1,pn(t.tailColor,0)),e.strokeStyle=x,e.lineWidth=t.width,e.lineCap="round",e.beginPath(),e.moveTo(m,y),e.lineTo(g,v),e.stroke(),e.strokeStyle=pn(t.tailColor,.4),e.lineWidth=Math.max(.45,t.width*.4),e.beginPath(),e.moveTo(m-h*.3,y-f*.3),e.lineTo(g-h*.3,v-f*.3),e.stroke(),e.strokeStyle=pn("#ffffff",.9),e.lineWidth=Math.max(.4,t.width*.35),e.beginPath(),e.moveTo(m,y),e.lineTo(g,v),e.stroke();const b=e.createRadialGradient(m,y,0,m,y,t.headSize*2.6);if(b.addColorStop(0,pn("#ffffff",.95)),b.addColorStop(.4,pn(t.glowColor,.8)),b.addColorStop(1,pn(t.glowColor,0)),e.fillStyle=b,e.beginPath(),e.arc(m,y,t.headSize*2.2,0,Math.PI*2),e.fill(),e.fillStyle=pn("#ffffff",.9),e.beginPath(),e.arc(m,y,Math.max(1.2,t.headSize*.25),0,Math.PI*2),e.fill(),Math.random()<r){const w=Math.random()*.6+.15,S=m-a*t.length*w,k=y-i*t.length*w,j=t.width*(.8+Math.random()*.8),C=e.createRadialGradient(S,k,0,S,k,j*4);C.addColorStop(0,pn("#ffffff",.8)),C.addColorStop(.4,pn(t.tailColor,.6)),C.addColorStop(1,pn(t.tailColor,0)),e.fillStyle=C,e.beginPath(),e.arc(S,k,j*1.8,0,Math.PI*2),e.fill()}e.restore()},P$=()=>[],_$=(e,t,n,r)=>{const s=C$(j$,t,aw,iw);if(s.timer+=1,s.active&&s.timer>=s.activeDuration?(s.active=!1,s.timer=0,s.cooldownDuration=wd(iw)):!s.active&&s.timer>=s.cooldownDuration&&(s.active=!0,s.timer=0,s.activeDuration=wd(aw)),s.active&&Math.random()<.18){const o=Math.random()<.4?2:1;for(let c=0;c<o;c+=1)t.push(M$(n,r))}const a=Math.max(n,r)*.25;return t.map(i=>{i.x+=i.vx,i.y+=i.vy,i.life+=1,i.flickerPhase+=i.flickerSpeed;const o=i.life/i.maxLife,c=o<.12?o/.12:1,u=o>.82?(1-o)/.18:1,d=Math.max(0,Math.min(1,Math.min(c,u))),h=.85+Math.sin(i.flickerPhase)*.15,f=i.opacity*d*h;return f>.02&&N$(e,i,f,i.kind==="hero"?.2:.1),i}).filter(i=>i.life<i.maxLife&&i.x<n+a&&i.y<r+a)},R$=(e=120)=>Array.from({length:e},()=>({x:(Math.random()-.5)*2,y:(Math.random()-.5)*2,z:Math.random(),speed:.001+Math.random()*.002,size:1+Math.random()*2,brightness:.3+Math.random()*.7})),A$=(e,t,n,r)=>{const s=n/2,a=r/2;return t.map(i=>{i.z+=i.speed,i.z>=1&&(i.x=(Math.random()-.5)*2,i.y=(Math.random()-.5)*2,i.z=0);const o=i.z*2,c=s+i.x*s*o,u=a+i.y*a*o,d=i.size*(.5+i.z*1.5),h=i.brightness*i.z,f=i.z-i.speed,m=f*2,y=s+i.x*s*m,g=a+i.y*a*m;if(f>0){const x=e.createLinearGradient(y,g,c,u);x.addColorStop(0,"rgba(255, 255, 255, 0)"),x.addColorStop(1,`rgba(255, 255, 255, ${h*.6})`),e.strokeStyle=x,e.lineWidth=d*.5,e.lineCap="round",e.beginPath(),e.moveTo(y,g),e.lineTo(c,u),e.stroke()}const v=e.createRadialGradient(c,u,0,c,u,d*2);return v.addColorStop(0,`rgba(255, 255, 255, ${h})`),v.addColorStop(.5,`rgba(200, 220, 255, ${h*.5})`),v.addColorStop(1,"rgba(200, 220, 255, 0)"),e.fillStyle=v,e.beginPath(),e.arc(c,u,d*2,0,Math.PI*2),e.fill(),i})},D$=[["#FF6B9D","#C44569","#8B3A62"],["#4A90E2","#7B68EE","#9370DB"],["#00D9FF","#0099CC","#006699"],["#FF8C42","#FF6B35","#C44536"],["#6BCF7F","#4ECDC4","#44A08D"]],O$=(e,t,n=4,r={})=>{const s=r.palettes??D$,[a,i]=r.opacityRange??[.15,.3],[o,c]=r.sizeRange??[150,400],[u,d]=r.rotationSpeedRange??[2e-4,5e-4],[h,f]=r.pulseSpeedRange??[.01,.02];return Array.from({length:n},()=>{const m=s[Math.floor(Math.random()*s.length)];return{x:Math.random()*e,y:Math.random()*t,size:o+Math.random()*(c-o),rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()*(d-u)+u)*(Math.random()<.5?-1:1),colors:m,opacity:a+Math.random()*(i-a),pulsePhase:Math.random()*Math.PI*2,pulseSpeed:h+Math.random()*(f-h)}})},I$=(e,t,n,r,s=0,a=0)=>t.map(i=>{i.rotation+=i.rotationSpeed,i.pulsePhase+=i.pulseSpeed;const o=Math.sin(i.pulsePhase)*.2+.8,c=i.size*o,u=i.opacity*o,d=i.x+s*.1,h=i.y+a*.1,f=(d%n+n)%n,m=(h%r+r)%r;return e.save(),e.translate(f,m),e.rotate(i.rotation),i.colors.forEach((y,g)=>{const v=c*(1-g*.2),x=u*(1-g*.3),b=e.createRadialGradient(0,0,0,0,0,v);b.addColorStop(0,`${y}${Math.floor(x*255).toString(16).padStart(2,"0")}`),b.addColorStop(.4,`${y}${Math.floor(x*.6*255).toString(16).padStart(2,"0")}`),b.addColorStop(.7,`${y}${Math.floor(x*.3*255).toString(16).padStart(2,"0")}`),b.addColorStop(1,`${y}00`),e.fillStyle=b,e.fillRect(-v,-v,v*2,v*2)}),e.restore(),i}),$$=()=>{const e=["rgba(220, 240, 255, 0.9)","rgba(255, 255, 255, 0.95)","rgba(200, 230, 255, 0.85)","rgba(240, 250, 255, 0.9)"],t=["hexagon","diamond","triangle"];return Array.from({length:12},(n,r)=>({angle:Math.PI*2*r/12,distance:80+r%3*20,size:8+Math.random()*8,rotation:Math.random()*Math.PI*2,rotationSpeed:.02+Math.random()*.03,orbitSpeed:.008+Math.random()*.004,opacity:.6+Math.random()*.3,color:e[r%e.length],pulsePhase:Math.random()*Math.PI*2,shardType:t[r%3]}))},L$=(e,t,n,r,s)=>{e.save(),t.forEach(i=>{i.angle+=i.orbitSpeed,i.rotation+=i.rotationSpeed,i.pulsePhase+=.03;const o=n+Math.cos(i.angle)*(s+i.distance),c=r+Math.sin(i.angle)*(s+i.distance),u=i.opacity*(.8+.2*Math.sin(i.pulsePhase));if(e.save(),e.translate(o,c),e.rotate(i.rotation),e.globalCompositeOperation="screen",e.shadowBlur=15,e.shadowColor=i.color,e.fillStyle=i.color.replace(/[\d.]+\)$/g,`${u})`),e.strokeStyle=`rgba(255, 255, 255, ${u*.8})`,e.lineWidth=1.5,e.beginPath(),i.shardType==="hexagon"){for(let d=0;d<6;d++){const h=Math.PI/3*d,f=Math.cos(h)*i.size,m=Math.sin(h)*i.size;d===0?e.moveTo(f,m):e.lineTo(f,m)}e.closePath()}else i.shardType==="diamond"?(e.moveTo(0,-i.size),e.lineTo(i.size*.6,0),e.lineTo(0,i.size),e.lineTo(-i.size*.6,0),e.closePath()):(e.moveTo(0,-i.size),e.lineTo(i.size*.866,i.size*.5),e.lineTo(-i.size*.866,i.size*.5),e.closePath());e.fill(),e.stroke(),e.globalCompositeOperation="lighter",e.fillStyle=`rgba(255, 255, 255, ${u*.6})`,e.beginPath(),e.arc(0,0,i.size*.3,0,Math.PI*2),e.fill(),e.restore()});const a=e.createRadialGradient(n,r,s*.8,n,r,s*1.5);a.addColorStop(0,"rgba(220, 240, 255, 0.15)"),a.addColorStop(.6,"rgba(200, 230, 255, 0.08)"),a.addColorStop(1,"rgba(255, 255, 255, 0)"),e.globalCompositeOperation="screen",e.fillStyle=a,e.beginPath(),e.arc(n,r,s*1.5,0,Math.PI*2),e.fill(),e.restore()},F$=(e,t,n=40)=>Array.from({length:n},()=>({x:Math.random()*e,y:Math.random()*t,size:Math.random()*5+2,opacity:0,lifetime:0,maxLifetime:240+Math.random()*180,freezePoint:40+Math.random()*30,isFrozen:!1,trailLength:Math.random()*30+15,color:Math.random()>.5?"#B0C4DE":"#7090b0",rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.02,frozenIntensity:Math.random()*.5+.5})),z$=(e,t)=>{t.forEach(n=>{if(n.lifetime++,n.lifetime<20?(n.opacity=n.lifetime/20,n.y-=.5):n.lifetime>=n.freezePoint&&n.lifetime<n.freezePoint+150?(n.isFrozen||(n.isFrozen=!0,n.rotationSpeed=0),n.opacity=.9*n.frozenIntensity):n.lifetime>=n.freezePoint+150?n.opacity=Math.max(0,1-(n.lifetime-n.freezePoint-150)/90):(n.opacity=.7,n.y-=.4,n.rotation+=n.rotationSpeed),n.lifetime>=n.maxLifetime&&(n.lifetime=0,n.y=Math.random()*e.canvas.height,n.x=Math.random()*e.canvas.width,n.freezePoint=40+Math.random()*30,n.isFrozen=!1,n.rotation=Math.random()*Math.PI*2,n.rotationSpeed=(Math.random()-.5)*.02),n.opacity>0){if(e.save(),e.translate(n.x,n.y),e.rotate(n.rotation),!n.isFrozen&&n.lifetime>=20&&n.lifetime<n.freezePoint){const a=e.createLinearGradient(0,0,0,n.trailLength);a.addColorStop(0,`${n.color}${Math.floor(n.opacity*200).toString(16).padStart(2,"0")}`),a.addColorStop(.5,`${n.color}${Math.floor(n.opacity*100).toString(16).padStart(2,"0")}`),a.addColorStop(1,`${n.color}00`),e.strokeStyle=a,e.lineWidth=2,e.beginPath(),e.moveTo(0,0),e.lineTo(0,n.trailLength),e.stroke()}const r=n.isFrozen?n.size*4:n.size*3,s=e.createRadialGradient(0,0,0,0,0,r);s.addColorStop(0,`${n.color}${Math.floor(n.opacity*255).toString(16).padStart(2,"0")}`),s.addColorStop(.3,`${n.color}${Math.floor(n.opacity*180).toString(16).padStart(2,"0")}`),s.addColorStop(1,`${n.color}00`),e.fillStyle=s,e.beginPath(),e.arc(0,0,r,0,Math.PI*2),e.fill(),e.fillStyle=`${n.color}${Math.floor(n.opacity*230).toString(16).padStart(2,"0")}`,e.beginPath();for(let a=0;a<6;a++){const i=Math.PI/3*a,o=Math.cos(i)*n.size,c=Math.sin(i)*n.size;a===0?e.moveTo(o,c):e.lineTo(o,c)}if(e.closePath(),e.fill(),e.fillStyle=`#ffffff${Math.floor(n.opacity*255).toString(16).padStart(2,"0")}`,e.beginPath(),e.arc(0,0,n.size*.5,0,Math.PI*2),e.fill(),n.isFrozen){e.strokeStyle=`rgba(176, 196, 222, ${n.opacity*.8})`,e.lineWidth=1.5;for(let i=0;i<6;i++){const o=Math.PI/3*i,c=n.size*3.5;e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(o)*c,Math.sin(o)*c),e.stroke(),e.fillStyle=`rgba(220, 235, 255, ${n.opacity*.9})`,e.beginPath(),e.arc(Math.cos(o)*c,Math.sin(o)*c,2,0,Math.PI*2),e.fill()}const a=n.size*2.5+Math.sin(n.lifetime*.05)*n.size*.3;e.strokeStyle=`rgba(176, 196, 222, ${n.opacity*.5})`,e.lineWidth=2,e.beginPath(),e.arc(0,0,a,0,Math.PI*2),e.stroke(),e.strokeStyle=`rgba(220, 235, 255, ${n.opacity*.3})`,e.lineWidth=1,e.beginPath(),e.arc(0,0,a*.6,0,Math.PI*2),e.stroke();for(let i=0;i<4;i++){const o=Math.PI/2*i+n.lifetime*.01,c=a*1.2,u=Math.cos(o)*c,d=Math.sin(o)*c;e.fillStyle=`rgba(255, 255, 255, ${n.opacity*.7})`,e.beginPath(),e.arc(u,d,1.5,0,Math.PI*2),e.fill()}}e.restore()}})},B$=()=>[],V$=(e,t,n)=>({radius:n*.5,maxRadius:n*5+Math.random()*n*3,opacity:1,lifetime:0,maxLifetime:120+Math.random()*80,centerX:e,centerY:t,speed:.8+Math.random()*.6,thickness:2+Math.random()*2}),U$=(e,t,n,r)=>t.map(s=>{s.lifetime++,s.radius+=s.speed;const a=20,i=s.maxLifetime-40;if(s.lifetime<a?s.opacity=s.lifetime/a:s.lifetime>i?s.opacity=Math.max(0,1-(s.lifetime-i)/40):s.opacity=.6+Math.sin(s.lifetime*.1)*.2,s.opacity>0){e.strokeStyle=`rgba(80, 80, 112, ${s.opacity*.4})`,e.lineWidth=s.thickness,e.beginPath(),e.arc(s.centerX,s.centerY,s.radius,0,Math.PI*2),e.stroke(),e.strokeStyle=`rgba(64, 64, 80, ${s.opacity*.6})`,e.lineWidth=s.thickness*.5,e.beginPath(),e.arc(s.centerX,s.centerY,s.radius-s.thickness,0,Math.PI*2),e.stroke();const o=e.createRadialGradient(s.centerX,s.centerY,s.radius-s.thickness*3,s.centerX,s.centerY,s.radius+s.thickness*2);if(o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(.4,`rgba(0, 0, 0, ${s.opacity*.15})`),o.addColorStop(.6,`rgba(0, 0, 0, ${s.opacity*.15})`),o.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=o,e.beginPath(),e.arc(s.centerX,s.centerY,s.radius,0,Math.PI*2),e.fill(),s.lifetime%8===0&&s.opacity>.3)for(let u=0;u<3;u++){const d=Math.random()*Math.PI*2,h=s.centerX+Math.cos(d)*s.radius,f=s.centerY+Math.sin(d)*s.radius,m=e.createRadialGradient(h,f,0,h,f,3);m.addColorStop(0,`rgba(112, 144, 176, ${s.opacity*.8})`),m.addColorStop(1,"rgba(112, 144, 176, 0)"),e.fillStyle=m,e.beginPath(),e.arc(h,f,3,0,Math.PI*2),e.fill()}}return s}).filter(s=>s.lifetime<s.maxLifetime),W$=(e,t,n=12)=>{const r=[];for(let s=0;s<n;s++){const a=Math.PI*2/n*s+(Math.random()-.5)*.4,i=60+Math.random()*45;r.push({x:e+Math.cos(a)*i,y:t+Math.sin(a)*i,size:5+Math.random()*8,angle:a,distance:i,orbitSpeed:8e-4+Math.random()*.0015,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.025,opacity:.7+Math.random()*.3})}return r},H$=(e,t,n,r,s)=>{t.forEach(a=>{a.angle+=a.orbitSpeed,a.rotation+=a.rotationSpeed,a.x=n+Math.cos(a.angle)*a.distance,a.y=r+Math.sin(a.angle)*a.distance,e.save(),e.translate(a.x,a.y),e.rotate(a.rotation),e.fillStyle=`rgba(0, 0, 0, ${a.opacity*.4})`,e.shadowBlur=10,e.shadowColor="rgba(0, 0, 0, 0.6)",e.beginPath();const i=5+Math.floor(Math.random()*3);for(let c=0;c<i;c++){const u=Math.PI*2/i*c,d=a.size*(.8+Math.random()*.5),h=Math.cos(u)*d,f=Math.sin(u)*d;c===0?e.moveTo(h,f):e.lineTo(h,f)}e.closePath(),e.fill(),e.fillStyle=`${s}${Math.floor(a.opacity*255).toString(16).padStart(2,"0")}`,e.shadowBlur=8,e.shadowColor=s,e.fill(),e.strokeStyle=`rgba(255, 255, 255, ${a.opacity*.6})`,e.lineWidth=1.5,e.shadowBlur=5,e.shadowColor="rgba(255, 255, 255, 0.8)",e.stroke();const o=e.createRadialGradient(0,0,0,0,0,a.size*.6);o.addColorStop(0,`rgba(255, 255, 255, ${a.opacity*.4})`),o.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=o,e.shadowBlur=0,e.beginPath(),e.arc(0,0,a.size*.6,0,Math.PI*2),e.fill(),e.restore()})},ow=(e,t,n=25)=>{const r=[];for(let s=0;s<n;s++){const a=Math.random()*Math.PI*2,i=.15+Math.random()*.3;r.push({x:e+(Math.random()-.5)*90,y:t+(Math.random()-.5)*90,vx:Math.cos(a)*i,vy:Math.sin(a)*i,size:.8+Math.random()*1.5,opacity:.2+Math.random()*.3,life:0,maxLife:120+Math.random()*120})}return r},G$=(e,t,n,r,s)=>{t.forEach(a=>{a.x+=a.vx,a.y+=a.vy,a.life++;const i=1-a.life/a.maxLife,o=a.opacity*i;if(a.life<a.maxLife&&o>.01){const c=e.createRadialGradient(a.x,a.y,0,a.x,a.y,a.size*4);c.addColorStop(0,`${n}${Math.floor(o*.8*255).toString(16).padStart(2,"0")}`),c.addColorStop(.5,`${n}${Math.floor(o*.3*255).toString(16).padStart(2,"0")}`),c.addColorStop(1,`${n}00`),e.fillStyle=c,e.beginPath(),e.arc(a.x,a.y,a.size*4,0,Math.PI*2),e.fill(),e.fillStyle=`${n}${Math.floor(o*255).toString(16).padStart(2,"0")}`,e.shadowBlur=5,e.shadowColor=n,e.beginPath(),e.arc(a.x,a.y,a.size,0,Math.PI*2),e.fill(),e.shadowBlur=0,Math.random()<.15&&(e.fillStyle=`rgba(255, 255, 255, ${o*.8})`,e.beginPath(),e.arc(a.x,a.y,a.size*.5,0,Math.PI*2),e.fill())}if(a.life>=a.maxLife){if(r!==void 0&&s!==void 0){const c=Math.random()*Math.PI*2,u=70+Math.random()*30;a.x=r+Math.cos(c)*u,a.y=s+Math.sin(c)*u;const d=.15+Math.random()*.35,h=Math.random()*Math.PI*2;a.vx=Math.cos(h)*d,a.vy=Math.sin(h)*d}a.life=0,a.opacity=.35+Math.random()*.45}})},Jc=(e,t,n)=>{const r=Math.sin(e*12.9898+t*78.233+n*.17)*43758.5453;return r-Math.floor(r)};function K$(e){const{ctx:t,width:n,height:r,phenomenon:s,time:a=0}=e,i=t.createLinearGradient(0,0,0,r);s.id==="pixelDreamMoon"?(i.addColorStop(0,"#120826"),i.addColorStop(.5,"#241042"),i.addColorStop(1,"#3b1e69")):(i.addColorStop(0,s.skyPalette[0]),i.addColorStop(.5,s.skyPalette[1]),i.addColorStop(1,s.skyPalette[2])),t.fillStyle=i,t.fillRect(0,0,n,r),s.id==="pixelDreamMoon"&&q$(t,n,r,a)}function q$(e,t,n,r){e.save();for(let c=0;c<3;c++){const u=c*123,d=Jc(c,1,123)*t,h=Jc(c,2,456)*n*.9,f=80+Jc(c,3,789)*120;for(let m=-f;m<=f;m+=3)for(let y=-f;y<=f;y+=3){const g=Math.sqrt(y*y+m*m);if(g>f)continue;const v=Jc(Math.floor((d+y)/3),Math.floor((h+m)/3),u),x=1-g/f;v>.92-x*.4&&(e.fillStyle=c%2===0?"#5b21b6":"#4338ca",e.globalAlpha=.15*x,e.fillRect(d+y,h+m,3,3))}}e.restore();const i=[{x:t*.15,y:n*.25,r:6,color:"#fcd34d",ring:!1,glow:"#fbbf24"},{x:t*.88,y:n*.65,r:9,color:"#67e8f9",ring:!0,glow:"#22d3ee"}];e.save(),i.forEach((c,u)=>{e.shadowBlur=15,e.shadowColor=c.glow;for(let d=-c.r;d<=c.r;d+=3)for(let h=-c.r;h<=c.r;h+=3)h*h+d*d<=c.r*c.r&&(e.fillStyle=c.color,e.globalAlpha=.9,e.fillRect(c.x+h,c.y+d,3,3));if(c.ring){e.fillStyle="#e0f2fe",e.globalAlpha=.7;const d=c.r*1.8;for(let h=-d;h<=d;h+=3){const f=h*.3;Math.abs(Math.sqrt(h*h+f*f*10)-d)<3*1.5&&(f>0||Math.abs(h)>c.r)&&e.fillRect(c.x+h,c.y+f,3,3)}}}),e.restore();const o=[{x:t*.08,y:n*.1,type:"cross",color:"#fef3c7"},{x:t*.92,y:n*.2,type:"sparkle",color:"#a5f3fc"},{x:t*.8,y:n*.85,type:"cross",color:"#fbcfe8"}];e.save(),o.forEach((c,u)=>{const d=Math.sin(r/300+u*2)*.3+.7,h=3,f=c.x,m=c.y;e.shadowBlur=10,e.shadowColor=c.color,e.fillStyle="#ffffff",e.globalAlpha=d,c.type==="cross"?(e.fillRect(f,m-h*2,h,h*5),e.fillRect(f-h*2,m,h*5,h)):c.type==="sparkle"&&(e.fillRect(f,m,h,h),e.globalAlpha=d*.7,e.fillStyle=c.color,e.fillRect(f-h,m,h,h),e.fillRect(f+h,m,h,h),e.fillRect(f,m-h,h,h),e.fillRect(f,m+h,h,h))}),e.restore()}const lw=["#ffd7a6","#ff9ad5","#b882ff","#6fffd0","#9ad0ff","#ffffff"];function Y$(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)}function X$(e){return()=>{let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}function Q$(e,t,n,r=0){const s=n.specialEffect==="pixel",a=s?3:1,i=h=>Math.round(h/a)*a,o=Math.min(.6,r/200),c=Math.floor(120*n.starDensity*(1+o)),u=Math.min(80,Math.floor(r*.6)),d=Math.max(60,c+u);return Array.from({length:d},()=>({x:s?i(Math.random()*e):Math.random()*e,y:s?i(Math.random()*t*.6):Math.random()*t*.6,size:s?Math.random()*2+1:Math.random()*2+.5,opacity:Math.random()*.8+.2,twinkleSpeed:s?Math.random()*.015+.004:Math.random()*.02+.01,twinklePhase:Math.random()*Math.PI*2,color:s?lw[Math.floor(Math.random()*lw.length)]:void 0}))}function J$(e,t,n){if(e.length===0)return[];const r=Y$(t),s=X$(r),a=Math.min(12,Math.max(4,Math.round(4+n*6))),i=e.length-1,o=[],c=[],u=Math.floor(s()*i);for(o.push(e[u]),c.push(u);c.length<a;){const d=o[o.length-1];let h=-1,f=Number.POSITIVE_INFINITY;for(let m=0;m<e.length;m+=1){if(c.includes(m))continue;const y=e[m].x-d.x,g=e[m].y-d.y,v=y*y+g*g;v<f&&(f=v,h=m)}if(h===-1)break;c.push(h),o.push(e[h])}return[{starIndices:c,intensity:.22+s()*.18}]}function Z$({ctx:e,phenomenon:t,parallaxOffset:n,stars:r,constellations:s,timeMs:a,constellationScale:i,constellationIntensity:o,constellationReveal:c}){if(t.starDensity===0)return;const u=t.specialEffect==="pixel",d=u?3:1,h=v=>Math.round(v/d)*d,f=n.x*.5,m=n.y*.5,y=(a??0)*.001,g=.6+Math.sin(y*.8)*.4;if(s&&s.length>0){e.save();const v=Math.min(1.8,Math.max(.8,i??1)),x=Math.min(1.8,Math.max(.6,o??1)),b=Math.min(1,Math.max(.15,c??1));e.lineWidth=.9*v,e.lineCap="round",e.lineJoin="round",e.strokeStyle="rgba(255,255,255,0.25)",s.forEach(w=>{const S=w.starIndices.map(L=>r[L]).filter(Boolean);if(S.length<2)return;const k=Math.max(2,Math.ceil(S.length*b)),j=S.slice(0,k);if(j.length<2)return;e.globalAlpha=Math.min(1,w.intensity*.35*x),u?j.forEach((L,D)=>{if(D===0)return;const H=j[D-1],R=h(H.x+f),F=h(H.y+m),_=h(L.x+f),P=h(L.y+m);tL(e,R,F,_,P,"rgba(255,255,255,1)",.25)}):(e.beginPath(),j.forEach((L,D)=>{const H=L.x+f,R=L.y+m;D===0?e.moveTo(H,R):e.lineTo(H,R)}),e.stroke());const E=y*.15%1,M=.18,N=E,T=(E+M)%1,A=j.length-1;if(A>0){e.save(),e.strokeStyle="rgba(255,255,255,0.85)",e.lineWidth=1.3*v,e.lineCap="round",e.lineJoin="round",e.shadowBlur=10+v*4,e.shadowColor="rgba(255,255,255,0.6)",e.globalAlpha=Math.min(1,w.intensity*.9*x);const L=(H,R)=>{const F=H*A,_=R*A,P=Math.floor(F),O=Math.min(A-1,Math.floor(_)),I=(K,ee,V)=>K+(ee-K)*V,U=(K,ee)=>{const V=j[K],xe=j[K+1];return{x:I(V.x,xe.x,ee)+f,y:I(V.y,xe.y,ee)+m}},B=F-P,Z=U(P,B);e.beginPath(),e.moveTo(Z.x,Z.y);for(let K=P;K<=O;K+=1){const ee=K===O?_-K:1,V=U(K,ee);e.lineTo(V.x,V.y)}return e.stroke(),U(O,_-O)};let D=null;T>N?D=L(N,T):(L(N,1),D=L(0,T)),D&&(e.beginPath(),e.arc(D.x,D.y,2.2*v+g*.4*v,0,Math.PI*2),e.fillStyle="rgba(255,255,255,0.95)",e.shadowBlur=12+v*4,e.shadowColor="rgba(255,255,255,0.8)",e.fill()),e.restore()}j.forEach(L=>{const D=L.x+f,H=L.y+m;e.beginPath(),e.arc(D,H,Math.max(1.6,L.size*(1+.25*v)+g*.6*v),0,Math.PI*2),e.fillStyle=`rgba(255,255,255,${Math.min(1,.45*x+g*.35)})`,e.shadowBlur=6*v+g*6,e.shadowColor="rgba(255,255,255,0.45)",e.fill()})}),e.restore()}if(r.forEach(v=>{v.twinklePhase+=v.twinkleSpeed;const x=v.opacity*(Math.sin(v.twinklePhase)*.5+.5);if(u){const S=h(v.x+f),k=h(v.y+m),j=Math.max(1,Math.round(v.size)),C=v.color??"#ffffff";e.save(),e.imageSmoothingEnabled=!1,e.fillStyle=C,e.globalAlpha=x,e.fillRect(S,k,j,j),v.size>1.6&&(e.fillRect(S-j,k,j*3,j),e.fillRect(S,k-j,j,j*3)),e.restore();return}const b=v.x+f,w=v.y+m;e.beginPath(),e.arc(b,w,v.size,0,Math.PI*2),e.fillStyle=`rgba(255,255,255,${x})`,e.fill(),v.size>1.5&&(e.beginPath(),e.arc(b,w,v.size*2,0,Math.PI*2),e.fillStyle=`rgba(255,255,255,${x*.2})`,e.fill())}),u){const v=(a??Date.now())/1e3,x=e.canvas.width/(window.devicePixelRatio||1),b=e.canvas.height/(window.devicePixelRatio||1),w=3,S=3,k=Math.floor(v/w);for(let M=0;M<S;M++){const N=k-M,T=Ko(N,1,111),A=Ko(N,2,222),L=Ko(N,3,333);if(T>.6)continue;const D=200+L*300,H=Math.PI/4+(T-.5)*.4;let R,F;A>.4?(R=x*(A-.2)*1.5,F=-50):(R=-50,F=b*A*2);const _=N*w,P=v-_,O=T*2.5,I=P-O;if(I<0||I>2.5)continue;const B=D*I,Z=R+Math.cos(H)*B,K=F+Math.sin(H)*B,ee=.8+L*.6,V=["#5fffd2","#ff8fd6","#ffffff","#fcd34d"],xe=Math.floor(A*V.length),De=V[xe];eL(e,Z,K,25,ee,De,I*1e3)}const j=45,C=Math.floor(v/j),E=Ko(C,66,77);if(E>.6){const M=v%j,N=12;if(M<N){const T=M/N,A=b*(.2+E*.4),L=x*1.1-x*1.4*T,D=Math.sin(v*3)*10,H=A+D;nL(e,L,H,v)}}}}const Ko=(e,t,n)=>{const r=Math.sin(e*12.9898+t*78.233+n*.17)*43758.5453;return r-Math.floor(r)},eL=(e,t,n,r,s,a,i)=>{e.fillStyle="#ffffff",e.fillRect(t,n,3*2,3*2);const c=20;for(let u=0;u<c;u++){const d=t-u*3*1.5,h=n-u*3*1.2;(u%2===0||Ko(u,Math.floor(i/50),10)>.3)&&(e.fillStyle=a,e.globalAlpha=1-u/c,e.fillRect(d,h,3,3))}e.globalAlpha=1},tL=(e,t,n,r,s,a,i)=>{let c=Math.floor(t/3),u=Math.floor(n/3);const d=Math.floor(r/3),h=Math.floor(s/3),f=Math.abs(d-c),m=Math.abs(h-u),y=c<d?1:-1,g=u<h?1:-1;let v=f-m;for(e.fillStyle=a,e.globalAlpha=i;e.fillRect(c*3,u*3,3,3),!(c===d&&u===h);){const x=2*v;x>-m&&(v-=m,c+=y),x<f&&(v+=f,u+=g)}},nL=(e,t,n,r)=>{e.save(),e.translate(t,n),e.fillStyle="#a5f3fc",e.globalAlpha=.9,e.fillRect(4*3,0,3*3,2*3),e.fillStyle="#5d5d5d",e.globalAlpha=1,e.fillRect(2*3,2*3,7*3,1*3),e.fillRect(1*3,3*3,9*3,1*3),e.fillRect(2*3,4*3,7*3,1*3);const a=Math.floor(r*8)%3,i=["#ff0000","#00ff00","#0000ff"];e.fillStyle=i[a],e.fillRect(2*3,3*3,1*3,1*3),e.fillStyle=i[(a+1)%3],e.fillRect(5*3,3*3,1*3,1*3),e.fillStyle=i[(a+2)%3],e.fillRect(8*3,3*3,1*3,1*3),e.restore()},Lo={shadow:"#1b0b2f",base:"#2c1248",mid:"#3b1f5e",highlight:"#a967ff",glow:"#ffd3f0"},rL=(e,t,n)=>{const r=Math.sin(e*12.9898+t*78.233+n*.13)*43758.5453;return r-Math.floor(r)},sL=(e,t)=>{const r=t.width/4,s=t.height/4,a=t.x,i=t.y;e.save(),e.imageSmoothingEnabled=!1,e.globalAlpha=t.opacity;const o=Date.now()/2e3,c=Math.sin(o+t.seed)*3;for(let u=-s/2;u<=s/2;u++)for(let d=-r/2;d<=r/2;d++){const h=d/(r/2),f=u/(s/2),m=rL(d,u,t.seed);if(h*h+f*(f>0?.5:1)*(f*(f>0?.5:1))>.8-m*.3||f>.3&&Math.abs(h)>.8)continue;const g=a+d*4,v=i+u*4+c;let x=Lo.base;if(f<-.4)x=Lo.highlight,f<-.6&&m>.6&&(x=Lo.glow);else if(f>.1&&(x=Lo.mid,f>.4&&(x=Lo.shadow,f>.7&&(Math.floor(g)+Math.floor(v))%2!==0)))continue;e.fillStyle=x,e.fillRect(g,v,4,4)}e.restore()};function aL(e,t,n){if(n.specialEffect==="pixel"){const r=[];return[{count:3,y:.75,size:1,speed:.2,opacity:.6},{count:4,y:.82,size:1.2,speed:.4,opacity:.8},{count:2,y:.9,size:1.4,speed:.6,opacity:1}].forEach(a=>{for(let i=0;i<a.count;i++){const o=180*a.size,c=Math.random()*60;r.push({x:Math.random()*e,y:t*a.y+Math.random()*t*.05,width:o+c,height:(o+c)*.25,speed:(.1+Math.random()*.1)*a.speed*n.cloudSpeed,opacity:a.opacity*n.cloudOpacity,seed:Math.random()*1e3})}}),r}return Array.from({length:5},()=>({x:Math.random()*e,y:t*.2+Math.random()*t*.3,width:Math.random()*100+80,height:Math.random()*40+30,speed:(Math.random()*.15+.05)*n.cloudSpeed,opacity:(Math.random()*.15+.1)*n.cloudOpacity,seed:Math.floor(Math.random()*1e4)}))}function iL({ctx:e,width:t,phenomenon:n,clouds:r}){n.cloudOpacity!==0&&r.forEach(s=>{if(n.cloudSpeed>.2&&(s.x+=s.speed,s.x>t+s.width&&(s.x=-s.width)),n.specialEffect==="pixel"){sL(e,s);return}e.fillStyle=`rgba(150,150,180,${s.opacity*.6})`,e.beginPath(),e.ellipse(s.x+5,s.y+5,s.width/2,s.height/2,0,0,Math.PI*2),e.fill();const a=e.createRadialGradient(s.x,s.y-s.height*.3,0,s.x,s.y,s.width/2);a.addColorStop(0,`rgba(230,230,250,${s.opacity})`),a.addColorStop(.6,`rgba(200,200,230,${s.opacity*.8})`),a.addColorStop(1,`rgba(180,180,210,${s.opacity*.5})`),e.fillStyle=a,e.beginPath(),e.ellipse(s.x,s.y,s.width/2,s.height/2,0,0,Math.PI*2),e.fill(),[{x:-.4,y:-.3,w:.35,h:.5},{x:-.2,y:-.4,w:.3,h:.45},{x:.1,y:-.35,w:.35,h:.5},{x:.35,y:-.25,w:.3,h:.45}].forEach(o=>{const c=e.createRadialGradient(s.x+s.width*o.x,s.y+s.height*o.y,0,s.x+s.width*o.x,s.y+s.height*o.y,s.width*o.w);c.addColorStop(0,`rgba(240,240,255,${s.opacity})`),c.addColorStop(.7,`rgba(210,210,240,${s.opacity*.7})`),c.addColorStop(1,`rgba(190,190,220,${s.opacity*.3})`),e.fillStyle=c,e.beginPath(),e.ellipse(s.x+s.width*o.x,s.y+s.height*o.y,s.width*o.w,s.height*o.h,0,0,Math.PI*2),e.fill()})})}const oL=["#FFFFFF","#FFE4B5","#87CEEB","#DDA0DD","#F0E68C","#98FB98","#FFB6C1","#B0E0E6","#FFDAB9","#E6E6FA"],ki=["#FF6B9D","#C44CFF","#00D4FF","#FFE66D","#4DFFB8","#00FF88"],lL="right",cL=Math.PI/4.6,uL=.16;function dL(e,t){return Array.from({length:10},(r,s)=>({x:-100+Math.random()*120,y:-80-Math.random()*140,length:Math.random()*60+40,speed:Math.random()*1.5+1,angle:cL+(Math.random()-.5)*uL,color:oL[s],opacity:Math.random()*.3+.7,isActive:!1,trailLength:Math.random()*80+60}))}function hL(e,t,n){const s=Math.floor(t.trailLength/3),a=Math.floor(n/300)%ki.length,i=n%300/300,o=Math.sin(i*Math.PI);e.save(),e.imageSmoothingEnabled=!1;for(let d=0;d<s;d++){const h=d/s,f=t.x-Math.cos(t.angle)*(d*3),m=t.y-Math.sin(t.angle)*(d*3),y=(1-h)*t.opacity*(.8+o*.2),g=(a+Math.floor(d/3))%ki.length,v=d<3?"#FFFFFF":ki[g];e.globalAlpha=y,e.fillStyle=v;const x=d<2?4:3-Math.floor(h*2);x>0&&e.fillRect(Math.floor(f/3)*3,Math.floor(m/3)*3,x,x)}e.globalAlpha=t.opacity,e.fillStyle="#FFFFFF";const c=Math.floor(t.x/3)*3,u=Math.floor(t.y/3)*3;e.fillRect(c,u,4,4),e.globalAlpha=.4+o*.3,e.fillStyle=ki[a],e.fillRect(c-3,u-3,3*3+1,3*3+1),e.restore()}function fL(e,t){e.save();const n=e.createLinearGradient(t.x,t.y,t.x-Math.cos(t.angle)*t.trailLength,t.y-Math.sin(t.angle)*t.trailLength);n.addColorStop(0,t.color),n.addColorStop(.5,`${t.color}88`),n.addColorStop(1,`${t.color}00`),e.strokeStyle=n,e.lineWidth=2,e.lineCap="round",e.globalAlpha=t.opacity,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x-Math.cos(t.angle)*t.trailLength,t.y-Math.sin(t.angle)*t.trailLength),e.stroke();const r=e.createRadialGradient(t.x,t.y,0,t.x,t.y,8);r.addColorStop(0,"#FFFFFF"),r.addColorStop(.3,t.color),r.addColorStop(1,`${t.color}00`),e.fillStyle=r,e.beginPath(),e.arc(t.x,t.y,8,0,Math.PI*2),e.fill(),e.fillStyle="#FFFFFF",e.beginPath(),e.arc(t.x,t.y,2,0,Math.PI*2),e.fill(),e.restore()}function mL(e){const{ctx:t,width:n,height:r,phenomenon:s,shootingStars:a}=e;let i=e.timer;const o=Date.now(),c=s.id==="pixelDreamMoon";if(s.shootingStarChance===0)return{shootingStars:a,timer:i};a.forEach(h=>{if(h.isActive){if(h.x+=1*Math.cos(h.angle)*h.speed,h.y+=Math.sin(h.angle)*h.speed,h.x>n+h.trailLength||lL==="left"||h.y>r+h.trailLength){h.isActive=!1;return}c?hL(t,h,o):fL(t,h)}});const u=c?2400:3600,d=c?2400:3600;if(i++,i>u+Math.random()*d){i=0;const h=a.map((f,m)=>f.isActive?-1:m).filter(f=>f!==-1);if(h.length>0){const m=Math.random()<s.shootingStarChance&&h.length>=3?Math.min(Math.floor(Math.random()*3)+3,h.length):1;for(let y=0;y<m;y++){const g=h.splice(Math.floor(Math.random()*h.length),1)[0],v=a[g];v.isActive=!0,v.x=-120-Math.random()*120,v.y=-80-Math.random()*140,c&&(v.color=ki[Math.floor(Math.random()*ki.length)])}}}return{shootingStars:a,timer:i}}const Pa=(e,t)=>{e=e.replace("#","");const n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16),a=Math.min(255,Math.floor(n*t)),i=Math.min(255,Math.floor(r*t)),o=Math.min(255,Math.floor(s*t));return`#${a.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}`},cw=(e,t,n)=>Math.min(n,Math.max(t,e)),Zc=(e,t,n)=>{const r=Math.sin(e*12.9898+t*78.233+n*.17)*43758.5453;return r-Math.floor(r)},pL=(e,t)=>({bg:"#120826",shadow:"#241042",mid:"#3b1e69",base:e,highlight:Pa(e,1.25),rim:t,crater:Pa(e,.6),glow:t}),Pf=["#FF6B9D","#C44CFF","#00D4FF","#FFE66D","#4DFFB8","#FF8A5B","#7B68EE","#00FF88"],gL=(e,t,n,r,s,a)=>{const o=r*1.8,c=Math.floor(s/400)%Pf.length,u=s%400/400,d=Math.sin(u*Math.PI);e.save(),e.imageSmoothingEnabled=!1;for(let h=0;h<20;h++){const f=h/20*Math.PI*2,m=s/12e4,y=f+m+Math.sin(s/8e3+h)*.15,g=.85+Math.sin(h*1.5)*.25,v=t+Math.cos(y)*o*g,x=n+Math.sin(y)*o*g*.35,b=Math.sin(s/600+h*2.3)*.5+.5,w=2+b*2+d*1.5,S=(c+h)%Pf.length,k=Pf[S];e.globalAlpha=.5+b*.4+d*.1,e.fillStyle=k,e.fillRect(Math.floor(v),Math.floor(x),w,w),(b>.5||d>.7)&&(e.globalAlpha=.25+d*.15,e.fillRect(Math.floor(v)-1,Math.floor(x)-1,w+2,w+2),d>.8&&h%3===0&&(e.globalAlpha=.15,e.fillStyle="#FFFFFF",e.fillRect(Math.floor(v)-2,Math.floor(x)-2,w+4,w+4)))}e.restore()},yL=(e,t,n,r,s,a,i)=>{const c=r*r,u=pL(a,i),d=Date.now();e.save(),e.imageSmoothingEnabled=!1;const h=m=>{const v=[{inner:1.4,outer:1.6,color:u.shadow,baseAlpha:.5,noise:.5},{inner:1.65,outer:1.75,color:u.base,baseAlpha:.7,noise:.3},{inner:1.8,outer:2.1,color:u.rim,baseAlpha:.35,noise:.7}];if(e.save(),e.translate(t,n),e.rotate(-Math.PI/12),v.forEach((x,b)=>{for(let S=x.inner*r;S<=x.outer*r;S+=2){const k=2*Math.PI*S,j=Math.floor(k/2);for(let C=0;C<j;C++){const E=C/j*Math.PI*2,M=Math.sin(E)<0;if(m==="back"&&!M||m==="front"&&M)continue;const N=d/(6e5+b*3e5)*(b%2===0?1:-1),T=E+N,A=Math.cos(T)*S,L=Math.sin(T)*S*.3;if(Zc(Math.floor(A),Math.floor(L),d*1e-5)>x.noise){e.fillStyle=x.color;const H=(S-x.inner*r)/((x.outer-x.inner)*r),R=Math.sin(H*Math.PI);e.globalAlpha=x.baseAlpha*R*(M?.5:1),e.fillRect(A,L,2,2)}}}}),m==="front"){for(let b=0;b<12;b++)if(Zc(b,d/2e3,42)>.75){const w=(d/45e3+b*.5)%(Math.PI*2);if(Math.sin(w)>.1){const S=r*(1.5+Math.sin(b)*.3),k=Math.cos(w)*S,j=Math.sin(w)*S*.3;e.globalAlpha=.6+Math.sin(d/500+b)*.4,e.fillStyle=b%2===0?"#ffffff":u.rim,e.fillRect(k,j,2,2)}}}e.restore()};gL(e,t,n,r,d),h("back");for(let m=-r;m<=r;m+=3)for(let y=-r;y<=r;y+=3){const g=y+1.5,v=m+3*.5,x=g*g+v*v;if(x>c)continue;const b=g/r,w=v/r,S=Math.sqrt(Math.max(0,1-b*b-w*w)),k=-Math.cos(s*Math.PI*2),j=b*k+S*Math.sqrt(Math.max(0,1-k*k)),C=Zc(Math.round(g/3),Math.round(v/3),123),E=C>.94,M=C>.985;let N=(j+1)/2;const T=(Math.round((g+r)/3)+Math.round((v+r)/3))%2===0;let A=u.bg;N>.9?A=u.highlight:N>.7?A=N<.8&&T?u.base:u.highlight:N>.5?(A=u.base,N<.6&&T&&(A=u.mid)):N>.3?(A=u.mid,N<.4&&T&&(A=u.shadow)):N>.1?(A=u.shadow,N<.2&&T&&(A=u.bg)):A=u.bg,N>.3&&(M?(A=u.crater,b<0&&Zc(y,m,1)>.5&&(A=u.highlight)):E&&N>.6&&(A=u.crater));const L=Math.sqrt(x)/r;L>.85&&(b*-k>.2||L>.92)&&(L>.95||L>.88&&T)&&(A=u.rim),j<-.1&&(A=u.shadow,j<-.3&&(A=u.bg),j>-.3&&T&&(A=u.mid)),e.fillStyle=A,e.fillRect(t+y,n+m,3,3)}h("front"),e.globalAlpha=.15;const f=e.createRadialGradient(t,n,r*.8,t,n,r*2.5);f.addColorStop(0,u.glow),f.addColorStop(1,"transparent"),e.fillStyle=f,e.beginPath(),e.arc(t,n,r*2.5,0,Math.PI*2),e.fill(),e.restore()},vL=(e,t,n,r,s,a)=>{if(s.id==="pixelDreamMoon"){yL(e,t,n,r,a,s.moonTint,s.uiAccent);return}const i=3,o=r*r,c=r-i*1.2,u=s.moonTint,d=s.uiAccent;let h=0,f=!1,m=!1;a<.5?(h=r*(1-4*a),f=!0):a>.5&&(h=-r+(a-.5)*4*r,m=!0),e.save(),e.imageSmoothingEnabled=!1;for(let y=-r;y<=r;y+=i)for(let g=-r;g<=r;g+=i){const v=g+i*.5,x=y+i*.5;if(v*v+x*x>o)continue;const b=cw(.85+(-v*.5-x*.4)/(r*2),.6,1.2);let w=1;f?v<h-i?w=.35:v<h+i&&(w=.6):m&&(v>h+i?w=.35:v>h-i&&(w=.6));const S=Math.sqrt(v*v+x*x),k=S>c?.12:0,j=S>c?d:u,C=Pa(j,cw(b*w+k,.35,1.35));e.fillStyle=C,e.fillRect(t+g,n+y,i,i)}e.globalAlpha=.35,e.fillStyle=Pa(d,1.1);for(let y=-r-i*2;y<=r+i*2;y+=i*2)for(let g=-r-i*2;g<=r+i*2;g+=i*2){const v=g+i,x=y+i,b=Math.sqrt(v*v+x*x);b>r*1.25||b<r*1.05||e.fillRect(t+g,n+y,i*1.5,i*1.5)}e.restore()};function xL(e,t,n,r,s){if(Math.abs(s-.5)<.01)return;e.save(),e.beginPath(),e.arc(t,n,r,0,Math.PI*2),e.clip();const a="rgba(5, 10, 25, 0.85)",i="rgba(5, 10, 25, 0.5)";if(s<.5){const o=s*2,c=r*(1-o),u=e.createLinearGradient(t-r,n,t-r+c*2.2,n);u.addColorStop(0,a),u.addColorStop(.4,a),u.addColorStop(.7,i),u.addColorStop(1,"rgba(5, 10, 25, 0)"),e.fillStyle=u,e.fillRect(t-r,n-r,c*2.2,r*2)}else if(s>.5){const o=1-(s-.5)*2,c=r*(1-o),u=e.createLinearGradient(t+r-c*2.2,n,t+r,n);u.addColorStop(0,"rgba(5, 10, 25, 0)"),u.addColorStop(.3,i),u.addColorStop(.6,a),u.addColorStop(1,a),e.fillStyle=u,e.fillRect(t+r-c*2.2,n-r,c*2.2,r*2)}e.restore()}function ql(e){const n={normal:1,rare:1.05,very_rare:1.1,legendary:1.15,mythic:1.2}[e.rarity];return 40*(e.moonSize||1)*n}function wL({ctx:e,phenomenon:t,parallaxOffset:n,moonPosition:r,moonPhase:s}){const a={...r};a.phase+=.005;const i=Math.sin(a.phase)*3,o=n.x*.8,c=n.y*.8,u=a.x+o,d=a.y+c,h=ql(t);if(t.specialEffect==="pixel")return vL(e,u,d+i,h,t,s.phase),a;const f=t.moonTint,m=e.createRadialGradient(u,d+i,0,u,d+i,h*1.5);m.addColorStop(0,`${f}50`),m.addColorStop(.5,`${f}26`),m.addColorStop(1,`${f}00`),e.fillStyle=m,e.beginPath(),e.arc(u,d+i,h*1.5,0,Math.PI*2),e.fill();const y=e.createLinearGradient(u-h,d+i-h,u+h,d+i+h);return y.addColorStop(0,t.moonTint),y.addColorStop(.3,Pa(t.moonTint,.9)),y.addColorStop(.6,Pa(t.moonTint,.8)),y.addColorStop(1,Pa(t.moonTint,.7)),e.fillStyle=y,e.beginPath(),e.arc(u,d+i,h,0,Math.PI*2),e.fill(),t.rarity==="mythic"&&bL(e,u,d+i,h,t,a.phase),t.id==="lunarTransientPhenomena"&&SL(e,u,d+i,h,t,a.phase),xL(e,u,d+i,h,s.phase),t.id==="crystalMoon"&&kL(e,u,d+i,h,a.phase),a}function bL(e,t,n,r,s,a){const i=e.createRadialGradient(t,n,r*.7,t,n,r*1.8);i.addColorStop(0,`${s.uiAccent}00`),i.addColorStop(.3,`${s.uiAccent}40`),i.addColorStop(.6,`${s.uiAccent}20`),i.addColorStop(1,`${s.uiAccent}00`),e.fillStyle=i,e.beginPath(),e.arc(t,n,r*1.8,0,Math.PI*2),e.fill(),e.strokeStyle=`${s.uiAccent}60`,e.lineWidth=2,e.beginPath(),e.arc(t,n,r-1,0,Math.PI*2),e.stroke();const o=a*2,c=(Math.sin(o)*.15+.25)*255,u=Math.floor(c).toString(16).padStart(2,"0"),d=e.createRadialGradient(t-r*.3,n-r*.3,0,t-r*.3,n-r*.3,r*.6);d.addColorStop(0,`#ffffff${u}`),d.addColorStop(1,"#ffffff00"),e.fillStyle=d,e.beginPath(),e.arc(t,n,r,0,Math.PI*2),e.fill()}function SL(e,t,n,r,s,a){const i=a*3,o=Math.sin(i)*.3+.7,c=e.createRadialGradient(t,n,r*.5,t,n,r*3);c.addColorStop(0,`${s.uiAccent}${Math.floor(o*120).toString(16).padStart(2,"0")}`),c.addColorStop(.3,`${s.uiAccent}${Math.floor(o*80).toString(16).padStart(2,"0")}`),c.addColorStop(.6,`${s.uiAccent}${Math.floor(o*40).toString(16).padStart(2,"0")}`),c.addColorStop(1,`${s.uiAccent}00`),e.fillStyle=c,e.beginPath(),e.arc(t,n,r*3,0,Math.PI*2),e.fill();const u=a*4,d=(Math.sin(u)*60+280)%360;e.strokeStyle=`hsla(${d}, 80%, 70%, ${o*.8})`,e.lineWidth=3,e.beginPath(),e.arc(t,n,r+2,0,Math.PI*2),e.stroke();const h=e.createRadialGradient(t,n,0,t,n,r*.8);h.addColorStop(0,`rgba(255, 255, 255, ${o*.4})`),h.addColorStop(.5,`${s.uiAccent}${Math.floor(o*100).toString(16).padStart(2,"0")}`),h.addColorStop(1,`${s.uiAccent}00`),e.fillStyle=h,e.beginPath(),e.arc(t,n,r*.8,0,Math.PI*2),e.fill();const f=12,m=r*2;for(let y=0;y<f;y++){const g=y/f*Math.PI*2+a,v=t+Math.cos(g)*m,x=n+Math.sin(g)*m,b=e.createRadialGradient(v,x,0,v,x,4);b.addColorStop(0,`${s.uiAccent}${Math.floor(o*200).toString(16).padStart(2,"0")}`),b.addColorStop(1,`${s.uiAccent}00`),e.fillStyle=b,e.beginPath(),e.arc(v,x,4,0,Math.PI*2),e.fill()}}function kL(e,t,n,r,s){e.save();const a=8;for(let o=0;o<a;o++){const c=Math.PI*2*o/a+s*.3,u=Math.PI*2*(o+1)/a+s*.3,d=r*.95,h=r*.6,f=t+Math.cos(c)*d,m=n+Math.sin(c)*d,y=t+Math.cos(u)*d,g=n+Math.sin(u)*d,v=t+Math.cos(u)*h,x=n+Math.sin(u)*h,b=t+Math.cos(c)*h,w=n+Math.sin(c)*h,S=o%2===0?.08:.04,k=e.createLinearGradient(f,m,t,n);k.addColorStop(0,`rgba(255, 255, 255, ${S})`),k.addColorStop(.5,`rgba(200, 230, 255, ${S*.8})`),k.addColorStop(1,`rgba(180, 220, 255, ${S*.5})`),e.fillStyle=k,e.strokeStyle=`rgba(220, 240, 255, ${.15+S})`,e.lineWidth=.5,e.beginPath(),e.moveTo(f,m),e.lineTo(y,g),e.lineTo(v,x),e.lineTo(b,w),e.closePath(),e.fill(),e.stroke()}const i=20;for(let o=0;o<i;o++){const c=Math.PI*2*o/i+s*(o%3),u=.2+o%5*.15,d=r*u,h=t+Math.cos(c)*d,f=n+Math.sin(c)*d,m=Math.sin(s*4+o*.5)*.5+.5,y=(.8+m*1.2)*(o%3===0?1.2:.8),g=e.createRadialGradient(h,f,0,h,f,y*2.5);g.addColorStop(0,`rgba(255, 255, 255, ${.5*m})`),g.addColorStop(.4,`rgba(220, 240, 255, ${.3*m})`),g.addColorStop(1,"rgba(200, 230, 255, 0)"),e.fillStyle=g,e.beginPath(),e.arc(h,f,y*2.5,0,Math.PI*2),e.fill()}e.restore()}function jL(){const e=p.useRef([]),t=p.useRef([]),n=p.useRef([]),r=p.useRef([]),s=p.useRef([]),a=p.useRef([]),i=p.useRef([]),o=p.useRef([]),c=p.useRef([]),u=p.useRef([]),d=p.useRef([]),h=p.useRef([]),f=p.useRef([]),m=p.useRef([]),y=p.useRef([]),g=p.useRef([]),v=p.useRef([]),x=p.useRef([]),b=p.useRef([]),w=p.useRef([]),S=p.useRef([]),k=p.useRef([]),j=p.useRef([]),C=p.useRef([]),E=p.useRef(Date.now()),M=p.useCallback((P,O,I,U,B)=>{const Z=P.effectIntensity||.5,K={normal:0,rare:.3,very_rare:.5,legendary:.75,mythic:1}[P.rarity];if(P.id==="superBlueBloodMoon"?t.current=Nf(20,"#B84060","#d85080"):P.id==="brokenMoon"?t.current=Nf(25,"#9898B8","#6868a8",.008,.015):P.id==="emptySky"&&(t.current=Nf(30,"#606080","#707090",.008,.012)),P.rarity==="normal"||!P.specialEffect)return;const ee=P.specialEffect;ee==="flash"?e.current=L8():ee==="sparkle"?n.current=zk(O.x,O.y,60):ee==="echo"?f.current=V8(O.x,O.y,I,4):ee==="aurora"?r.current=W8(B):ee==="fireflies"?s.current=G8(U,B,Math.floor((10+Z*20)*K)):ee==="snow"?a.current=q8(U):ee==="fog"?i.current=X8(U,B):ee==="meteorShower"?(u.current=x$(U,B,Math.floor((10+Z*15)*K)),j.current=b$(U,B,6)):ee==="frozenTime"?d.current=F$(U,B,Math.floor((20+Z*20)*K)):ee==="voidRipples"?h.current=B$():ee==="shattered"?(o.current=W$(O.x,O.y,12),c.current=ow(O.x,O.y,25)):ee==="bloodRing"?m.current=J8(I):ee==="fadeParticles"?y.current=e$(U,B):ee==="silence"?g.current=n$():ee==="dreamDust"?v.current=s$(U,B):ee==="memoryFragments"?x.current=i$(U,B):ee==="ancientRunes"?b.current=l$(O.x,O.y,I):ee==="lightRays"?w.current=u$():ee==="shootingStars"?S.current=P$():ee==="starfield"?k.current=R$(150):ee==="nebula"?j.current=O$(U,B,5):ee==="prismLights"&&(C.current=$$())},[]),N=p.useCallback((P,O,I,U,B)=>{(O.specialEffect==="nebula"||O.specialEffect==="meteorShower")&&j.current.length>0&&(j.current=I$(P,j.current,I,U,B.x,B.y)),O.specialEffect==="meteorShower"&&u.current.length>0&&w$(P,u.current,I,U),O.specialEffect==="starfield"&&k.current.length>0&&(k.current=A$(P,k.current,I,U))},[]),T=p.useCallback((P,O,I)=>{O.specialEffect==="aurora"&&r.current.length>0&&H8(P,r.current,I),O.specialEffect==="fog"&&i.current.length>0&&Q8(P,i.current,I)},[]),A=p.useCallback((P,O,I)=>{if(O.specialEffect!=="shattered")return;const U=Date.now();U-E.current>1e4&&(c.current=ow(I.x,I.y,25),E.current=U),c.current.length>0&&G$(P,c.current,O.moonTint,I.x,I.y),o.current.length>0&&H$(P,o.current,I.x,I.y,O.moonTint)},[]),L=p.useCallback((P,O,I,U,B,Z)=>{const K=O.specialEffect;K&&(K==="flash"&&e.current.length>=0&&(Math.random()<.025&&e.current.push(Fk(I.x,I.y,U)),e.current=F8(P,e.current)),K==="sparkle"&&n.current.length>0&&B8(P,n.current),K==="bloodRing"&&m.current.length>0&&Z8(P,m.current,I.x,I.y),K==="fadeParticles"&&y.current.length>0&&t$(P,y.current),K==="silence"&&g.current.length>=0&&(g.current=r$(P,g.current,I.x,I.y,U)),K==="dreamDust"&&v.current.length>0&&a$(P,v.current),K==="memoryFragments"&&x.current.length>0&&o$(P,x.current),K==="ancientRunes"&&b.current.length>0&&c$(P,b.current,I.x,I.y),K==="lightRays"&&w.current.length>0&&d$(P,w.current,I.x,I.y,U),K==="prismLights"&&C.current.length>0&&L$(P,C.current,I.x,I.y,U),K==="shootingStars"&&S.current.length>=0&&(S.current=_$(P,S.current,B,Z)))},[]),D=p.useCallback((P,O,I)=>{(O.id==="superBlueBloodMoon"||O.id==="brokenMoon"||O.id==="emptySky")&&t.current.length>0&&z8(P,t.current,I.x,I.y)},[]),H=p.useCallback((P,O,I,U)=>{O.specialEffect==="snow"&&a.current.length>0&&Y8(P,a.current,I,U),O.specialEffect==="frozenTime"&&d.current.length>0&&z$(P,d.current)},[]),R=p.useCallback((P,O,I)=>{if(O.specialEffect!=="voidRipples")return;const U=ql(O);Math.random()<.015&&h.current.push(V$(I.x,I.y+Math.sin(I.phase)*3,U)),h.current=U$(P,h.current,I.x,I.y)},[]),F=p.useCallback((P,O,I)=>{O.specialEffect==="echo"&&f.current.length>0&&U8(P,f.current,I.x,I.y,I.phase,O.moonTint)},[]),_=p.useCallback((P,O,I,U)=>{O.specialEffect==="fireflies"&&s.current.length>0&&K8(P,s.current,I,U)},[]);return{moonFlashesRef:e,sparklesRef:n,echoMoonsRef:f,firefliesRef:s,initializeParticleEffects:M,drawBackgroundEffects:N,drawAtmosphericEffects:T,drawShatteredEffects:A,drawSpecialEffects:L,drawOrbitingEffects:D,drawWeatherEffects:H,drawVoidEffects:R,drawEchoMoonsEffect:F,drawFirefliesEffect:_}}function CL({canvasRef:e,phenomenon:t,moonPositionRef:n,parallaxOffsetRef:r,moonFlashesRef:s,sparklesRef:a}){const i=p.useRef(null),o=p.useRef(0),c=p.useRef(!1),[u,d]=p.useState(null),[h,f]=p.useState(vd()),m=p.useCallback((j,C)=>{var P,O;if(!e.current||!t||!n.current)return console.log(" isMoonHit: No canvas or phenomenon"),!1;const E=e.current.getBoundingClientRect(),M=j-E.left,N=C-E.top,T=n.current,A=((P=r.current)==null?void 0:P.x)??0,L=((O=r.current)==null?void 0:O.y)??0,D=T.x+A*.8,H=T.y+Math.sin(T.phase)*3+L*.8,R=ql(t),F=Math.sqrt(Math.pow(M-D,2)+Math.pow(N-H,2)),_=F<R*1.5;return console.log(" Moon Hit Check:",{clickX:M.toFixed(0),clickY:N.toFixed(0),moonX:D.toFixed(0),moonY:H.toFixed(0),dist:F.toFixed(0),moonRadius:R.toFixed(0),threshold:(R*1.5).toFixed(0),hit:_}),_},[e,t,n,r]),y=p.useCallback(()=>{var A,L;if(!e.current||!t||!n.current)return;const j=n.current,C=((A=r.current)==null?void 0:A.x)??0,E=((L=r.current)==null?void 0:L.y)??0,M=j.x+C*.8,N=j.y+Math.sin(j.phase)*3+E*.8;navigator.vibrate&&navigator.vibrate(20),s.current.push(Fk(M,N));const T=zk(M,N,15);a.current=[...a.current,...T]},[e,t,n,r,s,a]),g=p.useCallback(()=>{f(vd()),d("phase"),y()},[y]),v=p.useCallback(()=>{navigator.vibrate&&navigator.vibrate([50,30,50]),d("phenomenon")},[]),x=p.useCallback(j=>{console.log(" Touch Start triggered");const C=j.touches[0];m(C.clientX,C.clientY)&&(j.preventDefault(),c.current=!1,o.current=Date.now(),i.current=setTimeout(()=>{c.current||v()},500))},[m,v]),b=p.useCallback(()=>{c.current=!0,i.current&&(clearTimeout(i.current),i.current=null)},[]),w=p.useCallback(j=>{if(i.current&&(clearTimeout(i.current),i.current=null),Date.now()-o.current<500&&!c.current){const E=j.changedTouches[0];m(E.clientX,E.clientY)&&g()}},[m,g]),S=p.useCallback(j=>{m(j.clientX,j.clientY)&&g()},[m,g]),k=p.useCallback(()=>{d(null)},[]);return p.useEffect(()=>()=>{i.current&&clearTimeout(i.current)},[]),{overlayType:u,currentMoonPhase:h,handleTouchStart:x,handleTouchMove:b,handleTouchEnd:w,handleCanvasClick:S,handleCloseOverlay:k}}function EL({onRefresh:e,onExpand:t,onCollapse:n,pullThreshold:r=100,expandThreshold:s=50}={}){const a=p.useRef(null),[i,o]=p.useState({pullDistance:0,isRefreshing:!1,isPulling:!1,isExpanded:!1,gestureDirection:"none"}),c=p.useRef(0),u=p.useRef(0),d=p.useRef(!1),h=p.useRef(null),f=p.useCallback(x=>{if(i.isRefreshing)return;const b=x.touches[0];c.current=b.clientY,u.current=b.clientX,d.current=!0,h.current=null,o(w=>({...w,isPulling:!0,gestureDirection:"none"}))},[i.isRefreshing]),m=p.useCallback(x=>{if(!d.current||i.isRefreshing)return;const b=x.touches[0],w=b.clientY-c.current,S=b.clientX-u.current;if(h.current||(Math.abs(w)>10||Math.abs(S)>10)&&(h.current=Math.abs(w)>Math.abs(S)?"vertical":"horizontal"),h.current!=="vertical")return;const k=w>0?2.5:4,j=w/k;o(C=>({...C,pullDistance:Math.max(-50,Math.min(150,j)),gestureDirection:w>0?"down":"up"})),w>0&&x.preventDefault()},[i.isRefreshing]),y=p.useCallback(async()=>{if(!d.current)return;d.current=!1,h.current=null;const{pullDistance:x,gestureDirection:b}=i;if(b==="down"&&x>=r&&e){o(w=>({...w,isRefreshing:!0,pullDistance:r,isPulling:!1}));try{await e()}finally{o(w=>({...w,isRefreshing:!1,pullDistance:0}))}return}b==="down"&&x>=s&&t?(t(),o(w=>({...w,isExpanded:!0}))):b==="up"&&x<=-s&&n&&(n(),o(w=>({...w,isExpanded:!1}))),o(w=>({...w,pullDistance:0,isPulling:!1,gestureDirection:"none"}))},[i,r,s,e,t,n]);p.useEffect(()=>{const x=a.current;if(x)return x.addEventListener("touchstart",f,{passive:!0}),x.addEventListener("touchmove",m,{passive:!1}),x.addEventListener("touchend",y,{passive:!0}),()=>{x.removeEventListener("touchstart",f),x.removeEventListener("touchmove",m),x.removeEventListener("touchend",y)}},[f,m,y]);const g=Math.min(Math.abs(i.pullDistance)/r,1),v=i.pullDistance>=r;return{containerRef:a,...i,progress:g,isReady:v}}const uw="mythic-moon-collection",_f="mythic-locked-moon",dw={superBloodMoon:{type:"blood",color:"#DC143C",secondaryColor:"#8B0000",speed:1.5,density:.8,glow:!0},superBlueBloodMoon:{type:"aurora",color:"#B840A0",secondaryColor:"#4040B8",speed:1.2,density:.7,glow:!0},lunarTransientPhenomena:{type:"lightning",color:"#C8A8F8",secondaryColor:"#FFFFFF",speed:2.5,density:.5,glow:!0},hybridEclipse:{type:"fire",color:"#FFB870",secondaryColor:"#D8A860",speed:1,density:.6,glow:!0},stillMoon:{type:"crystals",color:"#B0C4DE",secondaryColor:"#E0F0FF",speed:.3,density:.4,glow:!1},echoMoon:{type:"stars",color:"#D0D0E8",secondaryColor:"#9090B8",speed:.8,density:.6,glow:!1},brokenMoon:{type:"void",color:"#9898B8",secondaryColor:"#484868",speed:1.8,density:.9,glow:!1},emptySky:{type:"void",color:"#404040",secondaryColor:"#202020",speed:.5,density:.2,glow:!1},crystalMoon:{type:"crystals",color:"#E0F0FF",secondaryColor:"#80C0FF",speed:.6,density:.7,glow:!0},arcticMoon:{type:"snow",color:"#90DCC8",secondaryColor:"#FFFFFF",speed:.7,density:.8,glow:!1},shatteredMoon:{type:"void",color:"#9898C8",secondaryColor:"#6060A0",speed:2,density:.7,glow:!0},cosmicVoyageMoon:{type:"stars",color:"#8090C0",secondaryColor:"#4060A0",speed:1,density:.9,glow:!0},nebulaDreamMoon:{type:"aurora",color:"#B888D8",secondaryColor:"#D060A0",speed:.9,density:.6,glow:!0},pixelDreamMoon:{type:"pixels",color:"#FFBFA3",secondaryColor:"#FF8FD6",speed:.6,density:.5,glow:!1}};function Bk(){const[e,t]=p.useState({}),[n,r]=p.useState(!1);p.useEffect(()=>{const y=localStorage.getItem(uw);if(y)try{t(JSON.parse(y))}catch(g){console.error("Failed to parse moon collection:",g)}r(!0)},[]),p.useEffect(()=>{n&&localStorage.setItem(uw,JSON.stringify(e))},[e,n]);const s=p.useCallback(y=>{const g=new Date().toISOString();t(v=>{const x=v[y.id];return x?{...v,[y.id]:{...x,encounterCount:x.encounterCount+1,lastEncountered:g}}:{...v,[y.id]:{id:y.id,firstEncountered:g,encounterCount:1,lastEncountered:g,isFavorite:!1,isLocked:!1,themeDurationBoost:0}}})},[]),a=p.useCallback(y=>{t(g=>{const v=g[y];return v?{...g,[y]:{...v,isFavorite:!v.isFavorite}}:g})},[]),i=p.useCallback(y=>{t(g=>{const v=g[y];if(!v)return g;if(v.encounterCount<5&&!v.isLocked)return console.log(` Need ${5-v.encounterCount} more encounters to unlock Lock Theme feature`),g;const x=!v.isLocked;x?(localStorage.setItem(_f,y),console.log(` Moon locked: ${y}`)):(localStorage.removeItem(_f),console.log(` Moon unlocked: ${y}`));const b={...g};return Object.keys(b).forEach(w=>{w!==y&&b[w].isLocked&&(b[w]={...b[w],isLocked:!1})}),{...b,[y]:{...v,isLocked:x}}})},[]),o=p.useCallback(()=>localStorage.getItem(_f),[]),c=p.useCallback((y,g)=>{t(v=>{const x=v[y];return x?{...v,[y]:{...x,themeDurationBoost:Math.min(86400,x.themeDurationBoost+g)}}:v})},[]),u=p.useCallback(y=>{const g=y.transitionSpeed*2,v=e[y.id],x=(v==null?void 0:v.themeDurationBoost)||0;return g+x},[e]),d=p.useCallback(()=>{const y=Object.keys($n),g=Object.keys(e),v=b=>g.filter(w=>{var S;return((S=$n[w])==null?void 0:S.rarity)===b}).length,x=Object.values(e).reduce((b,w)=>b+w.encounterCount,0);return{totalDiscovered:g.length,totalEncounters:x,mythicCount:v("mythic"),legendaryCount:v("legendary"),veryRareCount:v("very_rare"),rareCount:v("rare"),normalCount:v("normal"),completionPercent:Math.round(g.length/y.length*100)}},[e]),h=p.useCallback(()=>Object.values($n).filter(y=>y.rarity==="mythic").map(y=>({...y,discovered:!!e[y.id],entry:e[y.id]||null,particles:dw[y.id]||null})),[e]),f=p.useCallback(y=>dw[y]||null,[]),m=p.useCallback(y=>!!e[y],[e]);return{collection:e,isLoaded:n,recordEncounter:s,toggleFavorite:a,toggleLock:i,getLockedMoonId:o,addDurationBoost:c,getEffectiveThemeDuration:u,getStats:d,getMythicMoons:h,getParticleConfig:f,isDiscovered:m}}const TL={normal:{bg:"bg-slate-900/90",border:"border-slate-600",text:"text-slate-300"},rare:{bg:"bg-blue-950/90",border:"border-blue-500",text:"text-blue-300"},very_rare:{bg:"bg-purple-950/90",border:"border-purple-500",text:"text-purple-300"},legendary:{bg:"bg-amber-950/90",border:"border-amber-500",text:"text-amber-300"},mythic:{bg:"bg-rose-950/90",border:"border-rose-400",text:"text-rose-300"}},hw={normal:"",rare:"",very_rare:"",legendary:"",mythic:""};function ML({type:e,moonPhase:t,phenomenon:n,onClose:r}){const s=TL[(n==null?void 0:n.rarity)||"normal"];return l.jsxs("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 animate-fade-in",onClick:r,children:[l.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),l.jsxs("div",{className:`relative max-w-sm w-full rounded-2xl border-2 ${s.bg} ${s.border} p-6 shadow-2xl animate-scale-in`,onClick:a=>a.stopPropagation(),children:[l.jsx("button",{onClick:r,className:"absolute top-3 right-3 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Close",children:l.jsx(vo,{className:"w-4 h-4 text-white/80"})}),e==="phase"?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 rounded-full bg-white/10",children:l.jsx(og,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:t.phaseName}),l.jsx("p",{className:"text-sm text-white/70",children:t.phaseNameTh})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[l.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),l.jsxs("p",{className:"text-xl font-bold text-white",children:[Math.round(t.illumination*100),"%"]})]}),l.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[l.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),l.jsxs("p",{className:"text-xl font-bold text-white",children:[t.age.toFixed(1)," ",l.jsx("span",{className:"text-sm font-normal",children:""})]})]})]}),l.jsx("div",{className:"flex justify-center py-2",children:l.jsxs("div",{className:"relative w-20 h-20",children:[l.jsx("div",{className:"absolute inset-0 rounded-full bg-white/90 shadow-lg"}),l.jsx("div",{className:"absolute inset-0 rounded-full bg-slate-900/90",style:{clipPath:t.phase<.5?`inset(0 ${(1-t.phase*2)*100}% 0 0)`:`inset(0 0 0 ${(t.phase-.5)*2*100}%)`}})]})}),l.jsx("p",{className:"text-center text-sm text-white/60",children:""})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 rounded-full",style:{backgroundColor:(n==null?void 0:n.uiAccent)+"30"},children:l.jsx(Ut,{className:"w-6 h-6",style:{color:n==null?void 0:n.uiAccent}})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:n==null?void 0:n.name}),l.jsx("p",{className:"text-sm text-white/70",children:n==null?void 0:n.nameEn})]})]}),(n==null?void 0:n.id)==="pixelDreamMoon"?l.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 border-4 border-double",style:{backgroundColor:"#2a2a40",borderColor:n.uiAccent,boxShadow:"4px 4px 0px rgba(0,0,0,0.5)",fontFamily:"'Press Start 2P', cursive",imageRendering:"pixelated"},children:[l.jsx(sp,{className:"w-3 h-3",style:{color:n.uiAccent}}),l.jsx("span",{className:"text-xs tracking-widest uppercase",style:{color:n.uiAccent},children:hw[n.rarity]})]}):l.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full ${s.bg} border ${s.border}`,children:[l.jsx(sp,{className:`w-4 h-4 ${s.text}`}),l.jsx("span",{className:`text-sm font-medium ${s.text}`,children:hw[(n==null?void 0:n.rarity)||"normal"]})]}),l.jsxs("p",{className:"text-lg italic text-white/80 border-l-2 pl-3",style:{borderColor:n==null?void 0:n.uiAccent},children:['"',n==null?void 0:n.subtitle,'"']}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[l.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),l.jsxs("p",{className:"text-lg font-semibold text-white",children:[Math.round(((n==null?void 0:n.starDensity)||0)*100),"%"]})]}),l.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[l.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),l.jsxs("p",{className:"text-lg font-semibold text-white",children:[Math.round(((n==null?void 0:n.cloudOpacity)||0)*100),"%"]})]}),l.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[l.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),l.jsxs("p",{className:"text-lg font-semibold text-white",children:[Math.round(((n==null?void 0:n.shootingStarChance)||0)*100),"%"]})]}),l.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[l.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),l.jsxs("p",{className:"text-lg font-semibold text-white",children:[(((n==null?void 0:n.moonSize)||1)*100).toFixed(0),"%"]})]})]}),(n==null?void 0:n.specialEffect)&&l.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[l.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),l.jsxs("p",{className:"text-base font-medium text-white capitalize",children:[n.specialEffect,n.effectIntensity&&l.jsxs("span",{className:"text-white/60 ml-2",children:["(",Math.round(n.effectIntensity*100),"%)"]})]})]}),l.jsx("div",{className:"flex items-center justify-center gap-2 pt-2",children:l.jsxs("span",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:(n==null?void 0:n.uiAccent)+"20",color:n==null?void 0:n.uiAccent},children:["#",n==null?void 0:n.emotionTag]})}),l.jsx("p",{className:"text-center text-sm text-white/60",children:""})]})]})]})}function NL({phenomenon:e}){const t=()=>e?e.rarity==="mythic"?{superBloodMoon:"'Cinzel', serif",superBlueBloodMoon:"'UnifrakturMaguntia', cursive",lunarTransientPhenomena:"'Orbitron', sans-serif",hybridEclipse:"'Spectral', serif",stillMoon:"'Abril Fatface', serif",echoMoon:"'Righteous', cursive",brokenMoon:"'Creepster', cursive",emptySky:"'Nosifer', cursive",crystalMoon:"'Poiret One', cursive",shatteredMoon:"'Creepster', cursive",pixelDreamMoon:"'Press Start 2P', 'Space Grotesk', sans-serif"}[e.id]||"'Cinzel', serif":e.rarity==="legendary"?"'Playfair Display', serif":e.rarity==="very_rare"?"'Cormorant Garamond', serif":e.rarity==="rare"?e.id==="snowMoon"?"'Mountains of Christmas', cursive":"'Philosopher', sans-serif":"'Inter', sans-serif":"'Inter', sans-serif",n=()=>e?e.id==="pixelDreamMoon"?"text-5xl md:text-6xl":e.rarity==="mythic"?"text-6xl":e.rarity==="legendary"||e.rarity==="very_rare"?"text-5xl":"text-4xl":"text-4xl",r=()=>e?e.rarity==="mythic"?e.id==="pixelDreamMoon"?"2px 2px 0 rgba(20, 10, 40, 0.9), 0 0 12px rgba(255, 170, 220, 0.6)":`0 0 5px ${e.uiAccent}99, 0 0 12px ${e.uiAccent}55, 0 3px 8px rgba(0, 0, 0, 0.8)`:e.rarity==="legendary"?`0 0 12px ${e.uiAccent}, 0 0 25px ${e.uiAccent}aa, 0 4px 10px rgba(0, 0, 0, 0.8)`:e.rarity==="very_rare"?`0 0 20px ${e.uiAccent}aa, 0 0 40px ${e.uiAccent}66, 0 4px 8px rgba(0, 0, 0, 0.6)`:e.rarity==="rare"?"0 0 15px rgba(255, 255, 255, 0.5), 0 0 30px rgba(255, 255, 255, 0.3), 0 4px 8px rgba(0, 0, 0, 0.5)":"0 0 10px rgba(255, 255, 255, 0.4), 0 2px 6px rgba(0, 0, 0, 0.5)":"0 0 10px rgba(255, 255, 255, 0.4), 0 2px 6px rgba(0, 0, 0, 0.5)",s=()=>e&&(e.rarity==="mythic"||e.rarity==="legendary")?e.id==="emptySky"||e.id==="brokenMoon"?"#ffffff":e.uiAccent:"#ffffff",a=()=>e?e.id==="pixelDreamMoon"?"pixelFlicker 3s steps(6) infinite":e.rarity==="mythic"?"pulse 3s ease-in-out infinite":e.rarity==="legendary"?"pulse 4s ease-in-out infinite":"none":"none",i=()=>e?e.id==="pixelDreamMoon"?"'Chakra Petch', 'Space Grotesk', sans-serif":e.rarity==="mythic"||e.rarity==="legendary"?"'Cormorant Garamond', serif":e.rarity==="very_rare"?"'Philosopher', sans-serif":"'Inter', sans-serif":"'Inter', sans-serif",o=()=>e?e.rarity==="mythic"?e.id==="pixelDreamMoon"?"1px 1px 0 rgba(15, 8, 30, 0.9), 0 0 8px rgba(255, 190, 140, 0.6)":`0 0 12px ${e.uiAccent}aa, 0 0 25px ${e.uiAccent}44, 0 2px 6px rgba(0, 0, 0, 0.7)`:e.rarity==="legendary"?`0 0 15px ${e.uiAccent}99, 0 2px 5px rgba(0, 0, 0, 0.6)`:e.rarity==="very_rare"?`0 0 12px ${e.uiAccent}66, 0 2px 4px rgba(0, 0, 0, 0.5)`:"0 0 10px rgba(255, 255, 255, 0.4), 0 2px 4px rgba(0, 0, 0, 0.5)":"0 0 10px rgba(255, 255, 255, 0.4), 0 2px 4px rgba(0, 0, 0, 0.5)",c=()=>e&&(e.rarity==="mythic"||e.rarity==="legendary")?e.uiAccent:"rgba(255, 255, 255, 0.95)",u=()=>e?e.id==="pixelDreamMoon"?"text-base md:text-lg":e.rarity==="mythic"?"text-xl":"text-lg":"text-lg";return l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center px-6 pt-10 pointer-events-none",children:[l.jsx("h1",{className:`font-bold text-white mb-2 tracking-wide transition-all duration-500 ${n()}`,style:{fontFamily:t(),textShadow:r(),color:s(),animation:a(),letterSpacing:(e==null?void 0:e.id)==="pixelDreamMoon"?"0.18em":void 0,textTransform:(e==null?void 0:e.id)==="pixelDreamMoon"?"uppercase":void 0},children:"Dream book"}),e&&l.jsx("p",{className:`font-light transition-all duration-500 ${u()}`,style:{fontFamily:i(),textShadow:o(),color:c(),letterSpacing:(e==null?void 0:e.id)==="pixelDreamMoon"?"0.08em":void 0,fontStyle:(e==null?void 0:e.id)==="pixelDreamMoon"?"normal":"italic"},children:e.subtitle})]})}function PL({pullDistance:e,progress:t,isRefreshing:n,isReady:r,isPulling:s}){const a=e>15||n,i=.5+t*.5,o=t*180,c=t*.6;return l.jsxs("div",{className:q("absolute left-1/2 -translate-x-1/2 z-20 pointer-events-none","transition-all duration-300 ease-out",a?"opacity-100":"opacity-0"),style:{top:Math.max(8,Math.min(e*.8,80)),transform:`translateX(-50%) scale(${i})`},children:[l.jsx("div",{className:q("absolute inset-0 rounded-full blur-xl transition-opacity",r?"bg-primary/40":"bg-white/20"),style:{opacity:c,transform:`scale(${1.5+t*.5})`}}),l.jsx("div",{className:q("relative flex items-center justify-center w-12 h-12 rounded-full","backdrop-blur-md border transition-all duration-300",n?"bg-primary/30 border-primary/50 shadow-lg shadow-primary/20":r?"bg-primary/20 border-primary/40":"bg-white/10 border-white/20"),children:n?l.jsxs("div",{className:"relative",children:[l.jsx(uc,{className:"w-5 h-5 text-primary animate-spin"}),l.jsx(Ut,{className:"absolute -top-1 -right-1 w-3 h-3 text-primary animate-pulse",style:{animationDelay:"0.2s"}}),l.jsx(Ut,{className:"absolute -bottom-1 -left-1 w-2 h-2 text-primary animate-pulse",style:{animationDelay:"0.5s"}})]}):l.jsx(Hs,{className:q("w-6 h-6 transition-all duration-300",r?"text-primary":"text-white/70"),style:{transform:`rotate(${o}deg)`}})}),l.jsx("div",{className:q("absolute -bottom-6 left-1/2 -translate-x-1/2 whitespace-nowrap","text-[10px] font-medium transition-all duration-300",r?"text-primary":"text-white/50"),style:{opacity:t>.3?1:0,transform:`translateX(-50%) translateY(${(1-t)*10}px)`},children:n?"...":r?"":"..."}),s&&t>.2&&l.jsx("div",{className:"absolute inset-0",children:[...Array(3)].map((u,d)=>l.jsx("div",{className:"absolute w-1 h-1 rounded-full bg-white/40",style:{left:`${50+(d-1)*20}%`,top:`${-20-d*10}%`,opacity:t*(.8-d*.2),transform:`scale(${1-d*.2})`,animation:`float ${1+d*.3}s ease-in-out infinite`}},d))})]})}const Qn={cyan:"#22d3ee",pink:"#f472b6",sky:"#93c5fd",mint:"#a7f3d0",glow:"rgba(34,211,238,0.8)"},nn=(e,t)=>Math.random()*(t-e)+e,_L=e=>e[Math.floor(Math.random()*e.length)];function RL({show:e,onComplete:t}){const[n,r]=p.useState(!1),[s,a]=p.useState(!1),i=p.useMemo(()=>e?Array.from({length:26}).map(()=>({size:Math.random()>.7?2:1,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,opacity:nn(.2,.8),duration:nn(3,7),delay:nn(0,2)})):[],[e]),o=p.useMemo(()=>e?Array.from({length:12}).map(()=>({size:Math.random()>.6?8:4,top:`${Math.random()*90}%`,left:`${Math.random()*90}%`,color:_L([Qn.cyan,Qn.pink]),duration:nn(2,5),delay:nn(0,1)})):[],[e]),c=p.useMemo(()=>e?Array.from({length:6}).map((w,S)=>({top:`${10+Math.random()*70}%`,left:`${10+Math.random()*70}%`,duration:4+S,delay:S*.2})):[],[e]),u=p.useMemo(()=>e?Array.from({length:34}).map(()=>({size:Math.random()>.5?4:8,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,opacity:nn(.2,.7),duration:nn(1,3),delay:nn(0,1)})):[],[e]),d=p.useMemo(()=>e?Array.from({length:16}).map(()=>({height:Math.random()>.7?6:4,top:`${-10-Math.random()*30}%`,left:`${Math.random()*100}%`,opacity:.5,duration:nn(4,10),delay:nn(0,2)})):[],[e]),h=p.useMemo(()=>e?Array.from({length:12}).map(()=>({bottom:`${5+Math.random()*20}px`,left:`${Math.random()*100}%`,opacity:.4,duration:nn(3,6),delay:nn(0,1)})):[],[e]),f=p.useMemo(()=>e?Array.from({length:8}).map(()=>({top:`${Math.random()*90}%`,left:`${Math.random()*90}%`,duration:nn(3,6),delay:nn(0,2)})):[],[e]);if(p.useEffect(()=>{if(e){r(!0),a(!1);const w=setTimeout(()=>a(!0),3e3),S=setTimeout(()=>{r(!1),t()},4e3);return()=>{clearTimeout(w),clearTimeout(S)}}},[e,t]),!n)return null;const m=l.jsxs("div",{"aria-hidden":"true",className:"contents",children:[l.jsx("div",{className:"absolute inset-3 border-4 border-[#7dd3fc]/40 shadow-[0_0_20px_rgba(125,211,252,0.35),inset_0_0_20px_rgba(59,130,246,0.25)] pointer-events-none"}),l.jsxs("div",{className:"absolute inset-3 pointer-events-none",style:{animation:"framePulse 3s ease-in-out infinite"},children:[l.jsx("div",{className:"absolute -top-2 left-0 right-0 h-1",style:{background:`repeating-linear-gradient(90deg, ${Qn.cyan} 0 10px, ${Qn.pink} 10px 16px, ${Qn.sky} 16px 24px, transparent 24px 40px)`,backgroundSize:"64px 100%",animation:"topBarScroll 2.6s steps(8) infinite",boxShadow:`0 0 6px ${Qn.glow}`,willChange:"background-position"}}),l.jsx("div",{className:"absolute -top-2 left-4 h-1 w-12 bg-[#22d3ee]/70 shadow-[0_0_8px_rgba(34,211,238,0.8)]"}),l.jsx("div",{className:"absolute -top-2 right-4 h-1 w-8 bg-[#f472b6]/70 shadow-[0_0_8px_rgba(244,114,182,0.8)]"}),l.jsx("div",{className:"absolute -bottom-2 left-6 h-1 w-10 bg-[#a7f3d0]/60 shadow-[0_0_8px_rgba(167,243,208,0.8)]"}),l.jsx("div",{className:"absolute -bottom-2 right-6 h-1 w-14 bg-[#93c5fd]/60 shadow-[0_0_8px_rgba(147,197,253,0.8)]"})]}),l.jsxs("div",{className:"absolute inset-6 pointer-events-none opacity-60",children:[l.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 border-[#7dd3fc]"}),l.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 border-[#7dd3fc]"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 border-[#7dd3fc]"}),l.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 border-[#7dd3fc]"})]})]}),y=l.jsxs("div",{"aria-hidden":"true",className:"contents",children:[l.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(0,0,0,0)_0%,rgba(0,0,0,0.35)_60%,rgba(0,0,0,0.7)_100%)] pointer-events-none"}),l.jsx("div",{className:"absolute inset-0 opacity-25 mix-blend-screen pointer-events-none",style:{background:"linear-gradient(90deg, rgba(244,114,182,0.2) 0 50%, transparent 50%), linear-gradient(0deg, rgba(34,211,238,0.2) 0 50%, transparent 50%)",backgroundSize:"16px 16px",animation:"nebulaStep 8s steps(6) infinite"}}),l.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(#4c1d95 1px, transparent 1px), linear-gradient(90deg, #4c1d95 1px, transparent 1px)",backgroundSize:"40px 40px",transform:"perspective(500px) rotateX(20deg) scale(1.5)",animation:"gridPulse 4s ease-in-out infinite"}}),l.jsx("div",{className:"absolute inset-0 opacity-25 mix-blend-screen pointer-events-none",style:{backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,0.03) 0px, rgba(255,255,255,0.03) 1px, transparent 1px, transparent 3px)",animation:"scanlineShift 6s linear infinite"}}),l.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none",style:{background:"linear-gradient(90deg, transparent 0%, rgba(56,189,248,0.2) 48%, rgba(56,189,248,0.45) 50%, rgba(56,189,248,0.2) 52%, transparent 100%)",animation:"beamSweep 5s linear infinite"}})]}),g=l.jsxs("div",{"aria-hidden":"true",className:"contents",children:[l.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 w-44 h-44 opacity-35 pointer-events-none",style:{background:"repeating-linear-gradient(0deg, rgba(244,114,182,0.35) 0 6px, rgba(59,130,246,0.18) 6px 12px)",clipPath:"polygon(40% 0, 60% 0, 72% 10%, 82% 22%, 90% 40%, 90% 60%, 82% 78%, 72% 90%, 60% 100%, 40% 100%, 28% 90%, 18% 78%, 10% 60%, 10% 40%, 18% 22%, 28% 10%)",boxShadow:"0 0 0 4px rgba(244,114,182,0.2), 6px 6px 0 rgba(0,0,0,0.35)",animation:"pixelSunPulse 4s steps(4) infinite"}}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 opacity-35 pointer-events-none",style:{background:"linear-gradient(180deg, rgba(15,23,42,0) 0%, rgba(15,23,42,0.8) 50%, rgba(2,6,23,0.95) 100%)",clipPath:"polygon(0 70%, 10% 55%, 20% 68%, 35% 40%, 45% 60%, 60% 35%, 72% 55%, 85% 42%, 100% 65%, 100% 100%, 0 100%)",animation:"mountainDrift 14s ease-in-out infinite"}}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-20 opacity-55 pointer-events-none",style:{background:"linear-gradient(180deg, rgba(30,41,59,0) 0%, rgba(30,41,59,0.7) 50%, rgba(2,6,23,0.95) 100%)",clipPath:"polygon(0 80%, 12% 60%, 26% 78%, 40% 55%, 55% 72%, 70% 50%, 82% 70%, 100% 58%, 100% 100%, 0 100%)",animation:"mountainDrift 10s ease-in-out infinite reverse"}}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-40 opacity-60 pointer-events-none",style:{background:"linear-gradient(0deg, rgba(34,211,238,0.35), rgba(34,211,238,0))"}})]}),v=l.jsxs("div",{"aria-hidden":"true",className:"contents",children:[i.map((w,S)=>l.jsx("div",{className:"absolute bg-white/80",style:{width:`${w.size}px`,height:`${w.size}px`,top:w.top,left:w.left,opacity:w.opacity,boxShadow:"1px 1px 0 rgba(0,0,0,0.3)",animation:`starTwinkle ${w.duration}s steps(4) ${w.delay}s infinite`}},`star-${S}`)),o.map((w,S)=>l.jsx("div",{className:"absolute",style:{width:`${w.size}px`,height:`${w.size}px`,top:w.top,left:w.left,background:w.color,opacity:.6,boxShadow:"1px 1px 0 rgba(0,0,0,0.35)",animation:`glitchBlock ${w.duration}s steps(2) ${w.delay}s infinite`}},`glitch-${S}`)),c.map((w,S)=>l.jsx("div",{className:"absolute",style:{width:"2px",height:"2px",top:w.top,left:w.left,background:Qn.sky,boxShadow:`6px 0 ${Qn.sky}, 0 6px ${Qn.sky}, 6px 6px ${Qn.sky}`,opacity:.5,animation:`clusterDrift ${w.duration}s steps(4) ${w.delay}s infinite`}},`cluster-${S}`)),u.map((w,S)=>l.jsx("div",{className:"absolute bg-white",style:{width:`${w.size}px`,height:`${w.size}px`,top:w.top,left:w.left,opacity:w.opacity,animation:`pixelFloat ${w.duration}s steps(4) ${w.delay}s infinite`}},`float-${S}`)),d.map((w,S)=>l.jsx("div",{className:"absolute bg-[#c7d2fe]",style:{width:"2px",height:`${w.height}px`,top:w.top,left:w.left,opacity:w.opacity,animation:`pixelFall ${w.duration}s steps(6) ${w.delay}s infinite`}},`fall-${S}`)),f.map((w,S)=>l.jsx("div",{className:"absolute bg-[#a7f3d0]",style:{width:"2px",height:"2px",top:w.top,left:w.left,boxShadow:"0 0 8px rgba(167,243,208,0.8)",animation:`sparklePop ${w.duration}s steps(3) ${w.delay}s infinite`}},`spark-${S}`)),h.map((w,S)=>l.jsx("div",{className:"absolute",style:{width:"2px",height:"2px",bottom:w.bottom,left:w.left,background:Qn.mint,opacity:w.opacity,animation:`dustRise ${w.duration}s steps(3) ${w.delay}s infinite`}},`dust-${S}`))]}),x=l.jsxs("div",{"aria-hidden":"true",className:"contents",children:[l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsxs("div",{className:"relative w-16 h-16 opacity-40",style:{animation:"hudBlink 2.4s steps(2) infinite"},children:[l.jsx("div",{className:"absolute left-1/2 top-0 -translate-x-1/2 w-[2px] h-4 bg-[#7dd3fc]"}),l.jsx("div",{className:"absolute left-1/2 bottom-0 -translate-x-1/2 w-[2px] h-4 bg-[#7dd3fc]"}),l.jsx("div",{className:"absolute top-1/2 left-0 -translate-y-1/2 h-[2px] w-4 bg-[#7dd3fc]"}),l.jsx("div",{className:"absolute top-1/2 right-0 -translate-y-1/2 h-[2px] w-4 bg-[#7dd3fc]"})]})}),l.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[l.jsx("div",{className:"absolute w-[320px] h-[320px] rounded-full border border-[#93c5fd]/20",style:{animation:"ringSpin 18s linear infinite"}}),l.jsx("div",{className:"absolute w-[240px] h-[240px] rounded-full border border-[#f472b6]/20",style:{animation:"ringSpin 12s linear infinite reverse"}}),l.jsx("div",{className:"absolute w-[320px] h-[320px]",style:{animation:"ringSpin 10s linear infinite"},children:l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-2 h-2 bg-[#22d3ee] shadow-[1px_1px_0_rgba(0,0,0,0.4)]"})})]}),l.jsx("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 flex flex-col gap-2 pointer-events-none opacity-50",children:Array.from({length:6}).map((w,S)=>l.jsx("div",{className:"w-6 h-[3px] bg-[#7dd3fc]",style:{animation:`hudBlink ${2+S*.2}s steps(2) ${S*.2}s infinite`}},`meter-l-${S}`))}),l.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 flex flex-col gap-2 pointer-events-none opacity-50",children:Array.from({length:6}).map((w,S)=>l.jsx("div",{className:"w-6 h-[3px] bg-[#f472b6]",style:{animation:`hudBlink ${2.2+S*.2}s steps(2) ${S*.2}s infinite`}},`meter-r-${S}`))}),l.jsx("div",{className:"absolute top-8 left-8 text-[10px] text-white/70 pointer-events-none",style:{fontFamily:"'Press Start 2P', 'Courier New', monospace"},children:"SYS: PIXEL"}),l.jsx("div",{className:"absolute top-8 right-8 text-[10px] text-white/70 pointer-events-none",style:{fontFamily:"'Press Start 2P', 'Courier New', monospace"},children:"MODE: DREAM"})]}),b=l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative z-10 text-center space-y-4",style:{animation:"titleFloat 3s ease-in-out infinite"},children:[l.jsxs("div",{className:"relative inline-block",children:[l.jsx("h1",{className:"text-6xl md:text-9xl font-black text-transparent bg-clip-text bg-gradient-to-b from-[#22d3ee] to-[#3b82f6]",style:{fontFamily:"'Press Start 2P', 'Courier New', monospace",filter:"drop-shadow(4px 4px 0 #d946ef)",animation:"glitchText 2s infinite"},children:"PIXEL"}),l.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[#22d3ee] mix-blend-overlay opacity-40",style:{animation:"glitchSlice 1.6s steps(2) infinite"}}),l.jsx("div",{className:"absolute -inset-1 border border-[#22d3ee]/30",style:{animation:"titleBorder 2.4s ease-in-out infinite"}})]}),l.jsx("div",{className:"block"}),l.jsxs("div",{className:"relative inline-block",children:[l.jsx("h1",{className:"text-6xl md:text-9xl font-black text-transparent bg-clip-text bg-gradient-to-b from-[#f472b6] to-[#a855f7]",style:{fontFamily:"'Press Start 2P', 'Courier New', monospace",filter:"drop-shadow(4px 4px 0 #06b6d4)",animation:"glitchText 2s infinite reverse"},children:"TIME"}),l.jsx("div",{className:"absolute inset-0 bg-[#f472b6] mix-blend-screen opacity-20",style:{animation:"glitchSlice 2s steps(2) 0.2s infinite"}}),l.jsx("div",{className:"absolute -inset-1 border border-[#f472b6]/25",style:{animation:"titleBorder 2.8s ease-in-out infinite"}})]})]}),l.jsxs("div",{className:"mt-12 w-72 h-7 border-4 border-white p-1 bg-black/50 relative",style:{animation:"loadingPulse 2.8s steps(2) infinite"},children:[l.jsx("div",{className:"h-full bg-[#5fffd2]",style:{width:"0%",animation:"loadBar 2.8s steps(14) forwards",boxShadow:"0 0 10px #5fffd2"}}),l.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundImage:"repeating-linear-gradient(90deg, rgba(0,0,0,0.25) 0 6px, transparent 6px 12px)"}}),l.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 text-[10px] text-white/70 pointer-events-none",style:{fontFamily:"'Press Start 2P', 'Courier New', monospace",animation:"crtFlicker 2s steps(2) infinite"},children:"LOADING..."})]})]});return ea.createPortal(l.jsxs("div",{className:`fixed inset-0 z-[9999] bg-[#1a0b2e] flex flex-col items-center justify-center transition-opacity duration-1000 ${s?"opacity-0 pointer-events-none":"opacity-100"}`,style:{imageRendering:"pixelated"},children:[m,y,g,v,x,b,l.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 opacity-10 pointer-events-none mix-blend-overlay",style:{backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,0.04) 0 1px, transparent 1px 2px), repeating-linear-gradient(90deg, rgba(255,255,255,0.03) 0 1px, transparent 1px 3px)",animation:"noiseJitter 1.2s steps(2) infinite"}})]}),document.body)}function AL(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)}function DL(e){let t=0;return[...e].sort((r,s)=>r.id.localeCompare(s.id)).forEach(r=>{var o,c;const s=((o=r.entities)==null?void 0:o.length)??0,a=((c=r.environments)==null?void 0:c.length)??0,i=`${r.id}|${r.world}|${r.date}|${r.threatLevel}|${s}|${a}`;t^=AL(i)}),`${t}`}const Rf="pixel-intro-seen";function eu(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function OL(e){if(e.length===0)return 0;const t=new Set(e.map(s=>eu(new Date(s.date))));let n=0,r=new Date;for(r.setHours(0,0,0,0);t.has(eu(r));)n+=1,r.setDate(r.getDate()-1);if(n===0&&(r=new Date,r.setDate(r.getDate()-1),r.setHours(0,0,0,0),t.has(eu(r))))for(n=1,r.setDate(r.getDate()-1);t.has(eu(r));)n+=1,r.setDate(r.getDate()-1);return n}function IL({dreams:e=[]}){const t=p.useRef(null),n=p.useRef(),r=I8(),s=p.useRef(e.length),a=p.useRef(null),{recordEncounter:i,getStats:o}=Bk(),c=mc(),{shouldRenderFrame:u}=$8({targetFPS:c?15:60,enableAdaptive:!0,minFPS:15,maxFPS:60}),d=p.useRef([]),h=p.useRef([]),f=p.useRef([]),m=p.useRef([]),y=p.useRef(0),g=p.useRef({x:0,y:0,phase:0}),v=p.useRef(vd()),x=p.useRef({x:0,y:0}),[b,w]=p.useState(!1),[S,k]=p.useState(null),j=p.useMemo(()=>OL(e),[e]),C=p.useCallback(()=>{w(!1)},[]);p.useCallback(()=>{sessionStorage.removeItem(Rf),w(!0)},[]);const E=p.useCallback(async()=>{const{phenomenon:J,isNewEncounter:ue}=Kl();k(J),yd(J),J.id==="pixelDreamMoon"&&w(!0),ue&&i(J);const je=J.rarity==="mythic"?" MYTHIC  ":"";an.success(` ${je}${J.name}`,{description:J.subtitle,duration:J.rarity==="mythic"?5e3:3e3}),await new Promise(gt=>setTimeout(gt,800))},[i]),{containerRef:M,pullDistance:N,isRefreshing:T,isPulling:A,progress:L,isReady:D}=EL({onRefresh:E,pullThreshold:100}),{moonFlashesRef:H,sparklesRef:R,initializeParticleEffects:F,drawBackgroundEffects:_,drawAtmosphericEffects:P,drawShatteredEffects:O,drawSpecialEffects:I,drawOrbitingEffects:U,drawWeatherEffects:B,drawVoidEffects:Z,drawEchoMoonsEffect:K,drawFirefliesEffect:ee}=jL(),{overlayType:V,currentMoonPhase:xe,handleTouchStart:De,handleTouchMove:ke,handleTouchEnd:ve,handleCanvasClick:we,handleCloseOverlay:pe}=CL({canvasRef:t,phenomenon:S,moonPositionRef:g,parallaxOffsetRef:r,moonFlashesRef:H,sparklesRef:R});return p.useEffect(()=>{const{phenomenon:J,isNewEncounter:ue}=Kl();k(J),yd(J),J.id==="pixelDreamMoon"&&(sessionStorage.getItem(Rf)||(w(!0),sessionStorage.setItem(Rf,"1"))),ue&&i(J)},[i]),p.useEffect(()=>{if(!S)return;const J=t.current;if(!J)return;const ue=J.getContext("2d");if(!ue)return;const je={width:0,height:0,dpr:1},gt=()=>{const Pe=J.getBoundingClientRect(),bt=window.devicePixelRatio||1;J.width=Pe.width*bt,J.height=Pe.height*bt,ue.setTransform(1,0,0,1,0,0),ue.scale(bt,bt),je.width=Pe.width,je.height=Pe.height,je.dpr=bt,d.current=Q$(Pe.width,Pe.height,S,e.length);const ct=o(),en=e.length>0?`${S.id}|${DL(e)}`:`${S.id}|${ct.totalEncounters}|${ct.totalDiscovered}|${ct.mythicCount}`,yr=Math.min(.5,e.length/200);h.current=J$(d.current,en,Math.min(1,S.starDensity+yr)),f.current=aL(Pe.width,Pe.height,S),m.current=dL(Pe.width,Pe.height),g.current={x:Pe.width*.7,y:Pe.height*.25,phase:0},v.current=vd();const ut=g.current,At=ql(S);F(S,ut,At,Pe.width,Pe.height)};gt();const Rt=()=>{x.current={x:window.scrollX,y:window.scrollY}};window.addEventListener("scroll",Rt,{passive:!0});const _n=Pe=>{if(!u(Pe)){n.current=requestAnimationFrame(_n);return}const bt=je.width,ct=je.height;ue.clearRect(0,0,bt,ct);const en={ctx:ue,width:bt,height:ct,phenomenon:S,parallaxOffset:c?{x:0,y:0}:r.current};K$({...en,time:Pe}),c||(_(ue,S,bt,ct,x.current),P(ue,S,bt));const yr=Math.min(.8,j/14),ut=1+yr*.5,At=1+yr*.7,$r=c?300:1600,Ka=a.current?Math.min(1,(Pe-a.current)/$r):1;Z$({...en,stars:d.current,constellations:h.current,timeMs:Pe,constellationScale:ut,constellationIntensity:At,constellationReveal:Ka}),c||(K(ue,S,g.current),ee(ue,S,bt,ct));const z=c?.001:.005,ge={...g.current};if(c&&(ge.phase+=z),g.current=wL({...en,moonPosition:c?ge:g.current,moonPhase:v.current}),!c){const Y=ql(S);O(ue,S,g.current),I(ue,S,g.current,Y,bt,ct),U(ue,S,g.current)}if(iL({...en,clouds:f.current}),!c){B(ue,S,bt,ct),Z(ue,S,g.current);const Y=mL({...en,shootingStars:m.current,timer:y.current});m.current=Y.shootingStars,y.current=Y.timer}n.current=requestAnimationFrame(_n)};n.current=requestAnimationFrame(_n);let hn=null;return typeof ResizeObserver<"u"?(hn=new ResizeObserver(()=>{gt()}),hn.observe(J)):window.addEventListener("resize",gt),()=>{n.current&&cancelAnimationFrame(n.current),hn==null||hn.disconnect(),window.removeEventListener("resize",gt),window.removeEventListener("scroll",Rt)}},[S,c,u,F,_,P,O,I,U,B,Z,K,ee,r,o,j,e]),p.useEffect(()=>{e.length!==s.current&&(a.current=performance.now(),s.current=e.length)},[e.length]),l.jsxs("div",{ref:M,className:"relative w-full h-[60vh] min-h-[400px] overflow-hidden",style:{transform:`translateY(${T?20:N*.3}px)`,transition:A?"none":"transform 0.3s ease-out"},children:[l.jsx(PL,{pullDistance:N,progress:L,isRefreshing:T,isReady:D,isPulling:A}),l.jsx("canvas",{ref:t,onClick:we,onTouchStart:De,onTouchMove:ke,onTouchEnd:ve,className:"absolute inset-0 w-full h-full cursor-pointer",style:{width:"100%",height:"100%",touchAction:"pan-y"}}),l.jsx(NL,{phenomenon:S}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-background via-background/50 to-transparent pointer-events-none"}),V&&l.jsx(ML,{type:V,moonPhase:xe,phenomenon:S,onClose:pe}),l.jsx(RL,{show:b,onComplete:C})]})}function me({className:e,...t}){return l.jsx("div",{className:q("animate-pulse rounded-md bg-muted",e),...t})}function Vk({compact:e}){return e?l.jsxs("div",{className:"card-minimal flex items-center gap-3",children:[l.jsx(me,{className:"w-10 h-10 rounded-full shrink-0"}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsx(me,{className:"h-4 w-24"}),l.jsx(me,{className:"h-3 w-32"})]}),l.jsx(me,{className:"h-6 w-6 rounded-full"})]}):l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(me,{className:"h-4 w-20"}),l.jsx(me,{className:"h-5 w-5 rounded-full"})]}),l.jsx(me,{className:"h-4 w-16"})]}),l.jsx(me,{className:"h-5 w-32"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(me,{className:"h-5 w-16 rounded-full"}),l.jsx(me,{className:"h-5 w-20 rounded-full"}),l.jsx(me,{className:"h-5 w-14 rounded-full"})]}),l.jsx(me,{className:"h-12 w-full"})]})}function $L(){return l.jsxs("div",{className:"space-y-8 py-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(me,{className:"h-8 w-32"}),l.jsx(me,{className:"h-4 w-48"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(me,{className:"h-[120px] w-full rounded-md"}),l.jsx(me,{className:"h-10 w-full rounded-md"})]}),l.jsx("div",{className:"grid grid-cols-1 gap-3",children:[...Array(3)].map((e,t)=>l.jsx(me,{className:"h-12 w-full rounded-md"},t))}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(me,{className:"h-5 w-24"}),l.jsx(me,{className:"h-4 w-16"})]}),l.jsx("div",{className:"space-y-2",children:[...Array(3)].map((e,t)=>l.jsx(Vk,{compact:!0},t))})]})]})}function LL({onRefresh:e,threshold:t=80,resistance:n=2.5}){const r=p.useRef(null),[s,a]=p.useState(0),[i,o]=p.useState(!1),[c,u]=p.useState(!1),d=p.useRef(0),h=p.useRef(0),f=p.useCallback(g=>{i||(d.current=g.touches[0].clientY)},[i]),m=p.useCallback(g=>{if(i)return;const v=r.current;if(!v)return;h.current=g.touches[0].clientY;const x=h.current-d.current,b=v.scrollTop<=0,w=x>0;if(b&&w){const S=x/n;S>5&&(g.preventDefault(),u(!0),a(S))}else c&&!w&&(u(!1),a(0))},[i,n,c]),y=p.useCallback(async()=>{if(!(!c||i)){if(u(!1),s>=t){o(!0),a(t);try{await e()}catch(g){console.error("Refresh failed:",g)}finally{o(!1),a(0)}}else a(0);d.current=0,h.current=0}},[c,i,s,t,e]);return p.useEffect(()=>{const g=r.current;if(g)return g.addEventListener("touchstart",f,{passive:!0}),g.addEventListener("touchmove",m,{passive:!1}),g.addEventListener("touchend",y,{passive:!0}),()=>{g.removeEventListener("touchstart",f),g.removeEventListener("touchmove",m),g.removeEventListener("touchend",y)}},[f,m,y]),{containerRef:r,pullDistance:s,isRefreshing:i,isPulling:c}}function Uk({children:e,onRefresh:t,className:n}){const{containerRef:r,pullDistance:s,isRefreshing:a,isPulling:i}=LL({onRefresh:t,threshold:80}),o=Math.min(s/80,1),c=s>10||a;return l.jsxs("div",{ref:r,className:q("relative",n),style:{overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:[l.jsx("div",{className:q("absolute left-0 right-0 flex justify-center transition-all duration-200 z-10",c?"opacity-100":"opacity-0"),style:{top:-40+s,transform:`translateY(${Math.min(s,60)}px)`},children:l.jsx("div",{className:q("flex items-center justify-center w-10 h-10 rounded-full","bg-primary/10 backdrop-blur-sm border border-primary/20","shadow-lg"),children:a?l.jsx(uc,{className:"w-5 h-5 text-primary animate-spin"}):l.jsx(z_,{className:q("w-5 h-5 text-primary transition-transform duration-200",o>=1&&"rotate-180"),style:{transform:`rotate(${o*180}deg)`,opacity:o}})})}),l.jsx("div",{style:{transform:`translateY(${a?60:s*.5}px)`,transition:i?"none":"transform 0.2s ease-out"},children:e})]})}const Mp=(e,t)=>t.some(n=>e instanceof n);let fw,mw;function FL(){return fw||(fw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zL(){return mw||(mw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Np=new WeakMap,Af=new WeakMap,yh=new WeakMap;function BL(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",a),e.removeEventListener("error",i)},a=()=>{n(bd(e.result)),s()},i=()=>{r(e.error),s()};e.addEventListener("success",a),e.addEventListener("error",i)});return yh.set(t,e),t}function VL(e){if(Np.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=()=>{n(),s()},i=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)});Np.set(e,t)}let Pp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Np.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bd(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Wk(e){Pp=e(Pp)}function UL(e){return zL().includes(e)?function(...t){return e.apply(_p(this),t),bd(this.request)}:function(...t){return bd(e.apply(_p(this),t))}}function WL(e){return typeof e=="function"?UL(e):(e instanceof IDBTransaction&&VL(e),Mp(e,FL())?new Proxy(e,Pp):e)}function bd(e){if(e instanceof IDBRequest)return BL(e);if(Af.has(e))return Af.get(e);const t=WL(e);return t!==e&&(Af.set(e,t),yh.set(t,e)),t}const _p=e=>yh.get(e),HL=["get","getKey","getAll","getAllKeys","count"],GL=["put","add","delete","clear"],Df=new Map;function pw(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Df.get(t))return Df.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=GL.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||HL.includes(n)))return;const a=async function(i,...o){const c=this.transaction(i,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[n](...o),s&&c.done]))[0]};return Df.set(t,a),a}Wk(e=>({...e,get:(t,n,r)=>pw(t,n)||e.get(t,n,r),has:(t,n)=>!!pw(t,n)||e.has(t,n)}));const KL=["continue","continuePrimaryKey","advance"],gw={},Rp=new WeakMap,Hk=new WeakMap,qL={get(e,t){if(!KL.includes(t))return e[t];let n=gw[t];return n||(n=gw[t]=function(...r){Rp.set(this,Hk.get(this)[t](...r))}),n}};async function*YL(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,qL);for(Hk.set(n,t),yh.set(n,_p(t));t;)yield n,t=await(Rp.get(n)||t.continue()),Rp.delete(n)}function yw(e,t){return t===Symbol.asyncIterator&&Mp(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&Mp(e,[IDBIndex,IDBObjectStore])}Wk(e=>({...e,get(t,n,r){return yw(t,n)?YL:e.get(t,n,r)},has(t,n){return yw(t,n)||e.has(t,n)}}));function XL(){return navigator.onLine}function QL(e){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t),window.addEventListener("offline",n),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}function JL(){const[e,t]=p.useState(XL());return p.useEffect(()=>QL(t),[]),e}function Gk(){const e=JL(),[t,n]=p.useState(!1),[r,s]=p.useState(!1);return p.useEffect(()=>{if(!e)s(!0);else if(r){n(!0);const a=setTimeout(()=>{n(!1),s(!1)},3e3);return()=>clearTimeout(a)}},[e,r]),e&&!t?null:l.jsx("div",{className:q("fixed top-16 left-1/2 -translate-x-1/2 z-50","flex items-center gap-2 px-4 py-2 rounded-full","text-sm font-medium shadow-lg","animate-in slide-in-from-top duration-300",e?"bg-green-500/90 text-white":"bg-yellow-500/90 text-yellow-950"),children:e?l.jsxs(l.Fragment,{children:[l.jsx(aR,{className:"w-4 h-4"}),l.jsx("span",{children:""})]}):l.jsxs(l.Fragment,{children:[l.jsx(sR,{className:"w-4 h-4"}),l.jsx("span",{children:""})]})})}function Fi({children:e,delay:t=0,duration:n=400,className:r=""}){const[s,a]=p.useState(!1);return p.useEffect(()=>{const i=setTimeout(()=>{a(!0)},t);return()=>clearTimeout(i)},[t]),l.jsx("div",{className:`transition-all ${r}`,style:{opacity:s?1:0,transform:s?"translateY(0)":"translateY(20px)",transitionDuration:`${n}ms`,transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e})}function ZL(){return l.jsx(Fi,{delay:0,duration:500,children:l.jsxs("div",{className:"space-y-2",children:[l.jsx("h1",{className:"text-2xl",children:""}),l.jsx("p",{className:"text-muted-foreground",children:""})]})})}const e6=nh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ne=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>{const i=r?qP:"button";return l.jsx(i,{className:q(e6({variant:t,size:n,className:e})),ref:a,...s})});Ne.displayName="Button";const yc=p.forwardRef(({className:e,...t},n)=>l.jsx("textarea",{className:q("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));yc.displayName="Textarea";const Hn=p.forwardRef(({className:e,type:t,...n},r)=>l.jsx("input",{type:t,className:q("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Hn.displayName="Input";const t6=nh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Re({className:e,variant:t,...n}){return l.jsx("div",{className:q(t6({variant:t}),e),...n})}function n6({suggestions:e,editing:t,analyzing:n,onToggleEdit:r,onConfirm:s,onCancel:a,onUpdate:i}){var o,c;return l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ut,{className:"w-4 h-4 text-primary"}),l.jsx("span",{className:"text-sm font-medium",children:"AI "})]}),l.jsx(Ne,{variant:"ghost",size:"sm",onClick:r,children:t?l.jsx(od,{className:"w-4 h-4"}):l.jsx(lg,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"space-y-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:": "}),t?l.jsx(Hn,{value:e.world,onChange:u=>i("world",u.target.value),className:"mt-1 h-8"}):l.jsx(Re,{variant:"secondary",children:e.world})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:": "}),l.jsxs(Re,{variant:e.threatLevel>=3?"destructive":"secondary",children:["Level ",e.threatLevel]})]}),((o=e.entities)==null?void 0:o.length)>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Entities: "}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.entities.map((u,d)=>l.jsx(Re,{variant:"outline",children:u},d))})]}),((c=e.environments)==null?void 0:c.length)>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-muted-foreground",children:"Environments: "}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.environments.map((u,d)=>l.jsx(Re,{variant:"outline",children:u},d))})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ne,{onClick:s,disabled:n,className:"flex-1 gap-2",children:n?l.jsxs(l.Fragment,{children:[l.jsx(Al,{className:"w-4 h-4 animate-spin"}),"..."]}):l.jsxs(l.Fragment,{children:[l.jsx(od,{className:"w-4 h-4"}),""]})}),l.jsx(Ne,{variant:"outline",onClick:a,children:l.jsx(vo,{className:"w-4 h-4"})})]})]})}function r6({existingWorlds:e,existingEntities:t,onDreamSaved:n}){const[r,s]=p.useState(""),[a,i]=p.useState(!1),[o,c]=p.useState(null),[u,d]=p.useState(!1),[h,f]=p.useState(!1),m=async()=>{if(!r.trim()){an.error("");return}i(!0);try{const x=await C8(r,e,t,["fog","sea","mountain","city","tunnel","rain","night","sunset","forest","building"]);c(x),d(!0),an.success("! ")}catch(x){console.error("Error analyzing:",x),an.error("")}finally{i(!1)}},y=async()=>{if(o){i(!0);try{const x=new Date;if(await $k({date:x.toISOString().split("T")[0],wakeTime:x.toTimeString().slice(0,5),world:o.world||"Unknown",timeSystem:o.timeSystem||"unknown",environments:o.environments||[],entities:o.entities||[],threatLevel:o.threatLevel||0,safetyOverride:o.safetyOverride||"unknown",exit:o.exit||"unknown",notes:r})){an.success("! ",{description:`: ${o.world} | Threat: ${o.threatLevel}`}),s(""),c(null),d(!1),f(!1);const w=await Ha();n(w.slice(0,5))}else an.error("")}catch(x){console.error("Error saving:",x),an.error("")}finally{i(!1)}}},g=()=>{d(!1),c(null),f(!1)},v=(x,b)=>{c(w=>w?{...w,[x]:b}:null)};return l.jsx(Fi,{delay:100,duration:450,children:l.jsxs("div",{className:"space-y-3",children:[l.jsx(yc,{placeholder:"... ",value:r,onChange:x=>s(x.target.value),className:"min-h-[120px] resize-none",disabled:u}),u&&o&&l.jsx(n6,{suggestions:o,editing:h,analyzing:a,onToggleEdit:()=>f(!h),onConfirm:y,onCancel:g,onUpdate:v}),!u&&l.jsx(Ne,{onClick:m,disabled:a||!r.trim(),className:"w-full gap-2",children:a?l.jsxs(l.Fragment,{children:[l.jsx(Al,{className:"w-4 h-4 animate-spin"}),"..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Ut,{className:"w-4 h-4"}),""]})})]})})}function s6(){const e=[{to:"/logs/new",icon:d5,label:" ()"},{to:"/library",icon:ig,label:""},{to:"/logs",icon:og,label:""}];return l.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.map((t,n)=>l.jsx(Fi,{delay:200+n*80,duration:400,children:l.jsx(Ne,{asChild:!0,variant:"outline",className:"w-full justify-start gap-2 h-12",children:l.jsxs(dn,{to:t.to,children:[l.jsx(t.icon,{className:"w-5 h-5"}),l.jsx("span",{className:"flex-1 text-left",children:t.label})]})})},t.to))})}const vw={0:{border:"border-l-4 border-l-muted-foreground/30",bg:"bg-card",badge:"bg-muted text-muted-foreground"},1:{border:"border-l-4 border-l-emerald-500",bg:"bg-gradient-to-r from-emerald-500/5 to-transparent",badge:"bg-emerald-500/20 text-emerald-700 dark:text-emerald-400"},2:{border:"border-l-4 border-l-yellow-500",bg:"bg-gradient-to-r from-yellow-500/5 to-transparent",badge:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-400"},3:{border:"border-l-4 border-l-orange-500",bg:"bg-gradient-to-r from-orange-500/8 to-transparent",badge:"bg-orange-500/20 text-orange-700 dark:text-orange-400"},4:{border:"border-l-4 border-l-red-500",bg:"bg-gradient-to-r from-red-500/10 to-transparent",badge:"bg-red-500/20 text-red-700 dark:text-red-400"},5:{border:"border-l-4 border-l-rose-600",bg:"bg-gradient-to-r from-rose-600/15 to-transparent",badge:"bg-rose-600/25 text-rose-700 dark:text-rose-400 font-semibold"}},a6={0:"",1:"",2:"",3:"",4:"",5:""};function Kk({dream:e,compact:t,showEdit:n=!1}){const r=new Date(e.date).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric"}),s=vw[e.threatLevel]||vw[0];return l.jsxs("div",{className:"relative group",children:[l.jsxs(dn,{to:`/logs/${e.id}`,className:q("block rounded-lg p-4 transition-all duration-200","border border-border hover:border-primary/30","hover:shadow-md hover:-translate-y-0.5",s.border,s.bg),children:[l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:e.id}),l.jsxs("span",{className:q("inline-flex items-center justify-center gap-1 px-2 py-0.5 text-xs rounded-full",s.badge),children:[l.jsx("span",{className:"text-[10px]",children:a6[e.threatLevel]}),e.threatLevel]})]}),l.jsx("p",{className:"font-medium truncate",children:e.world}),!t&&e.notes&&l.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:e.notes})]}),l.jsxs("div",{className:"text-right shrink-0",children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:r}),l.jsx("p",{className:"text-xs text-muted-foreground",children:e.wakeTime})]})]}),!t&&e.environments.length>0&&l.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.environments.slice(0,4).map(a=>l.jsx("span",{className:"tag",children:a},a)),e.environments.length>4&&l.jsxs("span",{className:"tag",children:["+",e.environments.length-4]})]})]}),n&&l.jsx(dn,{to:`/logs/${e.id}`,className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:a=>a.stopPropagation(),children:l.jsx(Ne,{size:"icon",variant:"ghost",className:"h-7 w-7 bg-background/80 backdrop-blur-sm hover:bg-background",children:l.jsx(lg,{className:"w-3 h-3"})})})]})}function i6({dreams:e}){return e.length===0?l.jsx(Fi,{delay:500,duration:400,children:l.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[l.jsx("p",{children:""}),l.jsx(Ne,{asChild:!0,variant:"link",className:"mt-2",children:l.jsx(dn,{to:"/logs/new",children:""})})]})}):l.jsxs("div",{className:"space-y-3",children:[l.jsx(Fi,{delay:450,duration:400,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-lg font-medium",children:""}),l.jsx(dn,{to:"/logs",className:"text-sm text-primary hover:underline",children:""})]})}),l.jsx("div",{className:"space-y-2",children:e.map((t,n)=>l.jsx(Fi,{delay:500+n*80,duration:400,children:l.jsx(Kk,{dream:t,compact:!0})},t.id))})]})}function o6(){const[e,t]=p.useState([]),[n,r]=p.useState([]),[s,a]=p.useState(!0),[i,o]=p.useState([]),[c,u]=p.useState([]),d=p.useCallback(async()=>{try{const[f,m,y]=await Promise.all([Ha(),gc(),gh()]);t(f),r(f.slice(0,5)),o(m.map(g=>g.name)),u(y.map(g=>g.name))}catch(f){console.error("Error loading data:",f)}finally{a(!1)}},[]);p.useEffect(()=>{d()},[d]);const h=p.useCallback(async()=>{await d(),an.success("")},[d]);return l.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[l.jsx(Gk,{}),l.jsx(IL,{dreams:e}),l.jsx(Uk,{onRefresh:h,className:"flex-1",children:l.jsxs("div",{className:"space-y-8 py-4 pb-28 container-app",children:[l.jsx(ZL,{}),l.jsx(r6,{existingWorlds:i,existingEntities:c,onDreamSaved:r}),l.jsx(s6,{}),s?l.jsx($L,{}):l.jsx(i6,{dreams:n})]})}),l.jsx(fh,{})]})}function Yl(e,[t,n]){return Math.min(n,Math.max(t,e))}var l6=p.createContext(void 0);function vc(e){const t=p.useContext(l6);return e||t||"ltr"}var Of=0;function qk(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??xw()),document.body.insertAdjacentElement("beforeend",e[1]??xw()),Of++,()=>{Of===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Of--}},[])}function xw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var If="focusScope.autoFocusOnMount",$f="focusScope.autoFocusOnUnmount",ww={bubbles:!1,cancelable:!0},c6="FocusScope",_g=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[o,c]=p.useState(null),u=xt(s),d=xt(a),h=p.useRef(null),f=ye(t,g=>c(g)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let g=function(w){if(m.paused||!o)return;const S=w.target;o.contains(S)?h.current=S:ms(h.current,{select:!0})},v=function(w){if(m.paused||!o)return;const S=w.relatedTarget;S!==null&&(o.contains(S)||ms(h.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&ms(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const b=new MutationObserver(x);return o&&b.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),b.disconnect()}}},[r,o,m.paused]),p.useEffect(()=>{if(o){Sw.add(m);const g=document.activeElement;if(!o.contains(g)){const x=new CustomEvent(If,ww);o.addEventListener(If,u),o.dispatchEvent(x),x.defaultPrevented||(u6(p6(Yk(o)),{select:!0}),document.activeElement===g&&ms(o))}return()=>{o.removeEventListener(If,u),setTimeout(()=>{const x=new CustomEvent($f,ww);o.addEventListener($f,d),o.dispatchEvent(x),x.defaultPrevented||ms(g??document.body,{select:!0}),o.removeEventListener($f,d),Sw.remove(m)},0)}}},[o,u,d,m]);const y=p.useCallback(g=>{if(!n&&!r||m.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(v&&x){const b=g.currentTarget,[w,S]=d6(b);w&&S?!g.shiftKey&&x===S?(g.preventDefault(),n&&ms(w,{select:!0})):g.shiftKey&&x===w&&(g.preventDefault(),n&&ms(S,{select:!0})):x===b&&g.preventDefault()}},[n,r,m.paused]);return l.jsx(ne.div,{tabIndex:-1,...i,ref:f,onKeyDown:y})});_g.displayName=c6;function u6(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ms(r,{select:t}),document.activeElement!==n)return}function d6(e){const t=Yk(e),n=bw(t,e),r=bw(t.reverse(),e);return[n,r]}function Yk(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function bw(e,t){for(const n of e)if(!h6(n,{upTo:t}))return n}function h6(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function f6(e){return e instanceof HTMLInputElement&&"select"in e}function ms(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&f6(e)&&t&&e.select()}}var Sw=m6();function m6(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=kw(e,t),e.unshift(t)},remove(t){var n;e=kw(e,t),(n=e[0])==null||n.resume()}}}function kw(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function p6(e){return e.filter(t=>t.tagName!=="A")}function Rg(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var g6=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},ti=new WeakMap,tu=new WeakMap,nu={},Lf=0,Xk=function(e){return e&&(e.host||Xk(e.parentNode))},y6=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Xk(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},v6=function(e,t,n,r){var s=y6(t,Array.isArray(e)?e:[e]);nu[n]||(nu[n]=new WeakMap);var a=nu[n],i=[],o=new Set,c=new Set(s),u=function(h){!h||o.has(h)||(o.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(o.has(f))d(f);else try{var m=f.getAttribute(r),y=m!==null&&m!=="false",g=(ti.get(f)||0)+1,v=(a.get(f)||0)+1;ti.set(f,g),a.set(f,v),i.push(f),g===1&&y&&tu.set(f,!0),v===1&&f.setAttribute(n,"true"),y||f.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return d(t),o.clear(),Lf++,function(){i.forEach(function(h){var f=ti.get(h)-1,m=a.get(h)-1;ti.set(h,f),a.set(h,m),f||(tu.has(h)||h.removeAttribute(r),tu.delete(h)),m||h.removeAttribute(n)}),Lf--,Lf||(ti=new WeakMap,ti=new WeakMap,tu=new WeakMap,nu={})}},Qk=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=g6(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),v6(r,s,n,"aria-hidden")):function(){return null}},Ru="right-scroll-bar-position",Au="width-before-scroll-bar",x6="with-scroll-bars-hidden",w6="--removed-body-scroll-bar-size";function Ff(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function b6(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var S6=typeof window<"u"?p.useLayoutEffect:p.useEffect,jw=new WeakMap;function k6(e,t){var n=b6(null,function(r){return e.forEach(function(s){return Ff(s,r)})});return S6(function(){var r=jw.get(n);if(r){var s=new Set(r),a=new Set(e),i=n.current;s.forEach(function(o){a.has(o)||Ff(o,null)}),a.forEach(function(o){s.has(o)||Ff(o,i)})}jw.set(n,e)},[e]),n}function j6(e){return e}function C6(e,t){t===void 0&&(t=j6);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(o){return o!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(o){return a(o)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var o=n;n=[],o.forEach(a),i=n}var c=function(){var d=i;i=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return s}function E6(e){e===void 0&&(e={});var t=C6(null);return t.options=jr({async:!0,ssr:!1},e),t}var Jk=function(e){var t=e.sideCar,n=ko(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,jr({},n))};Jk.isSideCarExport=!0;function T6(e,t){return e.useMedium(t),Jk}var Zk=E6(),zf=function(){},vh=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:zf,onWheelCapture:zf,onTouchMoveCapture:zf}),s=r[0],a=r[1],i=e.forwardProps,o=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,m=e.noRelative,y=e.noIsolation,g=e.inert,v=e.allowPinchZoom,x=e.as,b=x===void 0?"div":x,w=e.gapMode,S=ko(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=f,j=k6([n,t]),C=jr(jr({},S),s);return p.createElement(p.Fragment,null,d&&p.createElement(k,{sideCar:Zk,removeScrollBar:u,shards:h,noRelative:m,noIsolation:y,inert:g,setCallbacks:a,allowPinchZoom:!!v,lockRef:n,gapMode:w}),i?p.cloneElement(p.Children.only(o),jr(jr({},C),{ref:j})):p.createElement(b,jr({},C,{className:c,ref:j}),o))});vh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vh.classNames={fullWidth:Au,zeroRight:Ru};var M6=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function N6(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=M6();return t&&e.setAttribute("nonce",t),e}function P6(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function _6(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var R6=function(){var e=0,t=null;return{add:function(n){e==0&&(t=N6())&&(P6(t,n),_6(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},A6=function(){var e=R6();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},ej=function(){var e=A6(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},D6={left:0,top:0,right:0,gap:0},Bf=function(e){return parseInt(e||"",10)||0},O6=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Bf(n),Bf(r),Bf(s)]},I6=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return D6;var t=O6(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},$6=ej(),zi="data-scroll-locked",L6=function(e,t,n,r){var s=e.left,a=e.top,i=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(x6,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(zi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ru,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Au,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Ru," .").concat(Ru,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Au," .").concat(Au,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(zi,`] {
    `).concat(w6,": ").concat(o,`px;
  }
`)},Cw=function(){var e=parseInt(document.body.getAttribute(zi)||"0",10);return isFinite(e)?e:0},F6=function(){p.useEffect(function(){return document.body.setAttribute(zi,(Cw()+1).toString()),function(){var e=Cw()-1;e<=0?document.body.removeAttribute(zi):document.body.setAttribute(zi,e.toString())}},[])},z6=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;F6();var a=p.useMemo(function(){return I6(s)},[s]);return p.createElement($6,{styles:L6(a,!t,s,n?"":"!important")})},Ap=!1;if(typeof window<"u")try{var ru=Object.defineProperty({},"passive",{get:function(){return Ap=!0,!0}});window.addEventListener("test",ru,ru),window.removeEventListener("test",ru,ru)}catch{Ap=!1}var ni=Ap?{passive:!1}:!1,B6=function(e){return e.tagName==="TEXTAREA"},tj=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!B6(e)&&n[t]==="visible")},V6=function(e){return tj(e,"overflowY")},U6=function(e){return tj(e,"overflowX")},Ew=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=nj(e,r);if(s){var a=rj(e,r),i=a[1],o=a[2];if(i>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},W6=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},H6=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},nj=function(e,t){return e==="v"?V6(t):U6(t)},rj=function(e,t){return e==="v"?W6(t):H6(t)},G6=function(e,t){return e==="h"&&t==="rtl"?-1:1},K6=function(e,t,n,r,s){var a=G6(e,window.getComputedStyle(t).direction),i=a*r,o=n.target,c=t.contains(o),u=!1,d=i>0,h=0,f=0;do{if(!o)break;var m=rj(e,o),y=m[0],g=m[1],v=m[2],x=g-v-a*y;(y||x)&&nj(e,o)&&(h+=x,f+=y);var b=o.parentNode;o=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&o!==document.body||c&&(t.contains(o)||t===o));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(u=!0),u},su=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Tw=function(e){return[e.deltaX,e.deltaY]},Mw=function(e){return e&&"current"in e?e.current:e},q6=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Y6=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},X6=0,ri=[];function Q6(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(X6++)[0],a=p.useState(ej)[0],i=p.useRef(e);p.useEffect(function(){i.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=VD([e.lockRef.current],(e.shards||[]).map(Mw),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var o=p.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var x=su(g),b=n.current,w="deltaX"in g?g.deltaX:b[0]-x[0],S="deltaY"in g?g.deltaY:b[1]-x[1],k,j=g.target,C=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in g&&C==="h"&&j.type==="range")return!1;var E=Ew(C,j);if(!E)return!0;if(E?k=C:(k=C==="v"?"h":"v",E=Ew(C,j)),!E)return!1;if(!r.current&&"changedTouches"in g&&(w||S)&&(r.current=k),!k)return!0;var M=r.current||k;return K6(M,v,g,M==="h"?w:S)},[]),c=p.useCallback(function(g){var v=g;if(!(!ri.length||ri[ri.length-1]!==a)){var x="deltaY"in v?Tw(v):su(v),b=t.current.filter(function(k){return k.name===v.type&&(k.target===v.target||v.target===k.shadowParent)&&q6(k.delta,x)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var w=(i.current.shards||[]).map(Mw).filter(Boolean).filter(function(k){return k.contains(v.target)}),S=w.length>0?o(v,w[0]):!i.current.noIsolation;S&&v.cancelable&&v.preventDefault()}}},[]),u=p.useCallback(function(g,v,x,b){var w={name:g,delta:v,target:x,should:b,shadowParent:J6(x)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(S){return S!==w})},1)},[]),d=p.useCallback(function(g){n.current=su(g),r.current=void 0},[]),h=p.useCallback(function(g){u(g.type,Tw(g),g.target,o(g,e.lockRef.current))},[]),f=p.useCallback(function(g){u(g.type,su(g),g.target,o(g,e.lockRef.current))},[]);p.useEffect(function(){return ri.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,ni),document.addEventListener("touchmove",c,ni),document.addEventListener("touchstart",d,ni),function(){ri=ri.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,ni),document.removeEventListener("touchmove",c,ni),document.removeEventListener("touchstart",d,ni)}},[]);var m=e.removeScrollBar,y=e.inert;return p.createElement(p.Fragment,null,y?p.createElement(a,{styles:Y6(s)}):null,m?p.createElement(z6,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function J6(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Z6=T6(Zk,Q6);var Ag=p.forwardRef(function(e,t){return p.createElement(vh,jr({},e,{ref:t,sideCar:Z6}))});Ag.classNames=vh.classNames;var eF=[" ","Enter","ArrowUp","ArrowDown"],tF=[" ","Enter"],La="Select",[xh,wh,nF]=Jd(La),[jo]=Gn(La,[nF,oh]),bh=oh(),[rF,na]=jo(La),[sF,aF]=jo(La),sj=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:a,value:i,defaultValue:o,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:y}=e,g=bh(t),[v,x]=p.useState(null),[b,w]=p.useState(null),[S,k]=p.useState(!1),j=vc(u),[C,E]=Ws({prop:r,defaultProp:s??!1,onChange:a,caller:La}),[M,N]=Ws({prop:i,defaultProp:o,onChange:c,caller:La}),T=p.useRef(null),A=v?y||!!v.closest("form"):!0,[L,D]=p.useState(new Set),H=Array.from(L).map(R=>R.props.value).join(";");return l.jsx(B3,{...g,children:l.jsxs(rF,{required:m,scope:t,trigger:v,onTriggerChange:x,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:k,contentId:Fs(),value:M,onValueChange:N,open:C,onOpenChange:E,dir:j,triggerPointerDownPosRef:T,disabled:f,children:[l.jsx(xh.Provider,{scope:t,children:l.jsx(sF,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(R=>{D(F=>new Set(F).add(R))},[]),onNativeOptionRemove:p.useCallback(R=>{D(F=>{const _=new Set(F);return _.delete(R),_})},[]),children:n})}),A?l.jsxs(Mj,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:M,onChange:R=>N(R.target.value),disabled:f,form:y,children:[M===void 0?l.jsx("option",{value:""}):null,Array.from(L)]},H):null]})})};sj.displayName=La;var aj="SelectTrigger",ij=p.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,a=bh(n),i=na(aj,n),o=i.disabled||r,c=ye(t,i.onTriggerChange),u=wh(n),d=p.useRef("touch"),[h,f,m]=Pj(g=>{const v=u().filter(w=>!w.disabled),x=v.find(w=>w.value===i.value),b=_j(v,g,x);b!==void 0&&i.onValueChange(b.value)}),y=g=>{o||(i.onOpenChange(!0),m()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return l.jsx(W5,{asChild:!0,...a,children:l.jsx(ne.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Nj(i.value)?"":void 0,...s,ref:c,onClick:Q(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&y(g)}),onPointerDown:Q(s.onPointerDown,g=>{d.current=g.pointerType;const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:Q(s.onKeyDown,g=>{const v=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(v&&g.key===" ")&&eF.includes(g.key)&&(y(),g.preventDefault())})})})});ij.displayName=aj;var oj="SelectValue",lj=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:i="",...o}=e,c=na(oj,n),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=ye(t,c.onValueNodeChange);return jt(()=>{u(d)},[u,d]),l.jsx(ne.span,{...o,ref:h,style:{pointerEvents:"none"},children:Nj(c.value)?l.jsx(l.Fragment,{children:i}):a})});lj.displayName=oj;var iF="SelectIcon",cj=p.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return l.jsx(ne.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});cj.displayName=iF;var oF="SelectPortal",uj=e=>l.jsx(Zd,{asChild:!0,...e});uj.displayName=oF;var Fa="SelectContent",dj=p.forwardRef((e,t)=>{const n=na(Fa,e.__scopeSelect),[r,s]=p.useState();if(jt(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?ea.createPortal(l.jsx(hj,{scope:e.__scopeSelect,children:l.jsx(xh.Slot,{scope:e.__scopeSelect,children:l.jsx("div",{children:e.children})})}),a):null}return l.jsx(fj,{...e,ref:t})});dj.displayName=Fa;var er=10,[hj,ra]=jo(Fa),lF="SelectContentImpl",cF=ao("SelectContent.RemoveScroll"),fj=p.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:i,side:o,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:v,...x}=e,b=na(Fa,n),[w,S]=p.useState(null),[k,j]=p.useState(null),C=ye(t,V=>S(V)),[E,M]=p.useState(null),[N,T]=p.useState(null),A=wh(n),[L,D]=p.useState(!1),H=p.useRef(!1);p.useEffect(()=>{if(w)return Qk(w)},[w]),qk();const R=p.useCallback(V=>{const[xe,...De]=A().map(we=>we.ref.current),[ke]=De.slice(-1),ve=document.activeElement;for(const we of V)if(we===ve||(we==null||we.scrollIntoView({block:"nearest"}),we===xe&&k&&(k.scrollTop=0),we===ke&&k&&(k.scrollTop=k.scrollHeight),we==null||we.focus(),document.activeElement!==ve))return},[A,k]),F=p.useCallback(()=>R([E,w]),[R,E,w]);p.useEffect(()=>{L&&F()},[L,F]);const{onOpenChange:_,triggerPointerDownPosRef:P}=b;p.useEffect(()=>{if(w){let V={x:0,y:0};const xe=ke=>{var ve,we;V={x:Math.abs(Math.round(ke.pageX)-(((ve=P.current)==null?void 0:ve.x)??0)),y:Math.abs(Math.round(ke.pageY)-(((we=P.current)==null?void 0:we.y)??0))}},De=ke=>{V.x<=10&&V.y<=10?ke.preventDefault():w.contains(ke.target)||_(!1),document.removeEventListener("pointermove",xe),P.current=null};return P.current!==null&&(document.addEventListener("pointermove",xe),document.addEventListener("pointerup",De,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",xe),document.removeEventListener("pointerup",De,{capture:!0})}}},[w,_,P]),p.useEffect(()=>{const V=()=>_(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[_]);const[O,I]=Pj(V=>{const xe=A().filter(ve=>!ve.disabled),De=xe.find(ve=>ve.ref.current===document.activeElement),ke=_j(xe,V,De);ke&&setTimeout(()=>ke.ref.current.focus())}),U=p.useCallback((V,xe,De)=>{const ke=!H.current&&!De;(b.value!==void 0&&b.value===xe||ke)&&(M(V),ke&&(H.current=!0))},[b.value]),B=p.useCallback(()=>w==null?void 0:w.focus(),[w]),Z=p.useCallback((V,xe,De)=>{const ke=!H.current&&!De;(b.value!==void 0&&b.value===xe||ke)&&T(V)},[b.value]),K=r==="popper"?Dp:mj,ee=K===Dp?{side:o,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:v}:{};return l.jsx(hj,{scope:n,content:w,viewport:k,onViewportChange:j,itemRefCallback:U,selectedItem:E,onItemLeave:B,itemTextRefCallback:Z,focusSelectedItem:F,selectedItemText:N,position:r,isPositioned:L,searchRef:O,children:l.jsx(Ag,{as:cF,allowPinchZoom:!0,children:l.jsx(_g,{asChild:!0,trapped:b.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:Q(s,V=>{var xe;(xe=b.trigger)==null||xe.focus({preventScroll:!0}),V.preventDefault()}),children:l.jsx(lc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:l.jsx(K,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:V=>V.preventDefault(),...x,...ee,onPlaced:()=>D(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Q(x.onKeyDown,V=>{const xe=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!xe&&V.key.length===1&&I(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let ke=A().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);if(["ArrowUp","End"].includes(V.key)&&(ke=ke.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const ve=V.target,we=ke.indexOf(ve);ke=ke.slice(we+1)}setTimeout(()=>R(ke)),V.preventDefault()}})})})})})})});fj.displayName=lF;var uF="SelectItemAlignedPosition",mj=p.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,a=na(Fa,n),i=ra(Fa,n),[o,c]=p.useState(null),[u,d]=p.useState(null),h=ye(t,C=>d(C)),f=wh(n),m=p.useRef(!1),y=p.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:x,focusSelectedItem:b}=i,w=p.useCallback(()=>{if(a.trigger&&a.valueNode&&o&&u&&g&&v&&x){const C=a.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),M=a.valueNode.getBoundingClientRect(),N=x.getBoundingClientRect();if(a.dir!=="rtl"){const ve=N.left-E.left,we=M.left-ve,pe=C.left-we,J=C.width+pe,ue=Math.max(J,E.width),je=window.innerWidth-er,gt=Yl(we,[er,Math.max(er,je-ue)]);o.style.minWidth=J+"px",o.style.left=gt+"px"}else{const ve=E.right-N.right,we=window.innerWidth-M.right-ve,pe=window.innerWidth-C.right-we,J=C.width+pe,ue=Math.max(J,E.width),je=window.innerWidth-er,gt=Yl(we,[er,Math.max(er,je-ue)]);o.style.minWidth=J+"px",o.style.right=gt+"px"}const T=f(),A=window.innerHeight-er*2,L=g.scrollHeight,D=window.getComputedStyle(u),H=parseInt(D.borderTopWidth,10),R=parseInt(D.paddingTop,10),F=parseInt(D.borderBottomWidth,10),_=parseInt(D.paddingBottom,10),P=H+R+L+_+F,O=Math.min(v.offsetHeight*5,P),I=window.getComputedStyle(g),U=parseInt(I.paddingTop,10),B=parseInt(I.paddingBottom,10),Z=C.top+C.height/2-er,K=A-Z,ee=v.offsetHeight/2,V=v.offsetTop+ee,xe=H+R+V,De=P-xe;if(xe<=Z){const ve=T.length>0&&v===T[T.length-1].ref.current;o.style.bottom="0px";const we=u.clientHeight-g.offsetTop-g.offsetHeight,pe=Math.max(K,ee+(ve?B:0)+we+F),J=xe+pe;o.style.height=J+"px"}else{const ve=T.length>0&&v===T[0].ref.current;o.style.top="0px";const pe=Math.max(Z,H+g.offsetTop+(ve?U:0)+ee)+De;o.style.height=pe+"px",g.scrollTop=xe-Z+g.offsetTop}o.style.margin=`${er}px 0`,o.style.minHeight=O+"px",o.style.maxHeight=A+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,a.trigger,a.valueNode,o,u,g,v,x,a.dir,r]);jt(()=>w(),[w]);const[S,k]=p.useState();jt(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const j=p.useCallback(C=>{C&&y.current===!0&&(w(),b==null||b(),y.current=!1)},[w,b]);return l.jsx(hF,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:j,children:l.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:l.jsx(ne.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});mj.displayName=uF;var dF="SelectPopperPosition",Dp=p.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=er,...a}=e,i=bh(n);return l.jsx(H5,{...i,...a,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Dp.displayName=dF;var[hF,Dg]=jo(Fa,{}),Op="SelectViewport",pj=p.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,a=ra(Op,n),i=Dg(Op,n),o=ye(t,a.onViewportChange),c=p.useRef(0);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),l.jsx(xh.Slot,{scope:n,children:l.jsx(ne.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Q(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const y=window.innerHeight-er*2,g=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),x=Math.max(g,v);if(x<y){const b=x+m,w=Math.min(y,b),S=b-w;h.style.height=w+"px",h.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});pj.displayName=Op;var gj="SelectGroup",[fF,mF]=jo(gj),pF=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Fs();return l.jsx(fF,{scope:n,id:s,children:l.jsx(ne.div,{role:"group","aria-labelledby":s,...r,ref:t})})});pF.displayName=gj;var yj="SelectLabel",vj=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=mF(yj,n);return l.jsx(ne.div,{id:s.id,...r,ref:t})});vj.displayName=yj;var Sd="SelectItem",[gF,xj]=jo(Sd),wj=p.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...i}=e,o=na(Sd,n),c=ra(Sd,n),u=o.value===r,[d,h]=p.useState(a??""),[f,m]=p.useState(!1),y=ye(t,b=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,b,r,s)}),g=Fs(),v=p.useRef("touch"),x=()=>{s||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return l.jsx(gF,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:p.useCallback(b=>{h(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:l.jsx(xh.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:l.jsx(ne.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:y,onFocus:Q(i.onFocus,()=>m(!0)),onBlur:Q(i.onBlur,()=>m(!1)),onClick:Q(i.onClick,()=>{v.current!=="mouse"&&x()}),onPointerUp:Q(i.onPointerUp,()=>{v.current==="mouse"&&x()}),onPointerDown:Q(i.onPointerDown,b=>{v.current=b.pointerType}),onPointerMove:Q(i.onPointerMove,b=>{var w;v.current=b.pointerType,s?(w=c.onItemLeave)==null||w.call(c):v.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Q(i.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Q(i.onKeyDown,b=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&b.key===" "||(tF.includes(b.key)&&x(),b.key===" "&&b.preventDefault())})})})})});wj.displayName=Sd;var qo="SelectItemText",bj=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...a}=e,i=na(qo,n),o=ra(qo,n),c=xj(qo,n),u=aF(qo,n),[d,h]=p.useState(null),f=ye(t,x=>h(x),c.onItemTextChange,x=>{var b;return(b=o.itemTextRefCallback)==null?void 0:b.call(o,x,c.value,c.disabled)}),m=d==null?void 0:d.textContent,y=p.useMemo(()=>l.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=u;return jt(()=>(g(y),()=>v(y)),[g,v,y]),l.jsxs(l.Fragment,{children:[l.jsx(ne.span,{id:c.textId,...a,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?ea.createPortal(a.children,i.valueNode):null]})});bj.displayName=qo;var Sj="SelectItemIndicator",kj=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return xj(Sj,n).isSelected?l.jsx(ne.span,{"aria-hidden":!0,...r,ref:t}):null});kj.displayName=Sj;var Ip="SelectScrollUpButton",jj=p.forwardRef((e,t)=>{const n=ra(Ip,e.__scopeSelect),r=Dg(Ip,e.__scopeSelect),[s,a]=p.useState(!1),i=ye(t,r.onScrollButtonChange);return jt(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?l.jsx(Ej,{...e,ref:i,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop-c.offsetHeight)}}):null});jj.displayName=Ip;var $p="SelectScrollDownButton",Cj=p.forwardRef((e,t)=>{const n=ra($p,e.__scopeSelect),r=Dg($p,e.__scopeSelect),[s,a]=p.useState(!1),i=ye(t,r.onScrollButtonChange);return jt(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=n.viewport;return o(),c.addEventListener("scroll",o),()=>c.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?l.jsx(Ej,{...e,ref:i,onAutoScroll:()=>{const{viewport:o,selectedItem:c}=n;o&&c&&(o.scrollTop=o.scrollTop+c.offsetHeight)}}):null});Cj.displayName=$p;var Ej=p.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,a=ra("SelectScrollButton",n),i=p.useRef(null),o=wh(n),c=p.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),jt(()=>{var d;const u=o().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),l.jsx(ne.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:Q(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:Q(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:Q(s.onPointerLeave,()=>{c()})})}),yF="SelectSeparator",Tj=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return l.jsx(ne.div,{"aria-hidden":!0,...r,ref:t})});Tj.displayName=yF;var Lp="SelectArrow",vF=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=bh(n),a=na(Lp,n),i=ra(Lp,n);return a.open&&i.position==="popper"?l.jsx(G5,{...s,...r,ref:t}):null});vF.displayName=Lp;var xF="SelectBubbleInput",Mj=p.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=p.useRef(null),a=ye(r,s),i=Rg(t);return p.useEffect(()=>{const o=s.current;if(!o)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&d){const h=new Event("change",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[i,t]),l.jsx(ne.select,{...n,style:{...IS,...n.style},ref:a,defaultValue:t})});Mj.displayName=xF;function Nj(e){return e===""||e===void 0}function Pj(e){const t=xt(e),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(i=>{const o=n.current+i;t(o),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(o)},[t]),a=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function _j(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=wF(e,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function wF(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var bF=sj,Rj=ij,SF=lj,kF=cj,jF=uj,Aj=dj,CF=pj,Dj=vj,Oj=wj,EF=bj,TF=kj,Ij=jj,$j=Cj,Lj=Tj;const Fn=bF,zn=SF,Sn=p.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(Rj,{ref:r,className:q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,l.jsx(kF,{asChild:!0,children:l.jsx(Hs,{className:"h-4 w-4 opacity-50"})})]}));Sn.displayName=Rj.displayName;const Fj=p.forwardRef(({className:e,...t},n)=>l.jsx(Ij,{ref:n,className:q("flex cursor-default items-center justify-center py-1",e),...t,children:l.jsx(io,{className:"h-4 w-4"})}));Fj.displayName=Ij.displayName;const zj=p.forwardRef(({className:e,...t},n)=>l.jsx($j,{ref:n,className:q("flex cursor-default items-center justify-center py-1",e),...t,children:l.jsx(Hs,{className:"h-4 w-4"})}));zj.displayName=$j.displayName;const kn=p.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>l.jsx(jF,{children:l.jsxs(Aj,{ref:s,className:q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[l.jsx(Fj,{}),l.jsx(CF,{className:q("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),l.jsx(zj,{})]})}));kn.displayName=Aj.displayName;const MF=p.forwardRef(({className:e,...t},n)=>l.jsx(Dj,{ref:n,className:q("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));MF.displayName=Dj.displayName;const Nt=p.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(Oj,{ref:r,className:q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[l.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:l.jsx(TF,{children:l.jsx(od,{className:"h-4 w-4"})})}),l.jsx(EF,{children:t})]}));Nt.displayName=Oj.displayName;const NF=p.forwardRef(({className:e,...t},n)=>l.jsx(Lj,{ref:n,className:q("-mx-1 my-1 h-px bg-muted",e),...t}));NF.displayName=Lj.displayName;const Bj=["fog","sea","mountain","city","tunnel","rain","night","sunset"],Og=["inactive","activated","unknown"],Ig=["none","helper","separation","wake","unknown"],Vj=["wake","separation","collapse","unknown"];p.createContext({hasAnimated:!1,setHasAnimated:()=>{}});function Bn({children:e,delay:t=0,duration:n=400,className:r="",animation:s="fade-up"}){const[a,i]=p.useState(!1);p.useEffect(()=>{const c=setTimeout(()=>i(!0),t);return()=>clearTimeout(c)},[t]);const o=()=>{if(a)return"translateY(0) translateX(0) scale(1)";switch(s){case"fade":return"translateY(0) scale(1)";case"scale":return"scale(0.95)";case"slide-left":return"translateX(-20px)";case"slide-right":return"translateX(20px)";case"fade-up":default:return"translateY(16px)"}};return l.jsx("div",{className:`transition-all ${r}`,style:{opacity:a?1:0,transform:o(),transitionDuration:`${n}ms`,transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e})}function PF({children:e,baseDelay:t=0,staggerDelay:n=60,duration:r=400,className:s="",animation:a="fade-up"}){return l.jsx("div",{className:s,children:e.map((i,o)=>l.jsx(Bn,{delay:t+o*n,duration:r,animation:a,children:i},o))})}function _F(){const[e,t]=p.useState([]),[n,r]=p.useState([]),[s,a]=p.useState(!0),[i,o]=p.useState(!1),[c,u]=p.useState(""),[d,h]=p.useState("all"),[f,m]=p.useState("all"),[y,g]=p.useState("all"),[v,x]=p.useState("all"),b=p.useCallback(async()=>{try{const[k,j]=await Promise.all([Ha(),gc()]);t(k),r(j)}catch(k){console.error("Error loading data:",k)}finally{a(!1)}},[]);p.useEffect(()=>{b()},[b]);const w=p.useCallback(async()=>{await b(),an.success("")},[b]),S=e.filter(k=>{var j;if(c){const C=c.toLowerCase();if(!(k.world.toLowerCase().includes(C)||((j=k.notes)==null?void 0:j.toLowerCase().includes(C))||k.entities.some(M=>M.toLowerCase().includes(C))||k.environments.some(M=>M.toLowerCase().includes(C))))return!1}return!(d!=="all"&&k.world!==d||f!=="all"&&k.threatLevel!==Number(f)||y!=="all"&&k.timeSystem!==y||v!=="all"&&k.safetyOverride!==v)});return s?l.jsxs("div",{className:"space-y-4 py-4",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("h1",{children:"Dream Logs"})}),l.jsx("div",{className:"space-y-2",children:[...Array(5)].map((k,j)=>l.jsx(Vk,{},j))})]}):l.jsxs(Uk,{onRefresh:w,className:"h-full",children:[l.jsx(Gk,{}),l.jsxs("div",{className:"space-y-4 py-4",children:[l.jsx(Bn,{delay:0,duration:400,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{children:"Dream Logs"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ne,{variant:"ghost",size:"icon",onClick:()=>o(!i),children:l.jsx(H_,{className:"w-4 h-4"})}),l.jsx(Ne,{asChild:!0,size:"sm",children:l.jsxs(dn,{to:"/logs/new",children:[l.jsx(d5,{className:"w-4 h-4 mr-1"}),"New"]})})]})]})}),l.jsx(Bn,{delay:60,duration:400,children:l.jsxs("div",{className:"relative",children:[l.jsx(h5,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),l.jsx(Hn,{type:"text",placeholder:" dreams... (world, notes, entities, environments)",value:c,onChange:k=>u(k.target.value),className:"pl-9 pr-9"}),c&&l.jsx(Ne,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>u(""),children:l.jsx(vo,{className:"w-3 h-3"})})]})}),i&&l.jsx(Bn,{delay:0,duration:300,animation:"fade",children:l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsx("p",{className:"text-sm font-medium",children:"Filters"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs(Fn,{value:d,onValueChange:h,children:[l.jsx(Sn,{className:"text-sm",children:l.jsx(zn,{placeholder:"World"})}),l.jsxs(kn,{children:[l.jsx(Nt,{value:"all",children:"All Worlds"}),n.map(k=>l.jsx(Nt,{value:k.name,children:k.name},k.id))]})]}),l.jsxs(Fn,{value:f,onValueChange:m,children:[l.jsx(Sn,{className:"text-sm",children:l.jsx(zn,{placeholder:"Threat"})}),l.jsxs(kn,{children:[l.jsx(Nt,{value:"all",children:"All Threats"}),[0,1,2,3,4,5].map(k=>l.jsxs(Nt,{value:String(k),children:["Level ",k]},k))]})]}),l.jsxs(Fn,{value:y,onValueChange:g,children:[l.jsx(Sn,{className:"text-sm",children:l.jsx(zn,{placeholder:"Time System"})}),l.jsxs(kn,{children:[l.jsx(Nt,{value:"all",children:"All"}),Og.map(k=>l.jsx(Nt,{value:k,children:k},k))]})]}),l.jsxs(Fn,{value:v,onValueChange:x,children:[l.jsx(Sn,{className:"text-sm",children:l.jsx(zn,{placeholder:"Safety"})}),l.jsxs(kn,{children:[l.jsx(Nt,{value:"all",children:"All"}),Ig.map(k=>l.jsx(Nt,{value:k,children:k},k))]})]})]})]})}),l.jsx("div",{className:"space-y-2",children:S.length===0?l.jsx(Bn,{delay:120,duration:400,children:l.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[l.jsx("p",{children:""}),l.jsx(Ne,{asChild:!0,variant:"link",className:"mt-2",children:l.jsx(dn,{to:"/logs/new",children:""})})]})}):l.jsx(PF,{baseDelay:120,staggerDelay:50,duration:400,className:"space-y-2",children:S.map(k=>l.jsx(Kk,{dream:k,showEdit:!0},k.id))})})]})]})}var RF="Label",Uj=p.forwardRef((e,t)=>l.jsx(ne.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Uj.displayName=RF;var Wj=Uj;const AF=nh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Xt=p.forwardRef(({className:e,...t},n)=>l.jsx(Wj,{ref:n,className:q(AF(),e),...t}));Xt.displayName=Wj.displayName;function DF({date:e,wakeTime:t,onDateChange:n,onWakeTimeChange:r}){return l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Xt,{htmlFor:"date",children:"Date"}),l.jsx(Hn,{id:"date",type:"date",value:e,onChange:s=>n(s.target.value),required:!0})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Xt,{htmlFor:"wakeTime",children:"Wake Time"}),l.jsx(Hn,{id:"wakeTime",type:"time",value:t,onChange:s=>r(s.target.value),required:!0})]})]})}function OF({worlds:e,selectedWorld:t,newWorld:n,onWorldChange:r,onNewWorldChange:s}){return l.jsxs("div",{className:"space-y-2",children:[l.jsx(Xt,{children:"World"}),l.jsxs(Fn,{value:t,onValueChange:r,children:[l.jsx(Sn,{children:l.jsx(zn,{placeholder:"Select or create new"})}),l.jsx(kn,{children:e.map(a=>l.jsx(Nt,{value:a.name,children:a.name},a.id))})]}),l.jsx(Hn,{placeholder:"...",value:n,onChange:a=>s(a.target.value)})]})}const IF=e=>Bj.includes(e);function $F({selectedEnvironments:e,newEnvironment:t,onToggleEnvironment:n,onNewEnvironmentChange:r,onAddEnvironment:s}){const a=e.filter(i=>!IF(i));return l.jsxs("div",{className:"space-y-2",children:[l.jsx(Xt,{children:"Environments"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Bj.map(i=>l.jsx("button",{type:"button",onClick:()=>n(i),className:`tag transition-colors ${e.includes(i)?"bg-primary text-primary-foreground":"hover:bg-secondary"}`,children:i},i))}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsx(Hn,{type:"text",placeholder:" environment ...",value:t,onChange:i=>r(i.target.value),className:"flex-1"}),l.jsx(Ne,{type:"button",variant:"outline",size:"sm",disabled:!t,onClick:s,children:""})]}),a.length>0&&l.jsx("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:a.map(i=>l.jsx("button",{type:"button",onClick:()=>n(i),className:"tag bg-primary text-primary-foreground",children:i},i))})]})}var Sh="Checkbox",[LF]=Gn(Sh),[FF,$g]=LF(Sh);function zF(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:a,form:i,name:o,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[f,m]=Ws({prop:n,defaultProp:s??!1,onChange:c,caller:Sh}),[y,g]=p.useState(null),[v,x]=p.useState(null),b=p.useRef(!1),w=y?!!i||!!y.closest("form"):!0,S={checked:f,disabled:a,setChecked:m,control:y,setControl:g,name:o,form:i,value:d,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:Bs(s)?!1:s,isFormControl:w,bubbleInput:v,setBubbleInput:x};return l.jsx(FF,{scope:t,...S,children:BF(h)?h(S):r})}var Hj="CheckboxTrigger",Gj=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:a,value:i,disabled:o,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:y}=$g(Hj,e),g=ye(s,d),v=p.useRef(c);return p.useEffect(()=>{const x=a==null?void 0:a.form;if(x){const b=()=>h(v.current);return x.addEventListener("reset",b),()=>x.removeEventListener("reset",b)}},[a,h]),l.jsx(ne.button,{type:"button",role:"checkbox","aria-checked":Bs(c)?"mixed":c,"aria-required":u,"data-state":Qj(c),"data-disabled":o?"":void 0,disabled:o,value:i,...r,ref:g,onKeyDown:Q(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Q(n,x=>{h(b=>Bs(b)?!0:!b),y&&m&&(f.current=x.isPropagationStopped(),f.current||x.stopPropagation())})})});Gj.displayName=Hj;var Lg=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:i,disabled:o,value:c,onCheckedChange:u,form:d,...h}=e;return l.jsx(zF,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:o,required:i,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>l.jsxs(l.Fragment,{children:[l.jsx(Gj,{...h,ref:t,__scopeCheckbox:n}),f&&l.jsx(Xj,{__scopeCheckbox:n})]})})});Lg.displayName=Sh;var Kj="CheckboxIndicator",qj=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=$g(Kj,n);return l.jsx(Kn,{present:r||Bs(a.checked)||a.checked===!0,children:l.jsx(ne.span,{"data-state":Qj(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});qj.displayName=Kj;var Yj="CheckboxBubbleInput",Xj=p.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:i,required:o,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:m}=$g(Yj,e),y=ye(n,m),g=Rg(a),v=yg(r);p.useEffect(()=>{const b=f;if(!b)return;const w=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(w,"checked").set,j=!s.current;if(g!==a&&k){const C=new Event("click",{bubbles:j});b.indeterminate=Bs(a),k.call(b,Bs(a)?!1:a),b.dispatchEvent(C)}},[f,g,a,s]);const x=p.useRef(Bs(a)?!1:a);return l.jsx(ne.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??x.current,required:o,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:y,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Xj.displayName=Yj;function BF(e){return typeof e=="function"}function Bs(e){return e==="indeterminate"}function Qj(e){return Bs(e)?"indeterminate":e?"checked":"unchecked"}const Jj=p.forwardRef(({className:e,...t},n)=>l.jsx(Lg,{ref:n,className:q("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:l.jsx(qj,{className:q("flex items-center justify-center text-current"),children:l.jsx(od,{className:"h-4 w-4"})})}));Jj.displayName=Lg.displayName;function VF({entities:e,selectedEntities:t,newEntity:n,onToggleEntity:r,onNewEntityChange:s}){return l.jsxs("div",{className:"space-y-2",children:[l.jsx(Xt,{children:"Entities"}),l.jsx("div",{className:"space-y-2",children:e.map(a=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Jj,{id:a.id,checked:t.includes(a.name),onCheckedChange:()=>r(a.name)}),l.jsx("label",{htmlFor:a.id,className:"text-sm",children:a.name})]},a.id))}),l.jsx(Hn,{placeholder:" entity ...",value:n,onChange:a=>s(a.target.value)})]})}function UF({timeSystem:e,threatLevel:t,safetyOverride:n,exit:r,onTimeSystemChange:s,onThreatLevelChange:a,onSafetyOverrideChange:i,onExitChange:o}){return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Xt,{children:"Time System"}),l.jsxs(Fn,{value:e,onValueChange:c=>s(c),children:[l.jsx(Sn,{children:l.jsx(zn,{})}),l.jsx(kn,{children:Og.map(c=>l.jsx(Nt,{value:c,children:c},c))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs(Xt,{children:["Threat Level: ",t]}),l.jsx("input",{type:"range",min:"0",max:"5",value:t,onChange:c=>a(Number(c.target.value)),className:"w-full accent-primary"}),l.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[l.jsx("span",{children:"0"}),l.jsx("span",{children:"5"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Xt,{children:"Safety Override"}),l.jsxs(Fn,{value:n,onValueChange:c=>i(c),children:[l.jsx(Sn,{children:l.jsx(zn,{})}),l.jsx(kn,{children:Ig.map(c=>l.jsx(Nt,{value:c,children:c},c))})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx(Xt,{children:"Exit"}),l.jsxs(Fn,{value:r,onValueChange:c=>o(c),children:[l.jsx(Sn,{children:l.jsx(zn,{})}),l.jsx(kn,{children:Vj.map(c=>l.jsx(Nt,{value:c,children:c},c))})]})]})]})}var Zj=["PageUp","PageDown"],eC=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],tC={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Co="Slider",[Fp,WF,HF]=Jd(Co),[nC]=Gn(Co,[HF]),[GF,kh]=nC(Co),rC=p.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:a=1,orientation:i="horizontal",disabled:o=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:f=()=>{},inverted:m=!1,form:y,...g}=e,v=p.useRef(new Set),x=p.useRef(0),w=i==="horizontal"?KF:qF,[S=[],k]=Ws({prop:d,defaultProp:u,onChange:T=>{var L;(L=[...v.current][x.current])==null||L.focus(),h(T)}}),j=p.useRef(S);function C(T){const A=ZF(S,T);N(T,A)}function E(T){N(T,x.current)}function M(){const T=j.current[x.current];S[x.current]!==T&&f(S)}function N(T,A,{commit:L}={commit:!1}){const D=rz(a),H=sz(Math.round((T-r)/a)*a+r,D),R=Yl(H,[r,s]);k((F=[])=>{const _=QF(F,R,A);if(nz(_,c*a)){x.current=_.indexOf(R);const P=String(_)!==String(F);return P&&L&&f(_),P?_:F}else return F})}return l.jsx(GF,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:s,valueIndexToChangeRef:x,thumbs:v.current,values:S,orientation:i,form:y,children:l.jsx(Fp.Provider,{scope:e.__scopeSlider,children:l.jsx(Fp.Slot,{scope:e.__scopeSlider,children:l.jsx(w,{"aria-disabled":o,"data-disabled":o?"":void 0,...g,ref:t,onPointerDown:Q(g.onPointerDown,()=>{o||(j.current=S)}),min:r,max:s,inverted:m,onSlideStart:o?void 0:C,onSlideMove:o?void 0:E,onSlideEnd:o?void 0:M,onHomeKeyDown:()=>!o&&N(r,0,{commit:!0}),onEndKeyDown:()=>!o&&N(s,S.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:A})=>{if(!o){const H=Zj.includes(T.key)||T.shiftKey&&eC.includes(T.key)?10:1,R=x.current,F=S[R],_=a*H*A;N(F+_,R,{commit:!0})}}})})})})});rC.displayName=Co;var[sC,aC]=nC(Co,{startEdge:"left",endEdge:"right",size:"width",direction:1}),KF=p.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:c,onStepKeyDown:u,...d}=e,[h,f]=p.useState(null),m=ye(t,w=>f(w)),y=p.useRef(void 0),g=vc(s),v=g==="ltr",x=v&&!a||!v&&a;function b(w){const S=y.current||h.getBoundingClientRect(),k=[0,S.width],C=Fg(k,x?[n,r]:[r,n]);return y.current=S,C(w-S.left)}return l.jsx(sC,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:l.jsx(iC,{dir:g,"data-orientation":"horizontal",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const S=b(w.clientX);i==null||i(S)},onSlideMove:w=>{const S=b(w.clientX);o==null||o(S)},onSlideEnd:()=>{y.current=void 0,c==null||c()},onStepKeyDown:w=>{const k=tC[x?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:k?-1:1})}})})}),qF=p.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:a,onSlideMove:i,onSlideEnd:o,onStepKeyDown:c,...u}=e,d=p.useRef(null),h=ye(t,d),f=p.useRef(void 0),m=!s;function y(g){const v=f.current||d.current.getBoundingClientRect(),x=[0,v.height],w=Fg(x,m?[r,n]:[n,r]);return f.current=v,w(g-v.top)}return l.jsx(sC,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:l.jsx(iC,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const v=y(g.clientY);a==null||a(v)},onSlideMove:g=>{const v=y(g.clientY);i==null||i(v)},onSlideEnd:()=>{f.current=void 0,o==null||o()},onStepKeyDown:g=>{const x=tC[m?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:x?-1:1})}})})}),iC=p.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:i,onEndKeyDown:o,onStepKeyDown:c,...u}=e,d=kh(Co,n);return l.jsx(ne.span,{...u,ref:t,onKeyDown:Q(e.onKeyDown,h=>{h.key==="Home"?(i(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):Zj.concat(eC).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:Q(e.onPointerDown,h=>{const f=h.target;f.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(f)?f.focus():r(h)}),onPointerMove:Q(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:Q(e.onPointerUp,h=>{const f=h.target;f.hasPointerCapture(h.pointerId)&&(f.releasePointerCapture(h.pointerId),a(h))})})}),oC="SliderTrack",lC=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=kh(oC,n);return l.jsx(ne.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});lC.displayName=oC;var zp="SliderRange",cC=p.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=kh(zp,n),a=aC(zp,n),i=p.useRef(null),o=ye(t,i),c=s.values.length,u=s.values.map(f=>hC(f,s.min,s.max)),d=c>1?Math.min(...u):0,h=100-Math.max(...u);return l.jsx(ne.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:o,style:{...e.style,[a.startEdge]:d+"%",[a.endEdge]:h+"%"}})});cC.displayName=zp;var Bp="SliderThumb",uC=p.forwardRef((e,t)=>{const n=WF(e.__scopeSlider),[r,s]=p.useState(null),a=ye(t,o=>s(o)),i=p.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return l.jsx(YF,{...e,ref:a,index:i})}),YF=p.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...a}=e,i=kh(Bp,n),o=aC(Bp,n),[c,u]=p.useState(null),d=ye(t,b=>u(b)),h=c?i.form||!!c.closest("form"):!0,f=yg(c),m=i.values[r],y=m===void 0?0:hC(m,i.min,i.max),g=JF(r,i.values.length),v=f==null?void 0:f[o.size],x=v?ez(v,y,o.direction):0;return p.useEffect(()=>{if(c)return i.thumbs.add(c),()=>{i.thumbs.delete(c)}},[c,i.thumbs]),l.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${y}% + ${x}px)`},children:[l.jsx(Fp.ItemSlot,{scope:e.__scopeSlider,children:l.jsx(ne.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":i.min,"aria-valuenow":m,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...a,ref:d,style:m===void 0?{display:"none"}:e.style,onFocus:Q(e.onFocus,()=>{i.valueIndexToChangeRef.current=r})})}),h&&l.jsx(dC,{name:s??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:m},r)]})});uC.displayName=Bp;var XF="RadioBubbleInput",dC=p.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=p.useRef(null),a=ye(s,r),i=Rg(t);return p.useEffect(()=>{const o=s.current;if(!o)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&d){const h=new Event("input",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[i,t]),l.jsx(ne.input,{style:{display:"none"},...n,ref:a,defaultValue:t})});dC.displayName=XF;function QF(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,a)=>s-a)}function hC(e,t,n){const a=100/(n-t)*(e-t);return Yl(a,[0,100])}function JF(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function ZF(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function ez(e,t,n){const r=e/2,a=Fg([0,50],[0,r]);return(r-a(t)*n)*n}function tz(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function nz(e,t){if(t>0){const n=tz(e);return Math.min(...n)>=t}return!0}function Fg(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function rz(e){return(String(e).split(".")[1]||"").length}function sz(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var fC=rC,az=lC,iz=cC,oz=uC;const mC=p.forwardRef(({className:e,...t},n)=>l.jsxs(fC,{ref:n,className:q("relative flex w-full touch-none select-none items-center",e),...t,children:[l.jsx(az,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:l.jsx(iz,{className:"absolute h-full bg-primary"})}),l.jsx(oz,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));mC.displayName=fC.displayName;const lz=[{id:"fear",label:"",emoji:"",color:"bg-red-500/20 border-red-500/50 text-red-400"},{id:"joy",label:"",emoji:"",color:"bg-yellow-500/20 border-yellow-500/50 text-yellow-400"},{id:"sadness",label:"",emoji:"",color:"bg-blue-500/20 border-blue-500/50 text-blue-400"},{id:"anxiety",label:"",emoji:"",color:"bg-orange-500/20 border-orange-500/50 text-orange-400"},{id:"peace",label:"",emoji:"",color:"bg-green-500/20 border-green-500/50 text-green-400"},{id:"excitement",label:"",emoji:"",color:"bg-pink-500/20 border-pink-500/50 text-pink-400"},{id:"confusion",label:"",emoji:"",color:"bg-purple-500/20 border-purple-500/50 text-purple-400"},{id:"wonder",label:"",emoji:"",color:"bg-cyan-500/20 border-cyan-500/50 text-cyan-400"}],cz=[{id:"dark",label:"",gradient:"from-gray-900 to-gray-700"},{id:"golden",label:"",gradient:"from-amber-500 to-orange-600"},{id:"blue",label:"",gradient:"from-blue-400 to-indigo-600"},{id:"purple",label:"",gradient:"from-purple-500 to-pink-600"},{id:"green",label:"",gradient:"from-emerald-400 to-teal-600"},{id:"red",label:"",gradient:"from-red-500 to-rose-700"},{id:"white",label:"",gradient:"from-gray-100 to-gray-300"},{id:"rainbow",label:"",gradient:"from-red-400 via-yellow-400 to-blue-500"}];function uz({storySummary:e,onStorySummaryChange:t,emotions:n,onEmotionsChange:r,atmosphereColors:s,onAtmosphereColorsChange:a,lucidityLevel:i,onLucidityLevelChange:o}){const c=h=>{n.includes(h)?r(n.filter(f=>f!==h)):r([...n,h])},u=h=>{s.includes(h)?a(s.filter(f=>f!==h)):a([...s,h])},d=h=>h<=1?"":h<=3?"":h<=5?"":h<=7?"":h<=9?"":"";return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx(Xt,{htmlFor:"storySummary",className:"text-base font-medium flex items-center gap-2",children:" "}),l.jsx(yc,{id:"storySummary",placeholder:"... ? ? ?",value:e,onChange:h=>t(h.target.value),className:"min-h-[120px] resize-none"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:" "})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(Xt,{className:"text-base font-medium flex items-center gap-2",children:" "}),l.jsx("div",{className:"flex flex-wrap gap-2",children:lz.map(h=>l.jsxs("button",{type:"button",onClick:()=>c(h.id),className:q("px-3 py-1.5 rounded-full border text-sm font-medium transition-all",n.includes(h.id)?h.color+" border-2 scale-105":"bg-muted/50 border-border text-muted-foreground hover:bg-muted"),children:[l.jsx("span",{className:"mr-1",children:h.emoji}),h.label]},h.id))})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(Xt,{className:"text-base font-medium flex items-center gap-2",children:" "}),l.jsx("div",{className:"flex flex-wrap gap-2",children:cz.map(h=>l.jsxs("button",{type:"button",onClick:()=>u(h.id),className:q("relative overflow-hidden px-4 py-2 rounded-lg text-sm font-medium transition-all",s.includes(h.id)?"ring-2 ring-primary ring-offset-2 ring-offset-background scale-105":"opacity-70 hover:opacity-100"),children:[l.jsx("div",{className:q("absolute inset-0 bg-gradient-to-br",h.gradient)}),l.jsx("span",{className:"relative text-white drop-shadow-md",children:h.label})]},h.id))})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx(Xt,{className:"text-base font-medium flex items-center gap-2",children:"  (Lucidity)"}),l.jsxs(Re,{variant:"secondary",className:"text-sm",children:[i,"/10 - ",d(i)]})]}),l.jsx(mC,{value:[i],onValueChange:([h])=>o(h),min:0,max:10,step:1,className:"w-full"}),l.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[l.jsx("span",{children:""}),l.jsx("span",{children:""})]})]})]})}const zg=p.createContext({});function Bg(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const jh=p.createContext(null),Vg=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class dz extends p.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function hz({children:e,isPresent:t}){const n=p.useId(),r=p.useRef(null),s=p.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=p.useContext(Vg);return p.useInsertionEffect(()=>{const{width:i,height:o,top:c,left:u}=s.current;if(t||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return a&&(d.nonce=a),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),l.jsx(dz,{isPresent:t,childRef:r,sizeRef:s,children:p.cloneElement(e,{ref:r})})}const fz=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:i})=>{const o=Bg(mz),c=p.useId(),u=p.useCallback(h=>{o.set(h,!0);for(const f of o.values())if(!f)return;r&&r()},[o,r]),d=p.useMemo(()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:u,register:h=>(o.set(h,!1),()=>o.delete(h))}),a?[Math.random(),u]:[n,u]);return p.useMemo(()=>{o.forEach((h,f)=>o.set(f,!1))},[n]),p.useEffect(()=>{!n&&!o.size&&r&&r()},[n]),i==="popLayout"&&(e=l.jsx(hz,{isPresent:n,children:e})),l.jsx(jh.Provider,{value:d,children:e})};function mz(){return new Map}function pC(e=!0){const t=p.useContext(jh);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=p.useId();p.useEffect(()=>{e&&s(a)},[e]);const i=p.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,i]:[!0]}const au=e=>e.key||"";function Nw(e){const t=[];return p.Children.forEach(e,n=>{p.isValidElement(n)&&t.push(n)}),t}const Ug=typeof window<"u",gC=Ug?p.useLayoutEffect:p.useEffect,Vp=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1})=>{const[o,c]=pC(i),u=p.useMemo(()=>Nw(e),[e]),d=i&&!o?[]:u.map(au),h=p.useRef(!0),f=p.useRef(u),m=Bg(()=>new Map),[y,g]=p.useState(u),[v,x]=p.useState(u);gC(()=>{h.current=!1,f.current=u;for(let S=0;S<v.length;S++){const k=au(v[S]);d.includes(k)?m.delete(k):m.get(k)!==!0&&m.set(k,!1)}},[v,d.length,d.join("-")]);const b=[];if(u!==y){let S=[...u];for(let k=0;k<v.length;k++){const j=v[k],C=au(j);d.includes(C)||(S.splice(k,0,j),b.push(j))}a==="wait"&&b.length&&(S=b),x(Nw(S)),g(u);return}const{forceRender:w}=p.useContext(zg);return l.jsx(l.Fragment,{children:v.map(S=>{const k=au(S),j=i&&!o?!1:u===v||d.includes(k),C=()=>{if(m.has(k))m.set(k,!0);else return;let E=!0;m.forEach(M=>{M||(E=!1)}),E&&(w==null||w(),x(f.current),i&&(c==null||c()),r&&r())};return l.jsx(fz,{isPresent:j,initial:!h.current||n?void 0:!1,custom:j?void 0:t,presenceAffectsLayout:s,mode:a,onExitComplete:j?void 0:C,children:S},k)})})},En=e=>e;let yC=En;function Wg(e){let t;return()=>(t===void 0&&(t=e()),t)}const uo=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Yr=e=>e*1e3,Xr=e=>e/1e3,pz={useManualTiming:!1};function gz(e){let t=new Set,n=new Set,r=!1,s=!1;const a=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function o(u){a.has(u)&&(c.schedule(u),e()),u(i)}const c={schedule:(u,d=!1,h=!1)=>{const m=h&&r?t:n;return d&&a.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(i=u,r){s=!0;return}r=!0,[t,n]=[n,t],t.forEach(o),t.clear(),r=!1,s&&(s=!1,c.process(u))}};return c}const iu=["read","resolveKeyframes","update","preRender","render","postRender"],yz=40;function vC(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=iu.reduce((x,b)=>(x[b]=gz(a),x),{}),{read:o,resolveKeyframes:c,update:u,preRender:d,render:h,postRender:f}=i,m=()=>{const x=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(x-s.timestamp,yz),1),s.timestamp=x,s.isProcessing=!0,o.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(m))},y=()=>{n=!0,r=!0,s.isProcessing||e(m)};return{schedule:iu.reduce((x,b)=>{const w=i[b];return x[b]=(S,k=!1,j=!1)=>(n||y(),w.schedule(S,k,j)),x},{}),cancel:x=>{for(let b=0;b<iu.length;b++)i[iu[b]].cancel(x)},state:s,steps:i}}const{schedule:Ue,cancel:qs,state:Mt,steps:Vf}=vC(typeof requestAnimationFrame<"u"?requestAnimationFrame:En,!0),xC=p.createContext({strict:!1}),Pw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ho={};for(const e in Pw)ho[e]={isEnabled:t=>Pw[e].some(n=>!!t[n])};function vz(e){for(const t in e)ho[t]={...ho[t],...e[t]}}const xz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function kd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||xz.has(e)}let wC=e=>!kd(e);function wz(e){e&&(wC=t=>t.startsWith("on")?!kd(t):e(t))}try{wz(require("@emotion/is-prop-valid").default)}catch{}function bz(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(wC(s)||n===!0&&kd(s)||!t&&!kd(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function Sz(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const Ch=p.createContext({});function Xl(e){return typeof e=="string"||Array.isArray(e)}function Eh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Hg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Gg=["initial",...Hg];function Th(e){return Eh(e.animate)||Gg.some(t=>Xl(e[t]))}function bC(e){return!!(Th(e)||e.variants)}function kz(e,t){if(Th(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Xl(n)?n:void 0,animate:Xl(r)?r:void 0}}return e.inherit!==!1?t:{}}function jz(e){const{initial:t,animate:n}=kz(e,p.useContext(Ch));return p.useMemo(()=>({initial:t,animate:n}),[_w(t),_w(n)])}function _w(e){return Array.isArray(e)?e.join(" "):e}const Cz=Symbol.for("motionComponentSymbol");function ji(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Ez(e,t,n){return p.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ji(n)&&(n.current=r))},[t])}const Kg=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Tz="framerAppearId",SC="data-"+Kg(Tz),{schedule:qg}=vC(queueMicrotask,!1),kC=p.createContext({});function Mz(e,t,n,r,s){var a,i;const{visualElement:o}=p.useContext(Ch),c=p.useContext(xC),u=p.useContext(jh),d=p.useContext(Vg).reducedMotion,h=p.useRef(null);r=r||c.renderer,!h.current&&r&&(h.current=r(e,{visualState:t,parent:o,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const f=h.current,m=p.useContext(kC);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&Nz(h.current,n,s,m);const y=p.useRef(!1);p.useInsertionEffect(()=>{f&&y.current&&f.update(n,u)});const g=n[SC],v=p.useRef(!!g&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,g))&&((i=window.MotionHasOptimisedAnimation)===null||i===void 0?void 0:i.call(window,g)));return gC(()=>{f&&(y.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),qg.render(f.render),v.current&&f.animationState&&f.animationState.animateChanges())}),p.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,g)}),v.current=!1))}),f}function Nz(e,t,n,r){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:c,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:jC(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||o&&ji(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:u})}function jC(e){if(e)return e.options.allowProjection!==!1?e.projection:jC(e.parent)}function Pz({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){var a,i;e&&vz(e);function o(u,d){let h;const f={...p.useContext(Vg),...u,layoutId:_z(u)},{isStatic:m}=f,y=jz(u),g=r(u,m);if(!m&&Ug){Rz();const v=Az(f);h=v.MeasureLayout,y.visualElement=Mz(s,g,f,t,v.ProjectionNode)}return l.jsxs(Ch.Provider,{value:y,children:[h&&y.visualElement?l.jsx(h,{visualElement:y.visualElement,...f}):null,n(s,u,Ez(g,y.visualElement,d),g,m,y.visualElement)]})}o.displayName=`motion.${typeof s=="string"?s:`create(${(i=(a=s.displayName)!==null&&a!==void 0?a:s.name)!==null&&i!==void 0?i:""})`}`;const c=p.forwardRef(o);return c[Cz]=s,c}function _z({layoutId:e}){const t=p.useContext(zg).id;return t&&e!==void 0?t+"-"+e:e}function Rz(e,t){p.useContext(xC).strict}function Az(e){const{drag:t,layout:n}=ho;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Dz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yg(e){return typeof e!="string"||e.includes("-")?!1:!!(Dz.indexOf(e)>-1||/[A-Z]/u.test(e))}function Rw(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Xg(e,t,n,r){if(typeof t=="function"){const[s,a]=Rw(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=Rw(r);t=t(n!==void 0?n:e.custom,s,a)}return t}const Up=e=>Array.isArray(e),Oz=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Iz=e=>Up(e)?e[e.length-1]||0:e,Vt=e=>!!(e&&e.getVelocity);function Du(e){const t=Vt(e)?e.get():e;return Oz(t)?t.toValue():t}function $z({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,s,a){const i={latestValues:Lz(r,s,a,e),renderState:t()};return n&&(i.onMount=o=>n({props:r,current:o,...i}),i.onUpdate=o=>n(o)),i}const CC=e=>(t,n)=>{const r=p.useContext(Ch),s=p.useContext(jh),a=()=>$z(e,t,r,s);return n?a():Bg(a)};function Lz(e,t,n,r){const s={},a=r(e,{});for(const f in a)s[f]=Du(a[f]);let{initial:i,animate:o}=e;const c=Th(e),u=bC(e);t&&u&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),o===void 0&&(o=t.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const h=d?o:i;if(h&&typeof h!="boolean"&&!Eh(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const y=Xg(e,f[m]);if(y){const{transitionEnd:g,transition:v,...x}=y;for(const b in x){let w=x[b];if(Array.isArray(w)){const S=d?w.length-1:0;w=w[S]}w!==null&&(s[b]=w)}for(const b in g)s[b]=g[b]}}}return s}const Eo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ga=new Set(Eo),EC=e=>t=>typeof t=="string"&&t.startsWith(e),TC=EC("--"),Fz=EC("var(--"),Qg=e=>Fz(e)?zz.test(e.split("/*")[0].trim()):!1,zz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,MC=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ss=(e,t,n)=>n>t?t:n<e?e:n,To={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ql={...To,transform:e=>ss(0,1,e)},ou={...To,default:1},xc=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ps=xc("deg"),Rr=xc("%"),ae=xc("px"),Bz=xc("vh"),Vz=xc("vw"),Aw={...Rr,parse:e=>Rr.parse(e)/100,transform:e=>Rr.transform(e*100)},Uz={borderWidth:ae,borderTopWidth:ae,borderRightWidth:ae,borderBottomWidth:ae,borderLeftWidth:ae,borderRadius:ae,radius:ae,borderTopLeftRadius:ae,borderTopRightRadius:ae,borderBottomRightRadius:ae,borderBottomLeftRadius:ae,width:ae,maxWidth:ae,height:ae,maxHeight:ae,top:ae,right:ae,bottom:ae,left:ae,padding:ae,paddingTop:ae,paddingRight:ae,paddingBottom:ae,paddingLeft:ae,margin:ae,marginTop:ae,marginRight:ae,marginBottom:ae,marginLeft:ae,backgroundPositionX:ae,backgroundPositionY:ae},Wz={rotate:ps,rotateX:ps,rotateY:ps,rotateZ:ps,scale:ou,scaleX:ou,scaleY:ou,scaleZ:ou,skew:ps,skewX:ps,skewY:ps,distance:ae,translateX:ae,translateY:ae,translateZ:ae,x:ae,y:ae,z:ae,perspective:ae,transformPerspective:ae,opacity:Ql,originX:Aw,originY:Aw,originZ:ae},Dw={...To,transform:Math.round},Jg={...Uz,...Wz,zIndex:Dw,size:ae,fillOpacity:Ql,strokeOpacity:Ql,numOctaves:Dw},Hz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Gz=Eo.length;function Kz(e,t,n){let r="",s=!0;for(let a=0;a<Gz;a++){const i=Eo[a],o=e[i];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(i.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const u=MC(o,Jg[i]);if(!c){s=!1;const d=Hz[i]||i;r+=`${d}(${u}) `}n&&(t[i]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function Zg(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const c in t){const u=t[c];if(Ga.has(c)){i=!0;continue}else if(TC(c)){s[c]=u;continue}else{const d=MC(u,Jg[c]);c.startsWith("origin")?(o=!0,a[c]=d):r[c]=d}}if(t.transform||(i||n?r.transform=Kz(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}const qz={offset:"stroke-dashoffset",array:"stroke-dasharray"},Yz={offset:"strokeDashoffset",array:"strokeDasharray"};function Xz(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?qz:Yz;e[a.offset]=ae.transform(-r);const i=ae.transform(t),o=ae.transform(n);e[a.array]=`${i} ${o}`}function Ow(e,t,n){return typeof e=="string"?e:ae.transform(t+n*e)}function Qz(e,t,n){const r=Ow(t,e.x,e.width),s=Ow(n,e.y,e.height);return`${r} ${s}`}function ey(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:a,pathLength:i,pathSpacing:o=1,pathOffset:c=0,...u},d,h){if(Zg(e,u,h),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:m,dimensions:y}=e;f.transform&&(y&&(m.transform=f.transform),delete f.transform),y&&(s!==void 0||a!==void 0||m.transform)&&(m.transformOrigin=Qz(y,s!==void 0?s:.5,a!==void 0?a:.5)),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&Xz(f,i,o,c,!1)}const ty=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),NC=()=>({...ty(),attrs:{}}),ny=e=>typeof e=="string"&&e.toLowerCase()==="svg";function PC(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const _C=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function RC(e,t,n,r){PC(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(_C.has(s)?s:Kg(s),t.attrs[s])}const jd={};function Jz(e){Object.assign(jd,e)}function AC(e,{layout:t,layoutId:n}){return Ga.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!jd[e]||e==="opacity")}function ry(e,t,n){var r;const{style:s}=e,a={};for(const i in s)(Vt(s[i])||t.style&&Vt(t.style[i])||AC(i,e)||((r=n==null?void 0:n.getValue(i))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[i]=s[i]);return a}function DC(e,t,n){const r=ry(e,t,n);for(const s in e)if(Vt(e[s])||Vt(t[s])){const a=Eo.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}function Zz(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const Iw=["x","y","width","height","cx","cy","r"],eB={useVisualState:CC({scrapeMotionValuesFromProps:DC,createRenderState:NC,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:s})=>{if(!n)return;let a=!!e.drag;if(!a){for(const o in s)if(Ga.has(o)){a=!0;break}}if(!a)return;let i=!t;if(t)for(let o=0;o<Iw.length;o++){const c=Iw[o];e[c]!==t[c]&&(i=!0)}i&&Ue.read(()=>{Zz(n,r),Ue.render(()=>{ey(r,s,ny(n.tagName),e.transformTemplate),RC(n,r)})})}})},tB={useVisualState:CC({scrapeMotionValuesFromProps:ry,createRenderState:ty})};function OC(e,t,n){for(const r in t)!Vt(t[r])&&!AC(r,n)&&(e[r]=t[r])}function nB({transformTemplate:e},t){return p.useMemo(()=>{const n=ty();return Zg(n,t,e),Object.assign({},n.vars,n.style)},[t])}function rB(e,t){const n=e.style||{},r={};return OC(r,n,e),Object.assign(r,nB(e,t)),r}function sB(e,t){const n={},r=rB(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function aB(e,t,n,r){const s=p.useMemo(()=>{const a=NC();return ey(a,t,ny(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};OC(a,e.style,e),s.style={...a,...s.style}}return s}function iB(e=!1){return(n,r,s,{latestValues:a},i)=>{const c=(Yg(n)?aB:sB)(r,a,i,n),u=bz(r,typeof n=="string",e),d=n!==p.Fragment?{...u,...c,ref:s}:{},{children:h}=r,f=p.useMemo(()=>Vt(h)?h.get():h,[h]);return p.createElement(n,{...d,children:f})}}function oB(e,t){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const i={...Yg(r)?eB:tB,preloadedFeatures:e,useRender:iB(s),createVisualElement:t,Component:r};return Pz(i)}}function IC(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Mh(e,t,n){const r=e.getProps();return Xg(r,t,n!==void 0?n:r.custom,e)}const lB=Wg(()=>window.ScrollTimeline!==void 0);class cB{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(s=>{if(lB()&&s.attachTimeline)return s.attachTimeline(t);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,a)=>{s&&s(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class uB extends cB{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function sy(e,t){return e?e[t]||e.default||e:void 0}const Wp=2e4;function $C(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Wp;)t+=n,r=e.next(t);return t>=Wp?1/0:t}function ay(e){return typeof e=="function"}function $w(e,t){e.timeline=t,e.onfinish=null}const iy=e=>Array.isArray(e)&&typeof e[0]=="number",dB={linearEasing:void 0};function hB(e,t){const n=Wg(e);return()=>{var r;return(r=dB[t])!==null&&r!==void 0?r:n()}}const Cd=hB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),LC=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=e(uo(0,s-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function FC(e){return!!(typeof e=="function"&&Cd()||!e||typeof e=="string"&&(e in Hp||Cd())||iy(e)||Array.isArray(e)&&e.every(FC))}const Yo=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Hp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yo([0,.65,.55,1]),circOut:Yo([.55,0,1,.45]),backIn:Yo([.31,.01,.66,-.59]),backOut:Yo([.33,1.53,.69,.99])};function zC(e,t){if(e)return typeof e=="function"&&Cd()?LC(e,t):iy(e)?Yo(e):Array.isArray(e)?e.map(n=>zC(n,t)||Hp.easeOut):Hp[e]}const tr={x:!1,y:!1};function BC(){return tr.x||tr.y}function fB(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let s=document;const a=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function VC(e,t){const n=fB(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Lw(e){return t=>{t.pointerType==="touch"||BC()||e(t)}}function mB(e,t,n={}){const[r,s,a]=VC(e,n),i=Lw(o=>{const{target:c}=o,u=t(o);if(typeof u!="function"||!c)return;const d=Lw(h=>{u(h),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,s)});return r.forEach(o=>{o.addEventListener("pointerenter",i,s)}),a}const UC=(e,t)=>t?e===t?!0:UC(e,t.parentElement):!1,oy=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,pB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function gB(e){return pB.has(e.tagName)||e.tabIndex!==-1}const Xo=new WeakSet;function Fw(e){return t=>{t.key==="Enter"&&e(t)}}function Uf(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const yB=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Fw(()=>{if(Xo.has(n))return;Uf(n,"down");const s=Fw(()=>{Uf(n,"up")}),a=()=>Uf(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function zw(e){return oy(e)&&!BC()}function vB(e,t,n={}){const[r,s,a]=VC(e,n),i=o=>{const c=o.currentTarget;if(!zw(o)||Xo.has(c))return;Xo.add(c);const u=t(o),d=(m,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!zw(m)||!Xo.has(c))&&(Xo.delete(c),typeof u=="function"&&u(m,{success:y}))},h=m=>{d(m,n.useGlobalTarget||UC(c,m.target))},f=m=>{d(m,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(o=>{!gB(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",i,s),o.addEventListener("focus",u=>yB(u,s),s)}),a}function xB(e){return e==="x"||e==="y"?tr[e]?null:(tr[e]=!0,()=>{tr[e]=!1}):tr.x||tr.y?null:(tr.x=tr.y=!0,()=>{tr.x=tr.y=!1})}const WC=new Set(["width","height","top","left","right","bottom",...Eo]);let Ou;function wB(){Ou=void 0}const Ar={now:()=>(Ou===void 0&&Ar.set(Mt.isProcessing||pz.useManualTiming?Mt.timestamp:performance.now()),Ou),set:e=>{Ou=e,queueMicrotask(wB)}};function ly(e,t){e.indexOf(t)===-1&&e.push(t)}function cy(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class uy{constructor(){this.subscriptions=[]}add(t){return ly(this.subscriptions,t),()=>cy(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function HC(e,t){return t?e*(1e3/t):0}const Bw=30,bB=e=>!isNaN(parseFloat(e));class SB{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const a=Ar.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ar.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=bB(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new uy);const r=this.events[t].add(n);return t==="change"?()=>{r(),Ue.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ar.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Bw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Bw);return HC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jl(e,t){return new SB(e,t)}function kB(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Jl(n))}function jB(e,t){const n=Mh(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const i in a){const o=Iz(a[i]);kB(e,i,o)}}function CB(e){return!!(Vt(e)&&e.add)}function Gp(e,t){const n=e.getValue("willChange");if(CB(n))return n.add(t)}function GC(e){return e.props[SC]}const KC=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,EB=1e-7,TB=12;function MB(e,t,n,r,s){let a,i,o=0;do i=t+(n-t)/2,a=KC(i,r,s)-e,a>0?n=i:t=i;while(Math.abs(a)>EB&&++o<TB);return i}function wc(e,t,n,r){if(e===t&&n===r)return En;const s=a=>MB(a,0,1,e,n);return a=>a===0||a===1?a:KC(s(a),t,r)}const qC=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,YC=e=>t=>1-e(1-t),XC=wc(.33,1.53,.69,.99),dy=YC(XC),QC=qC(dy),JC=e=>(e*=2)<1?.5*dy(e):.5*(2-Math.pow(2,-10*(e-1))),hy=e=>1-Math.sin(Math.acos(e)),ZC=YC(hy),eE=qC(hy),tE=e=>/^0[^.\s]+$/u.test(e);function NB(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||tE(e):!0}const hl=e=>Math.round(e*1e5)/1e5,fy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function PB(e){return e==null}const _B=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,my=(e,t)=>n=>!!(typeof n=="string"&&_B.test(n)&&n.startsWith(e)||t&&!PB(n)&&Object.prototype.hasOwnProperty.call(n,t)),nE=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,a,i,o]=r.match(fy);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},RB=e=>ss(0,255,e),Wf={...To,transform:e=>Math.round(RB(e))},ba={test:my("rgb","red"),parse:nE("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Wf.transform(e)+", "+Wf.transform(t)+", "+Wf.transform(n)+", "+hl(Ql.transform(r))+")"};function AB(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Kp={test:my("#"),parse:AB,transform:ba.transform},Ci={test:my("hsl","hue"),parse:nE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Rr.transform(hl(t))+", "+Rr.transform(hl(n))+", "+hl(Ql.transform(r))+")"},Ft={test:e=>ba.test(e)||Kp.test(e)||Ci.test(e),parse:e=>ba.test(e)?ba.parse(e):Ci.test(e)?Ci.parse(e):Kp.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ba.transform(e):Ci.transform(e)},DB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function OB(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(fy))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(DB))===null||n===void 0?void 0:n.length)||0)>0}const rE="number",sE="color",IB="var",$B="var(",Vw="${}",LB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Zl(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const o=t.replace(LB,c=>(Ft.test(c)?(r.color.push(a),s.push(sE),n.push(Ft.parse(c))):c.startsWith($B)?(r.var.push(a),s.push(IB),n.push(c)):(r.number.push(a),s.push(rE),n.push(parseFloat(c))),++a,Vw)).split(Vw);return{values:n,split:o,indexes:r,types:s}}function aE(e){return Zl(e).values}function iE(e){const{split:t,types:n}=Zl(e),r=t.length;return s=>{let a="";for(let i=0;i<r;i++)if(a+=t[i],s[i]!==void 0){const o=n[i];o===rE?a+=hl(s[i]):o===sE?a+=Ft.transform(s[i]):a+=s[i]}return a}}const FB=e=>typeof e=="number"?0:e;function zB(e){const t=aE(e);return iE(e)(t.map(FB))}const Ys={test:OB,parse:aE,createTransformer:iE,getAnimatableNone:zB},BB=new Set(["brightness","contrast","saturate","opacity"]);function VB(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(fy)||[];if(!r)return e;const s=n.replace(r,"");let a=BB.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const UB=/\b([a-z-]*)\(.*?\)/gu,qp={...Ys,getAnimatableNone:e=>{const t=e.match(UB);return t?t.map(VB).join(" "):e}},WB={...Jg,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:qp,WebkitFilter:qp},py=e=>WB[e];function oE(e,t){let n=py(e);return n!==qp&&(n=Ys),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const HB=new Set(["auto","none","0"]);function GB(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!HB.has(a)&&Zl(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=oE(n,s)}const Uw=e=>e===To||e===ae,Ww=(e,t)=>parseFloat(e.split(", ")[t]),Hw=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return Ww(s[1],t);{const a=r.match(/^matrix\((.+)\)$/u);return a?Ww(a[1],e):0}},KB=new Set(["x","y","z"]),qB=Eo.filter(e=>!KB.has(e));function YB(e){const t=[];return qB.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const fo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Hw(4,13),y:Hw(5,14)};fo.translateX=fo.x;fo.translateY=fo.y;const _a=new Set;let Yp=!1,Xp=!1;function lE(){if(Xp){const e=Array.from(_a).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=YB(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,i])=>{var o;(o=r.getValue(a))===null||o===void 0||o.set(i)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Xp=!1,Yp=!1,_a.forEach(e=>e.complete()),_a.clear()}function cE(){_a.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Xp=!0)})}function XB(){cE(),lE()}class gy{constructor(t,n,r,s,a,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(_a.add(this),Yp||(Yp=!0,Ue.read(cE),Ue.resolveKeyframes(lE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const i=s==null?void 0:s.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const c=r.readValue(n,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),_a.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,_a.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const uE=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),QB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function JB(e){const t=QB.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function dE(e,t,n=1){const[r,s]=JB(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const i=a.trim();return uE(i)?parseFloat(i):i}return Qg(s)?dE(s,t,n+1):s}const hE=e=>t=>t.test(e),ZB={test:e=>e==="auto",parse:e=>e},fE=[To,ae,Rr,ps,Vz,Bz,ZB],Gw=e=>fE.find(hE(e));class mE extends gy{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),Qg(u))){const d=dE(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!WC.has(r)||t.length!==2)return;const[s,a]=t,i=Gw(s),o=Gw(a);if(i!==o)if(Uw(i)&&Uw(o))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)NB(t[s])&&r.push(s);r.length&&GB(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const i=s.length-1,o=s[i];s[i]=fo[r](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,u])=>{n.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const Kw=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ys.test(e)||e==="0")&&!e.startsWith("url("));function eV(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function tV(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=Kw(s,t),o=Kw(a,t);return!i||!o?!1:eV(e)||(n==="spring"||ay(n))&&r}const nV=e=>e!==null;function Nh(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(nV),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const rV=40;class pE{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ar.now(),this.options={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:i,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>rV?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&XB(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Ar.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:a,delay:i,onComplete:o,onUpdate:c,isGenerator:u}=this.options;if(!u&&!tV(t,r,s,a))if(i)this.options.duration=0;else{c&&c(Nh(t,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,n);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Xe=(e,t,n)=>e+(t-e)*n;function Hf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function sV({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,i=0;if(!t)s=a=i=n;else{const o=n<.5?n*(1+t):n+t-n*t,c=2*n-o;s=Hf(c,o,e+1/3),a=Hf(c,o,e),i=Hf(c,o,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:r}}function Ed(e,t){return n=>n>0?t:e}const Gf=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},aV=[Kp,ba,Ci],iV=e=>aV.find(t=>t.test(e));function qw(e){const t=iV(e);if(!t)return!1;let n=t.parse(e);return t===Ci&&(n=sV(n)),n}const Yw=(e,t)=>{const n=qw(e),r=qw(t);if(!n||!r)return Ed(e,t);const s={...n};return a=>(s.red=Gf(n.red,r.red,a),s.green=Gf(n.green,r.green,a),s.blue=Gf(n.blue,r.blue,a),s.alpha=Xe(n.alpha,r.alpha,a),ba.transform(s))},oV=(e,t)=>n=>t(e(n)),bc=(...e)=>e.reduce(oV),Qp=new Set(["none","hidden"]);function lV(e,t){return Qp.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function cV(e,t){return n=>Xe(e,t,n)}function yy(e){return typeof e=="number"?cV:typeof e=="string"?Qg(e)?Ed:Ft.test(e)?Yw:hV:Array.isArray(e)?gE:typeof e=="object"?Ft.test(e)?Yw:uV:Ed}function gE(e,t){const n=[...e],r=n.length,s=e.map((a,i)=>yy(a)(a,t[i]));return a=>{for(let i=0;i<r;i++)n[i]=s[i](a);return n}}function uV(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=yy(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function dV(e,t){var n;const r=[],s={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],o=e.indexes[i][s[i]],c=(n=e.values[o])!==null&&n!==void 0?n:0;r[a]=c,s[i]++}return r}const hV=(e,t)=>{const n=Ys.createTransformer(t),r=Zl(e),s=Zl(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Qp.has(e)&&!s.values.length||Qp.has(t)&&!r.values.length?lV(e,t):bc(gE(dV(r,s),s.values),n):Ed(e,t)};function yE(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Xe(e,t,n):yy(e)(e,t)}const fV=5;function vE(e,t,n){const r=Math.max(t-fV,0);return HC(n-e(r),t-r)}const st={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Kf=.001;function mV({duration:e=st.duration,bounce:t=st.bounce,velocity:n=st.velocity,mass:r=st.mass}){let s,a,i=1-t;i=ss(st.minDamping,st.maxDamping,i),e=ss(st.minDuration,st.maxDuration,Xr(e)),i<1?(s=u=>{const d=u*i,h=d*e,f=d-n,m=Jp(u,i),y=Math.exp(-h);return Kf-f/m*y},a=u=>{const h=u*i*e,f=h*n+n,m=Math.pow(i,2)*Math.pow(u,2)*e,y=Math.exp(-h),g=Jp(Math.pow(u,2),i);return(-s(u)+Kf>0?-1:1)*((f-m)*y)/g}):(s=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-Kf+d*h},a=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const o=5/e,c=gV(s,a,o);if(e=Yr(e),isNaN(c))return{stiffness:st.stiffness,damping:st.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:i*2*Math.sqrt(r*u),duration:e}}}const pV=12;function gV(e,t,n){let r=n;for(let s=1;s<pV;s++)r=r-e(r)/t(r);return r}function Jp(e,t){return e*Math.sqrt(1-t*t)}const yV=["duration","bounce"],vV=["stiffness","damping","mass"];function Xw(e,t){return t.some(n=>e[n]!==void 0)}function xV(e){let t={velocity:st.velocity,stiffness:st.stiffness,damping:st.damping,mass:st.mass,isResolvedFromDuration:!1,...e};if(!Xw(e,vV)&&Xw(e,yV))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*ss(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:st.mass,stiffness:s,damping:a}}else{const n=mV(e);t={...t,...n,mass:st.mass},t.isResolvedFromDuration=!0}return t}function xE(e=st.visualDuration,t=st.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=xV({...n,velocity:-Xr(n.velocity||0)}),y=f||0,g=u/(2*Math.sqrt(c*d)),v=i-a,x=Xr(Math.sqrt(c/d)),b=Math.abs(v)<5;r||(r=b?st.restSpeed.granular:st.restSpeed.default),s||(s=b?st.restDelta.granular:st.restDelta.default);let w;if(g<1){const k=Jp(x,g);w=j=>{const C=Math.exp(-g*x*j);return i-C*((y+g*x*v)/k*Math.sin(k*j)+v*Math.cos(k*j))}}else if(g===1)w=k=>i-Math.exp(-x*k)*(v+(y+x*v)*k);else{const k=x*Math.sqrt(g*g-1);w=j=>{const C=Math.exp(-g*x*j),E=Math.min(k*j,300);return i-C*((y+g*x*v)*Math.sinh(E)+k*v*Math.cosh(E))/k}}const S={calculatedDuration:m&&h||null,next:k=>{const j=w(k);if(m)o.done=k>=h;else{let C=0;g<1&&(C=k===0?Yr(y):vE(w,k,j));const E=Math.abs(C)<=r,M=Math.abs(i-j)<=s;o.done=E&&M}return o.value=o.done?i:j,o},toString:()=>{const k=Math.min($C(S),Wp),j=LC(C=>S.next(k*C).value,k,30);return k+"ms "+j}};return S}function Qw({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},m=E=>o!==void 0&&E<o||c!==void 0&&E>c,y=E=>o===void 0?c:c===void 0||Math.abs(o-E)<Math.abs(c-E)?o:c;let g=n*t;const v=h+g,x=i===void 0?v:i(v);x!==v&&(g=x-h);const b=E=>-g*Math.exp(-E/r),w=E=>x+b(E),S=E=>{const M=b(E),N=w(E);f.done=Math.abs(M)<=u,f.value=f.done?x:N};let k,j;const C=E=>{m(f.value)&&(k=E,j=xE({keyframes:[f.value,y(f.value)],velocity:vE(w,E,f.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return C(0),{calculatedDuration:null,next:E=>{let M=!1;return!j&&k===void 0&&(M=!0,S(E),C(E)),k!==void 0&&E>=k?j.next(E-k):(!M&&S(E),f)}}}const wV=wc(.42,0,1,1),bV=wc(0,0,.58,1),wE=wc(.42,0,.58,1),SV=e=>Array.isArray(e)&&typeof e[0]!="number",kV={linear:En,easeIn:wV,easeInOut:wE,easeOut:bV,circIn:hy,circInOut:eE,circOut:ZC,backIn:dy,backInOut:QC,backOut:XC,anticipate:JC},Jw=e=>{if(iy(e)){yC(e.length===4);const[t,n,r,s]=e;return wc(t,n,r,s)}else if(typeof e=="string")return kV[e];return e};function jV(e,t,n){const r=[],s=n||yE,a=e.length-1;for(let i=0;i<a;i++){let o=s(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||En:t;o=bc(c,o)}r.push(o)}return r}function CV(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(yC(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=jV(t,r,s),c=o.length,u=d=>{if(i&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=uo(e[h],e[h+1],d);return o[h](f)};return n?d=>u(ss(e[0],e[a-1],d)):u}function EV(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=uo(0,t,r);e.push(Xe(n,1,s))}}function TV(e){const t=[0];return EV(t,e.length-1),t}function MV(e,t){return e.map(n=>n*t)}function NV(e,t){return e.map(()=>t||wE).splice(0,e.length-1)}function Td({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=SV(r)?r.map(Jw):Jw(r),a={done:!1,value:t[0]},i=MV(n&&n.length===t.length?n:TV(t),e),o=CV(i,t,{ease:Array.isArray(s)?s:NV(t,s)});return{calculatedDuration:e,next:c=>(a.value=o(c),a.done=c>=e,a)}}const PV=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Ue.update(t,!0),stop:()=>qs(t),now:()=>Mt.isProcessing?Mt.timestamp:Ar.now()}},_V={decay:Qw,inertia:Qw,tween:Td,keyframes:Td,spring:xE},RV=e=>e/100;class vy extends pE{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:s,keyframes:a}=this.options,i=(s==null?void 0:s.KeyframeResolver)||gy,o=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new i(a,o,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=this.options,o=ay(n)?n:_V[n]||Td;let c,u;o!==Td&&typeof t[0]!="number"&&(c=bc(RV,yE(t[0],t[1])),t=[0,100]);const d=o({...this.options,keyframes:t});a==="mirror"&&(u=o({...this.options,keyframes:[...t].reverse(),velocity:-i})),d.calculatedDuration===null&&(d.calculatedDuration=$C(d));const{calculatedDuration:h}=d,f=h+s,m=f*(r+1)-s;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:s,generator:a,mirroredGenerator:i,mapPercentToKeyframes:o,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:h}=r;if(this.startTime===null)return a.next(0);const{delay:f,repeat:m,repeatType:y,repeatDelay:g,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const x=this.currentTime-f*(this.speed>=0?1:-1),b=this.speed>=0?x<0:x>d;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let w=this.currentTime,S=a;if(m){const E=Math.min(this.currentTime,d)/h;let M=Math.floor(E),N=E%1;!N&&E>=1&&(N=1),N===1&&M--,M=Math.min(M,m+1),!!(M%2)&&(y==="reverse"?(N=1-N,g&&(N-=g/h)):y==="mirror"&&(S=i)),w=ss(0,1,N)*h}const k=b?{done:!1,value:c[0]}:S.next(w);o&&(k.value=o(k.value));let{done:j}=k;!b&&u!==null&&(j=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return C&&s!==void 0&&(k.value=Nh(c,this.options,s)),v&&v(k.value),C&&this.finish(),k}get duration(){const{resolved:t}=this;return t?Xr(t.calculatedDuration):0}get time(){return Xr(this.currentTime)}set time(t){t=Yr(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Xr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=PV,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const AV=new Set(["opacity","clipPath","filter","transform"]);function DV(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeInOut",times:c}={}){const u={[t]:n};c&&(u.offset=c);const d=zC(o,s);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"})}const OV=Wg(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Md=10,IV=2e4;function $V(e){return ay(e.type)||e.type==="spring"||!FC(e.ease)}function LV(e,t){const n=new vy({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const s=[];let a=0;for(;!r.done&&a<IV;)r=n.sample(a),s.push(r.value),a+=Md;return{times:void 0,keyframes:s,duration:a-Md,ease:"linear"}}const bE={anticipate:JC,backInOut:QC,circInOut:eE};function FV(e){return e in bE}class Zw extends pE{constructor(t){super(t);const{name:n,motionValue:r,element:s,keyframes:a}=this.options;this.resolver=new mE(a,(i,o)=>this.onKeyframesResolved(i,o),n,r,s),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:s,ease:a,type:i,motionValue:o,name:c,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&Cd()&&FV(a)&&(a=bE[a]),$V(this.options)){const{onComplete:h,onUpdate:f,motionValue:m,element:y,...g}=this.options,v=LV(t,g);t=v.keyframes,t.length===1&&(t[1]=t[0]),r=v.duration,s=v.times,a=v.ease,i="keyframes"}const d=DV(o.owner.current,c,t,{...this.options,duration:r,times:s,ease:a});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?($w(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;o.set(Nh(t,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:s,type:i,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Xr(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Xr(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Yr(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return En;const{animation:r}=n;$w(r,t)}return En}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:s,type:a,ease:i,times:o}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:h,element:f,...m}=this.options,y=new vy({...m,keyframes:r,duration:s,type:a,ease:i,times:o,isGenerator:!0}),g=Yr(this.time);u.setWithVelocity(y.sample(g-Md).value,y.sample(g).value,Md)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:s,repeatType:a,damping:i,type:o}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=n.owner.getProps();return OV()&&r&&AV.has(r)&&!c&&!u&&!s&&a!=="mirror"&&i!==0&&o!=="inertia"}}const zV={type:"spring",stiffness:500,damping:25,restSpeed:10},BV=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),VV={type:"keyframes",duration:.8},UV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},WV=(e,{keyframes:t})=>t.length>2?VV:Ga.has(e)?e.startsWith("scale")?BV(t[1]):zV:UV;function HV({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const xy=(e,t,n,r={},s,a)=>i=>{const o=sy(r,e)||{},c=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Yr(c);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:f=>{t.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};HV(o)||(d={...d,...WV(e,d)}),d.duration&&(d.duration=Yr(d.duration)),d.repeatDelay&&(d.repeatDelay=Yr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!a&&t.get()!==void 0){const f=Nh(d.keyframes,o);if(f!==void 0)return Ue.update(()=>{d.onUpdate(f),d.onComplete()}),new uB([])}return!a&&Zw.supports(d)?new Zw(d):new vy(d)};function GV({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function SE(e,t,{delay:n=0,transitionOverride:r,type:s}={}){var a;let{transition:i=e.getDefaultTransition(),transitionEnd:o,...c}=t;r&&(i=r);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const h in c){const f=e.getValue(h,(a=e.latestValues[h])!==null&&a!==void 0?a:null),m=c[h];if(m===void 0||d&&GV(d,h))continue;const y={delay:n,...sy(i||{},h)};let g=!1;if(window.MotionHandoffAnimation){const x=GC(e);if(x){const b=window.MotionHandoffAnimation(x,h,Ue);b!==null&&(y.startTime=b,g=!0)}}Gp(e,h),f.start(xy(h,f,m,e.shouldReduceMotion&&WC.has(h)?{type:!1}:y,e,g));const v=f.animation;v&&u.push(v)}return o&&Promise.all(u).then(()=>{Ue.update(()=>{o&&jB(e,o)})}),u}function Zp(e,t,n={}){var r;const s=Mh(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const i=s?()=>Promise.all(SE(e,s,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=a;return KV(e,t,d+u,h,f,n)}:()=>Promise.resolve(),{when:c}=a;if(c){const[u,d]=c==="beforeChildren"?[i,o]:[o,i];return u().then(()=>d())}else return Promise.all([i(),o(n.delay)])}function KV(e,t,n=0,r=0,s=1,a){const i=[],o=(e.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(e.variantChildren).sort(qV).forEach((u,d)=>{u.notify("AnimationStart",t),i.push(Zp(u,t,{...a,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(i)}function qV(e,t){return e.sortNodePosition(t)}function YV(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>Zp(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=Zp(e,t,n);else{const s=typeof t=="function"?Mh(e,t,n.custom):t;r=Promise.all(SE(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const XV=Gg.length;function kE(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?kE(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<XV;n++){const r=Gg[n],s=e.props[r];(Xl(s)||s===!1)&&(t[r]=s)}return t}const QV=[...Hg].reverse(),JV=Hg.length;function ZV(e){return t=>Promise.all(t.map(({animation:n,options:r})=>YV(e,n,r)))}function e9(e){let t=ZV(e),n=eb(),r=!0;const s=c=>(u,d)=>{var h;const f=Mh(e,d,c==="exit"?(h=e.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:m,transitionEnd:y,...g}=f;u={...u,...g,...y}}return u};function a(c){t=c(e)}function i(c){const{props:u}=e,d=kE(e.parent)||{},h=[],f=new Set;let m={},y=1/0;for(let v=0;v<JV;v++){const x=QV[v],b=n[x],w=u[x]!==void 0?u[x]:d[x],S=Xl(w),k=x===c?b.isActive:null;k===!1&&(y=v);let j=w===d[x]&&w!==u[x]&&S;if(j&&r&&e.manuallyAnimateOnMount&&(j=!1),b.protectedKeys={...m},!b.isActive&&k===null||!w&&!b.prevProp||Eh(w)||typeof w=="boolean")continue;const C=t9(b.prevProp,w);let E=C||x===c&&b.isActive&&!j&&S||v>y&&S,M=!1;const N=Array.isArray(w)?w:[w];let T=N.reduce(s(x),{});k===!1&&(T={});const{prevResolvedValues:A={}}=b,L={...A,...T},D=F=>{E=!0,f.has(F)&&(M=!0,f.delete(F)),b.needsAnimating[F]=!0;const _=e.getValue(F);_&&(_.liveStyle=!1)};for(const F in L){const _=T[F],P=A[F];if(m.hasOwnProperty(F))continue;let O=!1;Up(_)&&Up(P)?O=!IC(_,P):O=_!==P,O?_!=null?D(F):f.add(F):_!==void 0&&f.has(F)?D(F):b.protectedKeys[F]=!0}b.prevProp=w,b.prevResolvedValues=T,b.isActive&&(m={...m,...T}),r&&e.blockInitialAnimation&&(E=!1),E&&(!(j&&C)||M)&&h.push(...N.map(F=>({animation:F,options:{type:x}})))}if(f.size){const v={};f.forEach(x=>{const b=e.getBaseTarget(x),w=e.getValue(x);w&&(w.liveStyle=!0),v[x]=b??null}),h.push({animation:v})}let g=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(h):Promise.resolve()}function o(c,u){var d;if(n[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(c,u)}),n[c].isActive=u;const h=i(c);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:i,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=eb(),r=!0}}}function t9(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!IC(t,e):!1}function la(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function eb(){return{animate:la(!0),whileInView:la(),whileHover:la(),whileTap:la(),whileDrag:la(),whileFocus:la(),exit:la()}}class sa{constructor(t){this.isMounted=!1,this.node=t}update(){}}class n9 extends sa{constructor(t){super(t),t.animationState||(t.animationState=e9(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Eh(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let r9=0;class s9 extends sa{constructor(){super(...arguments),this.id=r9++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const a9={animation:{Feature:n9},exit:{Feature:s9}};function ec(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Sc(e){return{point:{x:e.pageX,y:e.pageY}}}const i9=e=>t=>oy(t)&&e(t,Sc(t));function fl(e,t,n,r){return ec(e,t,i9(n),r)}const tb=(e,t)=>Math.abs(e-t);function o9(e,t){const n=tb(e.x,t.x),r=tb(e.y,t.y);return Math.sqrt(n**2+r**2)}class jE{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Yf(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=o9(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:y}=h,{timestamp:g}=Mt;this.history.push({...y,timestamp:g});const{onStart:v,onMove:x}=this.handlers;f||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=qf(f,this.transformPagePoint),Ue.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Yf(h.type==="pointercancel"?this.lastMoveEventInfo:qf(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,v),y&&y(h,v)},!oy(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const i=Sc(t),o=qf(i,this.transformPagePoint),{point:c}=o,{timestamp:u}=Mt;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,Yf(o,this.history)),this.removeListeners=bc(fl(this.contextWindow,"pointermove",this.handlePointerMove),fl(this.contextWindow,"pointerup",this.handlePointerUp),fl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),qs(this.updatePoint)}}function qf(e,t){return t?{point:t(e.point)}:e}function nb(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Yf({point:e},t){return{point:e,delta:nb(e,CE(t)),offset:nb(e,l9(t)),velocity:c9(t,.1)}}function l9(e){return e[0]}function CE(e){return e[e.length-1]}function c9(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=CE(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Yr(t)));)n--;if(!r)return{x:0,y:0};const a=Xr(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}const EE=1e-4,u9=1-EE,d9=1+EE,TE=.01,h9=0-TE,f9=0+TE;function Mn(e){return e.max-e.min}function m9(e,t,n){return Math.abs(e-t)<=n}function rb(e,t,n,r=.5){e.origin=r,e.originPoint=Xe(t.min,t.max,e.origin),e.scale=Mn(n)/Mn(t),e.translate=Xe(n.min,n.max,e.origin)-e.originPoint,(e.scale>=u9&&e.scale<=d9||isNaN(e.scale))&&(e.scale=1),(e.translate>=h9&&e.translate<=f9||isNaN(e.translate))&&(e.translate=0)}function ml(e,t,n,r){rb(e.x,t.x,n.x,r?r.originX:void 0),rb(e.y,t.y,n.y,r?r.originY:void 0)}function sb(e,t,n){e.min=n.min+t.min,e.max=e.min+Mn(t)}function p9(e,t,n){sb(e.x,t.x,n.x),sb(e.y,t.y,n.y)}function ab(e,t,n){e.min=t.min-n.min,e.max=e.min+Mn(t)}function pl(e,t,n){ab(e.x,t.x,n.x),ab(e.y,t.y,n.y)}function g9(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Xe(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Xe(n,e,r.max):Math.min(e,n)),e}function ib(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function y9(e,{top:t,left:n,bottom:r,right:s}){return{x:ib(e.x,n,s),y:ib(e.y,t,r)}}function ob(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function v9(e,t){return{x:ob(e.x,t.x),y:ob(e.y,t.y)}}function x9(e,t){let n=.5;const r=Mn(e),s=Mn(t);return s>r?n=uo(t.min,t.max-r,e.min):r>s&&(n=uo(e.min,e.max-s,t.min)),ss(0,1,n)}function w9(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const e0=.35;function b9(e=e0){return e===!1?e=0:e===!0&&(e=e0),{x:lb(e,"left","right"),y:lb(e,"top","bottom")}}function lb(e,t,n){return{min:cb(e,t),max:cb(e,n)}}function cb(e,t){return typeof e=="number"?e:e[t]||0}const ub=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ei=()=>({x:ub(),y:ub()}),db=()=>({min:0,max:0}),it=()=>({x:db(),y:db()});function An(e){return[e("x"),e("y")]}function ME({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function S9({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function k9(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Xf(e){return e===void 0||e===1}function t0({scale:e,scaleX:t,scaleY:n}){return!Xf(e)||!Xf(t)||!Xf(n)}function ha(e){return t0(e)||NE(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function NE(e){return hb(e.x)||hb(e.y)}function hb(e){return e&&e!=="0%"}function Nd(e,t,n){const r=e-n,s=t*r;return n+s}function fb(e,t,n,r,s){return s!==void 0&&(e=Nd(e,s,r)),Nd(e,n,r)+t}function n0(e,t=0,n=1,r,s){e.min=fb(e.min,t,n,r,s),e.max=fb(e.max,t,n,r,s)}function PE(e,{x:t,y:n}){n0(e.x,t.translate,t.scale,t.originPoint),n0(e.y,n.translate,n.scale,n.originPoint)}const mb=.999999999999,pb=1.0000000000001;function j9(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,i;for(let o=0;o<s;o++){a=n[o],i=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Mi(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,PE(e,i)),r&&ha(a.latestValues)&&Mi(e,a.latestValues))}t.x<pb&&t.x>mb&&(t.x=1),t.y<pb&&t.y>mb&&(t.y=1)}function Ti(e,t){e.min=e.min+t,e.max=e.max+t}function gb(e,t,n,r,s=.5){const a=Xe(e.min,e.max,s);n0(e,t,n,a,r)}function Mi(e,t){gb(e.x,t.x,t.scaleX,t.scale,t.originX),gb(e.y,t.y,t.scaleY,t.scale,t.originY)}function _E(e,t){return ME(k9(e.getBoundingClientRect(),t))}function C9(e,t,n){const r=_E(e,n),{scroll:s}=t;return s&&(Ti(r.x,s.offset.x),Ti(r.y,s.offset.y)),r}const RE=({current:e})=>e?e.ownerDocument.defaultView:null,E9=new WeakMap;class T9{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=it(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Sc(d).point)},a=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:y}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xB(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),An(v=>{let x=this.getAxisMotionValue(v).get()||0;if(Rr.test(x)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[v];w&&(x=Mn(w)*(parseFloat(x)/100))}}this.originPoint[v]=x}),y&&Ue.postRender(()=>y(d,h)),Gp(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},i=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:y,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:v}=h;if(m&&this.currentDirection===null){this.currentDirection=M9(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),g&&g(d,h)},o=(d,h)=>this.stop(d,h),c=()=>An(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new jE(t,{onSessionStart:s,onStart:a,onMove:i,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:RE(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&Ue.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!lu(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=g9(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&ji(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=y9(s.layoutBox,n):this.constraints=!1,this.elastic=b9(r),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&An(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=w9(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ji(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=C9(r,s.root,this.visualElement.getTransformPagePoint());let i=v9(s.layout.layoutBox,a);if(n){const o=n(S9(i));this.hasMutatedConstraints=!!o,o&&(i=ME(o))}return i}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=An(d=>{if(!lu(d,n,this.currentDirection))return;let h=c&&c[d]||{};i&&(h={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,y={type:"inertia",velocity:r?t[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,y)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Gp(this.visualElement,t),r.start(xy(t,r,0,n,this.visualElement,!1))}stopAnimation(){An(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){An(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){An(n=>{const{drag:r}=this.getProps();if(!lu(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:i,max:o}=s.layout.layoutBox[n];a.set(t[n]-Xe(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ji(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};An(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const c=o.get();s[i]=x9({min:c,max:c},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),An(i=>{if(!lu(i,t,null))return;const o=this.getAxisMotionValue(i),{min:c,max:u}=this.constraints[i];o.set(Xe(c,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;E9.set(this.visualElement,this);const t=this.visualElement.current,n=fl(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();ji(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ue.read(r);const i=ec(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(An(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{i(),n(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=e0,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:o}}}function lu(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function M9(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class N9 extends sa{constructor(t){super(t),this.removeGroupControls=En,this.removeListeners=En,this.controls=new T9(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||En}unmount(){this.removeGroupControls(),this.removeListeners()}}const yb=e=>(t,n)=>{e&&Ue.postRender(()=>e(t,n))};class P9 extends sa{constructor(){super(...arguments),this.removePointerDownListener=En}onPointerDown(t){this.session=new jE(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:RE(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:yb(t),onStart:yb(n),onMove:r,onEnd:(a,i)=>{delete this.session,s&&Ue.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=fl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Iu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function vb(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Fo={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ae.test(e))e=parseFloat(e);else return e;const n=vb(e,t.target.x),r=vb(e,t.target.y);return`${n}% ${r}%`}},_9={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Ys.parse(e);if(s.length>5)return r;const a=Ys.createTransformer(e),i=typeof s[0]!="number"?1:0,o=n.x.scale*t.x,c=n.y.scale*t.y;s[0+i]/=o,s[1+i]/=c;const u=Xe(o,c,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};class R9 extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;Jz(A9),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Iu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,i=r.projection;return i&&(i.isPresent=a,s||t.layoutDependency!==n||n===void 0?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||Ue.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),qg.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function AE(e){const[t,n]=pC(),r=p.useContext(zg);return l.jsx(R9,{...e,layoutGroup:r,switchLayoutGroup:p.useContext(kC),isPresent:t,safeToRemove:n})}const A9={borderRadius:{...Fo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fo,borderTopRightRadius:Fo,borderBottomLeftRadius:Fo,borderBottomRightRadius:Fo,boxShadow:_9};function D9(e,t,n){const r=Vt(e)?e:Jl(e);return r.start(xy("",r,t,n)),r.animation}function O9(e){return e instanceof SVGElement&&e.tagName!=="svg"}const I9=(e,t)=>e.depth-t.depth;class $9{constructor(){this.children=[],this.isDirty=!1}add(t){ly(this.children,t),this.isDirty=!0}remove(t){cy(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(I9),this.isDirty=!1,this.children.forEach(t)}}function L9(e,t){const n=Ar.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(qs(r),e(a-t))};return Ue.read(r,!0),()=>qs(r)}const DE=["TopLeft","TopRight","BottomLeft","BottomRight"],F9=DE.length,xb=e=>typeof e=="string"?parseFloat(e):e,wb=e=>typeof e=="number"||ae.test(e);function z9(e,t,n,r,s,a){s?(e.opacity=Xe(0,n.opacity!==void 0?n.opacity:1,B9(r)),e.opacityExit=Xe(t.opacity!==void 0?t.opacity:1,0,V9(r))):a&&(e.opacity=Xe(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let i=0;i<F9;i++){const o=`border${DE[i]}Radius`;let c=bb(t,o),u=bb(n,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||wb(c)===wb(u)?(e[o]=Math.max(Xe(xb(c),xb(u),r),0),(Rr.test(u)||Rr.test(c))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=Xe(t.rotate||0,n.rotate||0,r))}function bb(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const B9=OE(0,.5,ZC),V9=OE(.5,.95,En);function OE(e,t,n){return r=>r<e?0:r>t?1:n(uo(e,t,r))}function Sb(e,t){e.min=t.min,e.max=t.max}function Rn(e,t){Sb(e.x,t.x),Sb(e.y,t.y)}function kb(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function jb(e,t,n,r,s){return e-=t,e=Nd(e,1/n,r),s!==void 0&&(e=Nd(e,1/s,r)),e}function U9(e,t=0,n=1,r=.5,s,a=e,i=e){if(Rr.test(t)&&(t=parseFloat(t),t=Xe(i.min,i.max,t/100)-i.min),typeof t!="number")return;let o=Xe(a.min,a.max,r);e===a&&(o-=t),e.min=jb(e.min,t,n,o,s),e.max=jb(e.max,t,n,o,s)}function Cb(e,t,[n,r,s],a,i){U9(e,t[n],t[r],t[s],t.scale,a,i)}const W9=["x","scaleX","originX"],H9=["y","scaleY","originY"];function Eb(e,t,n,r){Cb(e.x,t,W9,n?n.x:void 0,r?r.x:void 0),Cb(e.y,t,H9,n?n.y:void 0,r?r.y:void 0)}function Tb(e){return e.translate===0&&e.scale===1}function IE(e){return Tb(e.x)&&Tb(e.y)}function Mb(e,t){return e.min===t.min&&e.max===t.max}function G9(e,t){return Mb(e.x,t.x)&&Mb(e.y,t.y)}function Nb(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function $E(e,t){return Nb(e.x,t.x)&&Nb(e.y,t.y)}function Pb(e){return Mn(e.x)/Mn(e.y)}function _b(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class K9{constructor(){this.members=[]}add(t){ly(this.members,t),t.scheduleRender()}remove(t){if(cy(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function q9(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=(n==null?void 0:n.z)||0;if((s||a||i)&&(r=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:y}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),y&&(r+=`skewY(${y}deg) `)}const o=e.x.scale*t.x,c=e.y.scale*t.y;return(o!==1||c!==1)&&(r+=`scale(${o}, ${c})`),r||"none"}const fa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Qo=typeof window<"u"&&window.MotionDebug!==void 0,Qf=["","X","Y","Z"],Y9={visibility:"hidden"},Rb=1e3;let X9=0;function Jf(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function LE(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=GC(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ue,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&LE(r)}function FE({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(i={},o=t==null?void 0:t()){this.id=X9++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qo&&(fa.totalNodes=fa.resolvedTargetDeltas=fa.recalculatedProjection=0),this.nodes.forEach(Z9),this.nodes.forEach(sU),this.nodes.forEach(aU),this.nodes.forEach(eU),Qo&&window.MotionDebug.record(fa)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new $9)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new uy),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const c=this.eventHandlers.get(i);c&&c.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=O9(i),this.instance=i;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(i,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=L9(f,250),Iu.hasAnimatedSinceResize&&(Iu.hasAnimatedSinceResize=!1,this.nodes.forEach(Db))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||uU,{onLayoutAnimationStart:v,onLayoutAnimationComplete:x}=d.getProps(),b=!this.targetLayout||!$E(this.targetLayout,y)||m,w=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||f&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const S={...sy(g,"layout"),onPlay:v,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||Db(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,qs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(iU),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&LE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ab);return}this.isUpdating||this.nodes.forEach(nU),this.isUpdating=!1,this.nodes.forEach(rU),this.nodes.forEach(Q9),this.nodes.forEach(J9),this.clearAllSnapshots();const o=Ar.now();Mt.delta=ss(0,1e3/60,o-Mt.timestamp),Mt.timestamp=o,Mt.isProcessing=!0,Vf.update.process(Mt),Vf.preRender.process(Mt),Vf.render.process(Mt),Mt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tU),this.sharedNodes.forEach(oU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=it(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!IE(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&(o||ha(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return i&&(c=this.removeTransform(c)),dU(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:o}=this.options;if(!o)return it();const c=o.measureViewportBox();if(!(((i=this.scroll)===null||i===void 0?void 0:i.wasRoot)||this.path.some(hU))){const{scroll:d}=this.root;d&&(Ti(c.x,d.offset.x),Ti(c.y,d.offset.y))}return c}removeElementScroll(i){var o;const c=it();if(Rn(c,i),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Rn(c,i),Ti(c.x,h.offset.x),Ti(c.y,h.offset.y))}return c}applyTransform(i,o=!1){const c=it();Rn(c,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Mi(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ha(d.latestValues)&&Mi(c,d.latestValues)}return ha(this.latestValues)&&Mi(c,this.latestValues),c}removeTransform(i){const o=it();Rn(o,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!ha(u.latestValues))continue;t0(u.latestValues)&&u.updateSnapshot();const d=it(),h=u.measurePageBox();Rn(d,h),Eb(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return ha(this.latestValues)&&Eb(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Mt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(i||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Mt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=it(),this.relativeTargetOrigin=it(),pl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=it(),this.targetWithTransforms=it()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),p9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Rn(this.target,this.layout.layoutBox),PE(this.target,this.targetDelta)):Rn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=it(),this.relativeTargetOrigin=it(),pl(this.relativeTargetOrigin,this.target,m.target),Rn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qo&&fa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||t0(this.parent.latestValues)||NE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Mt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Rn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;j9(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=it());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(kb(this.prevProjectionDelta.x,this.projectionDelta.x),kb(this.prevProjectionDelta.y,this.projectionDelta.y)),ml(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!_b(this.projectionDelta.x,this.prevProjectionDelta.x)||!_b(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Qo&&fa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),i){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ei(),this.projectionDelta=Ei(),this.projectionDeltaWithTransform=Ei()}setAnimationOrigin(i,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Ei();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=it(),m=c?c.source:void 0,y=this.layout?this.layout.source:void 0,g=m!==y,v=this.getStack(),x=!v||v.members.length<=1,b=!!(g&&!x&&this.options.crossfade===!0&&!this.path.some(cU));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const k=S/1e3;Ob(h.x,i.x,k),Ob(h.y,i.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pl(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lU(this.relativeTarget,this.relativeTargetOrigin,f,k),w&&G9(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=it()),Rn(w,this.relativeTarget)),g&&(this.animationValues=d,z9(d,u,this.latestValues,k,b,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(qs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ue.update(()=>{Iu.hasAnimatedSinceResize=!0,this.currentAnimation=D9(0,Rb,{...i,onUpdate:o=>{this.mixTargetDelta(o),i.onUpdate&&i.onUpdate(o)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Rb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=i;if(!(!o||!c||!u)){if(this!==i&&this.layout&&u&&zE(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||it();const h=Mn(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+h;const f=Mn(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+f}Rn(o,c),Mi(o,d),ml(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new K9),this.sharedNodes.get(i).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:o}=this.options;return o?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:o}=this.options;return o?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&Jf("z",i,u,this.animationValues);for(let d=0;d<Qf.length;d++)Jf(`rotate${Qf[d]}`,i,u,this.animationValues),Jf(`skew${Qf[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}getProjectionStyles(i){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Y9;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Du(i==null?void 0:i.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Du(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!ha(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=q9(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in jd){if(f[g]===void 0)continue;const{correct:v,applyTo:x}=jd[g],b=u.transform==="none"?f[g]:v(f[g],h);if(x){const w=x.length;for(let S=0;S<w;S++)u[x[S]]=b}else u[g]=b}return this.options.layoutId&&(u.pointerEvents=h===this?Du(i==null?void 0:i.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var o;return(o=i.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(Ab),this.root.sharedNodes.clear()}}}function Q9(e){e.updateLayout()}function J9(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:a}=e.options,i=n.source!==e.layout.source;a==="size"?An(h=>{const f=i?n.measuredBox[h]:n.layoutBox[h],m=Mn(f);f.min=r[h].min,f.max=f.min+m}):zE(a,n.layoutBox,r)&&An(h=>{const f=i?n.measuredBox[h]:n.layoutBox[h],m=Mn(r[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const o=Ei();ml(o,r,n.layoutBox);const c=Ei();i?ml(c,e.applyTransform(s,!0),n.measuredBox):ml(c,r,n.layoutBox);const u=!IE(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const y=it();pl(y,n.layoutBox,f.layoutBox);const g=it();pl(g,r,m.layoutBox),$E(y,g)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Z9(e){Qo&&fa.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function eU(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function tU(e){e.clearSnapshot()}function Ab(e){e.clearMeasurements()}function nU(e){e.isLayoutDirty=!1}function rU(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Db(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function sU(e){e.resolveTargetDelta()}function aU(e){e.calcProjection()}function iU(e){e.resetSkewAndRotation()}function oU(e){e.removeLeadSnapshot()}function Ob(e,t,n){e.translate=Xe(t.translate,0,n),e.scale=Xe(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Ib(e,t,n,r){e.min=Xe(t.min,n.min,r),e.max=Xe(t.max,n.max,r)}function lU(e,t,n,r){Ib(e.x,t.x,n.x,r),Ib(e.y,t.y,n.y,r)}function cU(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const uU={duration:.45,ease:[.4,0,.1,1]},$b=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Lb=$b("applewebkit/")&&!$b("chrome/")?Math.round:En;function Fb(e){e.min=Lb(e.min),e.max=Lb(e.max)}function dU(e){Fb(e.x),Fb(e.y)}function zE(e,t,n){return e==="position"||e==="preserve-aspect"&&!m9(Pb(t),Pb(n),.2)}function hU(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const fU=FE({attachResizeListener:(e,t)=>ec(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Zf={current:void 0},BE=FE({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Zf.current){const e=new fU({});e.mount(window),e.setOptions({layoutScroll:!0}),Zf.current=e}return Zf.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),mU={pan:{Feature:P9},drag:{Feature:N9,ProjectionNode:BE,MeasureLayout:AE}};function zb(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&Ue.postRender(()=>a(t,Sc(t)))}class pU extends sa{mount(){const{current:t}=this.node;t&&(this.unmount=mB(t,n=>(zb(this.node,n,"Start"),r=>zb(this.node,r,"End"))))}unmount(){}}class gU extends sa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bc(ec(this.node.current,"focus",()=>this.onFocus()),ec(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Bb(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&Ue.postRender(()=>a(t,Sc(t)))}class yU extends sa{mount(){const{current:t}=this.node;t&&(this.unmount=vB(t,n=>(Bb(this.node,n,"Start"),(r,{success:s})=>Bb(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const r0=new WeakMap,em=new WeakMap,vU=e=>{const t=r0.get(e.target);t&&t(e)},xU=e=>{e.forEach(vU)};function wU({root:e,...t}){const n=e||document;em.has(n)||em.set(n,{});const r=em.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(xU,{root:e,...t})),r[s]}function bU(e,t,n){const r=wU(t);return r0.set(e,n),r.observe(e),()=>{r0.delete(e),r.unobserve(e)}}const SU={some:0,all:1};class kU extends sa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:SU[s]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return bU(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(jU(t,n))&&this.startObserver()}unmount(){}}function jU({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const CU={inView:{Feature:kU},tap:{Feature:yU},focus:{Feature:gU},hover:{Feature:pU}},EU={layout:{ProjectionNode:BE,MeasureLayout:AE}},s0={current:null},VE={current:!1};function TU(){if(VE.current=!0,!!Ug)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>s0.current=e.matches;e.addListener(t),t()}else s0.current=!1}const MU=[...fE,Ft,Ys],NU=e=>MU.find(hE(e)),Vb=new WeakMap;function PU(e,t,n){for(const r in t){const s=t[r],a=n[r];if(Vt(s))e.addValue(r,s);else if(Vt(a))e.addValue(r,Jl(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const i=e.getValue(r);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(r);e.addValue(r,Jl(i!==void 0?i:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Ub=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _U{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Ar.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ue.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:d}=i;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=Th(n),this.isVariantNode=bC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const y=f[m];c[m]!==void 0&&Vt(y)&&y.set(c[m],!1)}}mount(t){this.current=t,Vb.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),VE.current||TU(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:s0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Vb.delete(this.current),this.projection&&this.projection.unmount(),qs(this.notifyUpdate),qs(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Ga.has(t),s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ue.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ho){const n=ho[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):it()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Ub.length;r++){const s=Ub[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=PU(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Jl(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(uE(s)||tE(s))?s=parseFloat(s):!NU(s)&&Ys.test(n)&&(s=oE(t,n)),this.setBaseTarget(t,Vt(s)?s.get():s)),Vt(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const i=Xg(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);i&&(s=i[t])}if(r&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Vt(a)?a:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new uy),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class UE extends _U{constructor(){super(...arguments),this.KeyframeResolver=mE}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Vt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function RU(e){return window.getComputedStyle(e)}class AU extends UE{constructor(){super(...arguments),this.type="html",this.renderInstance=PC}readValueFromInstance(t,n){if(Ga.has(n)){const r=py(n);return r&&r.default||0}else{const r=RU(t),s=(TC(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return _E(t,n)}build(t,n,r){Zg(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return ry(t,n,r)}}class DU extends UE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=it}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ga.has(n)){const r=py(n);return r&&r.default||0}return n=_C.has(n)?n:Kg(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return DC(t,n,r)}build(t,n,r){ey(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,s){RC(t,n,r,s)}mount(t){this.isSVGTag=ny(t.tagName),super.mount(t)}}const OU=(e,t)=>Yg(e)?new DU(t):new AU(t,{allowProjection:e!==p.Fragment}),IU=oB({...a9,...CU,...mU,...EU},OU),qe=Sz(IU);function $U({coverUrl:e,isGenerating:t,onRegenerate:n,dreamTitle:r}){const[s,a]=p.useState(!1),i=()=>{if(!e)return;const o=document.createElement("a");o.href=e,o.download=`dream-cover-${Date.now()}.png`,o.click()};return l.jsxs(qe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[l.jsx(Ut,{className:"h-5 w-5 text-primary"}),""]}),e&&!t&&l.jsxs("div",{className:"flex gap-2",children:[n&&l.jsxs(Ne,{variant:"outline",size:"sm",onClick:n,children:[l.jsx(uc,{className:"h-4 w-4 mr-1"}),""]}),l.jsxs(Ne,{variant:"outline",size:"sm",onClick:i,children:[l.jsx(o5,{className:"h-4 w-4 mr-1"}),""]})]})]}),l.jsx("div",{className:q("relative aspect-[2/3] max-w-[280px] mx-auto rounded-lg overflow-hidden","bg-gradient-to-br from-primary/20 via-background to-primary/10","border-2 border-primary/30 shadow-2xl shadow-primary/20"),children:l.jsx(Vp,{mode:"wait",children:t?l.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-0 animate-ping",children:l.jsx(Ut,{className:"h-12 w-12 text-primary/30"})}),l.jsx(Al,{className:"h-12 w-12 text-primary animate-spin"})]}),l.jsxs("div",{className:"text-center space-y-1",children:[l.jsx("p",{className:"text-sm font-medium",children:"..."}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"AI "})]}),l.jsx("div",{className:"flex gap-1",children:[0,1,2].map(o=>l.jsx(qe.div,{className:"w-2 h-2 rounded-full bg-primary",animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,delay:o*.2}},o))})]},"loading"):e?l.jsxs(qe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{type:"spring",damping:20},className:"relative w-full h-full",children:[l.jsx("img",{src:e,alt:"Dream Cover",className:q("w-full h-full object-cover transition-opacity duration-500",s?"opacity-100":"opacity-0"),onLoad:()=>a(!0)}),l.jsx("div",{className:"absolute inset-y-0 left-0 w-4 bg-gradient-to-r from-black/30 to-transparent"}),r&&l.jsx("div",{className:"absolute bottom-0 inset-x-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:l.jsx("p",{className:"text-white text-sm font-medium line-clamp-2",children:r})})]},"image"):l.jsxs(qe.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 flex flex-col items-center justify-center gap-3 p-6 text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center",children:l.jsx(Ut,{className:"h-8 w-8 text-primary/60"})}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[' ""',l.jsx("br",{}),""]})]},"placeholder")})})]})}var Ph="Dialog",[WE]=Gn(Ph),[LU,gr]=WE(Ph),HE=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,o=p.useRef(null),c=p.useRef(null),[u,d]=Ws({prop:r,defaultProp:s??!1,onChange:a,caller:Ph});return l.jsx(LU,{scope:t,triggerRef:o,contentRef:c,contentId:Fs(),titleId:Fs(),descriptionId:Fs(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:i,children:n})};HE.displayName=Ph;var GE="DialogTrigger",FU=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=gr(GE,n),a=ye(t,s.triggerRef);return l.jsx(ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Sy(s.open),...r,ref:a,onClick:Q(e.onClick,s.onOpenToggle)})});FU.displayName=GE;var wy="DialogPortal",[zU,KE]=WE(wy,{forceMount:void 0}),qE=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=gr(wy,t);return l.jsx(zU,{scope:t,forceMount:n,children:p.Children.map(r,i=>l.jsx(Kn,{present:n||a.open,children:l.jsx(Zd,{asChild:!0,container:s,children:i})}))})};qE.displayName=wy;var Pd="DialogOverlay",YE=p.forwardRef((e,t)=>{const n=KE(Pd,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=gr(Pd,e.__scopeDialog);return a.modal?l.jsx(Kn,{present:r||a.open,children:l.jsx(VU,{...s,ref:t})}):null});YE.displayName=Pd;var BU=ao("DialogOverlay.RemoveScroll"),VU=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=gr(Pd,n);return l.jsx(Ag,{as:BU,allowPinchZoom:!0,shards:[s.contentRef],children:l.jsx(ne.div,{"data-state":Sy(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),za="DialogContent",XE=p.forwardRef((e,t)=>{const n=KE(za,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=gr(za,e.__scopeDialog);return l.jsx(Kn,{present:r||a.open,children:a.modal?l.jsx(UU,{...s,ref:t}):l.jsx(WU,{...s,ref:t})})});XE.displayName=za;var UU=p.forwardRef((e,t)=>{const n=gr(za,e.__scopeDialog),r=p.useRef(null),s=ye(t,n.contentRef,r);return p.useEffect(()=>{const a=r.current;if(a)return Qk(a)},[]),l.jsx(QE,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Q(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Q(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,o=i.button===0&&i.ctrlKey===!0;(i.button===2||o)&&a.preventDefault()}),onFocusOutside:Q(e.onFocusOutside,a=>a.preventDefault())})}),WU=p.forwardRef((e,t)=>{const n=gr(za,e.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return l.jsx(QE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,o;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),QE=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,o=gr(za,n),c=p.useRef(null),u=ye(t,c);return qk(),l.jsxs(l.Fragment,{children:[l.jsx(_g,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:l.jsx(lc,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":Sy(o.open),...i,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(HU,{titleId:o.titleId}),l.jsx(KU,{contentRef:c,descriptionId:o.descriptionId})]})]})}),by="DialogTitle",JE=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=gr(by,n);return l.jsx(ne.h2,{id:s.titleId,...r,ref:t})});JE.displayName=by;var ZE="DialogDescription",eT=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=gr(ZE,n);return l.jsx(ne.p,{id:s.descriptionId,...r,ref:t})});eT.displayName=ZE;var tT="DialogClose",nT=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=gr(tT,n);return l.jsx(ne.button,{type:"button",...r,ref:t,onClick:Q(e.onClick,()=>s.onOpenChange(!1))})});nT.displayName=tT;function Sy(e){return e?"open":"closed"}var rT="DialogTitleWarning",[lK,sT]=GP(rT,{contentName:za,titleName:by,docsSlug:"dialog"}),HU=({titleId:e})=>{const t=sT(rT),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},GU="DialogDescriptionWarning",KU=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${sT(GU).contentName}}.`;return p.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},qU=HE,YU=qE,aT=YE,iT=XE,oT=JE,lT=eT,XU=nT;const QU=qU,JU=YU,cT=p.forwardRef(({className:e,...t},n)=>l.jsx(aT,{ref:n,className:q("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));cT.displayName=aT.displayName;const uT=p.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(JU,{children:[l.jsx(cT,{}),l.jsxs(iT,{ref:r,className:q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,l.jsxs(XU,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[l.jsx(vo,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));uT.displayName=iT.displayName;const dT=({className:e,...t})=>l.jsx("div",{className:q("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});dT.displayName="DialogHeader";const hT=p.forwardRef(({className:e,...t},n)=>l.jsx(oT,{ref:n,className:q("text-lg font-semibold leading-none tracking-tight",e),...t}));hT.displayName=oT.displayName;const ZU=p.forwardRef(({className:e,...t},n)=>l.jsx(lT,{ref:n,className:q("text-sm text-muted-foreground",e),...t}));ZU.displayName=lT.displayName;function Fr({children:e,delay:t=0,duration:n=400}){const[r,s]=p.useState(!1);return p.useEffect(()=>{const a=setTimeout(()=>s(!0),t);return()=>clearTimeout(a)},[t]),l.jsx("div",{className:"transition-all",style:{opacity:r?1:0,transform:r?"translateY(0)":"translateY(16px)",transitionDuration:`${n}ms`,transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e})}function e7(){var k;const e=Cg(),[t,n]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState(!1),[o,c]=p.useState(!1),[u,d]=p.useState(null),[h,f]=p.useState(!1),[m,y]=p.useState({date:new Date().toISOString().split("T")[0],wakeTime:"",world:"",newWorld:"",timeSystem:"unknown",environments:[],newEnvironment:"",selectedEntities:[],newEntity:"",threatLevel:0,safetyOverride:"none",exit:"unknown",notes:"",storySummary:"",emotions:[],atmosphereColors:[],lucidityLevel:5});p.useEffect(()=>{(async()=>{const[C,E]=await Promise.all([gc(),gh()]);n(C.map(M=>({id:M.id,name:M.name}))),s(E.map(M=>({id:M.id,name:M.name})))})()},[]);const g=async()=>{c(!0);try{const{data:j,error:C}=await ot.functions.invoke("generate-cover",{body:{storySummary:m.storySummary||m.notes,emotions:m.emotions,atmosphereColors:m.atmosphereColors,environments:m.environments,world:m.newWorld||m.world,threatLevel:m.threatLevel,lucidityLevel:m.lucidityLevel}});return C?(console.error("Cover generation error:",C),ii({title:"",description:C.message,variant:"destructive"}),null):j!=null&&j.coverUrl?(d(j.coverUrl),j.coverUrl):null}catch(j){return console.error("Cover generation failed:",j),ii({title:"",description:"",variant:"destructive"}),null}finally{c(!1)}},v=async j=>{j.preventDefault(),i(!0);try{const C=m.newWorld||m.world,E=[...m.selectedEntities];m.newEntity&&E.push(m.newEntity);const M=[...m.environments];m.newEnvironment&&M.push(m.newEnvironment);const N=[m.storySummary,m.notes].filter(Boolean).join(`

---

`);await $k({date:m.date,wakeTime:m.wakeTime,world:C,timeSystem:m.timeSystem,environments:M,entities:E,threatLevel:m.threatLevel,safetyOverride:m.safetyOverride,exit:m.exit,notes:N||void 0})?(ii({title:""}),m.storySummary||m.notes?(f(!0),await g()):e("/logs")):ii({title:"",variant:"destructive"})}catch(C){console.error("Error saving dream:",C),ii({title:"",variant:"destructive"})}finally{i(!1)}},x=j=>{y(C=>({...C,environments:C.environments.includes(j)?C.environments.filter(E=>E!==j):[...C.environments,j]}))},b=j=>{y(C=>({...C,selectedEntities:C.selectedEntities.includes(j)?C.selectedEntities.filter(E=>E!==j):[...C.selectedEntities,j]}))},w=()=>{m.newEnvironment&&!m.environments.includes(m.newEnvironment)&&y(j=>({...j,environments:[...j.environments,j.newEnvironment],newEnvironment:""}))},S=()=>{f(!1),e("/logs")};return l.jsxs("div",{className:"py-4 pb-28",children:[l.jsx(Fr,{delay:0,duration:400,children:l.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[l.jsx(Ne,{variant:"ghost",size:"icon",onClick:()=>e(-1),children:l.jsx(a5,{className:"w-4 h-4"})}),l.jsxs("div",{children:[l.jsxs("h1",{className:"flex items-center gap-2",children:[l.jsx(rh,{className:"w-5 h-5"}),""]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]})}),l.jsxs("form",{onSubmit:v,className:"space-y-6",children:[l.jsx(Fr,{delay:60,duration:400,children:l.jsxs("div",{className:"p-4 rounded-xl bg-gradient-to-br from-primary/10 via-background to-primary/5 border border-primary/20",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Ut,{className:"w-5 h-5 text-primary"}),l.jsx("h2",{className:"font-semibold",children:""})]}),l.jsx(uz,{storySummary:m.storySummary,onStorySummaryChange:j=>y(C=>({...C,storySummary:j})),emotions:m.emotions,onEmotionsChange:j=>y(C=>({...C,emotions:j})),atmosphereColors:m.atmosphereColors,onAtmosphereColorsChange:j=>y(C=>({...C,atmosphereColors:j})),lucidityLevel:m.lucidityLevel,onLucidityLevelChange:j=>y(C=>({...C,lucidityLevel:j}))})]})}),l.jsx(Fr,{delay:120,duration:400,children:l.jsx(DF,{date:m.date,wakeTime:m.wakeTime,onDateChange:j=>y(C=>({...C,date:j})),onWakeTimeChange:j=>y(C=>({...C,wakeTime:j}))})}),l.jsx(Fr,{delay:180,duration:400,children:l.jsx(OF,{worlds:t,selectedWorld:m.world,newWorld:m.newWorld,onWorldChange:j=>y(C=>({...C,world:j})),onNewWorldChange:j=>y(C=>({...C,newWorld:j}))})}),l.jsx(Fr,{delay:240,duration:400,children:l.jsx(UF,{timeSystem:m.timeSystem,threatLevel:m.threatLevel,safetyOverride:m.safetyOverride,exit:m.exit,onTimeSystemChange:j=>y(C=>({...C,timeSystem:j})),onThreatLevelChange:j=>y(C=>({...C,threatLevel:j})),onSafetyOverrideChange:j=>y(C=>({...C,safetyOverride:j})),onExitChange:j=>y(C=>({...C,exit:j}))})}),l.jsx(Fr,{delay:300,duration:400,children:l.jsx($F,{selectedEnvironments:m.environments,newEnvironment:m.newEnvironment,onToggleEnvironment:x,onNewEnvironmentChange:j=>y(C=>({...C,newEnvironment:j})),onAddEnvironment:w})}),l.jsx(Fr,{delay:360,duration:400,children:l.jsx(VF,{entities:r,selectedEntities:m.selectedEntities,newEntity:m.newEntity,onToggleEntity:b,onNewEntityChange:j=>y(C=>({...C,newEntity:j}))})}),l.jsx(Fr,{delay:420,duration:400,children:l.jsxs("div",{className:"space-y-2",children:[l.jsx(Xt,{htmlFor:"notes",children:"Notes  (optional)"}),l.jsx(yc,{id:"notes",placeholder:"  , ...",value:m.notes,onChange:j=>y(C=>({...C,notes:j.target.value})),className:"min-h-[80px]"})]})}),l.jsx(Fr,{delay:480,duration:400,children:l.jsx(Ne,{type:"submit",className:"w-full gap-2",disabled:a||o,children:a?"...":l.jsxs(l.Fragment,{children:[l.jsx(Ut,{className:"w-4 h-4"}),""]})})})]}),l.jsx(QU,{open:h,onOpenChange:f,children:l.jsxs(uT,{className:"sm:max-w-md",children:[l.jsx(dT,{children:l.jsxs(hT,{className:"flex items-center gap-2",children:[l.jsx(Ut,{className:"w-5 h-5 text-primary"}),""]})}),l.jsx($U,{coverUrl:u,isGenerating:o,onRegenerate:g,dreamTitle:((k=m.storySummary)==null?void 0:k.slice(0,50))||m.world}),l.jsx("div",{className:"flex justify-end gap-2 mt-4",children:l.jsx(Ne,{variant:"outline",onClick:S,children:""})})]})})]})}function t7({dreamId:e,isEditing:t,saving:n,onBack:r,onEdit:s,onCancel:a,onSave:i,onDelete:o}){return l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ne,{variant:"ghost",size:"icon",onClick:r,children:l.jsx(a5,{className:"w-4 h-4"})}),l.jsx("span",{className:"text-sm font-mono text-muted-foreground",children:e})]}),l.jsx("div",{className:"flex gap-1",children:t?l.jsxs(l.Fragment,{children:[l.jsx(Ne,{variant:"ghost",size:"icon",onClick:a,disabled:n,children:l.jsx(vo,{className:"w-4 h-4"})}),l.jsx(Ne,{size:"icon",onClick:i,disabled:n,children:l.jsx(eR,{className:"w-4 h-4"})})]}):l.jsxs(l.Fragment,{children:[l.jsx(Ne,{variant:"ghost",size:"icon",onClick:s,children:l.jsx(lg,{className:"w-4 h-4"})}),l.jsx(Ne,{variant:"ghost",size:"icon",onClick:o,children:l.jsx(nR,{className:"w-4 h-4"})})]})})]})}function n7({editForm:e,onFormChange:t}){return l.jsx(Hn,{value:e.world,onChange:n=>t({world:n.target.value}),className:"text-xl font-semibold mb-2",placeholder:""})}function r7({editForm:e,onFormChange:t}){return l.jsxs(Fn,{value:String(e.threatLevel),onValueChange:n=>t({threatLevel:Number(n)}),children:[l.jsx(Sn,{className:"h-8",children:l.jsx(zn,{})}),l.jsx(kn,{children:[0,1,2,3,4,5].map(n=>l.jsxs(Nt,{value:String(n),children:["Level ",n]},n))})]})}function s7({editForm:e,onFormChange:t}){return l.jsxs(Fn,{value:e.timeSystem,onValueChange:n=>t({timeSystem:n}),children:[l.jsx(Sn,{className:"h-8",children:l.jsx(zn,{})}),l.jsx(kn,{children:Og.map(n=>l.jsx(Nt,{value:n,children:n},n))})]})}function a7({editForm:e,onFormChange:t}){return l.jsxs(Fn,{value:e.safetyOverride,onValueChange:n=>t({safetyOverride:n}),children:[l.jsx(Sn,{className:"h-8",children:l.jsx(zn,{})}),l.jsx(kn,{children:Ig.map(n=>l.jsx(Nt,{value:n,children:n},n))})]})}function i7({editForm:e,onFormChange:t}){return l.jsxs(Fn,{value:e.exit,onValueChange:n=>t({exit:n}),children:[l.jsx(Sn,{className:"h-8",children:l.jsx(zn,{})}),l.jsx(kn,{children:Vj.map(n=>l.jsx(Nt,{value:n,children:n},n))})]})}function o7({editForm:e,onFormChange:t}){return l.jsx(Hn,{value:e.environments.join(", "),onChange:n=>t({environments:n.target.value.split(",").map(r=>r.trim()).filter(Boolean)}),placeholder:"fog, sea, mountain ()"})}function l7({editForm:e,onFormChange:t}){return l.jsx(Hn,{value:e.entities.join(", "),onChange:n=>t({entities:n.target.value.split(",").map(r=>r.trim()).filter(Boolean)}),placeholder:"Entity1, Entity2 ()"})}function c7({editForm:e,onFormChange:t}){return l.jsx(yc,{value:e.notes,onChange:n=>t({notes:n.target.value}),className:"min-h-[120px]",placeholder:"..."})}const u7={0:"bg-muted text-muted-foreground",1:"bg-yellow-100 text-yellow-800",2:"bg-orange-100 text-orange-800",3:"bg-orange-200 text-orange-900",4:"bg-red-100 text-red-800",5:"bg-red-200 text-red-900"};function d7({dream:e,isEditing:t,editForm:n,onFormChange:r}){return l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"card-minimal",children:[l.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Threat Level"}),t?l.jsx(r7,{editForm:n,onFormChange:r}):l.jsx("span",{className:`threat-badge text-lg ${u7[e.threatLevel]}`,children:e.threatLevel})]}),l.jsxs("div",{className:"card-minimal",children:[l.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Time System"}),t?l.jsx(s7,{editForm:n,onFormChange:r}):l.jsx("p",{className:"font-medium",children:e.timeSystem})]}),l.jsxs("div",{className:"card-minimal",children:[l.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Safety Override"}),t?l.jsx(a7,{editForm:n,onFormChange:r}):l.jsx("p",{className:"font-medium",children:e.safetyOverride})]}),l.jsxs("div",{className:"card-minimal",children:[l.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Exit"}),t?l.jsx(i7,{editForm:n,onFormChange:r}):l.jsx("p",{className:"font-medium",children:e.exit})]})]})}function si({children:e,delay:t=0,duration:n=400}){const[r,s]=p.useState(!1);return p.useEffect(()=>{const a=setTimeout(()=>s(!0),t);return()=>clearTimeout(a)},[t]),l.jsx("div",{className:"transition-all",style:{opacity:r?1:0,transform:r?"translateY(0)":"translateY(16px)",transitionDuration:`${n}ms`,transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e})}function h7(){const{id:e}=oD(),t=Cg(),[n,r]=p.useState(null),[s,a]=p.useState(!0),[i,o]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState({world:"",threatLevel:0,timeSystem:"unknown",safetyOverride:"unknown",exit:"unknown",environments:[],entities:[],notes:""});p.useEffect(()=>{(async()=>{try{const S=(await Ha()).find(k=>k.id===e);r(S||null),S&&h({world:S.world,threatLevel:S.threatLevel,timeSystem:S.timeSystem,safetyOverride:S.safetyOverride,exit:S.exit,environments:S.environments,entities:S.entities,notes:S.notes||""})}catch(w){console.error("Error loading dream:",w)}finally{a(!1)}})()},[e]);const f=b=>{h(w=>({...w,...b}))},m=()=>o(!0),y=()=>{n&&h({world:n.world,threatLevel:n.threatLevel,timeSystem:n.timeSystem,safetyOverride:n.safetyOverride,exit:n.exit,environments:n.environments,entities:n.entities,notes:n.notes||""}),o(!1)},g=async()=>{if(n){u(!0);try{const b=await S8(n.id,d);b?(r(b),o(!1),an.success("")):an.error("")}catch(b){console.error("Error saving:",b),an.error("")}finally{u(!1)}}},v=async()=>{n&&confirm("?")&&(await k8(n.id)?(an.success(""),t("/logs")):an.error(""))};if(s)return l.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"..."});if(!n)return l.jsxs("div",{className:"py-4",children:[l.jsx("p",{className:"text-muted-foreground",children:""}),l.jsx(Ne,{asChild:!0,variant:"link",className:"mt-2 p-0",children:l.jsx(dn,{to:"/logs",children:""})})]});const x=new Date(n.date).toLocaleDateString("th-TH",{weekday:"long",day:"numeric",month:"long",year:"numeric"});return l.jsxs("div",{className:"py-4 space-y-6",children:[l.jsx(si,{delay:0,duration:400,children:l.jsx(t7,{dreamId:n.id,isEditing:i,saving:c,onBack:()=>t(-1),onEdit:m,onCancel:y,onSave:g,onDelete:v})}),l.jsx(si,{delay:80,duration:400,children:l.jsxs("div",{children:[i?l.jsx(n7,{editForm:d,onFormChange:f}):l.jsx("h1",{className:"text-xl mb-1",children:n.world}),l.jsxs("p",{className:"text-muted-foreground",children:[x,"  ",n.wakeTime]})]})}),l.jsx(si,{delay:160,duration:400,children:l.jsx(d7,{dream:n,isEditing:i,editForm:d,onFormChange:f})}),l.jsx(si,{delay:240,duration:400,children:l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Environments"}),i?l.jsx(o7,{editForm:d,onFormChange:f}):n.environments.length>0?l.jsx("div",{className:"flex flex-wrap gap-2",children:n.environments.map(b=>l.jsx("span",{className:"tag",children:b},b))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"-"})]})}),l.jsx(si,{delay:320,duration:400,children:l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Entities"}),i?l.jsx(l7,{editForm:d,onFormChange:f}):n.entities.length>0?l.jsx("div",{className:"flex flex-wrap gap-2",children:n.entities.map(b=>l.jsx("span",{className:"tag-accent",children:b},b))}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"-"})]})}),l.jsx(si,{delay:400,duration:400,children:l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Notes"}),i?l.jsx(c7,{editForm:d,onFormChange:f}):n.notes?l.jsx("p",{className:"text-sm whitespace-pre-wrap",children:n.notes}):l.jsx("p",{className:"text-sm text-muted-foreground",children:"-"})]})})]})}function Je(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function as(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function fT(e,t){const n=Je(e);return isNaN(t)?as(e,NaN):(t&&n.setDate(n.getDate()+t),n)}const mT=6048e5,f7=864e5,pT=6e4,gT=36e5;let m7={};function _h(){return m7}function ur(e,t){var o,c,u,d;const n=_h(),r=(t==null?void 0:t.weekStartsOn)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Je(e),a=s.getDay(),i=(a<r?7:0)+a-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function _d(e){return ur(e,{weekStartsOn:1})}function yT(e){const t=Je(e),n=t.getFullYear(),r=as(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=_d(r),a=as(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const i=_d(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function Rd(e){const t=Je(e);return t.setHours(0,0,0,0),t}function Wb(e){const t=Je(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function p7(e,t){const n=Rd(e),r=Rd(t),s=+n-Wb(n),a=+r-Wb(r);return Math.round((s-a)/f7)}function g7(e){const t=yT(e),n=as(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),_d(n)}function y7(e,t){const n=t*7;return fT(e,n)}function ky(e){return as(e,Date.now())}function v7(e,t){const n=Rd(e),r=Rd(t);return+n==+r}function x7(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Jo(e){if(!x7(e)&&typeof e!="number")return!1;const t=Je(e);return!isNaN(Number(t))}function w7(e,t){const n=Je(e.start),r=Je(e.end);let s=+n>+r;const a=s?+n:+r,i=s?r:n;i.setHours(0,0,0,0);let o=1;const c=[];for(;+i<=a;)c.push(Je(i)),i.setDate(i.getDate()+o),i.setHours(0,0,0,0);return s?c.reverse():c}function b7(e,t){const n=Je(e.start),r=Je(e.end);let s=+n>+r;const a=s?+n:+r,i=s?r:n;i.setHours(0,0,0,0),i.setDate(1);let o=1;const c=[];for(;+i<=a;)c.push(Je(i)),i.setMonth(i.getMonth()+o);return s?c.reverse():c}function S7(e,t){const n=Je(e.start),r=Je(e.end);let s=+n>+r;const a=ur(s?r:n,t),i=ur(s?n:r,t);a.setHours(15),i.setHours(15);const o=+i.getTime();let c=a,u=(t==null?void 0:t.step)??1;if(!u)return[];u<0&&(u=-u,s=!s);const d=[];for(;+c<=o;)c.setHours(0),d.push(Je(c)),c=y7(c,u),c.setHours(15);return s?d.reverse():d}function k7(e){const t=Je(e),n=as(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const j7={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},C7=(e,t,n)=>{let r;const s=j7[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Bi(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const E7={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},T7={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},M7={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},N7={date:Bi({formats:E7,defaultWidth:"full"}),time:Bi({formats:T7,defaultWidth:"full"}),dateTime:Bi({formats:M7,defaultWidth:"full"})},P7={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_7=(e,t,n,r)=>P7[e];function Cr(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=e.formattingValues[o]||e.formattingValues[i]}else{const i=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[o]||e.values[i]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const R7={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},A7={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},D7={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},O7={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},I7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$7={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},L7=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},F7={ordinalNumber:L7,era:Cr({values:R7,defaultWidth:"wide"}),quarter:Cr({values:A7,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Cr({values:D7,defaultWidth:"wide"}),day:Cr({values:O7,defaultWidth:"wide"}),dayPeriod:Cr({values:I7,defaultWidth:"wide",formattingValues:$7,defaultFormattingWidth:"wide"})};function Er(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const i=a[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(o)?B7(o,h=>h.test(i)):z7(o,h=>h.test(i));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(i.length);return{value:u,rest:d}}}function z7(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function B7(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function vT(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],a=t.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=n.valueCallback?n.valueCallback(i):i;const o=t.slice(s.length);return{value:i,rest:o}}}const V7=/^(\d+)(th|st|nd|rd)?/i,U7=/\d+/i,W7={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},H7={any:[/^b/i,/^(a|c)/i]},G7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},K7={any:[/1/i,/2/i,/3/i,/4/i]},q7={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Y7={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},X7={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Q7={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},J7={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Z7={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},eW={ordinalNumber:vT({matchPattern:V7,parsePattern:U7,valueCallback:e=>parseInt(e,10)}),era:Er({matchPatterns:W7,defaultMatchWidth:"wide",parsePatterns:H7,defaultParseWidth:"any"}),quarter:Er({matchPatterns:G7,defaultMatchWidth:"wide",parsePatterns:K7,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Er({matchPatterns:q7,defaultMatchWidth:"wide",parsePatterns:Y7,defaultParseWidth:"any"}),day:Er({matchPatterns:X7,defaultMatchWidth:"wide",parsePatterns:Q7,defaultParseWidth:"any"}),dayPeriod:Er({matchPatterns:J7,defaultMatchWidth:"any",parsePatterns:Z7,defaultParseWidth:"any"})},tW={code:"en-US",formatDistance:C7,formatLong:N7,formatRelative:_7,localize:F7,match:eW,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nW(e){const t=Je(e);return p7(t,k7(t))+1}function rW(e){const t=Je(e),n=+_d(t)-+g7(t);return Math.round(n/mT)+1}function xT(e,t){var d,h,f,m;const n=Je(e),r=n.getFullYear(),s=_h(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,i=as(e,0);i.setFullYear(r+1,0,a),i.setHours(0,0,0,0);const o=ur(i,t),c=as(e,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=ur(c,t);return n.getTime()>=o.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function sW(e,t){var o,c,u,d;const n=_h(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=xT(e,t),a=as(e,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),ur(a,t)}function aW(e,t){const n=Je(e),r=+ur(n,t)-+sW(n,t);return Math.round(r/mT)+1}function _e(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const hs={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return _e(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):_e(n+1,2)},d(e,t){return _e(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return _e(e.getHours()%12||12,t.length)},H(e,t){return _e(e.getHours(),t.length)},m(e,t){return _e(e.getMinutes(),t.length)},s(e,t){return _e(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return _e(s,t.length)}},ai={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Hb={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return hs.y(e,t)},Y:function(e,t,n,r){const s=xT(e,r),a=s>0?s:1-s;if(t==="YY"){const i=a%100;return _e(i,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):_e(a,t.length)},R:function(e,t){const n=yT(e);return _e(n,t.length)},u:function(e,t){const n=e.getFullYear();return _e(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return _e(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return _e(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return hs.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return _e(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=aW(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):_e(s,t.length)},I:function(e,t,n){const r=rW(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):_e(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):hs.d(e,t)},D:function(e,t,n){const r=nW(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):_e(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return _e(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return _e(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return _e(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=ai.noon:r===0?s=ai.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=ai.evening:r>=12?s=ai.afternoon:r>=4?s=ai.morning:s=ai.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return hs.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):hs.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):_e(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):_e(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):hs.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):hs.s(e,t)},S:function(e,t){return hs.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Kb(r);case"XXXX":case"XX":return ma(r);case"XXXXX":case"XXX":default:return ma(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Kb(r);case"xxxx":case"xx":return ma(r);case"xxxxx":case"xxx":default:return ma(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Gb(r,":");case"OOOO":default:return"GMT"+ma(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Gb(r,":");case"zzzz":default:return"GMT"+ma(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return _e(r,t.length)},T:function(e,t,n){const r=e.getTime();return _e(r,t.length)}};function Gb(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+t+_e(a,2)}function Kb(e,t){return e%60===0?(e>0?"-":"+")+_e(Math.abs(e)/60,2):ma(e,t)}function ma(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=_e(Math.trunc(r/60),2),a=_e(r%60,2);return n+s+t+a}const qb=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},wT=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},iW=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return qb(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",qb(r,t)).replace("{{time}}",wT(s,t))},oW={p:wT,P:iW},lW=/^D+$/,cW=/^Y+$/,uW=["D","DD","YY","YYYY"];function dW(e){return lW.test(e)}function hW(e){return cW.test(e)}function fW(e,t,n){const r=mW(e,t,n);if(console.warn(r),uW.includes(e))throw new RangeError(r)}function mW(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const pW=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gW=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yW=/^'([^]*?)'?$/,vW=/''/g,xW=/[a-zA-Z]/;function zt(e,t,n){var d,h,f,m,y,g,v,x;const r=_h(),s=(n==null?void 0:n.locale)??r.locale??tW,a=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((g=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((x=(v=r.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??0,o=Je(e);if(!Jo(o))throw new RangeError("Invalid time value");let c=t.match(gW).map(b=>{const w=b[0];if(w==="p"||w==="P"){const S=oW[w];return S(b,s.formatLong)}return b}).join("").match(pW).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const w=b[0];if(w==="'")return{isToken:!1,value:wW(b)};if(Hb[w])return{isToken:!0,value:b};if(w.match(xW))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(c=s.localize.preprocessor(o,c));const u={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return c.map(b=>{if(!b.isToken)return b.value;const w=b.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&hW(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&dW(w))&&fW(w,t,String(e));const S=Hb[w[0]];return S(o,w,s.localize,u)}).join("")}function wW(e){const t=e.match(yW);return t?t[1].replace(vW,"'"):e}function bW(e,t,n){const r=ur(e,n),s=ur(t,n);return+r==+s}function SW(e,t){const n=Je(e),r=Je(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function kW(e){return SW(e,ky(e))}function jW(e,t){return bW(e,ky(e),t)}function CW(e){return v7(e,ky(e))}function EW(e,t){return fT(e,-t)}function TW(e,t){const r=_W(e);let s;if(r.date){const c=RW(r.date,2);s=AW(c.restDateString,c.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const a=s.getTime();let i=0,o;if(r.time&&(i=DW(r.time),isNaN(i)))return new Date(NaN);if(r.timezone){if(o=OW(r.timezone),isNaN(o))return new Date(NaN)}else{const c=new Date(a+i),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(a+i+o)}const cu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},MW=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,NW=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,PW=/^([+-])(\d{2})(?::?(\d{2}))?$/;function _W(e){const t={},n=e.split(cu.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],cu.timeZoneDelimiter.test(t.date)&&(t.date=e.split(cu.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const s=cu.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function RW(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?s:a*100,restDateString:e.slice((r[1]||r[2]).length)}}function AW(e,t){if(t===null)return new Date(NaN);const n=e.match(MW);if(!n)return new Date(NaN);const r=!!n[4],s=zo(n[1]),a=zo(n[2])-1,i=zo(n[3]),o=zo(n[4]),c=zo(n[5])-1;if(r)return zW(t,o,c)?IW(t,o,c):new Date(NaN);{const u=new Date(0);return!LW(t,a,i)||!FW(t,s)?new Date(NaN):(u.setUTCFullYear(t,a,Math.max(s,i)),u)}}function zo(e){return e?parseInt(e):1}function DW(e){const t=e.match(NW);if(!t)return NaN;const n=tm(t[1]),r=tm(t[2]),s=tm(t[3]);return BW(n,r,s)?n*gT+r*pT+s*1e3:NaN}function tm(e){return e&&parseFloat(e.replace(",","."))||0}function OW(e){if(e==="Z")return 0;const t=e.match(PW);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return VW(r,s)?n*(r*gT+s*pT):NaN}function IW(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const s=r.getUTCDay()||7,a=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}const $W=[31,null,31,30,31,30,31,31,30,31,30,31];function bT(e){return e%400===0||e%4===0&&e%100!==0}function LW(e,t,n){return t>=0&&t<=11&&n>=1&&n<=($W[t]||(bT(e)?29:28))}function FW(e,t){return t>=1&&t<=(bT(e)?366:365)}function zW(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function BW(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function VW(e,t){return t>=0&&t<=59}function UW(){return l.jsx("div",{className:"aspect-[3/4] rounded-lg overflow-hidden",children:l.jsx(me,{className:"w-full h-full"})})}function WW(){return l.jsxs("div",{className:"bg-card rounded-lg border",children:[l.jsxs("div",{className:"flex items-center justify-between p-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(me,{className:"w-1 h-8 rounded-full"}),l.jsxs("div",{className:"space-y-1",children:[l.jsx(me,{className:"h-4 w-20"}),l.jsx(me,{className:"h-3 w-16"})]})]}),l.jsx(me,{className:"w-5 h-5 rounded"})]}),l.jsx("div",{className:"p-4 pt-0",children:l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:[...Array(4)].map((e,t)=>l.jsx(UW,{},t))})})]})}function HW(){return l.jsx("div",{className:"space-y-4 p-4",children:[...Array(3)].map((e,t)=>l.jsx(WW,{},t))})}const GW={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xHours:{one:"1 ",other:"{{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},KW=(e,t,n)=>{let r;const s=GW[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?e==="halfAMinute"?""+r:" "+r:r+"":r},qW={full:"EEEE do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},YW={full:"H:mm:ss . zzzz",long:"H:mm:ss . z",medium:"H:mm:ss .",short:"H:mm ."},XW={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},QW={date:Bi({formats:qW,defaultWidth:"full"}),time:Bi({formats:YW,defaultWidth:"medium"}),dateTime:Bi({formats:XW,defaultWidth:"full"})},JW={lastWeek:"eeee'' p",yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:"eeee '' p",other:"P"},ZW=(e,t,n,r)=>JW[e],eH={narrow:["B",""],abbreviated:["BC",".."],wide:["",""]},tH={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["","","",""]},nH={narrow:[".",".",".",".",".",".","."],short:[".",".",".",".",".",".","."],abbreviated:[".",".",".",".",".",".","."],wide:["","","","","","",""]},rH={narrow:["..","..","..","..","..","..","..","..","..","..","..",".."],abbreviated:["..","..","..","..","..","..","..","..","..","..","..",".."],wide:["","","","","","","","","","","",""]},sH={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},aH={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},iH=(e,t)=>String(e),oH={ordinalNumber:iH,era:Cr({values:eH,defaultWidth:"wide"}),quarter:Cr({values:tH,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Cr({values:rH,defaultWidth:"wide"}),day:Cr({values:nH,defaultWidth:"wide"}),dayPeriod:Cr({values:sH,defaultWidth:"wide",formattingValues:aH,defaultFormattingWidth:"wide"})},lH=/^\d+/i,cH=/\d+/i,uH={narrow:/^([bB]|[aA]|)/i,abbreviated:/^([bB]\.?\s?[cC]\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?|\.?\.?)/i,wide:/^(||)/i},dH={any:[/^[bB]/i,/^(^[aA]|\.?\.?|||)/i]},hH={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^()? ?[1234]/i},fH={any:[/(1||)/i,/(2|)/i,/(3|)/i,/(4|)/i]},mH={narrow:/^(\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?)/i,abbreviated:/^(\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?')/i,wide:/^(|||||||||||)/i},pH={wide:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i]},gH={narrow:/^(\.?|\.?|\.?|\.?|\.?|\.?|\.?)/i,short:/^(\.?|\.?|\.?|\.?|\.?|\.?|\.?)/i,abbreviated:/^(\.?|\.?|\.?|\.?|\.?|\.?|\.?)/i,wide:/^(||||||)/i},yH={wide:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^(?!)/i,/^/i,/^/i,/^/i]},vH={any:/^(||||(.*?)?.*(||||))/i},xH={any:{am:/^/i,pm:/^/i,midnight:/^/i,noon:/^/i,morning://i,afternoon://i,evening://i,night://i}},wH={ordinalNumber:vT({matchPattern:lH,parsePattern:cH,valueCallback:e=>parseInt(e,10)}),era:Er({matchPatterns:uH,defaultMatchWidth:"wide",parsePatterns:dH,defaultParseWidth:"any"}),quarter:Er({matchPatterns:hH,defaultMatchWidth:"wide",parsePatterns:fH,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Er({matchPatterns:mH,defaultMatchWidth:"wide",parsePatterns:pH,defaultParseWidth:"any"}),day:Er({matchPatterns:gH,defaultMatchWidth:"wide",parsePatterns:yH,defaultParseWidth:"any"}),dayPeriod:Er({matchPatterns:vH,defaultMatchWidth:"any",parsePatterns:xH,defaultParseWidth:"any"})},Xs={code:"th",formatDistance:KW,formatLong:QW,formatRelative:ZW,localize:oH,match:wH,options:{weekStartsOn:0,firstWeekContainsDate:1}};function bH(e){const[t,n]=p.useState(null),[r,s]=p.useState(!1),[a,i]=p.useState(null);return p.useEffect(()=>{n(null),s(!1)},[e.id,e.notes,e.world,e.environments,e.threatLevel,e.entities]),{style:t,loading:r,error:a}}const Ni=new Map;let ST=0;const SH=250;function kT(){Ni.forEach((e,t)=>{if(!e.el){Ni.delete(t);return}const n=e.el.getBoundingClientRect();e.rect=n,e.center={x:n.left+n.width/2,y:n.top+n.height/2}}),ST=typeof performance<"u"?performance.now():Date.now()}function kH(e){e-ST>SH&&kT()}const jH={fog:{hue:200,saturation:20},sea:{hue:200,saturation:70},mountain:{hue:30,saturation:40},city:{hue:45,saturation:60},tunnel:{hue:280,saturation:30},rain:{hue:220,saturation:50},night:{hue:260,saturation:80},sunset:{hue:15,saturation:90}},uu={inactive:{brightness:.7,animSpeed:.3},activated:{brightness:1.2,animSpeed:.8},unknown:{brightness:.9,animSpeed:.5}},Yb={none:"diagonal",helper:"circular",separation:"grid",wake:"radial",unknown:"noise"},du={wake:{glow:"#60a5fa",symbol:""},separation:{glow:"#a78bfa",symbol:""},collapse:{glow:"#f87171",symbol:""},unknown:{glow:"#9ca3af",symbol:""}},Xb={0:{base:"#064e3b",accent:"#34d399"},1:{base:"#1e3a5f",accent:"#60a5fa"},2:{base:"#312e81",accent:"#818cf8"},3:{base:"#581c87",accent:"#c084fc"},4:{base:"#7c2d12",accent:"#fb923c"},5:{base:"#7f1d1d",accent:"#f87171"}};function nm(e){return e.split("").reduce((t,n,r)=>t+n.charCodeAt(0)*(r+1),0)}function rm(e,t,n){return Math.min(n,Math.max(t,e))}function hu(e){const t=e%360;return t<0?t+360:t}function CH(e){if(e==null)return null;if(e instanceof Date)return Jo(e)?e:null;if(typeof e=="string"){const t=TW(e);if(Jo(t))return t;const n=new Date(e);return Jo(n)?n:null}if(typeof e=="number"){const t=new Date(e);return Jo(t)?t:null}return null}function fu(e,t){const n=Math.min(1,Math.max(0,t));if(e.startsWith("hsla("))return e.replace(/hsla\(([^,]+),([^,]+),([^,]+),[^)]+\)/,`hsla($1,$2,$3,${n})`);if(e.startsWith("hsl("))return e.replace("hsl(","hsla(").replace(")",`, ${n})`);if(e.startsWith("rgba("))return e.replace(/rgba\(([^,]+),([^,]+),([^,]+),[^)]+\)/,`rgba($1,$2,$3,${n})`);if(e.startsWith("rgb("))return e.replace("rgb(","rgba(").replace(")",`, ${n})`);if(e.startsWith("#")){let r=e.slice(1);if(r.length===3&&(r=r.split("").map(s=>s+s).join("")),r.length>=6){const s=Math.round(n*255).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${s}`}}return e}function EH(e,t){if(t){const S={dim:.6,normal:1,bright:1.2,glowing:1.5}[t.brightness]||1,k=rm(t.saturation,0,100),j=rm(t.saturation-10,0,100),C=rm(k+20,0,90),E=hu(t.primaryHue),M=hu(t.secondaryHue),N=hu(t.accentHue),T={waves:"diagonal",circles:"circular",stars:"radial",lines:"diagonal",dots:"grid",crystals:"radial",smoke:"noise",spiral:"circular"},A=`hsl(${E}, ${k}%, 25%)`,L=`hsl(${M}, ${j}%, 35%)`,D=`hsl(${N}, ${C}%, 60%)`;return{primary:A,secondary:L,accent:D,gradientAngle:hu(t.gradientAngle),particleCount:20+e.threatLevel*4,patternType:T[t.pattern]||"grid",patternSeed:nm(t.mood+t.symbolType),timeEffect:uu[e.timeSystem]||uu.unknown,exitStyle:du[e.exit]||du.unknown,brightness:S,animSpeed:t.particleStyle==="pulsing"?.8:t.particleStyle==="orbiting"?.6:.4,aiEnhanced:!0,aiMood:t.mood,aiSymbolType:t.symbolType,aiSymbolComplexity:t.symbolComplexity,aiSymbolRotation:t.symbolRotation,aiKeywords:t.keywords,particleStyle:t.particleStyle}}let n=240,r=50;if(e.environments&&e.environments.length>0){const w=e.environments.map(S=>jH[S]||{hue:200,saturation:50});n=w.reduce((S,k)=>S+k.hue,0)/w.length,r=w.reduce((S,k)=>S+k.saturation,0)/w.length}const s=Xb[e.threatLevel]||Xb[2],a=uu[e.timeSystem]||uu.unknown,i=Yb[e.safetyOverride]||Yb.unknown,o=du[e.exit]||du.unknown,c=e.entityCount,u=10+c*3+e.threatLevel*4,d=nm(e.world||"unknown"),h=nm(e.id),f=(d+h)%360,m=(n+e.threatLevel*15)%360,y=(m+30+c*10)%360,g=`hsl(${m}, ${Math.min(90,r+20)}%, ${25+e.threatLevel*3}%)`,v=`hsl(${y}, ${Math.min(85,r+10)}%, ${35+e.threatLevel*2}%)`,x=s.accent,b=d*h+e.threatLevel*100+c*50;return{primary:g,secondary:v,accent:x,gradientAngle:f,particleCount:u,patternType:i,patternSeed:b,timeEffect:a,exitStyle:o,brightness:a.brightness,animSpeed:a.animSpeed*(1+e.threatLevel*.15),aiEnhanced:!1,aiMood:null,aiSymbolType:null,aiSymbolComplexity:3,aiSymbolRotation:"slow",aiKeywords:[],particleStyle:"floating"}}function TH(e,t,n){const r=["dot"];return(e.includes("night")||e.includes("sunset"))&&r.push("star"),(e.includes("fog")||e.includes("sea"))&&r.push("ring"),t>=3&&r.push("triangle"),t>=4&&r.push("diamond"),n>0&&r.push("star","ring"),r}function jT({dream:e}){var ve,we;const t=p.useRef(null),n=p.useRef(null),r=p.useRef(null),s=p.useRef([]),a=p.useRef([]),i=p.useRef(),o=p.useRef(0),c=p.useRef(0),u=p.useRef({width:0,height:0,fieldWidth:0,fieldHeight:0}),d=p.useRef(!0),h=e.id,f=e.world,m=e.threatLevel,y=e.timeSystem,g=e.safetyOverride,v=e.exit,x=(e.environments??[]).join("|"),b=((ve=e.entities)==null?void 0:ve.length)??0,w=p.useMemo(()=>CH(e.date),[e.date]),S=p.useMemo(()=>`dream-${h}`,[h]),{style:k}=bH(e),j=k!=null,C=k==null?void 0:k.primaryHue,E=k==null?void 0:k.secondaryHue,M=k==null?void 0:k.accentHue,N=k==null?void 0:k.saturation,T=k==null?void 0:k.brightness,A=k==null?void 0:k.pattern,L=k==null?void 0:k.particleStyle,D=k==null?void 0:k.gradientAngle,H=k==null?void 0:k.mood,R=k==null?void 0:k.symbolType,F=k==null?void 0:k.symbolComplexity,_=k==null?void 0:k.symbolRotation,P=((we=k==null?void 0:k.keywords)==null?void 0:we.join(""))??"",O=p.useMemo(()=>j?{mood:H??"",primaryHue:C??0,secondaryHue:E??0,accentHue:M??0,saturation:N??0,brightness:T??"normal",pattern:A??"dots",particleStyle:L??"floating",gradientAngle:D??0,symbolType:R??"moon",symbolComplexity:F??1,symbolRotation:_??"none",keywords:P?P.split(""):[]}:null,[j,H,C,E,M,N,T,A,L,D,R,F,_,P]),I=p.useMemo(()=>x?x.split("|"):[],[x]),U=p.useMemo(()=>({id:h,world:f,threatLevel:m,timeSystem:y,safetyOverride:g,exit:v,environments:I,entityCount:b}),[h,f,m,y,g,v,I,b]),B=p.useMemo(()=>EH(U,O),[U,O]),Z=p.useMemo(()=>TH(I,m,b),[I,m,b]),[K,ee]=p.useState(()=>({particleScale:.75,maxDpr:1.5,fps:30,spill:14,speedScale:1,enableSpill:!0,enablePattern:!0,enableMagnetic:!0,magneticStrength:.0026,magneticRadiusScale:1.1,enableFog:!0,fogLayerCount:4,fogSpeedScale:1,fogOpacity:1}));p.useEffect(()=>{var gt;if(typeof window>"u")return;const pe=((gt=window.matchMedia)==null?void 0:gt.call(window,"(prefers-reduced-motion: reduce)").matches)??!1,ue=(navigator.hardwareConcurrency||8)<=4,je={particleScale:pe?.35:ue?.55:.75,maxDpr:pe?1:ue?1.25:1.5,fps:pe?18:ue?24:30,spill:pe?10:14,speedScale:pe?.6:ue?.8:1,enableSpill:!pe,enablePattern:!pe,enableMagnetic:!pe,magneticStrength:ue?.0018:.0026,magneticRadiusScale:ue?.9:1.1,enableFog:!pe,fogLayerCount:ue?3:4,fogSpeedScale:ue?.8:1,fogOpacity:ue?.8:1};ee(Rt=>Object.keys(je).every(hn=>Rt[hn]===je[hn])?Rt:je)},[]);const V=K.spill,xe=fu(B.accent,.45);p.useEffect(()=>{const pe=r.current;if(pe)return Ni.set(S,{el:pe,rect:pe.getBoundingClientRect(),center:{x:0,y:0}}),kT(),()=>{Ni.delete(S)}},[S]),p.useEffect(()=>{const pe=t.current;if(!pe)return;const J=pe.getContext("2d");if(!J)return;const ue=n.current,je=K.enableSpill&&ue?ue.getContext("2d"):null,gt=()=>{if(!K.enableFog){a.current=[];return}const{width:z,height:ge}=u.current;if(!z||!ge){a.current=[];return}const Y=[];for(let oe=0;oe<K.fogLayerCount;oe++){const de=z*(.35+Math.random()*.35),Se=ge*(.72+Math.random()*.18),Ce=Math.random()*z,et=(Math.random()*.12+.04)*(Math.random()<.5?-1:1)*K.fogSpeedScale,We=(.06+Math.random()*.06)*K.fogOpacity,ls=fu(B.secondary,We);Y.push({x:Ce,y:Se,radius:de,speed:et,opacity:We,color:ls})}a.current=Y},Rt=()=>{const z=pe.getBoundingClientRect(),ge=Math.min(window.devicePixelRatio||1,K.maxDpr),Y=z.width+V*2,oe=z.height+V*2;u.current={width:z.width,height:z.height,fieldWidth:Y,fieldHeight:oe},pe.width=z.width*ge,pe.height=z.height*ge,J.setTransform(1,0,0,1,0,0),J.scale(ge,ge),ue&&je&&(ue.width=Y*ge,ue.height=oe*ge,je.setTransform(1,0,0,1,0,0),je.scale(ge,ge)),gt()};Rt(),(()=>{const z=[],ge=Math.max(8,Math.round(B.particleCount*K.particleScale)),Y=K.speedScale;for(let oe=0;oe<ge;oe++){const de=(oe+B.patternSeed)%Z.length;z.push({x:Math.random()*u.current.fieldWidth,y:Math.random()*u.current.fieldHeight,vx:(Math.random()-.5)*B.animSpeed*Y,vy:(Math.random()-.5)*B.animSpeed*Y,size:Math.random()*2.8+.8+e.threatLevel*.25,opacity:Math.random()*.45+.25+(B.brightness-1)*.25,type:Z[de],color:oe%3===0?B.accent:oe%3===1?B.secondary:"#ffffff"})}s.current=z})();const hn=(z,ge,Y,oe)=>{z.save(),z.globalAlpha=.12*B.brightness,z.strokeStyle=B.accent,z.fillStyle=B.accent,z.lineWidth=.6;const de=B.patternSeed;switch(B.patternType){case"diagonal":for(let Se=0;Se<12;Se++){const Ce=(de+Se*20)%100-50+Math.sin(oe*.001+Se)*5;z.beginPath(),z.moveTo(Ce,0),z.lineTo(Ce+ge,Y),z.stroke()}break;case"circular":for(let Se=1;Se<=5;Se++){const Ce=(Se*30+Math.sin(oe*.002+Se)*10)*(de%3+1)/2;z.beginPath(),z.arc(ge/2,Y/2,Ce,0,Math.PI*2),z.stroke()}break;case"grid":{const Se=20+de%20;for(let Ce=0;Ce<ge;Ce+=Se)for(let et=0;et<Y;et+=Se){const We=Math.sin(oe*.002+Ce*.01+et*.01+de*.01)*3;z.beginPath(),z.arc(Ce+We,et+We,1.8,0,Math.PI*2),z.fill()}break}case"radial":{const Se=8+de%8;for(let Ce=0;Ce<Se;Ce++){const et=Ce/Se*Math.PI*2+oe*.001,We=80+Math.sin(oe*.003+Ce)*20;z.beginPath(),z.moveTo(ge/2,Y/2),z.lineTo(ge/2+Math.cos(et)*We,Y/2+Math.sin(et)*We),z.stroke()}break}case"noise":for(let Se=0;Se<40;Se++){const Ce=de*Se*7%ge,et=de*Se*11%Y+Math.sin(oe*.003+Se)*2,We=(de+Se)%3+1;z.globalAlpha=(.05+(de+Se)%10*.01)*B.brightness,z.beginPath(),z.arc(Ce,et,We,0,Math.PI*2),z.fill()}break}z.restore()},Pe=(z,ge,Y)=>{const oe=(Y==null?void 0:Y.alpha)??1,de=(Y==null?void 0:Y.blur)??1,Se=(Y==null?void 0:Y.offsetX)??0,Ce=(Y==null?void 0:Y.offsetY)??0,et=(Y==null?void 0:Y.color)??ge.color;z.save(),z.globalAlpha=ge.opacity*oe,z.fillStyle=et,z.strokeStyle=et,z.shadowBlur=ge.size*6*de,z.shadowColor=et;const{size:We,type:ls}=ge,tt=ge.x+Se,He=ge.y+Ce;switch(ls){case"dot":z.beginPath(),z.arc(tt,He,We,0,Math.PI*2),z.fill();break;case"star":{const Oe=We*1.8;z.beginPath(),z.moveTo(tt,He-Oe),z.lineTo(tt+Oe*.3,He),z.lineTo(tt,He+Oe),z.lineTo(tt-Oe*.3,He),z.closePath(),z.fill(),z.beginPath(),z.moveTo(tt-Oe,He),z.lineTo(tt+Oe,He),z.moveTo(tt,He-Oe),z.lineTo(tt,He+Oe),z.lineWidth=.3,z.stroke();break}case"ring":z.beginPath(),z.arc(tt,He,We*1.5,0,Math.PI*2),z.lineWidth=.8,z.stroke();break;case"triangle":{const Oe=We*2;z.beginPath(),z.moveTo(tt,He-Oe),z.lineTo(tt+Oe*.866,He+Oe*.5),z.lineTo(tt-Oe*.866,He+Oe*.5),z.closePath(),z.fill();break}case"diamond":{const Oe=We*1.5;z.beginPath(),z.moveTo(tt,He-Oe),z.lineTo(tt+Oe,He),z.lineTo(tt,He+Oe),z.lineTo(tt-Oe,He),z.closePath(),z.fill();break}}z.restore()},bt=(z,ge,Y,oe)=>{!K.enableFog||a.current.length===0||(z.save(),z.globalCompositeOperation="screen",a.current.forEach((de,Se)=>{de.x+=de.speed*oe,de.x<-de.radius&&(de.x=ge+de.radius),de.x>ge+de.radius&&(de.x=-de.radius);const Ce=Math.sin(o.current*4e-4+Se)*Y*.015,et=de.y+Ce,We=z.createRadialGradient(de.x,et,0,de.x,et,de.radius);We.addColorStop(0,de.color),We.addColorStop(1,"transparent"),z.fillStyle=We,z.fillRect(0,Y*.6,ge,Y*.4)}),z.restore())},ct=1e3/K.fps,en=z=>{if(document.hidden||!d.current){i.current=void 0;return}const ge=z-c.current;if(ge<ct){i.current=requestAnimationFrame(en);return}kH(z),c.current=z,o.current+=ge;const{width:Y,height:oe,fieldWidth:de,fieldHeight:Se}=u.current;if(!Y||!oe){i.current=requestAnimationFrame(en);return}J.clearRect(0,0,Y,oe),je&&je.clearRect(0,0,de,Se);const Ce=B.gradientAngle*Math.PI/180,et=Y/2-Math.cos(Ce)*Y,We=oe/2-Math.sin(Ce)*oe,ls=Y/2+Math.cos(Ce)*Y,tt=oe/2+Math.sin(Ce)*oe,He=J.createLinearGradient(et,We,ls,tt);He.addColorStop(0,B.primary),He.addColorStop(.5,B.secondary),He.addColorStop(1,B.primary),J.fillStyle=He,J.fillRect(0,0,Y,oe);const Oe=J.createRadialGradient(Y*.5,oe*.35,Y*.05,Y*.5,oe*.35,Y*.95);Oe.addColorStop(0,fu(B.accent,.22)),Oe.addColorStop(.5,fu(B.secondary,.12)),Oe.addColorStop(1,"transparent"),J.save(),J.globalCompositeOperation="screen",J.fillStyle=Oe,J.fillRect(0,0,Y,oe),J.restore();const fn=J.createLinearGradient(0,0,Y,oe);fn.addColorStop(0,"rgba(255,255,255,0.18)"),fn.addColorStop(.35,"rgba(255,255,255,0.04)"),fn.addColorStop(.7,"rgba(255,255,255,0)"),J.save(),J.globalCompositeOperation="soft-light",J.fillStyle=fn,J.fillRect(0,0,Y,oe),J.restore();const aa=ge/16;K.enablePattern&&hn(J,Y,oe,o.current),bt(J,Y,oe,aa);let le=null,Me=K.magneticStrength;if(K.enableMagnetic){const he=Ni.get(S);if(he){const tn=Math.max(Y,oe)*K.magneticRadiusScale;let Ht=Number.POSITIVE_INFINITY,dt=null;Ni.forEach((Gt,jc)=>{if(jc===S)return;const Ay=Gt.center.x-he.center.x,Dy=Gt.center.y-he.center.y,Oh=Math.sqrt(Ay*Ay+Dy*Dy);Oh<Ht&&Oh<tn&&(Ht=Oh,dt=Gt.center)}),dt&&(le={x:dt.x-he.rect.left+V,y:dt.y-he.rect.top+V},Me*=1-Ht/tn)}}s.current.forEach(he=>{if(le){const Ht=le.x-he.x,dt=le.y-he.y,Gt=Math.max(1,Math.sqrt(Ht*Ht+dt*dt)),jc=Me*aa;he.vx+=Ht/Gt*jc,he.vy+=dt/Gt*jc}const tn=1-.002*aa;he.vx*=tn,he.vy*=tn,he.x+=he.vx*aa,he.y+=he.vy*aa,he.x<0&&(he.x=de),he.x>de&&(he.x=0),he.y<0&&(he.y=Se),he.y>Se&&(he.y=0),Pe(J,he,{offsetX:-V,offsetY:-V})}),je&&(je.save(),je.globalCompositeOperation="source-over",s.current.forEach(he=>{Pe(je,he,{alpha:.35,blur:.7})}),je.globalCompositeOperation="lighter",s.current.forEach(he=>{Pe(je,he,{alpha:.22,blur:1.6})}),je.restore());const Ie=J.createRadialGradient(Y/2,oe,0,Y/2,oe,Y*.6);Ie.addColorStop(0,B.exitStyle.glow+"20"),Ie.addColorStop(1,"transparent"),J.fillStyle=Ie,J.fillRect(0,0,Y,oe);const Dt=J.createRadialGradient(Y*.5,oe*.5,Y*.2,Y*.5,oe*.5,Y*.85);Dt.addColorStop(0,"rgba(0,0,0,0)"),Dt.addColorStop(.6,"rgba(0,0,0,0.1)"),Dt.addColorStop(1,"rgba(0,0,0,0.45)"),J.fillStyle=Dt,J.fillRect(0,0,Y,oe),i.current=requestAnimationFrame(en)},yr=()=>{i.current==null&&(c.current=performance.now(),i.current=requestAnimationFrame(en))},ut=()=>{i.current!=null&&(cancelAnimationFrame(i.current),i.current=void 0)};let At=null;typeof ResizeObserver<"u"?(At=new ResizeObserver(()=>{Rt()}),At.observe(pe)):window.addEventListener("resize",Rt);let $r=null;typeof IntersectionObserver<"u"&&($r=new IntersectionObserver(([z])=>{d.current=z.isIntersecting,z.isIntersecting&&!document.hidden?yr():ut()},{threshold:.2}),$r.observe(pe));const Ka=()=>{document.hidden?ut():d.current&&yr()};return document.addEventListener("visibilitychange",Ka),yr(),()=>{ut(),document.removeEventListener("visibilitychange",Ka),$r==null||$r.disconnect(),At==null||At.disconnect(),window.removeEventListener("resize",Rt)}},[B,Z,e.threatLevel,K,V,S]);const De=e.environments&&e.environments.length>0,ke=e.entities&&e.entities.length>0;return l.jsx(dn,{to:`/logs/${e.id}`,className:"group block",children:l.jsxs("div",{className:"relative",children:[l.jsx("canvas",{ref:n,className:"absolute z-30 pointer-events-none opacity-20 group-hover:opacity-45 transition-opacity duration-300",style:{top:-V,left:-V,width:`calc(100% + ${V*2}px)`,height:`calc(100% + ${V*2}px)`,display:K.enableSpill?"block":"none",mixBlendMode:"normal"}}),l.jsxs("div",{className:"aspect-[2/3] rounded-2xl overflow-hidden relative z-10 isolate transition-shadow duration-300 border border-white/10",style:{boxShadow:"0 6px 16px rgba(2, 6, 23, 0.18), 0 0 0 1px rgba(255, 255, 255, 0.06)"},ref:r,children:[l.jsx("canvas",{ref:t,className:"absolute inset-0 w-full h-full rounded-[inherit]",style:{width:"100%",height:"100%"}}),l.jsx("div",{className:"absolute inset-0 rounded-[inherit] bg-gradient-to-t from-black/80 via-black/30 to-black/10"}),l.jsx("div",{className:"absolute inset-0 rounded-[inherit] bg-gradient-to-br from-white/25 via-white/5 to-transparent opacity-70 mix-blend-screen pointer-events-none"}),l.jsx("div",{className:"absolute inset-0 rounded-[inherit] pointer-events-none shadow-[inset_0_0_0_1px_rgba(255,255,255,0.18),inset_0_-18px_32px_rgba(0,0,0,0.35)]"}),l.jsxs("div",{className:"absolute top-0 left-0 right-0 p-2 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-[8px] text-white/50 font-mono bg-black/30 px-1.5 py-0.5 rounded backdrop-blur-sm",children:e.id}),B.aiEnhanced&&l.jsxs("span",{className:"flex items-center gap-0.5 text-[8px] px-1.5 py-0.5 rounded backdrop-blur-sm bg-primary/30 text-primary-foreground",children:[l.jsx(Ut,{className:"w-2 h-2"}),"AI"]})]}),l.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded-full backdrop-blur-sm",style:{backgroundColor:`${B.accent}30`},children:[l.jsx("span",{className:"text-[10px]",style:{color:B.accent},children:B.exitStyle.symbol}),l.jsxs("span",{className:"text-[9px] text-white/80 font-medium",children:["Lv.",e.threatLevel]})]})]}),e.timeSystem!=="unknown"&&l.jsx("div",{className:"absolute top-9 right-2",children:l.jsxs("div",{className:"flex items-center gap-0.5 px-1 py-0.5 rounded backdrop-blur-sm text-[8px]",style:{backgroundColor:e.timeSystem==="activated"?"rgba(96, 165, 250, 0.3)":"rgba(156, 163, 175, 0.2)",color:e.timeSystem==="activated"?"#60a5fa":"#9ca3af"},children:[l.jsx(qr,{className:"w-2 h-2"}),e.timeSystem==="activated"?"ON":"OFF"]})}),l.jsxs("div",{className:"absolute inset-0 flex flex-col justify-end p-3",children:[l.jsx("h3",{className:"font-bold text-base sm:text-lg text-center leading-snug text-white drop-shadow-lg line-clamp-2 mb-2",children:e.world||"Unknown"}),l.jsxs("div",{className:"flex flex-wrap gap-1 justify-center mb-2",children:[De&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] px-1.5 py-0.5 rounded-full backdrop-blur-sm",style:{backgroundColor:`${B.accent}20`,color:B.accent},children:[l.jsx(ts,{className:"w-2 h-2"}),e.environments.length]}),ke&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] px-1.5 py-0.5 rounded-full backdrop-blur-sm",style:{backgroundColor:`${B.accent}20`,color:B.accent},children:[l.jsx(Pr,{className:"w-2 h-2"}),e.entities.length]}),e.safetyOverride!=="none"&&e.safetyOverride!=="unknown"&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] px-1.5 py-0.5 rounded-full backdrop-blur-sm",style:{backgroundColor:"rgba(167, 139, 250, 0.2)",color:"#a78bfa"},children:[l.jsx(dc,{className:"w-2 h-2"}),e.safetyOverride]}),e.exit!=="unknown"&&l.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] px-1.5 py-0.5 rounded-full backdrop-blur-sm",style:{backgroundColor:`${B.exitStyle.glow}20`,color:B.exitStyle.glow},children:[l.jsx(X_,{className:"w-2 h-2"}),e.exit]})]}),l.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1.5",children:[l.jsx("div",{className:"h-px w-4 bg-gradient-to-r from-transparent to-white/40"}),l.jsx("div",{className:"w-1 h-1 rounded-full",style:{backgroundColor:B.accent}}),l.jsx("div",{className:"h-px w-4 bg-gradient-to-l from-transparent to-white/40"})]}),l.jsxs("div",{className:"text-center space-y-0.5",children:[l.jsx("p",{className:"text-[10px] text-white/60 font-light tracking-wider",children:w?zt(w,"d MMM yyyy",{locale:Xs}):"-"}),e.wakeTime&&l.jsx("p",{className:"text-[9px] text-white/40",children:e.wakeTime})]})]}),l.jsx("div",{className:"absolute inset-0 rounded-[inherit] bg-gradient-to-tr from-transparent via-white/0 to-transparent group-hover:via-white/20 transition-all duration-700 transform translate-x-full group-hover:translate-x-0"}),l.jsx("div",{className:"absolute inset-0 rounded-[inherit] opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",style:{boxShadow:`inset 0 0 40px ${xe}`}})]})]})})}function CT({children:e,className:t="",staggerDelay:n=80,animationDuration:r=400}){const[s,a]=p.useState(new Set),[i,o]=p.useState(!1);return p.useEffect(()=>{if(i){a(new Set(e.map((u,d)=>d)));return}a(new Set);const c=[];return e.forEach((u,d)=>{const h=setTimeout(()=>{a(f=>new Set([...f,d])),d===e.length-1&&setTimeout(()=>o(!0),r)},d*n);c.push(h)}),()=>{c.forEach(clearTimeout)}},[e,n,r,i]),l.jsx("div",{className:`grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 ${t}`,children:e.map((c,u)=>l.jsx("div",{className:"transition-all",style:{opacity:s.has(u)?1:0,marginTop:s.has(u)?"0px":"12px",transitionProperty:"opacity, margin-top",transitionDuration:`${r}ms`,transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:c},u))})}function mu({title:e,dreams:t,colorClass:n,isExpanded:r,onToggle:s}){return t.length===0?null:l.jsxs("section",{className:"bg-card rounded-lg border",children:[l.jsxs("button",{onClick:s,className:"w-full flex items-center justify-between p-4 hover:bg-accent/50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-1 h-8 ${n} rounded-full`}),l.jsxs("div",{className:"text-left",children:[l.jsx("h2",{className:"text-sm font-semibold",children:e}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.length," "]})]})]}),r?l.jsx(io,{className:"w-5 h-5 text-muted-foreground"}):l.jsx(Hs,{className:"w-5 h-5 text-muted-foreground"})]}),r&&l.jsx("div",{className:"p-4 pt-0 relative overflow-hidden isolate",children:l.jsx(CT,{staggerDelay:60,animationDuration:350,children:t.map(a=>l.jsx(jT,{dream:a},a.id))})})]})}function MH({worldName:e,dreams:t,isExpanded:n,onToggle:r}){return l.jsxs("section",{className:"bg-card rounded-lg border",children:[l.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between p-4 hover:bg-accent/50 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(c5,{className:"w-5 h-5 text-primary"}),l.jsxs("div",{className:"text-left",children:[l.jsx("h2",{className:"text-sm font-semibold",children:e}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.length," "]})]})]}),n?l.jsx(io,{className:"w-5 h-5 text-muted-foreground"}):l.jsx(Hs,{className:"w-5 h-5 text-muted-foreground"})]}),n&&l.jsx("div",{className:"p-4 pt-0 relative overflow-hidden isolate",children:l.jsx(CT,{staggerDelay:60,animationDuration:350,children:t.map(s=>l.jsx(jT,{dream:s},s.id))})})]})}function NH({searchQuery:e,onSearchChange:t,groupBy:n,onGroupByChange:r,totalDreams:s,currentPhenomenon:a,onChangePhenomenon:i,showDreamFilters:o=!0}){return l.jsx("header",{className:"sticky top-0 z-10 bg-background border-b",children:l.jsxs("div",{className:"px-4 py-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl font-semibold",children:"Dream Library"}),a&&l.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5 flex items-center gap-2",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:a.uiAccent}}),a.name]}),l.jsxs("span",{className:"opacity-60",children:["(",a.rarity,")"]})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"text-sm text-muted-foreground",children:[s," "]})})]}),o&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"relative mb-3",children:[l.jsx(h5,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),l.jsx(Hn,{placeholder:"...",value:e,onChange:c=>t(c.target.value),className:"pl-10"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>r("date"),className:q("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",n==="date"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:text-foreground"),children:[l.jsx(i5,{className:"w-4 h-4"}),""]}),l.jsxs("button",{onClick:()=>r("world"),className:q("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",n==="world"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:text-foreground"),children:[l.jsx(c5,{className:"w-4 h-4"}),""]})]})]})]})})}const Qb={stars:{gradient:"linear-gradient(90deg, #1e3a5f, #3b82f6, #60a5fa, #93c5fd)",glowColor:"#3b82f6",innerPattern:"radial-gradient(circle at 20% 50%, rgba(255,255,255,0.3) 1px, transparent 1px), radial-gradient(circle at 60% 30%, rgba(255,255,255,0.2) 1px, transparent 1px), radial-gradient(circle at 80% 70%, rgba(255,255,255,0.25) 1px, transparent 1px)"},fire:{gradient:"linear-gradient(90deg, #7f1d1d, #dc2626, #f97316, #fbbf24)",glowColor:"#f97316",innerPattern:"repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(255,200,100,0.1) 4px, rgba(255,200,100,0.1) 8px)"},snow:{gradient:"linear-gradient(90deg, #e0f2fe, #bae6fd, #7dd3fc, #38bdf8)",glowColor:"#38bdf8",innerPattern:"radial-gradient(circle at 30% 40%, rgba(255,255,255,0.5) 1px, transparent 1px), radial-gradient(circle at 70% 60%, rgba(255,255,255,0.4) 1px, transparent 1px)"},crystals:{gradient:"linear-gradient(90deg, #312e81, #4f46e5, #818cf8, #c4b5fd)",glowColor:"#818cf8",innerPattern:"linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.1) 45%, rgba(255,255,255,0.1) 55%, transparent 60%)"},void:{gradient:"linear-gradient(90deg, #0f0f0f, #1f1f3a, #2d1b4e, #4c1d95)",glowColor:"#7c3aed",innerPattern:"radial-gradient(ellipse at 50% 50%, rgba(139,92,246,0.2) 0%, transparent 70%)"},blood:{gradient:"linear-gradient(90deg, #450a0a, #7f1d1d, #b91c1c, #dc2626)",glowColor:"#dc2626",innerPattern:"repeating-linear-gradient(180deg, transparent, transparent 2px, rgba(0,0,0,0.2) 2px, rgba(0,0,0,0.2) 4px)"},aurora:{gradient:"linear-gradient(90deg, #22c55e, #14b8a6, #06b6d4, #8b5cf6, #ec4899)",glowColor:"#14b8a6",innerPattern:"linear-gradient(180deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(255,255,255,0.05) 100%)"},lightning:{gradient:"linear-gradient(90deg, #0c4a6e, #0284c7, #38bdf8, #fef08a)",glowColor:"#fef08a",innerPattern:"linear-gradient(135deg, transparent 40%, rgba(254,240,138,0.3) 45%, transparent 50%)"},pixels:{gradient:"linear-gradient(90deg, #2b1152, #5c2a8a, #ff9ad5, #ffcf9b)",glowColor:"#ff9ad5",borderStyle:"2px solid rgba(255,190,140,0.5)",innerPattern:"repeating-linear-gradient(90deg, rgba(255,255,255,0.15) 0 2px, rgba(255,255,255,0) 2px 6px)"},mythic:{gradient:"linear-gradient(90deg, #581c87, #9333ea, #c026d3, #f472b6)",glowColor:"#c026d3",borderStyle:"2px solid rgba(192,38,211,0.5)",innerPattern:"repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(255,255,255,0.05) 5px, rgba(255,255,255,0.05) 10px)"},legendary:{gradient:"linear-gradient(90deg, #78350f, #d97706, #f59e0b, #fcd34d)",glowColor:"#f59e0b",borderStyle:"2px solid rgba(245,158,11,0.5)",innerPattern:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.2) 50%, transparent 100%)"},very_rare:{gradient:"linear-gradient(90deg, #1e3a8a, #3b82f6, #60a5fa, #a78bfa)",glowColor:"#60a5fa",borderStyle:"1px solid rgba(96,165,250,0.4)",innerPattern:"radial-gradient(circle at 80% 50%, rgba(167,139,250,0.3) 0%, transparent 50%)"},rare:{gradient:"linear-gradient(90deg, #065f46, #059669, #10b981, #6ee7b7)",glowColor:"#10b981",borderStyle:"1px solid rgba(16,185,129,0.4)"},normal:{gradient:"linear-gradient(90deg, #374151, #4b5563, #6b7280, #9ca3af)",glowColor:"#6b7280"}},Jb={stars:{shimmerDuration:3,sparkleAnimation:!0},fire:{shimmerDuration:.8,waveAnimation:!0},snow:{shimmerDuration:4,sparkleAnimation:!0},crystals:{shimmerDuration:2.5,pulseAnimation:!0},void:{shimmerDuration:5,pulseAnimation:!0},blood:{shimmerDuration:1.5,waveAnimation:!0},aurora:{shimmerDuration:6,waveAnimation:!0},lightning:{shimmerDuration:.3,sparkleAnimation:!0},pixels:{shimmerDuration:2.2,sparkleAnimation:!0},mythic:{shimmerDuration:2,pulseAnimation:!0,sparkleAnimation:!0},legendary:{shimmerDuration:1.5,waveAnimation:!0,sparkleAnimation:!0},very_rare:{shimmerDuration:2.5,sparkleAnimation:!0},rare:{shimmerDuration:3},normal:{shimmerDuration:4}};function ET({value:e,max:t=100,particleConfig:n,className:r,height:s=12,showGlow:a=!0,animated:i=!0,label:o,variant:c}){const u=mc(),d=u?.25:1,h=i&&!u,f=p.useMemo(()=>n?{...n,density:n.density*d}:null,[n,d]),m=p.useRef(null),y=p.useRef([]),g=p.useRef(),v=Math.min(100,Math.max(0,e/t*100)),x=c||(f==null?void 0:f.type)||"normal",b=x==="pixels",w=Qb[x]||Qb.normal,S=Jb[x]||Jb.normal,k=p.useMemo(()=>f?(N,T,A,L)=>{const D=f,R=Math.random()>.6&&D.secondaryColor?D.secondaryColor:D.color;let F=0,_=0,P=2,O=0,I=0;switch(D.type){case"stars":F=(Math.random()-.5)*D.speed*.5,_=(Math.random()-.3)*D.speed*.3,P=Math.random()*3+1,O=Math.random()*Math.PI*2,I=(Math.random()-.5)*.1;break;case"fire":F=(Math.random()-.5)*D.speed*.3,_=-Math.random()*D.speed*2,P=Math.random()*4+2;break;case"snow":F=(Math.random()-.5)*D.speed*.2,_=Math.random()*D.speed*.5,P=Math.random()*3+1,O=Math.random()*Math.PI*2,I=(Math.random()-.5)*.05;break;case"crystals":F=(Math.random()-.5)*D.speed*.4,_=(Math.random()-.5)*D.speed*.4,P=Math.random()*4+2,O=Math.random()*Math.PI*2,I=(Math.random()-.5)*.08;break;case"void":F=(Math.random()-.5)*D.speed*2,_=(Math.random()-.5)*D.speed*2,P=Math.random()*2+1;break;case"blood":F=(Math.random()-.5)*D.speed*.3,_=Math.random()*D.speed*.8,P=Math.random()*3+2;break;case"aurora":F=D.speed*.5,_=Math.sin(N*.1)*D.speed*.3,P=Math.random()*5+3;break;case"lightning":F=(Math.random()-.5)*D.speed*4,_=(Math.random()-.5)*D.speed*4,P=Math.random()*2+1;break;case"pixels":F=(Math.random()-.5)*D.speed*.6,_=(Math.random()-.7)*D.speed*.6,P=Math.random()*3+2;break}return{x:N+A*v/100,y:T+L/2+(Math.random()-.5)*L*.8,vx:F,vy:_,size:P,opacity:Math.random()*.8+.2,color:R,life:0,maxLife:30+Math.random()*30,rotation:O,rotationSpeed:I}}:null,[f,v]);p.useEffect(()=>{if(!h||!m.current||!f)return;const N=m.current,T=N.getContext("2d");if(!T)return;f.type==="pixels"&&(T.imageSmoothingEnabled=!1);const A=N.getBoundingClientRect();N.width=A.width*window.devicePixelRatio,N.height=A.height*window.devicePixelRatio,T.scale(window.devicePixelRatio,window.devicePixelRatio);const L=A.width,D=A.height,H=()=>{T.clearRect(0,0,L,D),k&&Math.random()<f.density*.3&&y.current.push(k(0,0,L,D)),y.current=y.current.filter(R=>{R.x+=R.vx,R.y+=R.vy,R.life++,R.rotation!==void 0&&R.rotationSpeed!==void 0&&(R.rotation+=R.rotationSpeed);const F=R.life/R.maxLife,_=R.opacity*(1-F);if(_<=0)return!1;switch(T.save(),T.translate(R.x,R.y),R.rotation!==void 0&&T.rotate(R.rotation),f.glow&&(T.shadowColor=R.color,T.shadowBlur=R.size*3),T.fillStyle=R.color,T.globalAlpha=_,f.type){case"crystals":T.beginPath(),T.moveTo(0,-R.size),T.lineTo(R.size*.7,0),T.lineTo(0,R.size),T.lineTo(-R.size*.7,0),T.closePath(),T.fill(),T.fillStyle="rgba(255,255,255,0.5)",T.beginPath(),T.moveTo(0,-R.size*.5),T.lineTo(R.size*.3,0),T.lineTo(0,R.size*.3),T.closePath(),T.fill();break;case"stars":PH(T,0,0,5,R.size,R.size*.4);break;case"lightning":T.beginPath(),T.moveTo(0,0),T.lineTo(R.vx*3,R.vy*3),T.strokeStyle=R.color,T.lineWidth=R.size*.5,T.lineCap="round",T.stroke(),Math.random()>.7&&(T.beginPath(),T.moveTo(R.vx*1.5,R.vy*1.5),T.lineTo(R.vx*2+(Math.random()-.5)*4,R.vy*2+(Math.random()-.5)*4),T.lineWidth=R.size*.3,T.stroke());break;case"pixels":T.imageSmoothingEnabled=!1,T.fillRect(-R.size/2,-R.size/2,R.size,R.size),T.fillStyle="rgba(255,255,255,0.5)",T.fillRect(-R.size/2+1,-R.size/2+1,Math.max(1,R.size*.4),Math.max(1,R.size*.4));break;case"fire":T.beginPath(),T.moveTo(0,-R.size),T.bezierCurveTo(R.size,-R.size*.5,R.size,R.size*.5,0,R.size),T.bezierCurveTo(-R.size,R.size*.5,-R.size,-R.size*.5,0,-R.size),T.fill();break;case"snow":for(let P=0;P<6;P++)T.save(),T.rotate(Math.PI/3*P),T.beginPath(),T.moveTo(0,0),T.lineTo(0,-R.size),T.strokeStyle=R.color,T.lineWidth=R.size*.2,T.stroke(),T.restore();break;case"void":T.beginPath(),T.arc(0,0,R.size,0,Math.PI*2),T.fill(),T.beginPath(),T.arc(0,0,R.size*.5,0,Math.PI*2),T.fillStyle="rgba(0,0,0,0.5)",T.fill();break;case"aurora":T.beginPath(),T.ellipse(0,0,R.size*2,R.size*.5,0,0,Math.PI*2),T.fill();break;case"blood":T.beginPath(),T.arc(0,0,R.size,0,Math.PI*2),T.fill(),T.beginPath(),T.arc(R.size*.3,-R.size*.3,R.size*.3,0,Math.PI*2),T.fillStyle="rgba(255,100,100,0.5)",T.fill();break;default:T.beginPath(),T.arc(0,0,R.size,0,Math.PI*2),T.fill()}return T.restore(),!0}),y.current.length>60&&(y.current=y.current.slice(-60)),g.current=requestAnimationFrame(H)};return H(),()=>{g.current&&cancelAnimationFrame(g.current)}},[h,f,k]),f!=null&&f.color;const j=f?w.gradient:"hsl(var(--primary))",C=b?"rounded-md":"rounded-full",E=b?"pixel-bar":"",M=b?"repeating-linear-gradient(90deg, rgba(255,255,255,0.08) 0 2px, rgba(255,255,255,0) 2px 6px)":"repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255,255,255,0.03) 2px, rgba(255,255,255,0.03) 4px)";return l.jsxs("div",{className:q("relative w-full",r),children:[o&&l.jsxs("div",{className:"flex justify-between items-center mb-1.5 text-xs",children:[l.jsx("span",{className:"text-muted-foreground font-medium",children:o}),l.jsxs("span",{className:"text-foreground font-semibold",children:[Math.round(v),"%"]})]}),l.jsxs("div",{className:q("relative overflow-hidden bg-secondary/50 backdrop-blur-sm",C,E),style:{height:s,border:w.borderStyle,boxShadow:"inset 0 1px 3px rgba(0,0,0,0.2)"},children:[l.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:M}}),l.jsxs(qe.div,{className:q("h-full relative overflow-hidden",C),initial:{width:0},animate:{width:`${v}%`},transition:{duration:.8,ease:"easeOut"},style:{background:j,boxShadow:a&&(f!=null&&f.glow)?`0 0 12px ${w.glowColor}, 0 0 24px ${w.glowColor}50, inset 0 1px 0 rgba(255,255,255,0.3)`:"inset 0 1px 0 rgba(255,255,255,0.3)"},children:[w.innerPattern&&l.jsx("div",{className:"absolute inset-0",style:{background:w.innerPattern}}),h&&S.pulseAnimation&&v>0&&l.jsx(qe.div,{className:"absolute inset-0 rounded-full",animate:{opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{background:`radial-gradient(ellipse at 70% 50%, ${w.glowColor}40, transparent 70%)`}}),h&&S.waveAnimation&&v>0&&l.jsx(qe.div,{className:"absolute inset-0",animate:{x:["-100%","100%"]},transition:{duration:S.shimmerDuration||2,repeat:1/0,ease:"linear"},style:{background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)",width:"50%"}}),h&&S.sparkleAnimation&&v>0&&l.jsxs(l.Fragment,{children:[l.jsx(qe.div,{className:"absolute w-1 h-1 rounded-full bg-white",animate:{opacity:[0,1,0],scale:[.5,1.2,.5]},transition:{duration:1.5,repeat:1/0,delay:0},style:{left:"20%",top:"30%"}}),l.jsx(qe.div,{className:"absolute w-0.5 h-0.5 rounded-full bg-white",animate:{opacity:[0,.8,0],scale:[.5,1,.5]},transition:{duration:2,repeat:1/0,delay:.5},style:{left:"50%",top:"60%"}}),l.jsx(qe.div,{className:"absolute w-1 h-1 rounded-full bg-white",animate:{opacity:[0,1,0],scale:[.5,1.5,.5]},transition:{duration:1.8,repeat:1/0,delay:1},style:{left:"75%",top:"40%"}})]}),h&&v>0&&l.jsx(qe.div,{className:"absolute inset-0",animate:{x:["-200%","200%"]},transition:{duration:S.shimmerDuration||2,repeat:1/0,ease:"linear"},style:{background:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.15) 25%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0.15) 75%, transparent 100%)",width:"100%"}}),a&&v>5&&l.jsx(qe.div,{className:"absolute right-0 top-0 bottom-0 w-4",animate:{opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},style:{background:`linear-gradient(90deg, transparent, ${w.glowColor})`}})]}),h&&f&&l.jsx("canvas",{ref:m,className:"absolute inset-0 w-full h-full pointer-events-none",style:{height:s*4,top:-s*1.5}}),v>0&&v<100&&l.jsx(qe.div,{className:"absolute top-0 bottom-0 w-0.5",initial:{opacity:0},animate:{opacity:[.5,1,.5],left:`${v}%`},transition:{opacity:{duration:1,repeat:1/0},left:{duration:.8,ease:"easeOut"}},style:{background:"rgba(255,255,255,0.8)",boxShadow:`0 0 4px ${w.glowColor}`}})]})]})}function PH(e,t,n,r,s,a){let i=Math.PI/2*3;const o=Math.PI/r;e.beginPath(),e.moveTo(t,n-s);for(let c=0;c<r;c++){let u=t+Math.cos(i)*s,d=n+Math.sin(i)*s;e.lineTo(u,d),i+=o,u=t+Math.cos(i)*a,d=n+Math.sin(i)*a,e.lineTo(u,d),i+=o}e.lineTo(t,n-s),e.closePath(),e.fill()}var jy="Progress",Cy=100,[_H]=Gn(jy),[RH,AH]=_H(jy),TT=p.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=DH,...i}=e;(s||s===0)&&!Zb(s)&&console.error(OH(`${s}`,"Progress"));const o=Zb(s)?s:Cy;r!==null&&!e1(r,o)&&console.error(IH(`${r}`,"Progress"));const c=e1(r,o)?r:null,u=Ad(c)?a(c,o):void 0;return l.jsx(RH,{scope:n,value:c,max:o,children:l.jsx(ne.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Ad(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":PT(c,o),"data-value":c??void 0,"data-max":o,...i,ref:t})})});TT.displayName=jy;var MT="ProgressIndicator",NT=p.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=AH(MT,n);return l.jsx(ne.div,{"data-state":PT(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});NT.displayName=MT;function DH(e,t){return`${Math.round(e/t*100)}%`}function PT(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Ad(e){return typeof e=="number"}function Zb(e){return Ad(e)&&!isNaN(e)&&e>0}function e1(e,t){return Ad(e)&&!isNaN(e)&&e<=t&&e>=0}function OH(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Cy}\`.`}function IH(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Cy} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var _T=TT,$H=NT;const RT=p.forwardRef(({className:e,value:t,...n},r)=>l.jsx(_T,{ref:r,className:q("progress-root relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:l.jsx($H,{className:"progress-indicator h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));RT.displayName=_T.displayName;const sm={mythic:"from-purple-500 via-pink-500 to-rose-500",legendary:"from-amber-400 via-orange-500 to-red-500",very_rare:"from-blue-400 via-indigo-500 to-purple-500",rare:"from-cyan-400 via-teal-500 to-emerald-500",normal:"from-slate-400 via-gray-500 to-zinc-500"},LH={mythic:"Mythic",legendary:"Legendary",very_rare:"Very Rare",rare:"Rare",normal:"Normal"},FH=[{type:"stars",label:"Starfall",color:"#3b82f6",secondary:"#93c5fd",value:75},{type:"fire",label:"Inferno",color:"#f97316",secondary:"#fbbf24",value:85},{type:"snow",label:"Frostbite",color:"#38bdf8",secondary:"#e0f2fe",value:70},{type:"crystals",label:"Crystal",color:"#818cf8",secondary:"#c4b5fd",value:80},{type:"void",label:"Void",color:"#7c3aed",secondary:"#4c1d95",value:65},{type:"aurora",label:"Aurora",color:"#14b8a6",secondary:"#ec4899",value:90},{type:"lightning",label:"Thunder",color:"#fef08a",secondary:"#38bdf8",value:78},{type:"blood",label:"Crimson",color:"#dc2626",secondary:"#b91c1c",value:72},{type:"pixels",label:"Pixel Dream",color:"#ffbfa3",secondary:"#ff8fd6",value:88}],zH={"--codex-ink":"9, 11, 23","--codex-aurora":"90, 209, 255","--codex-ember":"255, 183, 110","--codex-orchid":"194, 132, 255"},BH={fontFamily:'"DM Serif Display", "Space Grotesk", serif'},t1={fontFamily:'"Space Grotesk", "Inter", sans-serif'},n1={hidden:{},show:{transition:{staggerChildren:.08}}},Bo={hidden:{opacity:0,y:16},show:{opacity:1,y:0,transition:{duration:.5,ease:[.22,1,.36,1]}}},VH=G.memo(function({moon:t,entry:n,isExpanded:r,onToggleExpand:s,onToggleFavorite:a,onToggleLock:i,onAddBoost:o,particles:c}){return l.jsxs("div",{className:q("rounded-2xl border overflow-hidden","bg-white/5 backdrop-blur-sm","shadow-[0_12px_40px_rgba(6,8,20,0.45)]"),style:{borderColor:(c==null?void 0:c.color)+"40",boxShadow:c!=null&&c.glow?`0 0 20px ${c.color}20`:void 0},children:[l.jsxs("button",{onClick:s,className:"w-full p-4 flex items-center gap-3 hover:bg-white/10 transition-colors",children:[l.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{background:c?`linear-gradient(135deg, ${c.color}, ${c.secondaryColor||c.color})`:"hsl(var(--primary))",boxShadow:c!=null&&c.glow?`0 0 14px ${c.color}55`:"0 0 12px rgba(255,255,255,0.15)"},children:l.jsx("span",{className:"text-lg",children:""})}),l.jsxs("div",{className:"flex-1 text-left min-w-0",children:[l.jsx("div",{className:"font-semibold text-white truncate",children:t.name}),l.jsx("div",{className:"text-xs text-white/60 truncate",children:t.nameEn})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsxs(Re,{variant:"secondary",className:"bg-gradient-to-r from-cyan-400/20 to-amber-300/20 text-white",children:["",(n==null?void 0:n.encounterCount)||0]}),r?l.jsx(io,{className:"h-4 w-4"}):l.jsx(Hs,{className:"h-4 w-4"})]})]}),r&&l.jsx("div",{className:"border-t animate-fade-in",children:l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("p",{className:"text-sm italic text-muted-foreground",children:['"',t.subtitle,'"']}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(l5,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),l.jsx("span",{className:"truncate",children:"First seen:"}),l.jsx("span",{className:"text-muted-foreground truncate",children:n!=null&&n.firstEncountered?new Date(n.firstEncountered).toLocaleDateString("th-TH"):"-"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(qr,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),l.jsx("span",{className:"truncate",children:"Last seen:"}),l.jsx("span",{className:"text-muted-foreground truncate",children:n!=null&&n.lastEncountered?new Date(n.lastEncountered).toLocaleDateString("th-TH"):"-"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{children:"Theme Duration Boost"}),l.jsxs("span",{className:"text-muted-foreground",children:["+",UH((n==null?void 0:n.themeDurationBoost)||0)," (max 1 day)"]})]}),l.jsx(ET,{value:(n==null?void 0:n.themeDurationBoost)||0,max:86400,particleConfig:c,height:10,animated:!1}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>o(3600),disabled:((n==null?void 0:n.encounterCount)??0)<5||((n==null?void 0:n.themeDurationBoost)||0)>=86400,title:((n==null?void 0:n.encounterCount)??0)<5?` ${5-((n==null?void 0:n.encounterCount)??0)} `:void 0,className:"flex-1",children:[l.jsx(qr,{className:"h-3 w-3 mr-1"}),"+1h"]}),l.jsxs(Ne,{size:"sm",variant:"outline",onClick:()=>o(21600),disabled:((n==null?void 0:n.encounterCount)??0)<5||((n==null?void 0:n.themeDurationBoost)||0)>=86400,title:((n==null?void 0:n.encounterCount)??0)<5?` ${5-((n==null?void 0:n.encounterCount)??0)} `:void 0,className:"flex-1",children:[l.jsx(qr,{className:"h-3 w-3 mr-1"}),"+6h"]})]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx(Ne,{size:"sm",variant:n!=null&&n.isLocked?"default":"outline",onClick:i,disabled:((n==null?void 0:n.encounterCount)??0)<5&&!(n!=null&&n.isLocked),className:q("flex-1",(n==null?void 0:n.isLocked)&&"bg-amber-500 hover:bg-amber-600 text-white"),title:((n==null?void 0:n.encounterCount)??0)<5&&!(n!=null&&n.isLocked)?` ${5-((n==null?void 0:n.encounterCount)??0)} `:void 0,children:n!=null&&n.isLocked?l.jsxs(l.Fragment,{children:[l.jsx(cl,{className:"h-4 w-4 mr-2"}),"Unlock Theme"]}):l.jsxs(l.Fragment,{children:[l.jsx(Y_,{className:"h-4 w-4 mr-2"}),((n==null?void 0:n.encounterCount)??0)<5?`Lock (${(n==null?void 0:n.encounterCount)??0}/5)`:"Lock Theme"]})}),l.jsxs(Ne,{size:"sm",variant:n!=null&&n.isFavorite?"default":"outline",onClick:a,className:"flex-1",children:[l.jsx(K_,{className:q("h-4 w-4 mr-2",(n==null?void 0:n.isFavorite)&&"fill-current")}),n!=null&&n.isFavorite?"Unfavorite":"Favorite"]})]}),(n==null?void 0:n.isLocked)&&l.jsxs("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/30 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400",children:[l.jsx(cl,{className:"h-4 w-4"}),l.jsx("span",{className:"font-medium",children:"Theme Locked"})]}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This moon will always be your theme. No random re-rolling."})]})]})})]})});function UH(e){return e<60?`${e}s`:e<3600?`${Math.floor(e/60)}m`:e<86400?`${Math.floor(e/3600)}h ${Math.floor(e%3600/60)}m`:`${Math.floor(e/86400)}d ${Math.floor(e%86400/3600)}h`}function WH({className:e,compact:t=!1}){const{collection:n,getMythicMoons:r,getStats:s,toggleFavorite:a,toggleLock:i,addDurationBoost:o,getParticleConfig:c}=Bk(),[u,d]=p.useState(null),[h,f]=p.useState(!1),[m,y]=p.useState(!1),g=p.useMemo(()=>r(),[r]),v=p.useMemo(()=>s(),[s]),x=p.useMemo(()=>g.filter(S=>S.discovered),[g]),b=p.useMemo(()=>g.filter(S=>!S.discovered),[g]),w=p.useMemo(()=>({mythic:{count:v.mythicCount,max:g.length},legendary:{count:v.legendaryCount,max:Object.values($n).filter(S=>S.rarity==="legendary").length},very_rare:{count:v.veryRareCount,max:Object.values($n).filter(S=>S.rarity==="very_rare").length},rare:{count:v.rareCount,max:Object.values($n).filter(S=>S.rarity==="rare").length},normal:{count:v.normalCount,max:Object.values($n).filter(S=>S.rarity==="normal").length}}),[v,g.length]);return t?l.jsxs("div",{className:q("space-y-3",e),style:t1,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ut,{className:"h-4 w-4 text-primary"}),l.jsx("span",{className:"text-sm font-medium",children:"Mythic Collection"})]}),l.jsxs(Re,{variant:"secondary",children:[v.mythicCount," / ",g.length]})]}),l.jsx(RT,{value:v.mythicCount/g.length*100,className:"h-2"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.slice(0,6).map(S=>l.jsx("div",{className:q("w-8 h-8 rounded-full flex items-center justify-center text-xs",S.discovered?"bg-gradient-to-br "+sm.mythic:"bg-muted"),title:S.discovered?S.name:"???",children:S.discovered?l.jsx("span",{className:"text-white",children:""}):l.jsx(cl,{className:"h-3 w-3 text-muted-foreground"})},S.id)),g.length>6&&l.jsxs("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center text-xs text-muted-foreground",children:["+",g.length-6]})]})]}):l.jsxs("section",{className:q("relative overflow-hidden rounded-[28px] border border-white/10 p-5 sm:p-8 text-white",e),style:zH,children:[l.jsx("div",{className:"absolute inset-0",style:{background:"radial-gradient(900px 480px at 10% -10%, rgba(var(--codex-aurora), 0.35), transparent 60%), radial-gradient(700px 420px at 90% 5%, rgba(var(--codex-orchid), 0.28), transparent 55%), linear-gradient(160deg, rgba(var(--codex-ink), 1) 0%, rgba(11, 10, 26, 1) 100%)"}}),l.jsx("div",{className:"absolute inset-0 opacity-30 mix-blend-screen",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.08) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.06) 1px, transparent 1px)",backgroundSize:"48px 48px"}}),l.jsx("div",{className:"absolute inset-0 opacity-60 mix-blend-screen animate-[auroraShift_18s_linear_infinite]",style:{backgroundImage:"linear-gradient(120deg, rgba(var(--codex-aurora),0.25), rgba(var(--codex-ember),0.18), rgba(var(--codex-orchid),0.22))",backgroundSize:"200% 200%"}}),l.jsx("div",{className:"absolute -top-24 -right-20 h-56 w-56 rounded-full bg-cyan-400/20 blur-3xl"}),l.jsx("div",{className:"absolute -bottom-32 -left-24 h-72 w-72 rounded-full bg-amber-300/10 blur-[90px]"}),l.jsxs("div",{className:"relative z-10 space-y-10",style:t1,children:[l.jsxs(qe.div,{className:"grid gap-6 lg:grid-cols-[1.2fr_0.8fr]",variants:n1,initial:"hidden",animate:"show",children:[l.jsxs(qe.div,{variants:Bo,className:"relative overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-8 backdrop-blur-md",children:[l.jsxs("div",{className:"flex flex-col gap-5 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"h-14 w-14 rounded-2xl border border-white/20 bg-gradient-to-br from-cyan-300/30 via-white/10 to-amber-200/20 flex items-center justify-center shadow-[0_0_20px_rgba(90,209,255,0.25)]",children:l.jsx("span",{className:"text-2xl",children:""})}),l.jsx("div",{className:"absolute -bottom-2 -right-2 h-6 w-6 rounded-full border border-white/30 bg-white/10 backdrop-blur"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/50",children:"Mythic Archive"}),l.jsx("h3",{className:"text-3xl sm:text-4xl text-white",style:BH,children:"Mythic Codex"}),l.jsx("p",{className:"text-sm text-white/70 max-w-md",children:"A living ledger of lunar anomalies. Each encounter reshapes your mythic signature."})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("span",{className:"rounded-full border border-white/15 bg-white/10 px-3 py-1 text-xs text-white/80",children:["Rank ",v.completionPercent,"%"]}),l.jsxs("span",{className:"rounded-full border border-white/15 bg-white/10 px-3 py-1 text-xs text-white/80",children:[v.totalEncounters," Encounters"]})]})]}),l.jsx("div",{className:"mt-6 grid grid-cols-2 gap-3 sm:grid-cols-4",children:[{label:"Total Encounters",value:v.totalEncounters,hint:"dream logs",tint:"rgba(var(--codex-ember),0.18)"},{label:"Completion",value:`${v.completionPercent}%`,hint:"overall",tint:"rgba(var(--codex-aurora),0.18)"},{label:"Discovered",value:v.totalDiscovered,hint:`of ${Object.keys($n).length}`,tint:"rgba(var(--codex-orchid),0.18)"},{label:"Mythic",value:v.mythicCount,hint:`${g.length} total`,tint:"rgba(var(--codex-ember),0.12)"}].map(S=>l.jsxs("div",{className:"rounded-2xl border border-white/10 px-3 py-3",style:{background:`linear-gradient(135deg, ${S.tint} 0%, rgba(255,255,255,0.03) 65%)`},children:[l.jsx("div",{className:"text-[10px] uppercase tracking-[0.2em] text-white/50",children:S.label}),l.jsx("div",{className:"mt-2 text-xl font-semibold text-white",children:S.value}),l.jsx("div",{className:"text-[11px] text-white/55",children:S.hint})]},S.label))})]}),l.jsxs(qe.div,{variants:Bo,className:"relative overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-8 backdrop-blur-md",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/50",children:"Collection Status"}),l.jsx("h4",{className:"text-lg font-semibold text-white",children:"Lunar Registry"})]}),l.jsxs(Re,{className:"bg-white/10 text-white border border-white/15",children:[v.completionPercent,"% Complete"]})]}),l.jsxs("div",{className:"mt-5 space-y-3",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/70",children:[l.jsx("span",{children:"Collection Progress"}),l.jsxs("span",{children:[v.totalDiscovered," / ",Object.keys($n).length]})]}),l.jsx("div",{className:"h-2.5 rounded-full bg-white/10 overflow-hidden",children:l.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-cyan-300 via-indigo-300 to-amber-200 transition-all duration-500",style:{width:`${v.completionPercent}%`}})})]}),l.jsx("div",{className:"mt-6 space-y-3",children:["mythic","legendary","very_rare","rare","normal"].map(S=>{const{count:k,max:j}=w[S],C=j>0?k/j*100:0;return l.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/30 px-3 py-3",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs text-white/70",children:[l.jsx("span",{className:q("font-medium px-2 py-0.5 rounded-full bg-gradient-to-r text-white",sm[S]),children:LH[S]}),l.jsxs("span",{children:[k," / ",j]})]}),l.jsx("div",{className:"mt-2 h-2 rounded-full bg-white/10 overflow-hidden",children:l.jsx("div",{className:q("h-full rounded-full bg-gradient-to-r transition-all duration-500",sm[S]),style:{width:`${C}%`}})})]},S)})})]})]}),l.jsxs(qe.div,{variants:n1,initial:"hidden",animate:"show",className:"space-y-8",children:[l.jsxs(qe.div,{variants:Bo,className:"rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-8 backdrop-blur-md",children:[l.jsxs("button",{onClick:()=>y(!m),className:"w-full flex items-center justify-between text-xs font-medium text-white/70 hover:text-white transition-colors",children:[l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Ut,{className:"h-3 w-3"}),"Particle Effect Showcase"]}),m?l.jsx(io,{className:"h-4 w-4"}):l.jsx(Hs,{className:"h-4 w-4"})]}),l.jsx(Vp,{initial:!1,children:m&&l.jsx(qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.35,ease:"easeOut"},className:"overflow-hidden",children:l.jsx("div",{className:"grid gap-3 mt-4",children:FH.map(S=>l.jsxs("div",{className:"space-y-1",children:[l.jsx("span",{className:"text-[10px] text-white/50 uppercase tracking-wider",children:S.label}),l.jsx(ET,{value:S.value,max:100,variant:S.type,height:14,showGlow:!0,animated:!0,particleConfig:{type:S.type,color:S.color,secondaryColor:S.secondary,density:.6,speed:1.2,glow:!0}})]},S.type))})})})]}),l.jsxs(qe.div,{variants:Bo,className:"rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-8 backdrop-blur-md",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[l.jsx(sp,{className:"h-4 w-4 text-amber-300"}),"Discovered Mythic Moons (",x.length,")"]}),l.jsx("span",{className:"text-xs text-white/60",children:"Tap a moon to reveal its archive"})]}),l.jsx("div",{className:"mt-4 space-y-3",children:x.map(S=>{const k=n[S.id],j=u===S.id,C=c(S.id);return l.jsx(VH,{moon:S,entry:k,isExpanded:j,onToggleExpand:()=>d(j?null:S.id),onToggleFavorite:()=>a(S.id),onToggleLock:()=>i(S.id),onAddBoost:E=>o(S.id,E),particles:C},S.id)})}),x.length===0&&l.jsxs("div",{className:"text-center py-10 text-white/60",children:[l.jsx(Ut,{className:"h-8 w-8 mx-auto mb-2 opacity-70"}),l.jsx("p",{children:"No Mythic moons discovered yet"}),l.jsx("p",{className:"text-xs mt-1",children:"Keep exploring to find rare moon phenomena!"})]})]}),l.jsxs(qe.div,{variants:Bo,className:"rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-8 backdrop-blur-md",children:[l.jsxs("button",{onClick:()=>f(!h),className:"w-full flex items-center justify-between text-sm font-medium text-white",children:[l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(cl,{className:"h-4 w-4 text-white/70"}),"Undiscovered (",b.length,")"]}),h?l.jsx(io,{className:"h-4 w-4"}):l.jsx(Hs,{className:"h-4 w-4"})]}),l.jsx(Vp,{initial:!1,children:h&&l.jsx(qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.35,ease:"easeOut"},className:"overflow-hidden",children:l.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:b.map(S=>l.jsxs("div",{className:"p-3 rounded-2xl bg-black/30 border border-dashed border-white/15 flex items-center gap-2",children:[l.jsx(cl,{className:"h-4 w-4 text-white/50 flex-shrink-0"}),l.jsx("span",{className:"text-sm text-white/60 truncate",children:"???"})]},S.id))})})})]})]})]})]})}var am="rovingFocusGroup.onEntryFocus",HH={bubbles:!1,cancelable:!0},kc="RovingFocusGroup",[a0,AT,GH]=Jd(kc),[KH,DT]=Gn(kc,[GH]),[qH,YH]=KH(kc),OT=p.forwardRef((e,t)=>l.jsx(a0.Provider,{scope:e.__scopeRovingFocusGroup,children:l.jsx(a0.Slot,{scope:e.__scopeRovingFocusGroup,children:l.jsx(XH,{...e,ref:t})})}));OT.displayName=kc;var XH=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,f=p.useRef(null),m=ye(t,f),y=vc(a),[g,v]=Ws({prop:i,defaultProp:o??null,onChange:c,caller:kc}),[x,b]=p.useState(!1),w=xt(u),S=AT(n),k=p.useRef(!1),[j,C]=p.useState(0);return p.useEffect(()=>{const E=f.current;if(E)return E.addEventListener(am,w),()=>E.removeEventListener(am,w)},[w]),l.jsx(qH,{scope:n,orientation:r,dir:y,loop:s,currentTabStopId:g,onItemFocus:p.useCallback(E=>v(E),[v]),onItemShiftTab:p.useCallback(()=>b(!0),[]),onFocusableItemAdd:p.useCallback(()=>C(E=>E+1),[]),onFocusableItemRemove:p.useCallback(()=>C(E=>E-1),[]),children:l.jsx(ne.div,{tabIndex:x||j===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:Q(e.onMouseDown,()=>{k.current=!0}),onFocus:Q(e.onFocus,E=>{const M=!k.current;if(E.target===E.currentTarget&&M&&!x){const N=new CustomEvent(am,HH);if(E.currentTarget.dispatchEvent(N),!N.defaultPrevented){const T=S().filter(R=>R.focusable),A=T.find(R=>R.active),L=T.find(R=>R.id===g),H=[A,L,...T].filter(Boolean).map(R=>R.ref.current);LT(H,d)}}k.current=!1}),onBlur:Q(e.onBlur,()=>b(!1))})})}),IT="RovingFocusGroupItem",$T=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...o}=e,c=Fs(),u=a||c,d=YH(IT,n),h=d.currentTabStopId===u,f=AT(n),{onFocusableItemAdd:m,onFocusableItemRemove:y,currentTabStopId:g}=d;return p.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),l.jsx(a0.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:l.jsx(ne.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:Q(e.onMouseDown,v=>{r?d.onItemFocus(u):v.preventDefault()}),onFocus:Q(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Q(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=ZH(v,d.orientation,d.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=f().filter(S=>S.focusable).map(S=>S.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const S=w.indexOf(v.currentTarget);w=d.loop?eG(w,S+1):w.slice(S+1)}setTimeout(()=>LT(w))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:g!=null}):i})})});$T.displayName=IT;var QH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function JH(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function ZH(e,t,n){const r=JH(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return QH[r]}function LT(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function eG(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var tG=OT,nG=$T,Rh="Tabs",[rG]=Gn(Rh,[DT]),FT=DT(),[sG,Ey]=rG(Rh),zT=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:i="horizontal",dir:o,activationMode:c="automatic",...u}=e,d=vc(o),[h,f]=Ws({prop:r,onChange:s,defaultProp:a??"",caller:Rh});return l.jsx(sG,{scope:n,baseId:Fs(),value:h,onValueChange:f,orientation:i,dir:d,activationMode:c,children:l.jsx(ne.div,{dir:d,"data-orientation":i,...u,ref:t})})});zT.displayName=Rh;var BT="TabsList",VT=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,a=Ey(BT,n),i=FT(n);return l.jsx(tG,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:l.jsx(ne.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});VT.displayName=BT;var UT="TabsTrigger",WT=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=e,i=Ey(UT,n),o=FT(n),c=KT(i.baseId,r),u=qT(i.baseId,r),d=r===i.value;return l.jsx(nG,{asChild:!0,...o,focusable:!s,active:d,children:l.jsx(ne.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:t,onMouseDown:Q(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?i.onValueChange(r):h.preventDefault()}),onKeyDown:Q(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(r)}),onFocus:Q(e.onFocus,()=>{const h=i.activationMode!=="manual";!d&&!s&&h&&i.onValueChange(r)})})})});WT.displayName=UT;var HT="TabsContent",GT=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...i}=e,o=Ey(HT,n),c=KT(o.baseId,r),u=qT(o.baseId,r),d=r===o.value,h=p.useRef(d);return p.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),l.jsx(Kn,{present:s||d,children:({present:f})=>l.jsx(ne.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&a})})});GT.displayName=HT;function KT(e,t){return`${e}-trigger-${t}`}function qT(e,t){return`${e}-content-${t}`}var aG=zT,YT=VT,XT=WT,QT=GT;const JT=aG,Ty=p.forwardRef(({className:e,...t},n)=>l.jsx(YT,{ref:n,className:q("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Ty.displayName=YT.displayName;const Vi=p.forwardRef(({className:e,...t},n)=>l.jsx(XT,{ref:n,className:q("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Vi.displayName=XT.displayName;const Ui=p.forwardRef(({className:e,...t},n)=>l.jsx(QT,{ref:n,className:q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ui.displayName=QT.displayName;function iG(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var My="ScrollArea",[ZT]=Gn(My),[oG,qn]=ZT(My),eM=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...i}=e,[o,c]=p.useState(null),[u,d]=p.useState(null),[h,f]=p.useState(null),[m,y]=p.useState(null),[g,v]=p.useState(null),[x,b]=p.useState(0),[w,S]=p.useState(0),[k,j]=p.useState(!1),[C,E]=p.useState(!1),M=ye(t,T=>c(T)),N=vc(s);return l.jsx(oG,{scope:n,type:r,dir:N,scrollHideDelay:a,scrollArea:o,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:y,scrollbarXEnabled:k,onScrollbarXEnabledChange:j,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:C,onScrollbarYEnabledChange:E,onCornerWidthChange:b,onCornerHeightChange:S,children:l.jsx(ne.div,{dir:N,...i,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});eM.displayName=My;var tM="ScrollAreaViewport",nM=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=e,i=qn(tM,n),o=p.useRef(null),c=ye(t,o,i.onViewportChange);return l.jsxs(l.Fragment,{children:[l.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),l.jsx(ne.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:l.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});nM.displayName=tM;var Ir="ScrollAreaScrollbar",Ny=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=qn(Ir,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,o=e.orientation==="horizontal";return p.useEffect(()=>(o?a(!0):i(!0),()=>{o?a(!1):i(!1)}),[o,a,i]),s.type==="hover"?l.jsx(lG,{...r,ref:t,forceMount:n}):s.type==="scroll"?l.jsx(cG,{...r,ref:t,forceMount:n}):s.type==="auto"?l.jsx(rM,{...r,ref:t,forceMount:n}):s.type==="always"?l.jsx(Py,{...r,ref:t}):null});Ny.displayName=Ir;var lG=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=qn(Ir,e.__scopeScrollArea),[a,i]=p.useState(!1);return p.useEffect(()=>{const o=s.scrollArea;let c=0;if(o){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),l.jsx(Kn,{present:n||a,children:l.jsx(rM,{"data-state":a?"visible":"hidden",...r,ref:t})})}),cG=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=qn(Ir,e.__scopeScrollArea),a=e.orientation==="horizontal",i=Dh(()=>c("SCROLL_END"),100),[o,c]=iG("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,s.scrollHideDelay,c]),p.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const m=u[d];h!==m&&(c("SCROLL"),i()),h=m};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,a,c,i]),l.jsx(Kn,{present:n||o!=="hidden",children:l.jsx(Py,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Q(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Q(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),rM=p.forwardRef((e,t)=>{const n=qn(Ir,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,i]=p.useState(!1),o=e.orientation==="horizontal",c=Dh(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(o?u:d)}},10);return mo(n.viewport,c),mo(n.content,c),l.jsx(Kn,{present:r||a,children:l.jsx(Py,{"data-state":a?"visible":"hidden",...s,ref:t})})}),Py=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=qn(Ir,e.__scopeScrollArea),a=p.useRef(null),i=p.useRef(0),[o,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=lM(o.viewport,o.content),d={...r,sizes:o,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:f=>i.current=f};function h(f,m){return pG(f,i.current,o,m)}return n==="horizontal"?l.jsx(uG,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const f=s.viewport.scrollLeft,m=r1(f,o,s.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):n==="vertical"?l.jsx(dG,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const f=s.viewport.scrollTop,m=r1(f,o);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),uG=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=qn(Ir,e.__scopeScrollArea),[i,o]=p.useState(),c=p.useRef(null),u=ye(t,c,a.onScrollbarXChange);return p.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),l.jsx(aM,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Ah(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollLeft+d.deltaX;e.onWheelScroll(f),uM(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Od(i.paddingLeft),paddingEnd:Od(i.paddingRight)}})}})}),dG=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=qn(Ir,e.__scopeScrollArea),[i,o]=p.useState(),c=p.useRef(null),u=ye(t,c,a.onScrollbarYChange);return p.useEffect(()=>{c.current&&o(getComputedStyle(c.current))},[c]),l.jsx(aM,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Ah(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollTop+d.deltaY;e.onWheelScroll(f),uM(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Od(i.paddingTop),paddingEnd:Od(i.paddingBottom)}})}})}),[hG,sM]=ZT(Ir),aM=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:o,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=e,m=qn(Ir,n),[y,g]=p.useState(null),v=ye(t,M=>g(M)),x=p.useRef(null),b=p.useRef(""),w=m.viewport,S=r.content-r.viewport,k=xt(d),j=xt(c),C=Dh(h,10);function E(M){if(x.current){const N=M.clientX-x.current.left,T=M.clientY-x.current.top;u({x:N,y:T})}}return p.useEffect(()=>{const M=N=>{const T=N.target;(y==null?void 0:y.contains(T))&&k(N,S)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[w,y,S,k]),p.useEffect(j,[r,j]),mo(y,C),mo(m.content,C),l.jsx(hG,{scope:n,scrollbar:y,hasThumb:s,onThumbChange:xt(a),onThumbPointerUp:xt(i),onThumbPositionChange:j,onThumbPointerDown:xt(o),children:l.jsx(ne.div,{...f,ref:v,style:{position:"absolute",...f.style},onPointerDown:Q(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),x.current=y.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),E(M))}),onPointerMove:Q(e.onPointerMove,E),onPointerUp:Q(e.onPointerUp,M=>{const N=M.target;N.hasPointerCapture(M.pointerId)&&N.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=b.current,m.viewport&&(m.viewport.style.scrollBehavior=""),x.current=null})})})}),Dd="ScrollAreaThumb",iM=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=sM(Dd,e.__scopeScrollArea);return l.jsx(Kn,{present:n||s.hasThumb,children:l.jsx(fG,{ref:t,...r})})}),fG=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=qn(Dd,n),i=sM(Dd,n),{onThumbPositionChange:o}=i,c=ye(t,h=>i.onThumbChange(h)),u=p.useRef(void 0),d=Dh(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const h=a.viewport;if(h){const f=()=>{if(d(),!u.current){const m=gG(h,o);u.current=m,o()}};return o(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[a.viewport,d,o]),l.jsx(ne.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Q(e.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),y=h.clientX-m.left,g=h.clientY-m.top;i.onThumbPointerDown({x:y,y:g})}),onPointerUp:Q(e.onPointerUp,i.onThumbPointerUp)})});iM.displayName=Dd;var _y="ScrollAreaCorner",oM=p.forwardRef((e,t)=>{const n=qn(_y,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?l.jsx(mG,{...e,ref:t}):null});oM.displayName=_y;var mG=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=qn(_y,n),[a,i]=p.useState(0),[o,c]=p.useState(0),u=!!(a&&o);return mo(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),mo(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),i(d)}),u?l.jsx(ne.div,{...r,ref:t,style:{width:a,height:o,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Od(e){return e?parseInt(e,10):0}function lM(e,t){const n=e/t;return isNaN(n)?0:n}function Ah(e){const t=lM(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function pG(e,t,n,r="ltr"){const s=Ah(n),a=s/2,i=t||a,o=s-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return cM([c,u],h)(e)}function r1(e,t,n="ltr"){const r=Ah(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,i=t.content-t.viewport,o=a-r,c=n==="ltr"?[0,i]:[i*-1,0],u=Yl(e,c);return cM([0,i],[0,o])(u)}function cM(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function uM(e,t){return e>0&&e<t}var gG=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,o=n.top!==a.top;(i||o)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Dh(e,t){const n=xt(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function mo(e,t){const n=xt(t);jt(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var dM=eM,yG=nM,vG=oM;const i0=p.forwardRef(({className:e,children:t,...n},r)=>l.jsxs(dM,{ref:r,className:q("relative overflow-hidden",e),...n,children:[l.jsx(yG,{className:"h-full w-full rounded-[inherit]",children:t}),l.jsx(hM,{}),l.jsx(vG,{})]}));i0.displayName=dM.displayName;const hM=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>l.jsx(Ny,{ref:r,orientation:t,className:q("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:l.jsx(iM,{className:"relative flex-1 rounded-full bg-border"})}));hM.displayName=Ny.displayName;function xG(){const[e,t]=p.useState(""),[n,r]=p.useState("date"),[s,a]=p.useState("dreams"),[i,o]=p.useState([]),[c,u]=p.useState(!0),[d,h]=p.useState({today:!0,thisWeek:!0,thisMonth:!0,older:!1}),[f,m]=p.useState(null),[y,g]=p.useState(!1),[v,x]=p.useState(!1),b="superBlueBloodMoon",w="pixelDreamMoon",S="mythic-locked-moon";p.useEffect(()=>{const{phenomenon:N}=Kl();m(N),g(localStorage.getItem(S)===b),x(localStorage.getItem(S)===w)},[]);const k=()=>{D8();const{phenomenon:N}=Kl();m(N),yd(N)};p.useEffect(()=>{(async()=>{try{const T=await Ha();o(T)}catch(T){console.error("Error loading data:",T)}finally{u(!1)}})()},[]);const j=p.useMemo(()=>e?i.filter(N=>{var T;return N.world.toLowerCase().includes(e.toLowerCase())||N.entities.some(A=>A.toLowerCase().includes(e.toLowerCase()))||((T=N.notes)==null?void 0:T.toLowerCase().includes(e.toLowerCase()))}):i,[i,e]),C=p.useMemo(()=>{const N=[],T=[],A=[],L=[];return j.forEach(D=>{const H=new Date(D.date);CW(H)?N.push(D):jW(H,{weekStartsOn:1})?T.push(D):kW(H)?A.push(D):L.push(D)}),{today:N,thisWeek:T,thisMonth:A,older:L}},[j]),E=p.useMemo(()=>{const N={};return j.forEach(T=>{const A=T.world||"Unknown World";N[A]||(N[A]=[]),N[A].push(T)}),Object.entries(N).sort((T,A)=>A[1].length-T[1].length)},[j]),M=N=>{h(T=>({...T,[N]:!T[N]}))};return l.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[l.jsx(NH,{searchQuery:e,onSearchChange:t,groupBy:n,onGroupByChange:r,totalDreams:j.length,currentPhenomenon:f,onChangePhenomenon:k,showDreamFilters:s==="dreams"}),!1,l.jsxs(JT,{value:s,onValueChange:N=>a(N),className:"flex-1 flex flex-col",children:[l.jsx("div",{className:"px-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:l.jsxs(Ty,{className:"w-full h-12 bg-transparent gap-2",children:[l.jsxs(Vi,{value:"dreams",className:"flex-1 gap-2 data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:[l.jsx(rh,{className:"h-4 w-4"}),l.jsx("span",{children:"Dream Logs"})]}),l.jsxs(Vi,{value:"codex",className:"flex-1 gap-2 data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:[l.jsx(og,{className:"h-4 w-4"}),l.jsx("span",{children:"Mythic Codex"})]})]})}),l.jsx(Ui,{value:"dreams",className:"flex-1 mt-0 overflow-hidden",children:l.jsx(i0,{className:"h-full pb-28 relative z-0",children:c?l.jsx(HW,{}):j.length===0?l.jsxs("div",{className:"text-center py-12 text-muted-foreground px-4",children:[l.jsx(ig,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),l.jsx("p",{children:""})]}):n==="date"?l.jsxs("div",{className:"space-y-4 p-4",children:[l.jsx(mu,{title:"",dreams:C.today,colorClass:"bg-primary",isExpanded:d.today,onToggle:()=>M("today")}),l.jsx(mu,{title:"",dreams:C.thisWeek,colorClass:"bg-blue-500",isExpanded:d.thisWeek,onToggle:()=>M("thisWeek")}),l.jsx(mu,{title:"",dreams:C.thisMonth,colorClass:"bg-emerald-500",isExpanded:d.thisMonth,onToggle:()=>M("thisMonth")}),l.jsx(mu,{title:"",dreams:C.older,colorClass:"bg-muted-foreground/50",isExpanded:d.older,onToggle:()=>M("older")})]}):l.jsx("div",{className:"space-y-4 p-4",children:E.map(([N,T])=>l.jsx(MH,{worldName:N,dreams:T,isExpanded:d[N]??!0,onToggle:()=>M(N)},N))})})}),l.jsx(Ui,{value:"codex",className:"flex-1 mt-0 overflow-hidden",children:l.jsx(i0,{className:"h-full pb-28 relative z-0",children:l.jsx("div",{className:"p-4",children:l.jsx(WH,{})})})})]}),l.jsx(fh,{})]})}function s1({dreams:e,mode:t}){const n=p.useMemo(()=>{if(e.length===0)return[];const s=[...e].sort((o,c)=>new Date(o.date).getTime()-new Date(c.date).getTime()),a=new Date(s[0].date),i=new Date(s[s.length-1].date);return t==="week"?S7({start:a,end:i},{weekStartsOn:1}).map(c=>{const u=new Date(c);u.setDate(u.getDate()+6);const d=e.filter(h=>{const f=new Date(h.date);return f>=c&&f<=u}).length;return{label:zt(c,"d MMM",{locale:Xs}),count:d,period:c}}).slice(-12):b7({start:a,end:i}).map(c=>{const u=new Date(c);u.setMonth(u.getMonth()+1),u.setDate(0);const d=e.filter(h=>{const f=new Date(h.date);return f>=c&&f<=u}).length;return{label:zt(c,"MMM yy",{locale:Xs}),count:d,period:c}}).slice(-12)},[e,t]),r=Math.max(...n.map(s=>s.count),1);return l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ag,{className:"w-4 h-4 text-primary"}),l.jsxs("h2",{className:"text-sm font-semibold",children:[" (",t==="week"?"":"",")"]})]}),l.jsxs("div",{className:"space-y-2",children:[n.map((s,a)=>l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-muted-foreground",children:s.label}),l.jsxs("span",{className:"font-semibold",children:[s.count," "]})]}),l.jsx("div",{className:"h-2 bg-secondary rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-300",style:{width:`${s.count/r*100}%`}})})]},a)),n.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:""})]})]})}function wG({dreams:e}){const{words:t,totalMentions:n,uniqueCount:r,topWord:s}=p.useMemo(()=>{var j;const i=new Set(["","","","","","","","","","","","","","","","","","","","","the","a","an","and","or","but","in","on","at","to","for","of","with","by","from","up","about","into","is","was","were","be","been","are","as"]),o=new Map,c=C=>/[\u0E00-\u0E7F]/.test(C),u=C=>C.normalize("NFC").replace(/^[^\p{L}\p{N}]+|[^\p{L}\p{N}]+$/gu,"").trim(),d=(C,E)=>{const M=u(C);if(!M)return;const N=c(M),T=N?M:M.toLowerCase();if(T.length<(N?2:3)||i.has(T))return;const A=o.get(T);A?(A.count+=1,A.weight+=E):o.set(T,{count:1,weight:E,display:M})},h=(C,E)=>{C&&C.split(/[\s,.:;!?()[\]{}"'\-_/]+/).filter(Boolean).forEach(M=>d(M,E))},f=(C,E)=>{C.forEach(M=>d(M,E))};e.forEach(C=>{h(C.notes||"",1),f(C.environments||[],1.2),f(C.entities||[],1.4),h(C.world||"",1.6)});const m=Array.from(o.entries()).map(([C,E])=>({word:E.display,count:E.count,weight:E.weight})).sort((C,E)=>E.weight-C.weight||E.count-C.count).slice(0,36);if(m.length===0)return{words:[],totalMentions:0,uniqueCount:0,topWord:null};const y=m.map(C=>C.weight),g=Math.max(...y),v=Math.min(...y),x=g-v||1,b=13,w=38,S=C=>C.split("").reduce((E,M,N)=>E+M.charCodeAt(0)*(N+3),0);return{words:m.map((C,E)=>{const M=(C.weight-v)/x,N=Math.pow(M,.72),T=Math.max(.76,1-Math.max(0,C.word.length-12)*.02),A=b+N*(w-b)*T,L=S(C.word),D=E<4?"hero":E<12?"core":"soft";return{word:C.word,count:C.count,weight:C.weight,size:A,tier:D,colorIndex:L%5,rotate:D==="hero"?0:D==="soft"?(L%7-3)*1.5:(L%5-2)*.8}}),totalMentions:m.reduce((C,E)=>C+E.count,0),uniqueCount:m.length,topWord:((j=m[0])==null?void 0:j.word)??null}},[e]),a=[{text:"text-sky-700 dark:text-sky-300",bg:"bg-sky-100/70 dark:bg-sky-900/30",ring:"ring-sky-200/70 dark:ring-sky-800/50",gradient:"linear-gradient(120deg, #38bdf8, #6366f1)"},{text:"text-violet-700 dark:text-violet-300",bg:"bg-violet-100/70 dark:bg-violet-900/30",ring:"ring-violet-200/70 dark:ring-violet-800/50",gradient:"linear-gradient(120deg, #a855f7, #6366f1)"},{text:"text-emerald-700 dark:text-emerald-300",bg:"bg-emerald-100/70 dark:bg-emerald-900/30",ring:"ring-emerald-200/70 dark:ring-emerald-800/50",gradient:"linear-gradient(120deg, #34d399, #38bdf8)"},{text:"text-amber-700 dark:text-amber-300",bg:"bg-amber-100/70 dark:bg-amber-900/30",ring:"ring-amber-200/70 dark:ring-amber-800/50",gradient:"linear-gradient(120deg, #f59e0b, #fb7185)"},{text:"text-rose-700 dark:text-rose-300",bg:"bg-rose-100/70 dark:bg-rose-900/30",ring:"ring-rose-200/70 dark:ring-rose-800/50",gradient:"linear-gradient(120deg, #fb7185, #a855f7)"}];return t.length===0?l.jsxs("div",{className:"card-minimal relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 opacity-70",style:{backgroundImage:"radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.12), transparent 55%), radial-gradient(circle at 80% 0%, rgba(168, 85, 247, 0.12), transparent 45%)"}}),l.jsxs("div",{className:"relative flex items-center gap-2 mb-3",children:[l.jsx(Jv,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Word Cloud"})]}),l.jsx("div",{className:"relative text-sm text-muted-foreground text-center py-8",children:""})]}):l.jsxs("div",{className:"card-minimal relative overflow-hidden space-y-4",children:[l.jsx("div",{className:"absolute inset-0 opacity-70",style:{backgroundImage:"radial-gradient(circle at 15% 20%, rgba(99, 102, 241, 0.12), transparent 55%), radial-gradient(circle at 80% 0%, rgba(56, 189, 248, 0.12), transparent 45%)"}}),l.jsxs("div",{className:"relative flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Jv,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Word Cloud"})]}),l.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-muted-foreground",children:[l.jsx(Ut,{className:"w-3 h-3"}),""]})]}),l.jsxs("div",{className:"relative flex flex-wrap gap-2 text-[11px] text-muted-foreground",children:[l.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-secondary/70",children:[" ",r]}),l.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-secondary/70",children:[" ",n," "]}),s&&l.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-primary/10 text-primary",children:[": ",s]})]}),l.jsx("div",{className:"relative flex flex-wrap gap-2 justify-center items-center py-4 min-h-[220px]",children:t.map(({word:i,count:o,size:c,tier:u,colorIndex:d,rotate:h})=>{const f=a[d],m=u==="hero",y=u==="core";return l.jsx("span",{className:q("cursor-default select-none transition-all duration-200 ease-out",m?"px-1 font-semibold tracking-tight text-transparent bg-clip-text drop-shadow-sm":"px-2.5 py-1 rounded-full ring-1",!m&&f.bg,!m&&f.ring,!m&&f.text),style:{fontSize:`${c}px`,fontWeight:m?600:y?500:400,opacity:m?.95:y?.85:.7,transform:`rotate(${h}deg)`,backgroundImage:m?f.gradient:void 0},title:`${o} `,children:i},i)})})]})}function bG({dreams:e}){const t=p.useMemo(()=>{const n=new Map;return e.forEach(r=>{[...r.environments,...r.entities,r.world,r.timeSystem,r.safetyOverride].forEach(a=>{a&&a!=="unknown"&&a!=="none"&&n.set(a,(n.get(a)||0)+1)})}),Array.from(n.entries()).map(([r,s])=>({tag:r,count:s})).sort((r,s)=>s.count-r.count).slice(0,20)},[e]);return l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(tR,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-sm font-semibold",children:""})]}),t.length>0?l.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(({tag:n,count:r})=>l.jsxs(Re,{variant:"secondary",className:"text-xs px-3 py-1 gap-2",children:[l.jsx("span",{children:n}),l.jsx("span",{className:"text-primary font-semibold",children:r})]},n))}):l.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:""})]})}function SG({dreams:e}){const t=p.useMemo(()=>{const r=[...e].sort((c,u)=>new Date(u.date).getTime()-new Date(c.date).getTime()),s=Array.from({length:14},(c,u)=>{const d=EW(new Date,u),h=r.filter(m=>zt(new Date(m.date),"yyyy-MM-dd")===zt(d,"yyyy-MM-dd")),f=h.length>0?h.reduce((m,y)=>m+y.threatLevel,0)/h.length:0;return{date:d,label:zt(d,"d MMM",{locale:Xs}),avgThreat:f,count:h.length}}).reverse(),a=s.slice(-7).filter(c=>c.count>0).reduce((c,u,d,h)=>c+u.avgThreat/h.length,0),i=s.slice(0,7).filter(c=>c.count>0).reduce((c,u,d,h)=>c+u.avgThreat/h.length,0),o=a-i;return{data:s,trend:o,recentAvg:a,previousAvg:i}},[e]),n=Math.max(...t.data.map(r=>r.avgThreat),5);return l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Dl,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Threat Level Trends"})]}),t.trend!==0&&l.jsxs("div",{className:`flex items-center gap-1 text-xs ${t.trend>0?"text-red-500":t.trend<0?"text-green-500":"text-muted-foreground"}`,children:[t.trend>0?l.jsx(Dl,{className:"w-3 h-3"}):t.trend<0?l.jsx(rR,{className:"w-3 h-3"}):l.jsx(Q_,{className:"w-3 h-3"}),l.jsx("span",{children:Math.abs(t.trend).toFixed(2)})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 p-3 bg-secondary/50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"7 "}),l.jsx("p",{className:"text-lg font-bold",children:t.recentAvg.toFixed(2)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"7 "}),l.jsx("p",{className:"text-lg font-bold",children:t.previousAvg.toFixed(2)})]})]}),l.jsx("div",{className:"space-y-2",children:t.data.map((r,s)=>l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-muted-foreground",children:r.label}),l.jsx("span",{className:`font-semibold ${r.avgThreat>=4?"text-red-500":r.avgThreat>=3?"text-orange-500":"text-foreground"}`,children:r.count>0?r.avgThreat.toFixed(1):"-"})]}),r.count>0&&l.jsx("div",{className:"h-1.5 bg-secondary rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full transition-all ${r.avgThreat>=4?"bg-red-500":r.avgThreat>=3?"bg-orange-500":"bg-primary"}`,style:{width:`${r.avgThreat/n*100}%`}})})]},s))})]})}function kG({dreams:e,entities:t}){const n=p.useMemo(()=>{const s=new Map;e.forEach(o=>{o.environments.forEach(c=>{s.set(c,(s.get(c)||0)+1)})});const a=new Map;e.forEach(o=>{if(o.entities.length>=2){const c=o.entities.sort().join(" + ");a.set(c,(a.get(c)||0)+1)}});const i=new Map;for(let o=0;o<e.length-1;o++){const c=`${e[o].world}  ${e[o+1].world}`;i.set(c,(i.get(c)||0)+1)}return{recurringEnvs:Array.from(s.entries()).filter(([o,c])=>c>=3).map(([o,c])=>({env:o,count:c})).sort((o,c)=>c.count-o.count).slice(0,5),recurringCombos:Array.from(a.entries()).filter(([o,c])=>c>=2).map(([o,c])=>({combo:o,count:c})).sort((o,c)=>c.count-o.count).slice(0,3),worldPatterns:Array.from(i.entries()).filter(([o,c])=>c>=2).map(([o,c])=>({seq:o,count:c})).sort((o,c)=>c.count-o.count).slice(0,3)}},[e]),r=n.recurringEnvs.length>0||n.recurringCombos.length>0||n.worldPatterns.length>0;return l.jsxs("div",{className:"card-minimal space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Z_,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Recurring Patterns"})]}),r?l.jsxs("div",{className:"space-y-4",children:[n.recurringEnvs.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:""}),l.jsx("div",{className:"space-y-1",children:n.recurringEnvs.map(({env:s,count:a})=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{children:s}),l.jsxs(Re,{variant:"secondary",className:"text-xs",children:[a," "]})]},s))})]}),n.recurringCombos.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:""}),l.jsx("div",{className:"space-y-1",children:n.recurringCombos.map(({combo:s,count:a})=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-xs",children:s}),l.jsxs(Re,{variant:"secondary",className:"text-xs",children:[a," "]})]},s))})]}),n.worldPatterns.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:""}),l.jsx("div",{className:"space-y-1",children:n.worldPatterns.map(({seq:s,count:a})=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-xs",children:s}),l.jsxs(Re,{variant:"secondary",className:"text-xs",children:[a," "]})]},s))})]})]}):l.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:""})]})}function jG({dreams:e,entities:t}){const n=p.useMemo(()=>{const s=new Map;return t.forEach(a=>{const i=a.dreamIds.length;if(i>=2){const o=e.filter(c=>a.dreamIds.includes(c.id)).sort((c,u)=>new Date(u.date).getTime()-new Date(c.date).getTime())[0];s.set(a.name,{count:i,role:a.role,lastSeen:(o==null?void 0:o.date)||""})}}),Array.from(s.entries()).map(([a,i])=>({name:a,...i})).sort((a,i)=>i.count-a.count).slice(0,10)},[e,t]),r=p.useMemo(()=>n.filter(s=>s.count>=3).map(s=>` "${s.name}"  ${s.count} !`),[n]);return l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Pr,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Entities "})]}),r.length>0&&l.jsx("div",{className:"space-y-2",children:r.map((s,a)=>l.jsxs("div",{className:"flex items-start gap-2 p-2 bg-blue-50/50 dark:bg-blue-950/20 border border-blue-500/50 rounded-lg",children:[l.jsx(U_,{className:"w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0"}),l.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:s})]},a))}),n.length>0?l.jsx("div",{className:"space-y-2",children:n.map(({name:s,count:a,role:i})=>l.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-secondary/50 transition-colors",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium",children:s}),l.jsx("p",{className:"text-xs text-muted-foreground",children:i})]}),l.jsxs(Re,{variant:"secondary",className:"text-xs",children:[a," "]})]},s))}):l.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:" entities "})]})}function CG({dreams:e}){const t=p.useMemo(()=>{if(e.length===0)return{currentStreak:0,longestStreak:0,totalDays:0,streakDays:[]};const r=[...e].sort((y,g)=>new Date(g.date).getTime()-new Date(y.date).getTime()),s=new Set(r.map(y=>zt(new Date(y.date),"yyyy-MM-dd")));let a=0,i=new Date;for(i.setHours(0,0,0,0);s.has(zt(i,"yyyy-MM-dd"));)a++,i.setDate(i.getDate()-1);if(a===0&&(i=new Date,i.setDate(i.getDate()-1),i.setHours(0,0,0,0),s.has(zt(i,"yyyy-MM-dd"))))for(a=1,i.setDate(i.getDate()-1);s.has(zt(i,"yyyy-MM-dd"));)a++,i.setDate(i.getDate()-1);const o=new Date(r[r.length-1].date),c=new Date(r[0].date),u=w7({start:o,end:c});let d=0,h=0;u.forEach(y=>{s.has(zt(y,"yyyy-MM-dd"))?(h++,d=Math.max(d,h)):h=0});const f=[],m=new Date;m.setHours(0,0,0,0);for(let y=0;y<a&&y<7;y++)f.push(new Date(m)),m.setDate(m.getDate()-1);return{currentStreak:a,longestStreak:d,totalDays:s.size,streakDays:f.reverse()}},[e]),n=r=>r>=30?"":r>=14?"":r>=7?"":r>=3?"":"";return l.jsxs("div",{className:"card-minimal space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ff,{className:"w-4 h-4 text-orange-500"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Dream Streak"})]}),l.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-950/20 dark:to-red-950/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[l.jsx("div",{className:"text-4xl mb-2",children:n(t.currentStreak)}),l.jsx("div",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mb-1",children:t.currentStreak}),l.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"text-center p-3 bg-secondary/50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[l.jsx(B_,{className:"w-3 h-3 text-primary"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),l.jsx("p",{className:"text-xl font-bold",children:t.longestStreak}),l.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),l.jsxs("div",{className:"text-center p-3 bg-secondary/50 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[l.jsx(ff,{className:"w-3 h-3 text-primary"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),l.jsx("p",{className:"text-xl font-bold",children:t.totalDays}),l.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),t.streakDays.length>0&&l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:":"}),l.jsx("div",{className:"flex gap-1 justify-center",children:t.streakDays.map((r,s)=>l.jsxs("div",{className:"flex flex-col items-center",title:zt(r,"d MMM yyyy",{locale:Xs}),children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-500/20 flex items-center justify-center",children:l.jsx(ff,{className:"w-4 h-4 text-orange-500"})}),l.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:zt(r,"d")})]},s))})]}),t.currentStreak===0&&l.jsx("div",{className:"text-center p-3 bg-muted rounded-lg",children:l.jsx("p",{className:"text-sm text-muted-foreground",children:" streak ! "})}),t.currentStreak>=7&&l.jsx("div",{className:"text-center p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:l.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["!  ",t.currentStreak," ","! "]})})]})}function EG(){return l.jsxs("div",{className:"card-minimal space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(me,{className:"w-4 h-4 rounded"}),l.jsx(me,{className:"h-3 w-20"})]}),l.jsx(me,{className:"h-8 w-12"})]})}function TG(){return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(me,{className:"w-5 h-5 rounded"}),l.jsx(me,{className:"h-6 w-40"})]}),l.jsx(me,{className:"h-8 w-8 rounded"})]}),l.jsx(me,{className:"h-10 w-full rounded-lg"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(4)].map((e,t)=>l.jsx(EG,{},t))}),l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(me,{className:"w-4 h-4 rounded"}),l.jsx(me,{className:"h-4 w-32"})]}),l.jsx("div",{className:"space-y-2",children:[...Array(6)].map((e,t)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(me,{className:"w-16 h-3"}),l.jsx(me,{className:"flex-1 h-2 rounded-full"}),l.jsx(me,{className:"w-8 h-3"})]},t))})]}),l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(me,{className:"w-4 h-4 rounded"}),l.jsx(me,{className:"h-4 w-24"})]}),l.jsx("div",{className:"space-y-2",children:[...Array(5)].map((e,t)=>l.jsxs("div",{className:"flex items-center justify-between py-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(me,{className:"w-8 h-8 rounded-full"}),l.jsx(me,{className:"h-4 w-24"})]}),l.jsx(me,{className:"h-5 w-12 rounded-full"})]},t))})]})]})}function MG({totalDreams:e,worldsCount:t,entitiesCount:n,threatsCount:r}){const s={dreams:e*3,worlds:t*.5,entities:n*.5,threats:r*.3,relations:e*.5},i=Object.values(s).reduce((h,f)=>h+f,0)/1024,o=500,c=i/o*100,u=o-i,d=Math.floor(u/(i/e||3))+e;return l.jsxs("div",{className:"card-minimal space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(W_,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Database Usage"})]}),l.jsxs(Re,{variant:"outline",className:"text-xs",children:[l.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full mr-1 animate-pulse"}),"Live"]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-muted-foreground",children:"Storage Used"}),l.jsxs("span",{className:"font-semibold",children:[i.toFixed(2)," MB / ",o," MB"]})]}),l.jsx("div",{className:"h-3 bg-secondary rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full transition-all rounded-full ${c>80?"bg-red-500":c>60?"bg-orange-500":c>40?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(c,100)}%`}})}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.toFixed(2),"%    ",u.toFixed(2)," MB"]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2 border-t",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[l.jsx(G_,{className:"w-3 h-3"}),"Dream Logs"]}),l.jsxs("p",{className:"text-sm font-semibold",children:[s.dreams.toFixed(1)," KB"]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[l.jsx(ts,{className:"w-3 h-3"}),"Worlds"]}),l.jsxs("p",{className:"text-sm font-semibold",children:[s.worlds.toFixed(1)," KB"]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[l.jsx(Pr,{className:"w-3 h-3"}),"Entities"]}),l.jsxs("p",{className:"text-sm font-semibold",children:[s.entities.toFixed(1)," KB"]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[l.jsx(oo,{className:"w-3 h-3"}),"Threats"]}),l.jsxs("p",{className:"text-sm font-semibold",children:[s.threats.toFixed(1)," KB"]})]})]}),l.jsxs("div",{className:"pt-2 border-t space-y-1",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{className:"text-muted-foreground",children:""}),l.jsxs("span",{className:"font-semibold text-primary",children:["~",d.toLocaleString()," logs"]})]}),l.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",(d-e).toLocaleString()," logs"]})]})]})}function NG({totalDreams:e,avgThreatLevel:t,threatTrend:n,worldsCount:r,entitiesCount:s}){return l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"card-minimal",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(i5,{className:"w-4 h-4 text-muted-foreground"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Dreams"})]}),l.jsx("p",{className:"text-2xl font-bold",children:e})]}),l.jsxs("div",{className:"card-minimal",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Dl,{className:"w-4 h-4 text-muted-foreground"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Threat"})]}),l.jsxs("div",{className:"flex items-baseline gap-2",children:[l.jsx("p",{className:"text-2xl font-bold",children:t}),n!==0&&e>7&&l.jsxs(Re,{variant:n>0?"destructive":"secondary",className:"text-xs",children:[n>0?"":""," ",Math.abs(n).toFixed(1)]})]})]}),l.jsxs("div",{className:"card-minimal",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(ts,{className:"w-4 h-4 text-muted-foreground"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Worlds"})]}),l.jsx("p",{className:"text-2xl font-bold",children:r})]}),l.jsxs("div",{className:"card-minimal",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(Pr,{className:"w-4 h-4 text-muted-foreground"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:"Entities"})]}),l.jsx("p",{className:"text-2xl font-bold",children:s})]})]})}function PG({dreams:e,worldCounts:t,timeSystemCounts:n}){const r=e.length,s=e.slice(0,7),a=e.slice(7,14),i=s.length>0?s.reduce((f,m)=>f+m.threatLevel,0)/s.length:0,o=a.length>0?a.reduce((f,m)=>f+m.threatLevel,0)/a.length:0,c=i-o,u=[];c>.5?u.push({type:"warning",text:` ${c.toFixed(1)} `,icon:oo}):c<-.5&&u.push({type:"success",text:` ${Math.abs(c).toFixed(1)} `,icon:dc}),n.activated>n.inactive&&u.push({type:"info",text:"Time System ",icon:qr});const d=s.filter(f=>f.threatLevel>=4).length;d>=3&&u.push({type:"danger",text:` ${d} `,icon:oo});const h=t[0];return h&&h.count>r*.3&&u.push({type:"info",text:` "${h.name}"  (${h.count} )`,icon:ts}),u.length===0?null:l.jsx("div",{className:"space-y-2",children:u.map((f,m)=>l.jsxs("div",{className:`card-minimal flex items-start gap-3 ${f.type==="danger"?"border-red-500/50 bg-red-50/50 dark:bg-red-950/20":f.type==="warning"?"border-orange-500/50 bg-orange-50/50 dark:bg-orange-950/20":f.type==="success"?"border-green-500/50 bg-green-50/50 dark:bg-green-950/20":"border-blue-500/50 bg-blue-50/50 dark:bg-blue-950/20"}`,children:[l.jsx(f.icon,{className:`w-4 h-4 mt-0.5 ${f.type==="danger"?"text-red-500":f.type==="warning"?"text-orange-500":f.type==="success"?"text-green-500":"text-blue-500"}`}),l.jsx("p",{className:"text-sm flex-1",children:f.text})]},m))})}function _G({dreams:e}){const t=e.length,n=[0,1,2,3,4,5].map(r=>({level:r,count:e.filter(s=>s.threatLevel===r).length}));return l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Dl,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Threat Level Distribution"})]}),l.jsx("div",{className:"space-y-2",children:n.map(({level:r,count:s})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-xs w-16",children:["Level ",r]}),l.jsx("div",{className:"flex-1 bg-secondary rounded-full h-2 overflow-hidden",children:l.jsx("div",{className:`h-full transition-all ${r>=4?"bg-red-500":r>=3?"bg-orange-500":"bg-primary"}`,style:{width:`${t>0?s/t*100:0}%`}})}),l.jsx("span",{className:"text-xs text-muted-foreground w-12 text-right",children:s})]},r))})]})}function ht({children:e,delay:t=0,duration:n=400,className:r=""}){const[s,a]=p.useState(!1);return p.useEffect(()=>{const i=setTimeout(()=>{a(!0)},t);return()=>clearTimeout(i)},[t]),l.jsx("div",{className:`transition-all ${r}`,style:{opacity:s?1:0,transform:s?"translateY(0) scale(1)":"translateY(16px) scale(0.98)",transitionDuration:`${n}ms`,transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e})}function RG({worlds:e}){const t=e.map(n=>({name:n.name,count:n.dreamIds.length,stability:n.stability})).sort((n,r)=>r.count-n.count).slice(0,5);return l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ts,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Top 5 Worlds"})]}),l.jsxs("div",{className:"space-y-2",children:[t.map((n,r)=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-muted-foreground",children:["#",r+1]}),l.jsx("span",{children:n.name}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:["(stability ",n.stability,"/5)"]})]}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.count," dreams"]})]},n.name)),t.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]})}function AG({entities:e}){const t=e.map(n=>({name:n.name,role:n.role,count:n.dreamIds.length})).sort((n,r)=>r.count-n.count).slice(0,5);return l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Pr,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Top 5 Entities"})]}),l.jsxs("div",{className:"space-y-2",children:[t.map((n,r)=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-muted-foreground",children:["#",r+1]}),l.jsx("span",{children:n.name}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",n.role,")"]})]}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.count," dreams"]})]},n.name)),t.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]})}function DG({threats:e}){const t=e.filter(r=>r.level>=4),n=e.map(r=>({name:r.name,level:r.level,count:r.dreamIds.length})).sort((r,s)=>s.count-r.count).slice(0,5);return l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(oo,{className:"w-4 h-4 text-red-500"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Threat Analysis"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{children:"High Threats (Level 4-5)"}),l.jsx("span",{className:"font-semibold text-red-500",children:t.length})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:"Most Common Threats:"}),n.map((r,s)=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-muted-foreground",children:["#",s+1]}),l.jsx("span",{children:r.name}),l.jsxs("span",{className:`text-xs ${r.level>=4?"text-red-500":"text-muted-foreground"}`,children:["(level ",r.level,")"]})]}),l.jsxs("span",{className:"text-xs text-muted-foreground",children:[r.count," times"]})]},r.name)),n.length===0&&l.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]})]})}function OG({dreams:e}){const t=e.length,n={inactive:e.filter(r=>r.timeSystem==="inactive").length,activated:e.filter(r=>r.timeSystem==="activated").length,unknown:e.filter(r=>r.timeSystem==="unknown").length};return l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(qr,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Time System Usage"})]}),l.jsx("div",{className:"space-y-2",children:[{label:"Inactive",value:n.inactive,color:"bg-slate-500"},{label:"Activated",value:n.activated,color:"bg-blue-500"},{label:"Unknown",value:n.unknown,color:"bg-muted-foreground"}].map(({label:r,value:s,color:a})=>l.jsxs("div",{className:"flex items-center justify-between text-sm",children:[l.jsx("span",{children:r}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-24 bg-secondary rounded-full h-2",children:l.jsx("div",{className:`h-full ${a} rounded-full transition-all`,style:{width:`${t>0?s/t*100:0}%`}})}),l.jsx("span",{className:"text-muted-foreground w-12 text-right",children:s})]})]},r))})]})}function IG({dreams:e}){const t={};e.forEach(r=>{r.environments.forEach(s=>{t[s]=(t[s]||0)+1})});const n=Object.entries(t).sort((r,s)=>s[1]-r[1]).slice(0,10);return n.length===0?null:l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(iR,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Top Environments"})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(([r,s])=>l.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 bg-secondary rounded-full",children:[l.jsx("span",{className:"text-sm",children:r}),l.jsx(Re,{variant:"outline",className:"text-xs ml-1",children:s})]},r))})]})}function $G({dreams:e}){const t={none:e.filter(n=>n.safetyOverride==="none").length,helper:e.filter(n=>n.safetyOverride==="helper").length,separation:e.filter(n=>n.safetyOverride==="separation").length,wake:e.filter(n=>n.safetyOverride==="wake").length};return l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(dc,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-sm font-semibold",children:"Safety Override Usage"})]}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(t).map(([n,r])=>l.jsxs("div",{className:"text-center p-3 bg-secondary/50 rounded-lg",children:[l.jsx("p",{className:"text-xs text-muted-foreground mb-1 capitalize",children:n}),l.jsx("p",{className:"text-xl font-bold",children:r})]},n))})]})}function LG(){const[e,t]=p.useState([]),[n,r]=p.useState([]),[s,a]=p.useState([]),[i,o]=p.useState([]),[c,u]=p.useState(!0),[d,h]=p.useState(!1),[f,m]=p.useState(new Date),y=p.useCallback(async(E=!1)=>{E?h(!0):u(!0);try{const[M,N,T,A]=await Promise.all([Ha(),gc(),gh(),j8()]);t(M),r(N),a(T),o(A),m(new Date)}catch(M){console.error("Error loading data:",M)}finally{u(!1),h(!1)}},[]);p.useEffect(()=>{y()},[y]);const g=e.length,v=e.length>0?(e.reduce((E,M)=>E+M.threatLevel,0)/e.length).toFixed(1):"0",x=e.slice(0,7),b=e.slice(7,14),w=x.length>0?x.reduce((E,M)=>E+M.threatLevel,0)/x.length:0,S=b.length>0?b.reduce((E,M)=>E+M.threatLevel,0)/b.length:0,k=w-S,j=n.map(E=>({name:E.name,count:E.dreamIds.length})).sort((E,M)=>M.count-E.count),C={inactive:e.filter(E=>E.timeSystem==="inactive").length,activated:e.filter(E=>E.timeSystem==="activated").length,unknown:e.filter(E=>E.timeSystem==="unknown").length};return c?l.jsx("div",{className:"py-4",children:l.jsx(TG,{})}):l.jsxs("div",{className:"py-4 space-y-6",children:[l.jsx(ht,{delay:0,duration:400,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ag,{className:"w-5 h-5 text-primary"}),l.jsx("h1",{children:"Statistics & Insights"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-muted-foreground",children:f.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})}),l.jsx(Ne,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>y(!0),disabled:d,children:l.jsx(uc,{className:`w-4 h-4 ${d?"animate-spin":""}`})})]})]})}),l.jsx(ht,{delay:80,duration:400,children:l.jsxs(JT,{defaultValue:"overview",className:"space-y-4",children:[l.jsxs(Ty,{className:"grid w-full grid-cols-3",children:[l.jsx(Vi,{value:"overview",children:"Overview"}),l.jsx(Vi,{value:"analytics",children:"Analytics"}),l.jsx(Vi,{value:"patterns",children:"Patterns"})]}),l.jsxs(Ui,{value:"overview",className:"space-y-6",children:[l.jsx(ht,{delay:160,duration:400,children:l.jsx(PG,{dreams:e,worldCounts:j,timeSystemCounts:C})}),l.jsx(ht,{delay:240,duration:400,children:l.jsx(MG,{totalDreams:g,worldsCount:n.length,entitiesCount:s.length,threatsCount:i.length})}),l.jsx(ht,{delay:320,duration:400,children:l.jsx(NG,{totalDreams:g,avgThreatLevel:v,threatTrend:k,worldsCount:n.length,entitiesCount:s.length})}),l.jsx(ht,{delay:400,duration:400,children:l.jsx(_G,{dreams:e})}),l.jsx(ht,{delay:480,duration:400,children:l.jsx(RG,{worlds:n})}),l.jsx(ht,{delay:560,duration:400,children:l.jsx(AG,{entities:s})}),l.jsx(ht,{delay:640,duration:400,children:l.jsx(DG,{threats:i})}),l.jsx(ht,{delay:720,duration:400,children:l.jsx(OG,{dreams:e})}),l.jsx(ht,{delay:800,duration:400,children:l.jsx(IG,{dreams:e})}),l.jsx(ht,{delay:880,duration:400,children:l.jsx($G,{dreams:e})})]}),l.jsxs(Ui,{value:"analytics",className:"space-y-6",children:[l.jsx(ht,{delay:100,duration:400,children:l.jsx(s1,{dreams:e,mode:"week"})}),l.jsx(ht,{delay:180,duration:400,children:l.jsx(s1,{dreams:e,mode:"month"})}),l.jsx(ht,{delay:260,duration:400,children:l.jsx(SG,{dreams:e})}),l.jsx(ht,{delay:340,duration:400,children:l.jsx(wG,{dreams:e})}),l.jsx(ht,{delay:420,duration:400,children:l.jsx(bG,{dreams:e})}),l.jsx(ht,{delay:500,duration:400,children:l.jsx(CG,{dreams:e})})]}),l.jsxs(Ui,{value:"patterns",className:"space-y-6",children:[l.jsx(ht,{delay:100,duration:400,children:l.jsx(kG,{dreams:e,entities:s})}),l.jsx(ht,{delay:180,duration:400,children:l.jsx(jG,{dreams:e,entities:s})})]})]})})]})}function FG({dreams:e}){const t=p.useMemo(()=>[...e].sort((r,s)=>new Date(s.date).getTime()-new Date(r.date).getTime()),[e]),n=r=>r>=4?"text-red-500 bg-red-100 dark:bg-red-950":r>=3?"text-orange-500 bg-orange-100 dark:bg-orange-950":"text-primary bg-primary/10";return e.length===0?l.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[l.jsx(qr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),l.jsx("p",{children:""})]}):l.jsx("div",{className:"space-y-4 max-w-3xl mx-auto",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-border"}),t.map((r,s)=>l.jsxs("div",{className:"relative pl-16 pb-8 last:pb-0",children:[l.jsx("div",{className:q("absolute left-6 w-5 h-5 rounded-full border-4 border-background",n(r.threatLevel))}),l.jsx(dn,{to:`/logs/${r.id}`,children:l.jsxs("div",{className:"card-minimal hover:shadow-md transition-shadow cursor-pointer",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(qr,{className:"w-4 h-4 text-muted-foreground"}),l.jsx("span",{className:"text-sm font-medium",children:zt(new Date(r.date),"d MMMM yyyy",{locale:Xs})})]}),l.jsx("span",{className:"text-xs text-muted-foreground",children:r.wakeTime})]}),l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(ts,{className:"w-4 h-4 text-primary"}),l.jsx("span",{className:"text-lg font-semibold",children:r.world})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(oo,{className:"w-3 h-3 text-muted-foreground"}),l.jsx("span",{className:"text-xs text-muted-foreground",children:"Threat Level:"}),l.jsx(Re,{variant:"outline",className:n(r.threatLevel),children:r.threatLevel})]}),r.entities.length>0&&l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(Pr,{className:"w-3 h-3 text-muted-foreground mt-0.5"}),l.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:r.entities.map(a=>l.jsx(Re,{variant:"secondary",className:"text-xs",children:a},a))})]}),r.environments.length>0&&l.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:r.environments.map(a=>l.jsx(Re,{variant:"outline",className:"text-xs",children:a},a))}),r.notes&&l.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:r.notes}),r.safetyOverride!=="none"&&l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsx(dc,{className:"w-3 h-3 text-orange-500"}),l.jsxs("span",{className:"text-xs text-orange-600 dark:text-orange-400",children:["Safety Override: ",r.safetyOverride]})]})]})]})})]},r.id))]})})}function Ps(e){return e?e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^\p{L}\p{N}]+/gu," ").replace(/\s+/g," ").trim():""}function zG(e,t){const n=e.length,r=t.length;if(n===0)return r;if(r===0)return n;const s=new Array(r+1).fill(0).map((a,i)=>i);for(let a=1;a<=n;a++){let i=s[0];s[0]=a;for(let o=1;o<=r;o++){const c=s[o],u=e[a-1]===t[o-1]?0:1;s[o]=Math.min(s[o]+1,s[o-1]+1,i+u),i=c}}return s[r]}function BG(e,t){const n=e.split(" ").filter(i=>i.length>1),r=t.split(" ").filter(i=>i.length>1);if(n.length===0||r.length===0)return 0;const s=new Set(r);return n.filter(i=>s.has(i)).length/Math.max(n.length,r.length)}function Ry(e,t){const n=Ps(e),r=Ps(t);if(!n||!r)return!1;if(n===r)return!0;const s=Math.max(n.length,r.length);if(s<=4)return!1;if(BG(n,r)>=.7)return!0;const o=1-zG(n,r)/s,c=s<=7?.88:.84;return o>=c}function a1(e,t){const n=t.map(a=>({raw:a,norm:Ps(a)})).filter(a=>a.norm.length>0),r=new Set,s=[];for(const a of e){const i=Ps(a);if(!i||r.has(i))continue;n.some(c=>c.norm===i?!0:Ry(a,c.raw))&&(s.push(a),r.add(i))}return s}function VG({dreams:e,worlds:t}){const n=p.useMemo(()=>{const r=[],s={world:3,entity:2,environment:1,threat:1,timeSystem:.75,safety:.75,exit:.75},a=3;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++){const c=e[i],u=e[o],d=[];let h=0;const f=Ry(c.world,u.world);if(f){const v=c.world||u.world||"Unknown";d.push(`: ${v}`),h+=s.world}const m=a1(c.entities||[],u.entities||[]);m.length>0&&(d.push(`: ${m.join(", ")}`),h+=Math.min(m.length,3)*s.entity);const y=a1(c.environments||[],u.environments||[]);y.length>0&&(d.push(`: ${y.join(", ")}`),h+=Math.min(y.length,3)*s.environment),Math.abs(c.threatLevel-u.threatLevel)<=1&&(d.push(` (${c.threatLevel}-${u.threatLevel})`),h+=s.threat),c.timeSystem===u.timeSystem&&c.timeSystem!=="unknown"&&(d.push(`Time System: ${c.timeSystem}`),h+=s.timeSystem),c.safetyOverride===u.safetyOverride&&c.safetyOverride!=="unknown"&&c.safetyOverride!=="none"&&(d.push(`Safety Override: ${c.safetyOverride}`),h+=s.safety),c.exit===u.exit&&c.exit!=="unknown"&&(d.push(`Exit: ${c.exit}`),h+=s.exit),(f||m.length>0||y.length>0)&&h>=a&&r.push({dream1:c,dream2:u,connections:d,score:h})}return r.sort((i,o)=>o.score-i.score).slice(0,15)},[e]);return n.length===0?l.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[l.jsx(rp,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),l.jsx("p",{children:""}),l.jsx("p",{className:"text-sm mt-2",children:""})]}):l.jsxs("div",{className:"space-y-4 max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(rp,{className:"w-5 h-5 text-primary"}),l.jsxs("h2",{className:"text-lg font-semibold",children:[" ",n.length," "]})]}),n.map((r,s)=>l.jsxs("div",{className:"card-minimal",children:[l.jsx("div",{className:"flex items-center justify-between mb-3",children:l.jsxs(Re,{variant:"secondary",className:"text-xs",children:[": ",r.score.toFixed(1)]})}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsx(dn,{to:`/logs/${r.dream1.id}`,children:l.jsxs("div",{className:"p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(ts,{className:"w-3 h-3 text-primary"}),l.jsx("span",{className:"text-sm font-semibold",children:r.dream1.world})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(r.dream1.date).toLocaleDateString("th-TH")}),r.dream1.entities.length>0&&l.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:r.dream1.entities.slice(0,3).map(a=>l.jsx(Re,{variant:"outline",className:"text-xs",children:a},a))})]})}),l.jsx(dn,{to:`/logs/${r.dream2.id}`,children:l.jsxs("div",{className:"p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(ts,{className:"w-3 h-3 text-primary"}),l.jsx("span",{className:"text-sm font-semibold",children:r.dream2.world})]}),l.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(r.dream2.date).toLocaleDateString("th-TH")}),r.dream2.entities.length>0&&l.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:r.dream2.entities.slice(0,3).map(a=>l.jsx(Re,{variant:"outline",className:"text-xs",children:a},a))})]})})]}),l.jsx("div",{className:"mt-3 pt-3 border-t space-y-1",children:r.connections.map((a,i)=>l.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1.5",children:[l.jsx("span",{className:"w-1 h-1 rounded-full bg-primary"}),a]},i))})]},s))]})}function UG({dreams:e,worlds:t}){const n=p.useMemo(()=>{const s=new Map;t.forEach(f=>{const m=Ps(f.name);m&&s.set(m,f)});const a=f=>{const m=Ps(f);if(!m)return"";if(s.has(m))return m;for(const y of t)if(Ry(y.name,f))return Ps(y.name);return m},i=new Map,o=e.map(f=>{const m=a(f.world);if(m){const y=i.get(m)??[];y.push(f),i.set(m,y)}return{dream:f,key:m}}),c=(f,m)=>({id:`virtual-${f}`,name:(m==null?void 0:m.world)||"Unknown",type:"transient",stability:3,dreamIds:[]}),u={};new Set([...s.keys(),...i.keys()]).forEach(f=>{const m=s.get(f),y=i.get(f)??[],g=y.length>0?y.reduce((w,S)=>w+S.threatLevel,0)/y.length:0,v={};y.forEach(w=>{w.entities.forEach(S=>{const k=Ps(S);k&&(v[k]||(v[k]={label:S,count:0}),v[k].count+=1)})});const x=Object.values(v).filter(w=>w.count>=2).sort((w,S)=>S.count-w.count).map(w=>w.label).slice(0,5),b=m||c(f,y[0]);u[f]={key:f,world:b,dreamCount:y.length,connections:{},avgThreat:g,commonEntities:x}});const h=[...o].sort((f,m)=>new Date(f.dream.date).getTime()-new Date(m.dream.date).getTime());for(let f=0;f<h.length-1;f++){const m=h[f].key,y=h[f+1].key;if(!m||!y||m===y)continue;const g=u[m];g&&(g.connections[y]=(g.connections[y]||0)+1)}return Object.values(u).sort((f,m)=>m.dreamCount-f.dreamCount)},[e,t]),r=p.useMemo(()=>{const s=new Map;return n.forEach(a=>{s.set(a.key,a.world.name)}),s},[n]);return n.length===0?l.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[l.jsx(np,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),l.jsx("p",{children:""})]}):l.jsxs("div",{className:"space-y-4 max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(np,{className:"w-5 h-5 text-primary"}),l.jsxs("h2",{className:"text-lg font-semibold",children:[" (",n.length," )"]})]}),l.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:n.map(s=>l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx(ts,{className:"w-4 h-4 text-primary"}),l.jsx("h3",{className:"text-lg font-semibold",children:s.world.name})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx(Re,{variant:"outline",className:"text-xs",children:s.world.type}),l.jsxs(Re,{variant:"secondary",className:"text-xs",children:["Stability: ",s.world.stability,"/5"]})]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-2xl font-bold text-primary",children:s.dreamCount}),l.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 p-2 bg-secondary/50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Threat"}),l.jsx("p",{className:`text-sm font-semibold ${s.avgThreat>=4?"text-red-500":s.avgThreat>=3?"text-orange-500":"text-foreground"}`,children:s.avgThreat.toFixed(1)})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:"Connections"}),l.jsx("p",{className:"text-sm font-semibold",children:Object.keys(s.connections).length})]})]}),s.commonEntities.length>0&&l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:":"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:s.commonEntities.map(a=>l.jsx(Re,{variant:"secondary",className:"text-xs",children:a},a))})]}),Object.keys(s.connections).length>0&&l.jsxs("div",{className:"space-y-1 pt-2 border-t",children:[l.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[l.jsx(Dl,{className:"w-3 h-3 text-muted-foreground"}),l.jsx("p",{className:"text-xs text-muted-foreground",children:":"})]}),l.jsx("div",{className:"space-y-1",children:Object.entries(s.connections).sort((a,i)=>i[1]-a[1]).slice(0,3).map(([a,i])=>l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsxs("span",{className:"text-muted-foreground",children:[" ",r.get(a)||a]}),l.jsxs(Re,{variant:"outline",className:"text-xs",children:[i,"x"]})]},a))})]}),s.world.description&&l.jsx("p",{className:"text-xs text-muted-foreground pt-2 border-t",children:s.world.description})]},s.world.id))})]})}function WG({dreams:e,entities:t}){const n=p.useMemo(()=>{const a=[];return t.forEach(i=>{const o=e.filter(f=>i.dreamIds.includes(f.id));if(o.length===0)return;const c=new Set(o.map(f=>f.world)),u=o.reduce((f,m)=>f+m.threatLevel,0)/o.length,d=[...o].sort((f,m)=>new Date(f.date).getTime()-new Date(m.date).getTime()),h=new Map;o.forEach(f=>{f.entities.filter(m=>m!==i.name).forEach(m=>{h.set(m,(h.get(m)||0)+1)})}),a.push({entity:i,appearances:o.length,worlds:c,avgThreat:u,firstSeen:d[0].date,lastSeen:d[d.length-1].date,coAppearances:h})}),a.sort((i,o)=>o.appearances-i.appearances)},[e,t]),r=a=>{switch(a){case"observer":return l5;case"protector":return dc;case"guide":return J_;case"intruder":return oo;default:return Pr}},s=a=>{switch(a){case"observer":return"text-blue-500 bg-blue-100 dark:bg-blue-950";case"protector":return"text-green-500 bg-green-100 dark:bg-green-950";case"guide":return"text-purple-500 bg-purple-100 dark:bg-purple-950";case"intruder":return"text-red-500 bg-red-100 dark:bg-red-950";default:return"text-muted-foreground bg-secondary"}};return n.length===0?l.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[l.jsx(Pr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),l.jsx("p",{children:""})]}):l.jsxs("div",{className:"space-y-4 max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Pr,{className:"w-5 h-5 text-primary"}),l.jsxs("h2",{className:"text-lg font-semibold",children:[" (",n.length," )"]})]}),l.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:n.map(a=>{const i=r(a.entity.role);return l.jsxs("div",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:a.entity.name}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs(Re,{className:s(a.entity.role),children:[l.jsx(i,{className:"w-3 h-3 mr-1"}),a.entity.role]})})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-2xl font-bold text-primary",children:a.appearances}),l.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 p-3 bg-secondary/50 rounded-lg",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Worlds"}),l.jsx("p",{className:"text-sm font-semibold",children:a.worlds.size})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Avg Threat"}),l.jsx("p",{className:`text-sm font-semibold ${a.avgThreat>=4?"text-red-500":a.avgThreat>=3?"text-orange-500":"text-foreground"}`,children:a.avgThreat.toFixed(1)})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Co-appear"}),l.jsx("p",{className:"text-sm font-semibold",children:a.coAppearances.size})]})]}),l.jsxs("div",{className:"space-y-1 text-xs",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-muted-foreground",children:":"}),l.jsx("span",{className:"font-medium",children:zt(new Date(a.firstSeen),"d MMM yyyy",{locale:Xs})})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-muted-foreground",children:":"}),l.jsx("span",{className:"font-medium",children:zt(new Date(a.lastSeen),"d MMM yyyy",{locale:Xs})})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:":"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:Array.from(a.worlds).map(o=>l.jsx(Re,{variant:"outline",className:"text-xs",children:o},o))})]}),a.coAppearances.size>0&&l.jsxs("div",{className:"space-y-1 pt-2 border-t",children:[l.jsx("p",{className:"text-xs text-muted-foreground",children:":"}),l.jsx("div",{className:"space-y-1",children:Array.from(a.coAppearances.entries()).sort((o,c)=>c[1]-o[1]).slice(0,3).map(([o,c])=>l.jsxs("div",{className:"flex items-center justify-between text-xs",children:[l.jsx("span",{className:"text-muted-foreground",children:o}),l.jsxs(Re,{variant:"secondary",className:"text-xs",children:[c,"x"]})]},o))})]}),a.entity.description&&l.jsx("p",{className:"text-xs text-muted-foreground pt-2 border-t",children:a.entity.description})]},a.entity.id)})})]})}function HG({dreams:e,worlds:t,entities:n}){const[r,s]=p.useState("timeline"),a=[{id:"timeline",label:"Timeline",icon:qr},{id:"connected",label:"Connected Dreams",icon:rp},{id:"map",label:"Universe Map",icon:np},{id:"characters",label:"Characters",icon:Pr}];return l.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[l.jsx("header",{className:"sticky top-0 z-10 bg-background border-b",children:l.jsxs("div",{className:"px-4 py-3",children:[l.jsx(Bn,{delay:0,duration:400,children:l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(rh,{className:"w-5 h-5 text-primary"}),l.jsx("h1",{className:"text-xl font-semibold",children:"Story Mode"})]}),l.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.length," "]})]})}),l.jsx(Bn,{delay:80,duration:400,children:l.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:a.map((i,o)=>l.jsxs("button",{onClick:()=>s(i.id),className:q("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors whitespace-nowrap",r===i.id?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:text-foreground"),children:[l.jsx(i.icon,{className:"w-4 h-4"}),i.label]},i.id))})})]})}),l.jsx("main",{className:"flex-1 overflow-y-auto pb-24",children:l.jsx("div",{className:"p-4",children:l.jsxs(Bn,{delay:160,duration:400,children:[r==="timeline"&&l.jsx(FG,{dreams:e}),r==="connected"&&l.jsx(VG,{dreams:e,worlds:t}),r==="map"&&l.jsx(UG,{dreams:e,worlds:t}),r==="characters"&&l.jsx(WG,{dreams:e,entities:n})]})})}),l.jsx(fh,{})]})}function GG(){const[e,t]=p.useState([]),[n,r]=p.useState([]),[s,a]=p.useState([]),[i,o]=p.useState(!0);return p.useEffect(()=>{(async()=>{try{const[u,d,h]=await Promise.all([Ha(),gc(),gh()]);t(u),r(d),a(h)}catch(u){console.error("Error loading data:",u)}finally{o(!1)}})()},[]),i?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"text-center text-muted-foreground",children:"..."})}):l.jsx(HG,{dreams:e,worlds:n,entities:s})}const KG="modulepreload",qG=function(e){return"/dream-weaver-log/"+e},i1={},YG=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=qG(c),c in i1)return;i1[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":KG,u||(h.as="script"),h.crossOrigin="",h.href=c,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})};function XG(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:a,onRegisterError:i}=e;let o,c,u;const d=async(f=!0)=>{await c,u==null||u()};async function h(){if("serviceWorker"in navigator){if(o=await YG(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/dream-weaver-log/sw.js",{scope:"/dream-weaver-log/",type:"classic"})).catch(f=>{i==null||i(f)}),!o)return;u=()=>{o==null||o.messageSkipWaiting()};{let f=!1;const m=()=>{f=!0,o==null||o.addEventListener("controlling",y=>{y.isUpdate&&window.location.reload()}),n==null||n()};o.addEventListener("installed",y=>{typeof y.isUpdate>"u"?typeof y.isExternal<"u"&&y.isExternal?m():!f&&(r==null||r()):y.isUpdate||r==null||r()}),o.addEventListener("waiting",m)}o.register({immediate:t}).then(f=>{a?a("/dream-weaver-log/sw.js",f):s==null||s(f)}).catch(f=>{i==null||i(f)})}}return c=h(),d}const fM=p.createContext(null);function QG({children:e}){const[t,n]=p.useState(!1),[r,s]=p.useState(!1),[a,i]=p.useState(!1),[o,c]=p.useState(null),u=p.useRef(null),d=p.useRef(null);p.useEffect(()=>{"serviceWorker"in navigator&&(d.current=XG({immediate:!0,onNeedRefresh(){n(!0)},onRegisteredSW(y,g){u.current=g??null},onRegisterError(y){console.warn("Service worker registration failed:",y)}}))},[]);const h=async()=>{var y;s(!0),c(Date.now());try{await((y=u.current)==null?void 0:y.update())}finally{s(!1)}},f=async()=>{if(d.current){i(!0);try{await d.current(!0)}finally{i(!1)}}},m=p.useMemo(()=>({updateAvailable:t,isChecking:r,isUpdating:a,lastCheckedAt:o,checkForUpdates:h,applyUpdate:f}),[t,r,a,o]);return l.jsx(fM.Provider,{value:m,children:e})}function JG(){const e=p.useContext(fM);if(!e)throw new Error("useAppUpdate must be used within AppUpdateProvider");return e}const mM="2026.01.31.002";function ZG(){const{updateAvailable:e,isChecking:t,isUpdating:n,lastCheckedAt:r,checkForUpdates:s,applyUpdate:a}=JG(),[i,o]=p.useState(0);return l.jsxs("div",{className:"py-4 space-y-8 pb-20",children:[l.jsx(Bn,{delay:0,duration:400,children:l.jsx("h1",{children:"About / Safety"})}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(Bn,{delay:80,duration:400,children:l.jsxs("section",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(u5,{className:"w-4 h-4 text-primary"}),l.jsx("h2",{className:"text-lg font-medium",children:" Dream book"})]}),l.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Dream book by Bon     structured log    "})]})}),l.jsx(Bn,{delay:120,duration:400,children:l.jsxs("section",{className:"card-minimal space-y-3",children:[l.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("h2",{className:"text-lg font-medium",children:""}),l.jsxs("p",{className:"text-sm text-muted-foreground",children:[": ",mM]})]}),l.jsx("div",{className:"flex items-center gap-2",children:e?l.jsxs(Ne,{onClick:a,disabled:n,children:[n?l.jsx(Al,{className:"h-4 w-4 mr-2 animate-spin"}):l.jsx(o5,{className:"h-4 w-4 mr-2"}),n?"...":""]}):l.jsxs(Ne,{variant:"outline",onClick:s,disabled:t,children:[t?l.jsx(Al,{className:"h-4 w-4 mr-2 animate-spin"}):l.jsx(uc,{className:"h-4 w-4 mr-2"}),t?"...":""]})})]}),l.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[l.jsx("span",{className:`h-2 w-2 rounded-full ${e?"bg-emerald-400 animate-pulse":"bg-muted-foreground/40"}`}),t?"...":e?" ":""]}),r&&l.jsxs("div",{className:"text-xs text-muted-foreground",children:[":"," ",new Date(r).toLocaleString("th-TH")]})]})}),l.jsx(Bn,{delay:160,duration:400,children:l.jsxs("section",{className:"card-minimal text-center",children:[l.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dream book by Bon  ",new Date().getFullYear()]}),l.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Personal Dream Logging System"})]})})]})]})}const eK=()=>(Wa(),l.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),l.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),l.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})}));function tK(){const e=p.useRef(null),[t,n]=p.useState([]),r=p.useRef(0),s=p.useRef(0),a=p.useRef(),i=mc(),[o,c]=p.useState(!1);return p.useEffect(()=>{const u=()=>{const h=document.documentElement.getAttribute("data-mythic-theme");c(h==="pixelDreamMoon")};u();const d=new MutationObserver(u);return d.observe(document.documentElement,{attributes:!0,attributeFilter:["data-mythic-theme"]}),()=>d.disconnect()},[]),p.useEffect(()=>{if(!o||i)return;const u=()=>{const d=window.scrollY,h=Math.abs(d-s.current);if(h>5){const f=Math.min(Math.floor(h/10),5),m=[];for(let y=0;y<f;y++)m.push({id:r.current++,x:Math.random()*window.innerWidth,y:window.innerHeight*.5+(Math.random()-.5)*200,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,life:0,maxLife:30,size:Math.random()>.5?2:3,color:["#818cf8","#06b6d4","#3b82f6"][Math.floor(Math.random()*3)],type:"dust"});n(y=>[...y,...m])}s.current=d};return window.addEventListener("scroll",u,{passive:!0}),()=>window.removeEventListener("scroll",u)},[o]),p.useEffect(()=>{if(!o||i)return;const u=d=>{const f=[];for(let m=0;m<8;m++){const y=m/8*Math.PI*2,g=2+Math.random()*2;f.push({id:r.current++,x:d.clientX+window.scrollX,y:d.clientY+window.scrollY,vx:Math.cos(y)*g,vy:Math.sin(y)*g,life:0,maxLife:40,size:Math.random()>.7?4:3,color:["#ffffff","#06b6d4","#818cf8","#ff8fd6"][Math.floor(Math.random()*4)],type:"sparkle"})}n(m=>[...m,...f])};return document.addEventListener("click",u),()=>document.removeEventListener("click",u)},[o]),p.useEffect(()=>{if(!o||i)return;const u=e.current;if(!u)return;const d=u.getContext("2d");if(!d)return;const h=()=>{u.width=window.innerWidth,u.height=document.documentElement.scrollHeight};h(),window.addEventListener("resize",h);const f=()=>{d.clearRect(0,0,u.width,u.height),d.imageSmoothingEnabled=!1,n(m=>m.map(g=>{const v={...g,x:g.x+g.vx,y:g.y+g.vy,life:g.life+1};g.type==="sparkle"&&(v.vy+=.15);const x=1-g.life/g.maxLife;return d.globalAlpha=x,d.fillStyle=g.color,g.type==="sparkle"?(d.fillRect(v.x-g.size/2,v.y-g.size/2,g.size,g.size),d.fillRect(v.x-g.size*1.5,v.y-1,g.size*3,2),d.fillRect(v.x-1,v.y-g.size*1.5,2,g.size*3)):d.fillRect(v.x,v.y,g.size,g.size),x>.5&&(d.globalAlpha=x*.3,d.fillRect(v.x-1,v.y-1,g.size+2,g.size+2)),v}).filter(g=>g.life<g.maxLife)),a.current=requestAnimationFrame(f)};return f(),()=>{a.current&&cancelAnimationFrame(a.current),window.removeEventListener("resize",h)}},[o]),!o||i?null:l.jsx("canvas",{ref:e,className:"fixed top-0 left-0 pointer-events-none z-[90]",style:{imageRendering:"pixelated"}})}const nK=new N4,rK=()=>{const e=mc();return p.useEffect(()=>{typeof document>"u"||(document.documentElement.dataset.reducedMotion=e?"true":"false")},[e]),p.useEffect(()=>{const{phenomenon:t}=Kl();yd(t),console.log(" Global Moon Theme Applied:",t.name),console.log(` App Version: ${mM} | Build: ${new Date().toISOString()}`)},[]),l.jsx(QG,{children:l.jsx(_4,{client:nK,children:l.jsxs(a4,{children:[l.jsx(VR,{}),l.jsx(wA,{}),l.jsxs(ND,{basename:"/dream-weaver-log",children:[l.jsx(tK,{}),l.jsxs(Ex,{children:[l.jsx(Jn,{path:"/",element:l.jsx(o6,{})}),l.jsx(Jn,{path:"/library",element:l.jsx(xG,{})}),l.jsx(Jn,{path:"/story",element:l.jsx(GG,{})}),l.jsx(Jn,{path:"/*",element:l.jsx(zD,{children:l.jsxs(Ex,{children:[l.jsx(Jn,{path:"/logs",element:l.jsx(_F,{})}),l.jsx(Jn,{path:"/logs/new",element:l.jsx(e7,{})}),l.jsx(Jn,{path:"/logs/:id",element:l.jsx(h7,{})}),l.jsx(Jn,{path:"/statistics",element:l.jsx(LG,{})}),l.jsx(Jn,{path:"/about",element:l.jsx(ZG,{})}),l.jsx(Jn,{path:"*",element:l.jsx(eK,{})})]})})})]})]})]})})})};NS(document.getElementById("root")).render(l.jsx(rK,{}));
