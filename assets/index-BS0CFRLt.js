var av=e=>{throw TypeError(e)};var Uh=(e,t,n)=>t.has(e)||av("Cannot "+n);var F=(e,t,n)=>(Uh(e,t,"read from private field"),n?n.call(e):t.get(e)),Me=(e,t,n)=>t.has(e)?av("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),pe=(e,t,n,r)=>(Uh(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Lt=(e,t,n)=>(Uh(e,t,"access private method"),n);var Tc=(e,t,n,r)=>({set _(s){pe(e,t,s,n)},get _(){return F(e,t,r)}});function SM(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function K1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q1={exports:{}},Bd={},Y1={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ic=Symbol.for("react.element"),jM=Symbol.for("react.portal"),kM=Symbol.for("react.fragment"),CM=Symbol.for("react.strict_mode"),NM=Symbol.for("react.profiler"),EM=Symbol.for("react.provider"),TM=Symbol.for("react.context"),MM=Symbol.for("react.forward_ref"),PM=Symbol.for("react.suspense"),_M=Symbol.for("react.memo"),RM=Symbol.for("react.lazy"),iv=Symbol.iterator;function AM(e){return e===null||typeof e!="object"?null:(e=iv&&e[iv]||e["@@iterator"],typeof e=="function"?e:null)}var X1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q1=Object.assign,J1={};function So(e,t,n){this.props=e,this.context=t,this.refs=J1,this.updater=n||X1}So.prototype.isReactComponent={};So.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};So.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Z1(){}Z1.prototype=So.prototype;function x0(e,t,n){this.props=e,this.context=t,this.refs=J1,this.updater=n||X1}var b0=x0.prototype=new Z1;b0.constructor=x0;Q1(b0,So.prototype);b0.isPureReactComponent=!0;var ov=Array.isArray,e2=Object.prototype.hasOwnProperty,w0={current:null},t2={key:!0,ref:!0,__self:!0,__source:!0};function n2(e,t,n){var r,s={},a=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)e2.call(t,r)&&!t2.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ic,type:e,key:a,ref:i,props:s,_owner:w0.current}}function DM(e,t){return{$$typeof:ic,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function S0(e){return typeof e=="object"&&e!==null&&e.$$typeof===ic}function OM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lv=/\/+/g;function Wh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?OM(""+e.key):t.toString(36)}function vu(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case ic:case jM:i=!0}}if(i)return i=e,s=s(i),e=r===""?"."+Wh(i,0):r,ov(s)?(n="",e!=null&&(n=e.replace(lv,"$&/")+"/"),vu(s,t,n,"",function(u){return u})):s!=null&&(S0(s)&&(s=DM(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(lv,"$&/")+"/")+e)),t.push(s)),1;if(i=0,r=r===""?".":r+":",ov(e))for(var l=0;l<e.length;l++){a=e[l];var c=r+Wh(a,l);i+=vu(a,t,n,c,s)}else if(c=AM(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=r+Wh(a,l++),i+=vu(a,t,n,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Mc(e,t,n){if(e==null)return e;var r=[],s=0;return vu(e,r,"","",function(a){return t.call(n,a,s++)}),r}function IM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rn={current:null},xu={transition:null},$M={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:xu,ReactCurrentOwner:w0};function r2(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:Mc,forEach:function(e,t,n){Mc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Mc(e,function(){t++}),t},toArray:function(e){return Mc(e,function(t){return t})||[]},only:function(e){if(!S0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ke.Component=So;ke.Fragment=kM;ke.Profiler=NM;ke.PureComponent=x0;ke.StrictMode=CM;ke.Suspense=PM;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$M;ke.act=r2;ke.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Q1({},e.props),s=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=w0.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)e2.call(t,c)&&!t2.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ic,type:e.type,key:s,ref:a,props:r,_owner:i}};ke.createContext=function(e){return e={$$typeof:TM,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:EM,_context:e},e.Consumer=e};ke.createElement=n2;ke.createFactory=function(e){var t=n2.bind(null,e);return t.type=e,t};ke.createRef=function(){return{current:null}};ke.forwardRef=function(e){return{$$typeof:MM,render:e}};ke.isValidElement=S0;ke.lazy=function(e){return{$$typeof:RM,_payload:{_status:-1,_result:e},_init:IM}};ke.memo=function(e,t){return{$$typeof:_M,type:e,compare:t===void 0?null:t}};ke.startTransition=function(e){var t=xu.transition;xu.transition={};try{e()}finally{xu.transition=t}};ke.unstable_act=r2;ke.useCallback=function(e,t){return rn.current.useCallback(e,t)};ke.useContext=function(e){return rn.current.useContext(e)};ke.useDebugValue=function(){};ke.useDeferredValue=function(e){return rn.current.useDeferredValue(e)};ke.useEffect=function(e,t){return rn.current.useEffect(e,t)};ke.useId=function(){return rn.current.useId()};ke.useImperativeHandle=function(e,t,n){return rn.current.useImperativeHandle(e,t,n)};ke.useInsertionEffect=function(e,t){return rn.current.useInsertionEffect(e,t)};ke.useLayoutEffect=function(e,t){return rn.current.useLayoutEffect(e,t)};ke.useMemo=function(e,t){return rn.current.useMemo(e,t)};ke.useReducer=function(e,t,n){return rn.current.useReducer(e,t,n)};ke.useRef=function(e){return rn.current.useRef(e)};ke.useState=function(e){return rn.current.useState(e)};ke.useSyncExternalStore=function(e,t,n){return rn.current.useSyncExternalStore(e,t,n)};ke.useTransition=function(){return rn.current.useTransition()};ke.version="18.3.1";Y1.exports=ke;var p=Y1.exports;const G=K1(p),j0=SM({__proto__:null,default:G},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LM=p,FM=Symbol.for("react.element"),zM=Symbol.for("react.fragment"),BM=Object.prototype.hasOwnProperty,VM=LM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UM={key:!0,ref:!0,__self:!0,__source:!0};function s2(e,t,n){var r,s={},a=null,i=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)BM.call(t,r)&&!UM.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:FM,type:e,key:a,ref:i,props:s,_owner:VM.current}}Bd.Fragment=zM;Bd.jsx=s2;Bd.jsxs=s2;q1.exports=Bd;var o=q1.exports,a2={exports:{}},On={},i2={exports:{}},o2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,_){var I=P.length;P.push(_);e:for(;0<I;){var L=I-1>>>1,H=P[L];if(0<s(H,_))P[L]=_,P[I]=H,I=L;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var _=P[0],I=P.pop();if(I!==_){P[0]=I;e:for(var L=0,H=P.length,U=H>>>1;L<U;){var Z=2*(L+1)-1,q=P[Z],ne=Z+1,A=P[ne];if(0>s(q,I))ne<H&&0>s(A,q)?(P[L]=A,P[ne]=I,L=ne):(P[L]=q,P[Z]=I,L=Z);else if(ne<H&&0>s(A,I))P[L]=A,P[ne]=I,L=ne;else break e}}return _}function s(P,_){var I=P.sortIndex-_.sortIndex;return I!==0?I:P.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,x=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var _=n(u);_!==null;){if(_.callback===null)r(u);else if(_.startTime<=P)r(u),_.sortIndex=_.expirationTime,t(c,_);else break;_=n(u)}}function S(P){if(g=!1,v(P),!x)if(n(c)!==null)x=!0,D(j);else{var _=n(u);_!==null&&V(S,_.startTime-P)}}function j(P,_){x=!1,g&&(g=!1,y(E),E=-1),m=!0;var I=f;try{for(v(_),h=n(c);h!==null&&(!(h.expirationTime>_)||P&&!M());){var L=h.callback;if(typeof L=="function"){h.callback=null,f=h.priorityLevel;var H=L(h.expirationTime<=_);_=e.unstable_now(),typeof H=="function"?h.callback=H:h===n(c)&&r(c),v(_)}else r(c);h=n(c)}if(h!==null)var U=!0;else{var Z=n(u);Z!==null&&V(S,Z.startTime-_),U=!1}return U}finally{h=null,f=I,m=!1}}var k=!1,N=null,E=-1,C=5,T=-1;function M(){return!(e.unstable_now()-T<C)}function O(){if(N!==null){var P=e.unstable_now();T=P;var _=!0;try{_=N(!0,P)}finally{_?$():(k=!1,N=null)}}else k=!1}var $;if(typeof w=="function")$=function(){w(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,z=R.port2;R.port1.onmessage=O,$=function(){z.postMessage(null)}}else $=function(){b(O,0)};function D(P){N=P,k||(k=!0,$())}function V(P,_){E=b(function(){P(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,D(j))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(P){switch(f){case 1:case 2:case 3:var _=3;break;default:_=f}var I=f;f=_;try{return P()}finally{f=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,_){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var I=f;f=P;try{return _()}finally{f=I}},e.unstable_scheduleCallback=function(P,_,I){var L=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?L+I:L):I=L,P){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=I+H,P={id:d++,callback:_,priorityLevel:P,startTime:I,expirationTime:H,sortIndex:-1},I>L?(P.sortIndex=I,t(u,P),n(c)===null&&P===n(u)&&(g?(y(E),E=-1):g=!0,V(S,I-L))):(P.sortIndex=H,t(c,P),x||m||(x=!0,D(j))),P},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(P){var _=f;return function(){var I=f;f=_;try{return P.apply(this,arguments)}finally{f=I}}}})(o2);i2.exports=o2;var WM=i2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HM=p,An=WM;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l2=new Set,jl={};function Za(e,t){io(e,t),io(e+"Capture",t)}function io(e,t){for(jl[e]=t,e=0;e<t.length;e++)l2.add(t[e])}var es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fm=Object.prototype.hasOwnProperty,GM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cv={},uv={};function KM(e){return fm.call(uv,e)?!0:fm.call(cv,e)?!1:GM.test(e)?uv[e]=!0:(cv[e]=!0,!1)}function qM(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function YM(e,t,n,r){if(t===null||typeof t>"u"||qM(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function sn(e,t,n,r,s,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Dt[e]=new sn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Dt[t]=new sn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Dt[e]=new sn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Dt[e]=new sn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Dt[e]=new sn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Dt[e]=new sn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Dt[e]=new sn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Dt[e]=new sn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Dt[e]=new sn(e,5,!1,e.toLowerCase(),null,!1,!1)});var k0=/[\-:]([a-z])/g;function C0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(k0,C0);Dt[t]=new sn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(k0,C0);Dt[t]=new sn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(k0,C0);Dt[t]=new sn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Dt[e]=new sn(e,1,!1,e.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Dt[e]=new sn(e,1,!1,e.toLowerCase(),null,!0,!0)});function N0(e,t,n,r){var s=Dt.hasOwnProperty(t)?Dt[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(YM(t,n,s,r)&&(n=null),r||s===null?KM(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var cs=HM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pc=Symbol.for("react.element"),xi=Symbol.for("react.portal"),bi=Symbol.for("react.fragment"),E0=Symbol.for("react.strict_mode"),mm=Symbol.for("react.profiler"),c2=Symbol.for("react.provider"),u2=Symbol.for("react.context"),T0=Symbol.for("react.forward_ref"),pm=Symbol.for("react.suspense"),gm=Symbol.for("react.suspense_list"),M0=Symbol.for("react.memo"),xs=Symbol.for("react.lazy"),d2=Symbol.for("react.offscreen"),dv=Symbol.iterator;function Ao(e){return e===null||typeof e!="object"?null:(e=dv&&e[dv]||e["@@iterator"],typeof e=="function"?e:null)}var tt=Object.assign,Hh;function qo(e){if(Hh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Hh=t&&t[1]||""}return`
`+Hh+e}var Gh=!1;function Kh(e,t){if(!e||Gh)return"";Gh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),i=s.length-1,l=a.length-1;1<=i&&0<=l&&s[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(s[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||s[i]!==a[l]){var c=`
`+s[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Gh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qo(e):""}function XM(e){switch(e.tag){case 5:return qo(e.type);case 16:return qo("Lazy");case 13:return qo("Suspense");case 19:return qo("SuspenseList");case 0:case 2:case 15:return e=Kh(e.type,!1),e;case 11:return e=Kh(e.type.render,!1),e;case 1:return e=Kh(e.type,!0),e;default:return""}}function ym(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case bi:return"Fragment";case xi:return"Portal";case mm:return"Profiler";case E0:return"StrictMode";case pm:return"Suspense";case gm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case u2:return(e.displayName||"Context")+".Consumer";case c2:return(e._context.displayName||"Context")+".Provider";case T0:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M0:return t=e.displayName||null,t!==null?t:ym(e.type)||"Memo";case xs:t=e._payload,e=e._init;try{return ym(e(t))}catch{}}return null}function QM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ym(t);case 8:return t===E0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Gs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function h2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function JM(e){var t=h2(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(i){r=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function _c(e){e._valueTracker||(e._valueTracker=JM(e))}function f2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=h2(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Bu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function vm(e,t){var n=t.checked;return tt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hv(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Gs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function m2(e,t){t=t.checked,t!=null&&N0(e,"checked",t,!1)}function xm(e,t){m2(e,t);var n=Gs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bm(e,t.type,n):t.hasOwnProperty("defaultValue")&&bm(e,t.type,Gs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fv(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function bm(e,t,n){(t!=="number"||Bu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Yo=Array.isArray;function Fi(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Gs(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function wm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return tt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mv(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(K(92));if(Yo(n)){if(1<n.length)throw Error(K(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Gs(n)}}function p2(e,t){var n=Gs(t.value),r=Gs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function pv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function g2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?g2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Rc,y2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Rc=Rc||document.createElement("div"),Rc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Rc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function kl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var al={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZM=["Webkit","ms","Moz","O"];Object.keys(al).forEach(function(e){ZM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),al[t]=al[e]})});function v2(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||al.hasOwnProperty(e)&&al[e]?(""+t).trim():t+"px"}function x2(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=v2(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var eP=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jm(e,t){if(t){if(eP[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function km(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cm=null;function P0(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nm=null,zi=null,Bi=null;function gv(e){if(e=cc(e)){if(typeof Nm!="function")throw Error(K(280));var t=e.stateNode;t&&(t=Gd(t),Nm(e.stateNode,e.type,t))}}function b2(e){zi?Bi?Bi.push(e):Bi=[e]:zi=e}function w2(){if(zi){var e=zi,t=Bi;if(Bi=zi=null,gv(e),t)for(e=0;e<t.length;e++)gv(t[e])}}function S2(e,t){return e(t)}function j2(){}var qh=!1;function k2(e,t,n){if(qh)return e(t,n);qh=!0;try{return S2(e,t,n)}finally{qh=!1,(zi!==null||Bi!==null)&&(j2(),w2())}}function Cl(e,t){var n=e.stateNode;if(n===null)return null;var r=Gd(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(K(231,t,typeof n));return n}var Em=!1;if(es)try{var Do={};Object.defineProperty(Do,"passive",{get:function(){Em=!0}}),window.addEventListener("test",Do,Do),window.removeEventListener("test",Do,Do)}catch{Em=!1}function tP(e,t,n,r,s,a,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var il=!1,Vu=null,Uu=!1,Tm=null,nP={onError:function(e){il=!0,Vu=e}};function rP(e,t,n,r,s,a,i,l,c){il=!1,Vu=null,tP.apply(nP,arguments)}function sP(e,t,n,r,s,a,i,l,c){if(rP.apply(this,arguments),il){if(il){var u=Vu;il=!1,Vu=null}else throw Error(K(198));Uu||(Uu=!0,Tm=u)}}function ei(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function C2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yv(e){if(ei(e)!==e)throw Error(K(188))}function aP(e){var t=e.alternate;if(!t){if(t=ei(e),t===null)throw Error(K(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return yv(s),e;if(a===r)return yv(s),t;a=a.sibling}throw Error(K(188))}if(n.return!==r.return)n=s,r=a;else{for(var i=!1,l=s.child;l;){if(l===n){i=!0,n=s,r=a;break}if(l===r){i=!0,r=s,n=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===n){i=!0,n=a,r=s;break}if(l===r){i=!0,r=a,n=s;break}l=l.sibling}if(!i)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?e:t}function N2(e){return e=aP(e),e!==null?E2(e):null}function E2(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=E2(e);if(t!==null)return t;e=e.sibling}return null}var T2=An.unstable_scheduleCallback,vv=An.unstable_cancelCallback,iP=An.unstable_shouldYield,oP=An.unstable_requestPaint,ut=An.unstable_now,lP=An.unstable_getCurrentPriorityLevel,_0=An.unstable_ImmediatePriority,M2=An.unstable_UserBlockingPriority,Wu=An.unstable_NormalPriority,cP=An.unstable_LowPriority,P2=An.unstable_IdlePriority,Vd=null,Rr=null;function uP(e){if(Rr&&typeof Rr.onCommitFiberRoot=="function")try{Rr.onCommitFiberRoot(Vd,e,void 0,(e.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:fP,dP=Math.log,hP=Math.LN2;function fP(e){return e>>>=0,e===0?32:31-(dP(e)/hP|0)|0}var Ac=64,Dc=4194304;function Xo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~s;l!==0?r=Xo(l):(a&=i,a!==0&&(r=Xo(a)))}else i=n&~s,i!==0?r=Xo(i):a!==0&&(r=Xo(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-dr(t),s=1<<n,r|=e[n],t&=~s;return r}function mP(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pP(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-dr(a),l=1<<i,c=s[i];c===-1?(!(l&n)||l&r)&&(s[i]=mP(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Mm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _2(){var e=Ac;return Ac<<=1,!(Ac&4194240)&&(Ac=64),e}function Yh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function oc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-dr(t),e[t]=n}function gP(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-dr(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function R0(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-dr(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Re=0;function R2(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var A2,A0,D2,O2,I2,Pm=!1,Oc=[],Is=null,$s=null,Ls=null,Nl=new Map,El=new Map,Ss=[],yP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xv(e,t){switch(e){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":$s=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":Nl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":El.delete(t.pointerId)}}function Oo(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=cc(t),t!==null&&A0(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function vP(e,t,n,r,s){switch(t){case"focusin":return Is=Oo(Is,e,t,n,r,s),!0;case"dragenter":return $s=Oo($s,e,t,n,r,s),!0;case"mouseover":return Ls=Oo(Ls,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return Nl.set(a,Oo(Nl.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,El.set(a,Oo(El.get(a)||null,e,t,n,r,s)),!0}return!1}function $2(e){var t=ja(e.target);if(t!==null){var n=ei(t);if(n!==null){if(t=n.tag,t===13){if(t=C2(n),t!==null){e.blockedOn=t,I2(e.priority,function(){D2(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_m(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Cm=r,n.target.dispatchEvent(r),Cm=null}else return t=cc(n),t!==null&&A0(t),e.blockedOn=n,!1;t.shift()}return!0}function bv(e,t,n){bu(e)&&n.delete(t)}function xP(){Pm=!1,Is!==null&&bu(Is)&&(Is=null),$s!==null&&bu($s)&&($s=null),Ls!==null&&bu(Ls)&&(Ls=null),Nl.forEach(bv),El.forEach(bv)}function Io(e,t){e.blockedOn===t&&(e.blockedOn=null,Pm||(Pm=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,xP)))}function Tl(e){function t(s){return Io(s,e)}if(0<Oc.length){Io(Oc[0],e);for(var n=1;n<Oc.length;n++){var r=Oc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Is!==null&&Io(Is,e),$s!==null&&Io($s,e),Ls!==null&&Io(Ls,e),Nl.forEach(t),El.forEach(t),n=0;n<Ss.length;n++)r=Ss[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ss.length&&(n=Ss[0],n.blockedOn===null);)$2(n),n.blockedOn===null&&Ss.shift()}var Vi=cs.ReactCurrentBatchConfig,Gu=!0;function bP(e,t,n,r){var s=Re,a=Vi.transition;Vi.transition=null;try{Re=1,D0(e,t,n,r)}finally{Re=s,Vi.transition=a}}function wP(e,t,n,r){var s=Re,a=Vi.transition;Vi.transition=null;try{Re=4,D0(e,t,n,r)}finally{Re=s,Vi.transition=a}}function D0(e,t,n,r){if(Gu){var s=_m(e,t,n,r);if(s===null)af(e,t,r,Ku,n),xv(e,r);else if(vP(s,e,t,n,r))r.stopPropagation();else if(xv(e,r),t&4&&-1<yP.indexOf(e)){for(;s!==null;){var a=cc(s);if(a!==null&&A2(a),a=_m(e,t,n,r),a===null&&af(e,t,r,Ku,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else af(e,t,r,null,n)}}var Ku=null;function _m(e,t,n,r){if(Ku=null,e=P0(r),e=ja(e),e!==null)if(t=ei(e),t===null)e=null;else if(n=t.tag,n===13){if(e=C2(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ku=e,null}function L2(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lP()){case _0:return 1;case M2:return 4;case Wu:case cP:return 16;case P2:return 536870912;default:return 16}default:return 16}}var Rs=null,O0=null,wu=null;function F2(){if(wu)return wu;var e,t=O0,n=t.length,r,s="value"in Rs?Rs.value:Rs.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===s[a-r];r++);return wu=s.slice(e,1<r?1-r:void 0)}function Su(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ic(){return!0}function wv(){return!1}function In(e){function t(n,r,s,a,i){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ic:wv,this.isPropagationStopped=wv,this}return tt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ic)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ic)},persist:function(){},isPersistent:Ic}),t}var jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},I0=In(jo),lc=tt({},jo,{view:0,detail:0}),SP=In(lc),Xh,Qh,$o,Ud=tt({},lc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$0,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$o&&($o&&e.type==="mousemove"?(Xh=e.screenX-$o.screenX,Qh=e.screenY-$o.screenY):Qh=Xh=0,$o=e),Xh)},movementY:function(e){return"movementY"in e?e.movementY:Qh}}),Sv=In(Ud),jP=tt({},Ud,{dataTransfer:0}),kP=In(jP),CP=tt({},lc,{relatedTarget:0}),Jh=In(CP),NP=tt({},jo,{animationName:0,elapsedTime:0,pseudoElement:0}),EP=In(NP),TP=tt({},jo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),MP=In(TP),PP=tt({},jo,{data:0}),jv=In(PP),_P={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DP(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=AP[e])?!!t[e]:!1}function $0(){return DP}var OP=tt({},lc,{key:function(e){if(e.key){var t=_P[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Su(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?RP[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$0,charCode:function(e){return e.type==="keypress"?Su(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Su(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),IP=In(OP),$P=tt({},Ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kv=In($P),LP=tt({},lc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$0}),FP=In(LP),zP=tt({},jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),BP=In(zP),VP=tt({},Ud,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),UP=In(VP),WP=[9,13,27,32],L0=es&&"CompositionEvent"in window,ol=null;es&&"documentMode"in document&&(ol=document.documentMode);var HP=es&&"TextEvent"in window&&!ol,z2=es&&(!L0||ol&&8<ol&&11>=ol),Cv=" ",Nv=!1;function B2(e,t){switch(e){case"keyup":return WP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V2(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wi=!1;function GP(e,t){switch(e){case"compositionend":return V2(t);case"keypress":return t.which!==32?null:(Nv=!0,Cv);case"textInput":return e=t.data,e===Cv&&Nv?null:e;default:return null}}function KP(e,t){if(wi)return e==="compositionend"||!L0&&B2(e,t)?(e=F2(),wu=O0=Rs=null,wi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return z2&&t.locale!=="ko"?null:t.data;default:return null}}var qP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ev(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!qP[e.type]:t==="textarea"}function U2(e,t,n,r){b2(r),t=qu(t,"onChange"),0<t.length&&(n=new I0("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ll=null,Ml=null;function YP(e){eS(e,0)}function Wd(e){var t=ki(e);if(f2(t))return e}function XP(e,t){if(e==="change")return t}var W2=!1;if(es){var Zh;if(es){var ef="oninput"in document;if(!ef){var Tv=document.createElement("div");Tv.setAttribute("oninput","return;"),ef=typeof Tv.oninput=="function"}Zh=ef}else Zh=!1;W2=Zh&&(!document.documentMode||9<document.documentMode)}function Mv(){ll&&(ll.detachEvent("onpropertychange",H2),Ml=ll=null)}function H2(e){if(e.propertyName==="value"&&Wd(Ml)){var t=[];U2(t,Ml,e,P0(e)),k2(YP,t)}}function QP(e,t,n){e==="focusin"?(Mv(),ll=t,Ml=n,ll.attachEvent("onpropertychange",H2)):e==="focusout"&&Mv()}function JP(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wd(Ml)}function ZP(e,t){if(e==="click")return Wd(t)}function e_(e,t){if(e==="input"||e==="change")return Wd(t)}function t_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mr=typeof Object.is=="function"?Object.is:t_;function Pl(e,t){if(mr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fm.call(t,s)||!mr(e[s],t[s]))return!1}return!0}function Pv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _v(e,t){var n=Pv(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pv(n)}}function G2(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?G2(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function K2(){for(var e=window,t=Bu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Bu(e.document)}return t}function F0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function n_(e){var t=K2(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&G2(n.ownerDocument.documentElement,n)){if(r!==null&&F0(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=_v(n,a);var i=_v(n,r);s&&i&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var r_=es&&"documentMode"in document&&11>=document.documentMode,Si=null,Rm=null,cl=null,Am=!1;function Rv(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Am||Si==null||Si!==Bu(r)||(r=Si,"selectionStart"in r&&F0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),cl&&Pl(cl,r)||(cl=r,r=qu(Rm,"onSelect"),0<r.length&&(t=new I0("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Si)))}function $c(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ji={animationend:$c("Animation","AnimationEnd"),animationiteration:$c("Animation","AnimationIteration"),animationstart:$c("Animation","AnimationStart"),transitionend:$c("Transition","TransitionEnd")},tf={},q2={};es&&(q2=document.createElement("div").style,"AnimationEvent"in window||(delete ji.animationend.animation,delete ji.animationiteration.animation,delete ji.animationstart.animation),"TransitionEvent"in window||delete ji.transitionend.transition);function Hd(e){if(tf[e])return tf[e];if(!ji[e])return e;var t=ji[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in q2)return tf[e]=t[n];return e}var Y2=Hd("animationend"),X2=Hd("animationiteration"),Q2=Hd("animationstart"),J2=Hd("transitionend"),Z2=new Map,Av="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ta(e,t){Z2.set(e,t),Za(t,[e])}for(var nf=0;nf<Av.length;nf++){var rf=Av[nf],s_=rf.toLowerCase(),a_=rf[0].toUpperCase()+rf.slice(1);ta(s_,"on"+a_)}ta(Y2,"onAnimationEnd");ta(X2,"onAnimationIteration");ta(Q2,"onAnimationStart");ta("dblclick","onDoubleClick");ta("focusin","onFocus");ta("focusout","onBlur");ta(J2,"onTransitionEnd");io("onMouseEnter",["mouseout","mouseover"]);io("onMouseLeave",["mouseout","mouseover"]);io("onPointerEnter",["pointerout","pointerover"]);io("onPointerLeave",["pointerout","pointerover"]);Za("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Za("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Za("onBeforeInput",["compositionend","keypress","textInput","paste"]);Za("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Za("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Za("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function Dv(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,sP(r,t,void 0,e),e.currentTarget=null}function eS(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;Dv(s,l,u),a=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;Dv(s,l,u),a=c}}}if(Uu)throw e=Tm,Uu=!1,Tm=null,e}function Be(e,t){var n=t[Lm];n===void 0&&(n=t[Lm]=new Set);var r=e+"__bubble";n.has(r)||(tS(t,e,2,!1),n.add(r))}function sf(e,t,n){var r=0;t&&(r|=4),tS(n,e,r,t)}var Lc="_reactListening"+Math.random().toString(36).slice(2);function _l(e){if(!e[Lc]){e[Lc]=!0,l2.forEach(function(n){n!=="selectionchange"&&(i_.has(n)||sf(n,!1,e),sf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Lc]||(t[Lc]=!0,sf("selectionchange",!1,t))}}function tS(e,t,n,r){switch(L2(t)){case 1:var s=bP;break;case 4:s=wP;break;default:s=D0}n=s.bind(null,t,n,e),s=void 0,!Em||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function af(e,t,n,r,s){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;i=i.return}for(;l!==null;){if(i=ja(l),i===null)return;if(c=i.tag,c===5||c===6){r=a=i;continue e}l=l.parentNode}}r=r.return}k2(function(){var u=a,d=P0(n),h=[];e:{var f=Z2.get(e);if(f!==void 0){var m=I0,x=e;switch(e){case"keypress":if(Su(n)===0)break e;case"keydown":case"keyup":m=IP;break;case"focusin":x="focus",m=Jh;break;case"focusout":x="blur",m=Jh;break;case"beforeblur":case"afterblur":m=Jh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Sv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=kP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=FP;break;case Y2:case X2:case Q2:m=EP;break;case J2:m=BP;break;case"scroll":m=SP;break;case"wheel":m=UP;break;case"copy":case"cut":case"paste":m=MP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=kv}var g=(t&4)!==0,b=!g&&e==="scroll",y=g?f!==null?f+"Capture":null:f;g=[];for(var w=u,v;w!==null;){v=w;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,y!==null&&(S=Cl(w,y),S!=null&&g.push(Rl(w,S,v)))),b)break;w=w.return}0<g.length&&(f=new m(f,x,null,n,d),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==Cm&&(x=n.relatedTarget||n.fromElement)&&(ja(x)||x[ts]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(x=n.relatedTarget||n.toElement,m=u,x=x?ja(x):null,x!==null&&(b=ei(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=u),m!==x)){if(g=Sv,S="onMouseLeave",y="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(g=kv,S="onPointerLeave",y="onPointerEnter",w="pointer"),b=m==null?f:ki(m),v=x==null?f:ki(x),f=new g(S,w+"leave",m,n,d),f.target=b,f.relatedTarget=v,S=null,ja(d)===u&&(g=new g(y,w+"enter",x,n,d),g.target=v,g.relatedTarget=b,S=g),b=S,m&&x)t:{for(g=m,y=x,w=0,v=g;v;v=ai(v))w++;for(v=0,S=y;S;S=ai(S))v++;for(;0<w-v;)g=ai(g),w--;for(;0<v-w;)y=ai(y),v--;for(;w--;){if(g===y||y!==null&&g===y.alternate)break t;g=ai(g),y=ai(y)}g=null}else g=null;m!==null&&Ov(h,f,m,g,!1),x!==null&&b!==null&&Ov(h,b,x,g,!0)}}e:{if(f=u?ki(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var j=XP;else if(Ev(f))if(W2)j=e_;else{j=JP;var k=QP}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=ZP);if(j&&(j=j(e,u))){U2(h,j,n,d);break e}k&&k(e,f,u),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&bm(f,"number",f.value)}switch(k=u?ki(u):window,e){case"focusin":(Ev(k)||k.contentEditable==="true")&&(Si=k,Rm=u,cl=null);break;case"focusout":cl=Rm=Si=null;break;case"mousedown":Am=!0;break;case"contextmenu":case"mouseup":case"dragend":Am=!1,Rv(h,n,d);break;case"selectionchange":if(r_)break;case"keydown":case"keyup":Rv(h,n,d)}var N;if(L0)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else wi?B2(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(z2&&n.locale!=="ko"&&(wi||E!=="onCompositionStart"?E==="onCompositionEnd"&&wi&&(N=F2()):(Rs=d,O0="value"in Rs?Rs.value:Rs.textContent,wi=!0)),k=qu(u,E),0<k.length&&(E=new jv(E,e,null,n,d),h.push({event:E,listeners:k}),N?E.data=N:(N=V2(n),N!==null&&(E.data=N)))),(N=HP?GP(e,n):KP(e,n))&&(u=qu(u,"onBeforeInput"),0<u.length&&(d=new jv("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=N))}eS(h,t)})}function Rl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qu(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Cl(e,n),a!=null&&r.unshift(Rl(e,a,s)),a=Cl(e,t),a!=null&&r.push(Rl(e,a,s))),e=e.return}return r}function ai(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ov(e,t,n,r,s){for(var a=t._reactName,i=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Cl(n,a),c!=null&&i.unshift(Rl(n,c,l))):s||(c=Cl(n,a),c!=null&&i.push(Rl(n,c,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var o_=/\r\n?/g,l_=/\u0000|\uFFFD/g;function Iv(e){return(typeof e=="string"?e:""+e).replace(o_,`
`).replace(l_,"")}function Fc(e,t,n){if(t=Iv(t),Iv(e)!==t&&n)throw Error(K(425))}function Yu(){}var Dm=null,Om=null;function Im(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $m=typeof setTimeout=="function"?setTimeout:void 0,c_=typeof clearTimeout=="function"?clearTimeout:void 0,$v=typeof Promise=="function"?Promise:void 0,u_=typeof queueMicrotask=="function"?queueMicrotask:typeof $v<"u"?function(e){return $v.resolve(null).then(e).catch(d_)}:$m;function d_(e){setTimeout(function(){throw e})}function of(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Tl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Tl(t)}function Fs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Lv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ko=Math.random().toString(36).slice(2),Er="__reactFiber$"+ko,Al="__reactProps$"+ko,ts="__reactContainer$"+ko,Lm="__reactEvents$"+ko,h_="__reactListeners$"+ko,f_="__reactHandles$"+ko;function ja(e){var t=e[Er];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ts]||n[Er]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Lv(e);e!==null;){if(n=e[Er])return n;e=Lv(e)}return t}e=n,n=e.parentNode}return null}function cc(e){return e=e[Er]||e[ts],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ki(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function Gd(e){return e[Al]||null}var Fm=[],Ci=-1;function na(e){return{current:e}}function Ve(e){0>Ci||(e.current=Fm[Ci],Fm[Ci]=null,Ci--)}function Fe(e,t){Ci++,Fm[Ci]=e.current,e.current=t}var Ks={},Kt=na(Ks),gn=na(!1),za=Ks;function oo(e,t){var n=e.type.contextTypes;if(!n)return Ks;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function yn(e){return e=e.childContextTypes,e!=null}function Xu(){Ve(gn),Ve(Kt)}function Fv(e,t,n){if(Kt.current!==Ks)throw Error(K(168));Fe(Kt,t),Fe(gn,n)}function nS(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(K(108,QM(e)||"Unknown",s));return tt({},n,r)}function Qu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ks,za=Kt.current,Fe(Kt,e),Fe(gn,gn.current),!0}function zv(e,t,n){var r=e.stateNode;if(!r)throw Error(K(169));n?(e=nS(e,t,za),r.__reactInternalMemoizedMergedChildContext=e,Ve(gn),Ve(Kt),Fe(Kt,e)):Ve(gn),Fe(gn,n)}var Kr=null,Kd=!1,lf=!1;function rS(e){Kr===null?Kr=[e]:Kr.push(e)}function m_(e){Kd=!0,rS(e)}function ra(){if(!lf&&Kr!==null){lf=!0;var e=0,t=Re;try{var n=Kr;for(Re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Kr=null,Kd=!1}catch(s){throw Kr!==null&&(Kr=Kr.slice(e+1)),T2(_0,ra),s}finally{Re=t,lf=!1}}return null}var Ni=[],Ei=0,Ju=null,Zu=0,Vn=[],Un=0,Ba=null,Yr=1,Xr="";function pa(e,t){Ni[Ei++]=Zu,Ni[Ei++]=Ju,Ju=e,Zu=t}function sS(e,t,n){Vn[Un++]=Yr,Vn[Un++]=Xr,Vn[Un++]=Ba,Ba=e;var r=Yr;e=Xr;var s=32-dr(r)-1;r&=~(1<<s),n+=1;var a=32-dr(t)+s;if(30<a){var i=s-s%5;a=(r&(1<<i)-1).toString(32),r>>=i,s-=i,Yr=1<<32-dr(t)+s|n<<s|r,Xr=a+e}else Yr=1<<a|n<<s|r,Xr=e}function z0(e){e.return!==null&&(pa(e,1),sS(e,1,0))}function B0(e){for(;e===Ju;)Ju=Ni[--Ei],Ni[Ei]=null,Zu=Ni[--Ei],Ni[Ei]=null;for(;e===Ba;)Ba=Vn[--Un],Vn[Un]=null,Xr=Vn[--Un],Vn[Un]=null,Yr=Vn[--Un],Vn[Un]=null}var Pn=null,Mn=null,Ke=!1,cr=null;function aS(e,t){var n=Wn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bv(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Pn=e,Mn=Fs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Pn=e,Mn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ba!==null?{id:Yr,overflow:Xr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Wn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Pn=e,Mn=null,!0):!1;default:return!1}}function zm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Bm(e){if(Ke){var t=Mn;if(t){var n=t;if(!Bv(e,t)){if(zm(e))throw Error(K(418));t=Fs(n.nextSibling);var r=Pn;t&&Bv(e,t)?aS(r,n):(e.flags=e.flags&-4097|2,Ke=!1,Pn=e)}}else{if(zm(e))throw Error(K(418));e.flags=e.flags&-4097|2,Ke=!1,Pn=e}}}function Vv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pn=e}function zc(e){if(e!==Pn)return!1;if(!Ke)return Vv(e),Ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Im(e.type,e.memoizedProps)),t&&(t=Mn)){if(zm(e))throw iS(),Error(K(418));for(;t;)aS(e,t),t=Fs(t.nextSibling)}if(Vv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Mn=Fs(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Mn=null}}else Mn=Pn?Fs(e.stateNode.nextSibling):null;return!0}function iS(){for(var e=Mn;e;)e=Fs(e.nextSibling)}function lo(){Mn=Pn=null,Ke=!1}function V0(e){cr===null?cr=[e]:cr.push(e)}var p_=cs.ReactCurrentBatchConfig;function Lo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=s.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function Bc(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Uv(e){var t=e._init;return t(e._payload)}function oS(e){function t(y,w){if(e){var v=y.deletions;v===null?(y.deletions=[w],y.flags|=16):v.push(w)}}function n(y,w){if(!e)return null;for(;w!==null;)t(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=Us(y,w),y.index=0,y.sibling=null,y}function a(y,w,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<w?(y.flags|=2,w):v):(y.flags|=2,w)):(y.flags|=1048576,w)}function i(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,w,v,S){return w===null||w.tag!==6?(w=pf(v,y.mode,S),w.return=y,w):(w=s(w,v),w.return=y,w)}function c(y,w,v,S){var j=v.type;return j===bi?d(y,w,v.props.children,S,v.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===xs&&Uv(j)===w.type)?(S=s(w,v.props),S.ref=Lo(y,w,v),S.return=y,S):(S=Mu(v.type,v.key,v.props,null,y.mode,S),S.ref=Lo(y,w,v),S.return=y,S)}function u(y,w,v,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=gf(v,y.mode,S),w.return=y,w):(w=s(w,v.children||[]),w.return=y,w)}function d(y,w,v,S,j){return w===null||w.tag!==7?(w=Ia(v,y.mode,S,j),w.return=y,w):(w=s(w,v),w.return=y,w)}function h(y,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=pf(""+w,y.mode,v),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Pc:return v=Mu(w.type,w.key,w.props,null,y.mode,v),v.ref=Lo(y,null,w),v.return=y,v;case xi:return w=gf(w,y.mode,v),w.return=y,w;case xs:var S=w._init;return h(y,S(w._payload),v)}if(Yo(w)||Ao(w))return w=Ia(w,y.mode,v,null),w.return=y,w;Bc(y,w)}return null}function f(y,w,v,S){var j=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:l(y,w,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Pc:return v.key===j?c(y,w,v,S):null;case xi:return v.key===j?u(y,w,v,S):null;case xs:return j=v._init,f(y,w,j(v._payload),S)}if(Yo(v)||Ao(v))return j!==null?null:d(y,w,v,S,null);Bc(y,v)}return null}function m(y,w,v,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(v)||null,l(w,y,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Pc:return y=y.get(S.key===null?v:S.key)||null,c(w,y,S,j);case xi:return y=y.get(S.key===null?v:S.key)||null,u(w,y,S,j);case xs:var k=S._init;return m(y,w,v,k(S._payload),j)}if(Yo(S)||Ao(S))return y=y.get(v)||null,d(w,y,S,j,null);Bc(w,S)}return null}function x(y,w,v,S){for(var j=null,k=null,N=w,E=w=0,C=null;N!==null&&E<v.length;E++){N.index>E?(C=N,N=null):C=N.sibling;var T=f(y,N,v[E],S);if(T===null){N===null&&(N=C);break}e&&N&&T.alternate===null&&t(y,N),w=a(T,w,E),k===null?j=T:k.sibling=T,k=T,N=C}if(E===v.length)return n(y,N),Ke&&pa(y,E),j;if(N===null){for(;E<v.length;E++)N=h(y,v[E],S),N!==null&&(w=a(N,w,E),k===null?j=N:k.sibling=N,k=N);return Ke&&pa(y,E),j}for(N=r(y,N);E<v.length;E++)C=m(N,y,E,v[E],S),C!==null&&(e&&C.alternate!==null&&N.delete(C.key===null?E:C.key),w=a(C,w,E),k===null?j=C:k.sibling=C,k=C);return e&&N.forEach(function(M){return t(y,M)}),Ke&&pa(y,E),j}function g(y,w,v,S){var j=Ao(v);if(typeof j!="function")throw Error(K(150));if(v=j.call(v),v==null)throw Error(K(151));for(var k=j=null,N=w,E=w=0,C=null,T=v.next();N!==null&&!T.done;E++,T=v.next()){N.index>E?(C=N,N=null):C=N.sibling;var M=f(y,N,T.value,S);if(M===null){N===null&&(N=C);break}e&&N&&M.alternate===null&&t(y,N),w=a(M,w,E),k===null?j=M:k.sibling=M,k=M,N=C}if(T.done)return n(y,N),Ke&&pa(y,E),j;if(N===null){for(;!T.done;E++,T=v.next())T=h(y,T.value,S),T!==null&&(w=a(T,w,E),k===null?j=T:k.sibling=T,k=T);return Ke&&pa(y,E),j}for(N=r(y,N);!T.done;E++,T=v.next())T=m(N,y,E,T.value,S),T!==null&&(e&&T.alternate!==null&&N.delete(T.key===null?E:T.key),w=a(T,w,E),k===null?j=T:k.sibling=T,k=T);return e&&N.forEach(function(O){return t(y,O)}),Ke&&pa(y,E),j}function b(y,w,v,S){if(typeof v=="object"&&v!==null&&v.type===bi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Pc:e:{for(var j=v.key,k=w;k!==null;){if(k.key===j){if(j=v.type,j===bi){if(k.tag===7){n(y,k.sibling),w=s(k,v.props.children),w.return=y,y=w;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===xs&&Uv(j)===k.type){n(y,k.sibling),w=s(k,v.props),w.ref=Lo(y,k,v),w.return=y,y=w;break e}n(y,k);break}else t(y,k);k=k.sibling}v.type===bi?(w=Ia(v.props.children,y.mode,S,v.key),w.return=y,y=w):(S=Mu(v.type,v.key,v.props,null,y.mode,S),S.ref=Lo(y,w,v),S.return=y,y=S)}return i(y);case xi:e:{for(k=v.key;w!==null;){if(w.key===k)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){n(y,w.sibling),w=s(w,v.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else t(y,w);w=w.sibling}w=gf(v,y.mode,S),w.return=y,y=w}return i(y);case xs:return k=v._init,b(y,w,k(v._payload),S)}if(Yo(v))return x(y,w,v,S);if(Ao(v))return g(y,w,v,S);Bc(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(n(y,w.sibling),w=s(w,v),w.return=y,y=w):(n(y,w),w=pf(v,y.mode,S),w.return=y,y=w),i(y)):n(y,w)}return b}var co=oS(!0),lS=oS(!1),ed=na(null),td=null,Ti=null,U0=null;function W0(){U0=Ti=td=null}function H0(e){var t=ed.current;Ve(ed),e._currentValue=t}function Vm(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ui(e,t){td=e,U0=Ti=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(hn=!0),e.firstContext=null)}function Gn(e){var t=e._currentValue;if(U0!==e)if(e={context:e,memoizedValue:t,next:null},Ti===null){if(td===null)throw Error(K(308));Ti=e,td.dependencies={lanes:0,firstContext:e}}else Ti=Ti.next=e;return t}var ka=null;function G0(e){ka===null?ka=[e]:ka.push(e)}function cS(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,G0(t)):(n.next=s.next,s.next=n),t.interleaved=n,ns(e,r)}function ns(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var bs=!1;function K0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,ns(e,n)}return s=r.interleaved,s===null?(t.next=t,G0(r)):(t.next=s.next,s.next=t),r.interleaved=t,ns(e,n)}function ju(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,R0(e,n)}}function Wv(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function nd(e,t,n,r){var s=e.updateQueue;bs=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?a=u:i.next=u,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var h=s.baseState;i=0,d=u=c=null,l=a;do{var f=l.lane,m=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,g=l;switch(f=t,m=n,g.tag){case 1:if(x=g.payload,typeof x=="function"){h=x.call(m,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,f=typeof x=="function"?x.call(m,h,f):x,f==null)break e;h=tt({},h,f);break e;case 2:bs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,i|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do i|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Ua|=i,e.lanes=i,e.memoizedState=h}}function Hv(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(K(191,s));s.call(r)}}}var uc={},Ar=na(uc),Dl=na(uc),Ol=na(uc);function Ca(e){if(e===uc)throw Error(K(174));return e}function q0(e,t){switch(Fe(Ol,t),Fe(Dl,e),Fe(Ar,uc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Sm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Sm(t,e)}Ve(Ar),Fe(Ar,t)}function uo(){Ve(Ar),Ve(Dl),Ve(Ol)}function dS(e){Ca(Ol.current);var t=Ca(Ar.current),n=Sm(t,e.type);t!==n&&(Fe(Dl,e),Fe(Ar,n))}function Y0(e){Dl.current===e&&(Ve(Ar),Ve(Dl))}var Qe=na(0);function rd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cf=[];function X0(){for(var e=0;e<cf.length;e++)cf[e]._workInProgressVersionPrimary=null;cf.length=0}var ku=cs.ReactCurrentDispatcher,uf=cs.ReactCurrentBatchConfig,Va=0,Ze=null,xt=null,Nt=null,sd=!1,ul=!1,Il=0,g_=0;function Ft(){throw Error(K(321))}function Q0(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!mr(e[n],t[n]))return!1;return!0}function J0(e,t,n,r,s,a){if(Va=a,Ze=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ku.current=e===null||e.memoizedState===null?b_:w_,e=n(r,s),ul){a=0;do{if(ul=!1,Il=0,25<=a)throw Error(K(301));a+=1,Nt=xt=null,t.updateQueue=null,ku.current=S_,e=n(r,s)}while(ul)}if(ku.current=ad,t=xt!==null&&xt.next!==null,Va=0,Nt=xt=Ze=null,sd=!1,t)throw Error(K(300));return e}function Z0(){var e=Il!==0;return Il=0,e}function jr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ze.memoizedState=Nt=e:Nt=Nt.next=e,Nt}function Kn(){if(xt===null){var e=Ze.alternate;e=e!==null?e.memoizedState:null}else e=xt.next;var t=Nt===null?Ze.memoizedState:Nt.next;if(t!==null)Nt=t,xt=e;else{if(e===null)throw Error(K(310));xt=e,e={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Nt===null?Ze.memoizedState=Nt=e:Nt=Nt.next=e}return Nt}function $l(e,t){return typeof t=="function"?t(e):t}function df(e){var t=Kn(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=xt,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var i=s.next;s.next=a.next,a.next=i}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=i=null,c=null,u=a;do{var d=u.lane;if((Va&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,i=r):c=c.next=h,Ze.lanes|=d,Ua|=d}u=u.next}while(u!==null&&u!==a);c===null?i=r:c.next=l,mr(r,t.memoizedState)||(hn=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,Ze.lanes|=a,Ua|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function hf(e){var t=Kn(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var i=s=s.next;do a=e(a,i.action),i=i.next;while(i!==s);mr(a,t.memoizedState)||(hn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function hS(){}function fS(e,t){var n=Ze,r=Kn(),s=t(),a=!mr(r.memoizedState,s);if(a&&(r.memoizedState=s,hn=!0),r=r.queue,eg(gS.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Nt!==null&&Nt.memoizedState.tag&1){if(n.flags|=2048,Ll(9,pS.bind(null,n,r,s,t),void 0,null),Et===null)throw Error(K(349));Va&30||mS(n,t,s)}return s}function mS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function pS(e,t,n,r){t.value=n,t.getSnapshot=r,yS(t)&&vS(e)}function gS(e,t,n){return n(function(){yS(t)&&vS(e)})}function yS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!mr(e,n)}catch{return!0}}function vS(e){var t=ns(e,1);t!==null&&hr(t,e,1,-1)}function Gv(e){var t=jr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$l,lastRenderedState:e},t.queue=e,e=e.dispatch=x_.bind(null,Ze,e),[t.memoizedState,e]}function Ll(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ze.updateQueue,t===null?(t={lastEffect:null,stores:null},Ze.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function xS(){return Kn().memoizedState}function Cu(e,t,n,r){var s=jr();Ze.flags|=e,s.memoizedState=Ll(1|t,n,void 0,r===void 0?null:r)}function qd(e,t,n,r){var s=Kn();r=r===void 0?null:r;var a=void 0;if(xt!==null){var i=xt.memoizedState;if(a=i.destroy,r!==null&&Q0(r,i.deps)){s.memoizedState=Ll(t,n,a,r);return}}Ze.flags|=e,s.memoizedState=Ll(1|t,n,a,r)}function Kv(e,t){return Cu(8390656,8,e,t)}function eg(e,t){return qd(2048,8,e,t)}function bS(e,t){return qd(4,2,e,t)}function wS(e,t){return qd(4,4,e,t)}function SS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jS(e,t,n){return n=n!=null?n.concat([e]):null,qd(4,4,SS.bind(null,t,e),n)}function tg(){}function kS(e,t){var n=Kn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Q0(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function CS(e,t){var n=Kn();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Q0(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function NS(e,t,n){return Va&21?(mr(n,t)||(n=_2(),Ze.lanes|=n,Ua|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,hn=!0),e.memoizedState=n)}function y_(e,t){var n=Re;Re=n!==0&&4>n?n:4,e(!0);var r=uf.transition;uf.transition={};try{e(!1),t()}finally{Re=n,uf.transition=r}}function ES(){return Kn().memoizedState}function v_(e,t,n){var r=Vs(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},TS(e))MS(t,n);else if(n=cS(e,t,n,r),n!==null){var s=tn();hr(n,e,r,s),PS(n,t,r)}}function x_(e,t,n){var r=Vs(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(TS(e))MS(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,n);if(s.hasEagerState=!0,s.eagerState=l,mr(l,i)){var c=t.interleaved;c===null?(s.next=s,G0(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=cS(e,t,s,r),n!==null&&(s=tn(),hr(n,e,r,s),PS(n,t,r))}}function TS(e){var t=e.alternate;return e===Ze||t!==null&&t===Ze}function MS(e,t){ul=sd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function PS(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,R0(e,n)}}var ad={readContext:Gn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},b_={readContext:Gn,useCallback:function(e,t){return jr().memoizedState=[e,t===void 0?null:t],e},useContext:Gn,useEffect:Kv,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Cu(4194308,4,SS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Cu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Cu(4,2,e,t)},useMemo:function(e,t){var n=jr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=jr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=v_.bind(null,Ze,e),[r.memoizedState,e]},useRef:function(e){var t=jr();return e={current:e},t.memoizedState=e},useState:Gv,useDebugValue:tg,useDeferredValue:function(e){return jr().memoizedState=e},useTransition:function(){var e=Gv(!1),t=e[0];return e=y_.bind(null,e[1]),jr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ze,s=jr();if(Ke){if(n===void 0)throw Error(K(407));n=n()}else{if(n=t(),Et===null)throw Error(K(349));Va&30||mS(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,Kv(gS.bind(null,r,a,e),[e]),r.flags|=2048,Ll(9,pS.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=jr(),t=Et.identifierPrefix;if(Ke){var n=Xr,r=Yr;n=(r&~(1<<32-dr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Il++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=g_++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},w_={readContext:Gn,useCallback:kS,useContext:Gn,useEffect:eg,useImperativeHandle:jS,useInsertionEffect:bS,useLayoutEffect:wS,useMemo:CS,useReducer:df,useRef:xS,useState:function(){return df($l)},useDebugValue:tg,useDeferredValue:function(e){var t=Kn();return NS(t,xt.memoizedState,e)},useTransition:function(){var e=df($l)[0],t=Kn().memoizedState;return[e,t]},useMutableSource:hS,useSyncExternalStore:fS,useId:ES,unstable_isNewReconciler:!1},S_={readContext:Gn,useCallback:kS,useContext:Gn,useEffect:eg,useImperativeHandle:jS,useInsertionEffect:bS,useLayoutEffect:wS,useMemo:CS,useReducer:hf,useRef:xS,useState:function(){return hf($l)},useDebugValue:tg,useDeferredValue:function(e){var t=Kn();return xt===null?t.memoizedState=e:NS(t,xt.memoizedState,e)},useTransition:function(){var e=hf($l)[0],t=Kn().memoizedState;return[e,t]},useMutableSource:hS,useSyncExternalStore:fS,useId:ES,unstable_isNewReconciler:!1};function nr(e,t){if(e&&e.defaultProps){t=tt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Um(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:tt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Yd={isMounted:function(e){return(e=e._reactInternals)?ei(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tn(),s=Vs(e),a=Qr(r,s);a.payload=t,n!=null&&(a.callback=n),t=zs(e,a,s),t!==null&&(hr(t,e,s,r),ju(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tn(),s=Vs(e),a=Qr(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=zs(e,a,s),t!==null&&(hr(t,e,s,r),ju(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tn(),r=Vs(e),s=Qr(n,r);s.tag=2,t!=null&&(s.callback=t),t=zs(e,s,r),t!==null&&(hr(t,e,r,n),ju(t,e,r))}};function qv(e,t,n,r,s,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,i):t.prototype&&t.prototype.isPureReactComponent?!Pl(n,r)||!Pl(s,a):!0}function _S(e,t,n){var r=!1,s=Ks,a=t.contextType;return typeof a=="object"&&a!==null?a=Gn(a):(s=yn(t)?za:Kt.current,r=t.contextTypes,a=(r=r!=null)?oo(e,s):Ks),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Yv(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Yd.enqueueReplaceState(t,t.state,null)}function Wm(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},K0(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Gn(a):(a=yn(t)?za:Kt.current,s.context=oo(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Um(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Yd.enqueueReplaceState(s,s.state,null),nd(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ho(e,t){try{var n="",r=t;do n+=XM(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function ff(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Hm(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var j_=typeof WeakMap=="function"?WeakMap:Map;function RS(e,t,n){n=Qr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){od||(od=!0,tp=r),Hm(e,t)},n}function AS(e,t,n){n=Qr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Hm(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Hm(e,t),typeof r!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Xv(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new j_;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=$_.bind(null,e,t,n),t.then(e,e))}function Qv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Jv(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Qr(-1,1),t.tag=2,zs(n,t,1))),n.lanes|=1),e)}var k_=cs.ReactCurrentOwner,hn=!1;function Qt(e,t,n,r){t.child=e===null?lS(t,null,n,r):co(t,e.child,n,r)}function Zv(e,t,n,r,s){n=n.render;var a=t.ref;return Ui(t,s),r=J0(e,t,n,r,a,s),n=Z0(),e!==null&&!hn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,rs(e,t,s)):(Ke&&n&&z0(t),t.flags|=1,Qt(e,t,r,s),t.child)}function ex(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!cg(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,DS(e,t,a,r,s)):(e=Mu(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:Pl,n(i,r)&&e.ref===t.ref)return rs(e,t,s)}return t.flags|=1,e=Us(a,r),e.ref=t.ref,e.return=t,t.child=e}function DS(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(Pl(a,r)&&e.ref===t.ref)if(hn=!1,t.pendingProps=r=a,(e.lanes&s)!==0)e.flags&131072&&(hn=!0);else return t.lanes=e.lanes,rs(e,t,s)}return Gm(e,t,n,r,s)}function OS(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Pi,kn),kn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fe(Pi,kn),kn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Fe(Pi,kn),kn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Fe(Pi,kn),kn|=r;return Qt(e,t,s,n),t.child}function IS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Gm(e,t,n,r,s){var a=yn(n)?za:Kt.current;return a=oo(t,a),Ui(t,s),n=J0(e,t,n,r,a,s),r=Z0(),e!==null&&!hn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,rs(e,t,s)):(Ke&&r&&z0(t),t.flags|=1,Qt(e,t,n,s),t.child)}function tx(e,t,n,r,s){if(yn(n)){var a=!0;Qu(t)}else a=!1;if(Ui(t,s),t.stateNode===null)Nu(e,t),_S(t,n,r),Wm(t,n,r,s),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,u=n.contextType;typeof u=="object"&&u!==null?u=Gn(u):(u=yn(n)?za:Kt.current,u=oo(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Yv(t,i,r,u),bs=!1;var f=t.memoizedState;i.state=f,nd(t,r,i,s),c=t.memoizedState,l!==r||f!==c||gn.current||bs?(typeof d=="function"&&(Um(t,n,d,r),c=t.memoizedState),(l=bs||qv(t,n,l,r,f,c,u))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=u,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,uS(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:nr(t.type,l),i.props=u,h=t.pendingProps,f=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Gn(c):(c=yn(n)?za:Kt.current,c=oo(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Yv(t,i,r,c),bs=!1,f=t.memoizedState,i.state=f,nd(t,r,i,s);var x=t.memoizedState;l!==h||f!==x||gn.current||bs?(typeof m=="function"&&(Um(t,n,m,r),x=t.memoizedState),(u=bs||qv(t,n,u,r,f,x,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,x,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,x,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),i.props=r,i.state=x,i.context=c,r=u):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Km(e,t,n,r,a,s)}function Km(e,t,n,r,s,a){IS(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return s&&zv(t,n,!1),rs(e,t,a);r=t.stateNode,k_.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=co(t,e.child,null,a),t.child=co(t,null,l,a)):Qt(e,t,l,a),t.memoizedState=r.state,s&&zv(t,n,!0),t.child}function $S(e){var t=e.stateNode;t.pendingContext?Fv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fv(e,t.context,!1),q0(e,t.containerInfo)}function nx(e,t,n,r,s){return lo(),V0(s),t.flags|=256,Qt(e,t,n,r),t.child}var qm={dehydrated:null,treeContext:null,retryLane:0};function Ym(e){return{baseLanes:e,cachePool:null,transitions:null}}function LS(e,t,n){var r=t.pendingProps,s=Qe.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Fe(Qe,s&1),e===null)return Bm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,a?(r=t.mode,a=t.child,i={mode:"hidden",children:i},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Jd(i,r,0,null),e=Ia(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ym(n),t.memoizedState=qm,e):ng(t,i));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return C_(e,t,i,r,l,s,n);if(a){a=r.fallback,i=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Us(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Us(l,a):(a=Ia(a,i,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,i=e.child.memoizedState,i=i===null?Ym(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=qm,r}return a=e.child,e=a.sibling,r=Us(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ng(e,t){return t=Jd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vc(e,t,n,r){return r!==null&&V0(r),co(t,e.child,null,n),e=ng(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function C_(e,t,n,r,s,a,i){if(n)return t.flags&256?(t.flags&=-257,r=ff(Error(K(422))),Vc(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=Jd({mode:"visible",children:r.children},s,0,null),a=Ia(a,s,i,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&co(t,e.child,null,i),t.child.memoizedState=Ym(i),t.memoizedState=qm,a);if(!(t.mode&1))return Vc(e,t,i,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(K(419)),r=ff(a,r,void 0),Vc(e,t,i,r)}if(l=(i&e.childLanes)!==0,hn||l){if(r=Et,r!==null){switch(i&-i){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|i)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ns(e,s),hr(r,e,s,-1))}return lg(),r=ff(Error(K(421))),Vc(e,t,i,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=L_.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Mn=Fs(s.nextSibling),Pn=t,Ke=!0,cr=null,e!==null&&(Vn[Un++]=Yr,Vn[Un++]=Xr,Vn[Un++]=Ba,Yr=e.id,Xr=e.overflow,Ba=t),t=ng(t,r.children),t.flags|=4096,t)}function rx(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Vm(e.return,t,n)}function mf(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function FS(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(Qt(e,t,r.children,n),r=Qe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&rx(e,n,t);else if(e.tag===19)rx(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Fe(Qe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&rd(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),mf(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&rd(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}mf(t,!0,n,null,a);break;case"together":mf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Nu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ua|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,n=Us(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Us(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function N_(e,t,n){switch(t.tag){case 3:$S(t),lo();break;case 5:dS(t);break;case 1:yn(t.type)&&Qu(t);break;case 4:q0(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Fe(ed,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Fe(Qe,Qe.current&1),t.flags|=128,null):n&t.child.childLanes?LS(e,t,n):(Fe(Qe,Qe.current&1),e=rs(e,t,n),e!==null?e.sibling:null);Fe(Qe,Qe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return FS(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fe(Qe,Qe.current),r)break;return null;case 22:case 23:return t.lanes=0,OS(e,t,n)}return rs(e,t,n)}var zS,Xm,BS,VS;zS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xm=function(){};BS=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ca(Ar.current);var a=null;switch(n){case"input":s=vm(e,s),r=vm(e,r),a=[];break;case"select":s=tt({},s,{value:void 0}),r=tt({},r,{value:void 0}),a=[];break;case"textarea":s=wm(e,s),r=wm(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Yu)}jm(n,r);var i;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(jl.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(jl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Be("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};VS=function(e,t,n,r){n!==r&&(t.flags|=4)};function Fo(e,t){if(!Ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function E_(e,t,n){var r=t.pendingProps;switch(B0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(t),null;case 1:return yn(t.type)&&Xu(),zt(t),null;case 3:return r=t.stateNode,uo(),Ve(gn),Ve(Kt),X0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(zc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,cr!==null&&(sp(cr),cr=null))),Xm(e,t),zt(t),null;case 5:Y0(t);var s=Ca(Ol.current);if(n=t.type,e!==null&&t.stateNode!=null)BS(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(K(166));return zt(t),null}if(e=Ca(Ar.current),zc(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Er]=t,r[Al]=a,e=(t.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(s=0;s<Qo.length;s++)Be(Qo[s],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":hv(r,a),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Be("invalid",r);break;case"textarea":mv(r,a),Be("invalid",r)}jm(n,a),s=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Fc(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Fc(r.textContent,l,e),s=["children",""+l]):jl.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&Be("scroll",r)}switch(n){case"input":_c(r),fv(r,a,!0);break;case"textarea":_c(r),pv(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Yu)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=g2(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[Er]=t,e[Al]=r,zS(e,t,!1,!1),t.stateNode=e;e:{switch(i=km(n,r),n){case"dialog":Be("cancel",e),Be("close",e),s=r;break;case"iframe":case"object":case"embed":Be("load",e),s=r;break;case"video":case"audio":for(s=0;s<Qo.length;s++)Be(Qo[s],e);s=r;break;case"source":Be("error",e),s=r;break;case"img":case"image":case"link":Be("error",e),Be("load",e),s=r;break;case"details":Be("toggle",e),s=r;break;case"input":hv(e,r),s=vm(e,r),Be("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=tt({},r,{value:void 0}),Be("invalid",e);break;case"textarea":mv(e,r),s=wm(e,r),Be("invalid",e);break;default:s=r}jm(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?x2(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&y2(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&kl(e,c):typeof c=="number"&&kl(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(jl.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Be("scroll",e):c!=null&&N0(e,a,c,i))}switch(n){case"input":_c(e),fv(e,r,!1);break;case"textarea":_c(e),pv(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Gs(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Fi(e,!!r.multiple,a,!1):r.defaultValue!=null&&Fi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Yu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return zt(t),null;case 6:if(e&&t.stateNode!=null)VS(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(K(166));if(n=Ca(Ol.current),Ca(Ar.current),zc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Er]=t,(a=r.nodeValue!==n)&&(e=Pn,e!==null))switch(e.tag){case 3:Fc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fc(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Er]=t,t.stateNode=r}return zt(t),null;case 13:if(Ve(Qe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ke&&Mn!==null&&t.mode&1&&!(t.flags&128))iS(),lo(),t.flags|=98560,a=!1;else if(a=zc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(K(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(K(317));a[Er]=t}else lo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;zt(t),a=!1}else cr!==null&&(sp(cr),cr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Qe.current&1?St===0&&(St=3):lg())),t.updateQueue!==null&&(t.flags|=4),zt(t),null);case 4:return uo(),Xm(e,t),e===null&&_l(t.stateNode.containerInfo),zt(t),null;case 10:return H0(t.type._context),zt(t),null;case 17:return yn(t.type)&&Xu(),zt(t),null;case 19:if(Ve(Qe),a=t.memoizedState,a===null)return zt(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)Fo(a,!1);else{if(St!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=rd(e),i!==null){for(t.flags|=128,Fo(a,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fe(Qe,Qe.current&1|2),t.child}e=e.sibling}a.tail!==null&&ut()>fo&&(t.flags|=128,r=!0,Fo(a,!1),t.lanes=4194304)}else{if(!r)if(e=rd(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Fo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!Ke)return zt(t),null}else 2*ut()-a.renderingStartTime>fo&&n!==1073741824&&(t.flags|=128,r=!0,Fo(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ut(),t.sibling=null,n=Qe.current,Fe(Qe,r?n&1|2:n&1),t):(zt(t),null);case 22:case 23:return og(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kn&1073741824&&(zt(t),t.subtreeFlags&6&&(t.flags|=8192)):zt(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function T_(e,t){switch(B0(t),t.tag){case 1:return yn(t.type)&&Xu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return uo(),Ve(gn),Ve(Kt),X0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Y0(t),null;case 13:if(Ve(Qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));lo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ve(Qe),null;case 4:return uo(),null;case 10:return H0(t.type._context),null;case 22:case 23:return og(),null;case 24:return null;default:return null}}var Uc=!1,Wt=!1,M_=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Mi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ot(e,t,r)}else n.current=null}function Qm(e,t,n){try{n()}catch(r){ot(e,t,r)}}var sx=!1;function P_(e,t){if(Dm=Gu,e=K2(),F0(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||s!==0&&h.nodeType!==3||(l=i+s),h!==a||r!==0&&h.nodeType!==3||(c=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=i),f===a&&++d===r&&(c=i),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Om={focusedElem:e,selectionRange:n},Gu=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,b=x.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:nr(t.type,g),b);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(S){ot(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return x=sx,sx=!1,x}function dl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&Qm(t,n,a)}s=s.next}while(s!==r)}}function Xd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Jm(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function US(e){var t=e.alternate;t!==null&&(e.alternate=null,US(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Er],delete t[Al],delete t[Lm],delete t[h_],delete t[f_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function WS(e){return e.tag===5||e.tag===3||e.tag===4}function ax(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||WS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Zm(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Yu));else if(r!==4&&(e=e.child,e!==null))for(Zm(e,t,n),e=e.sibling;e!==null;)Zm(e,t,n),e=e.sibling}function ep(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ep(e,t,n),e=e.sibling;e!==null;)ep(e,t,n),e=e.sibling}var _t=null,or=!1;function hs(e,t,n){for(n=n.child;n!==null;)HS(e,t,n),n=n.sibling}function HS(e,t,n){if(Rr&&typeof Rr.onCommitFiberUnmount=="function")try{Rr.onCommitFiberUnmount(Vd,n)}catch{}switch(n.tag){case 5:Wt||Mi(n,t);case 6:var r=_t,s=or;_t=null,hs(e,t,n),_t=r,or=s,_t!==null&&(or?(e=_t,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):_t.removeChild(n.stateNode));break;case 18:_t!==null&&(or?(e=_t,n=n.stateNode,e.nodeType===8?of(e.parentNode,n):e.nodeType===1&&of(e,n),Tl(e)):of(_t,n.stateNode));break;case 4:r=_t,s=or,_t=n.stateNode.containerInfo,or=!0,hs(e,t,n),_t=r,or=s;break;case 0:case 11:case 14:case 15:if(!Wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&Qm(n,t,i),s=s.next}while(s!==r)}hs(e,t,n);break;case 1:if(!Wt&&(Mi(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ot(n,t,l)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:n.mode&1?(Wt=(r=Wt)||n.memoizedState!==null,hs(e,t,n),Wt=r):hs(e,t,n);break;default:hs(e,t,n)}}function ix(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new M_),t.forEach(function(r){var s=F_.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Yn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:_t=l.stateNode,or=!1;break e;case 3:_t=l.stateNode.containerInfo,or=!0;break e;case 4:_t=l.stateNode.containerInfo,or=!0;break e}l=l.return}if(_t===null)throw Error(K(160));HS(a,i,s),_t=null,or=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ot(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)GS(t,e),t=t.sibling}function GS(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yn(t,e),Sr(e),r&4){try{dl(3,e,e.return),Xd(3,e)}catch(g){ot(e,e.return,g)}try{dl(5,e,e.return)}catch(g){ot(e,e.return,g)}}break;case 1:Yn(t,e),Sr(e),r&512&&n!==null&&Mi(n,n.return);break;case 5:if(Yn(t,e),Sr(e),r&512&&n!==null&&Mi(n,n.return),e.flags&32){var s=e.stateNode;try{kl(s,"")}catch(g){ot(e,e.return,g)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&m2(s,a),km(l,i);var u=km(l,a);for(i=0;i<c.length;i+=2){var d=c[i],h=c[i+1];d==="style"?x2(s,h):d==="dangerouslySetInnerHTML"?y2(s,h):d==="children"?kl(s,h):N0(s,d,h,u)}switch(l){case"input":xm(s,a);break;case"textarea":p2(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Fi(s,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?Fi(s,!!a.multiple,a.defaultValue,!0):Fi(s,!!a.multiple,a.multiple?[]:"",!1))}s[Al]=a}catch(g){ot(e,e.return,g)}}break;case 6:if(Yn(t,e),Sr(e),r&4){if(e.stateNode===null)throw Error(K(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(g){ot(e,e.return,g)}}break;case 3:if(Yn(t,e),Sr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Tl(t.containerInfo)}catch(g){ot(e,e.return,g)}break;case 4:Yn(t,e),Sr(e);break;case 13:Yn(t,e),Sr(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(ag=ut())),r&4&&ix(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Wt=(u=Wt)||d,Yn(t,e),Wt=u):Yn(t,e),Sr(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Q=e,d=e.child;d!==null;){for(h=Q=d;Q!==null;){switch(f=Q,m=f.child,f.tag){case 0:case 11:case 14:case 15:dl(4,f,f.return);break;case 1:Mi(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){ot(r,n,g)}}break;case 5:Mi(f,f.return);break;case 22:if(f.memoizedState!==null){lx(h);continue}}m!==null?(m.return=f,Q=m):lx(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=v2("display",i))}catch(g){ot(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){ot(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Yn(t,e),Sr(e),r&4&&ix(e);break;case 21:break;default:Yn(t,e),Sr(e)}}function Sr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(WS(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(kl(s,""),r.flags&=-33);var a=ax(e);ep(e,a,s);break;case 3:case 4:var i=r.stateNode.containerInfo,l=ax(e);Zm(e,l,i);break;default:throw Error(K(161))}}catch(c){ot(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function __(e,t,n){Q=e,KS(e)}function KS(e,t,n){for(var r=(e.mode&1)!==0;Q!==null;){var s=Q,a=s.child;if(s.tag===22&&r){var i=s.memoizedState!==null||Uc;if(!i){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Wt;l=Uc;var u=Wt;if(Uc=i,(Wt=c)&&!u)for(Q=s;Q!==null;)i=Q,c=i.child,i.tag===22&&i.memoizedState!==null?cx(s):c!==null?(c.return=i,Q=c):cx(s);for(;a!==null;)Q=a,KS(a),a=a.sibling;Q=s,Uc=l,Wt=u}ox(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Q=a):ox(e)}}function ox(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Wt||Xd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Wt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:nr(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Hv(t,a,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Hv(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Tl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Wt||t.flags&512&&Jm(t)}catch(f){ot(t,t.return,f)}}if(t===e){Q=null;break}if(n=t.sibling,n!==null){n.return=t.return,Q=n;break}Q=t.return}}function lx(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Q=n;break}Q=t.return}}function cx(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Xd(4,t)}catch(c){ot(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){ot(t,s,c)}}var a=t.return;try{Jm(t)}catch(c){ot(t,a,c)}break;case 5:var i=t.return;try{Jm(t)}catch(c){ot(t,i,c)}}}catch(c){ot(t,t.return,c)}if(t===e){Q=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Q=l;break}Q=t.return}}var R_=Math.ceil,id=cs.ReactCurrentDispatcher,rg=cs.ReactCurrentOwner,Hn=cs.ReactCurrentBatchConfig,Te=0,Et=null,pt=null,At=0,kn=0,Pi=na(0),St=0,Fl=null,Ua=0,Qd=0,sg=0,hl=null,un=null,ag=0,fo=1/0,Hr=null,od=!1,tp=null,Bs=null,Wc=!1,As=null,ld=0,fl=0,np=null,Eu=-1,Tu=0;function tn(){return Te&6?ut():Eu!==-1?Eu:Eu=ut()}function Vs(e){return e.mode&1?Te&2&&At!==0?At&-At:p_.transition!==null?(Tu===0&&(Tu=_2()),Tu):(e=Re,e!==0||(e=window.event,e=e===void 0?16:L2(e.type)),e):1}function hr(e,t,n,r){if(50<fl)throw fl=0,np=null,Error(K(185));oc(e,n,r),(!(Te&2)||e!==Et)&&(e===Et&&(!(Te&2)&&(Qd|=n),St===4&&js(e,At)),vn(e,r),n===1&&Te===0&&!(t.mode&1)&&(fo=ut()+500,Kd&&ra()))}function vn(e,t){var n=e.callbackNode;pP(e,t);var r=Hu(e,e===Et?At:0);if(r===0)n!==null&&vv(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&vv(n),t===1)e.tag===0?m_(ux.bind(null,e)):rS(ux.bind(null,e)),u_(function(){!(Te&6)&&ra()}),n=null;else{switch(R2(r)){case 1:n=_0;break;case 4:n=M2;break;case 16:n=Wu;break;case 536870912:n=P2;break;default:n=Wu}n=t5(n,qS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function qS(e,t){if(Eu=-1,Tu=0,Te&6)throw Error(K(327));var n=e.callbackNode;if(Wi()&&e.callbackNode!==n)return null;var r=Hu(e,e===Et?At:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=cd(e,r);else{t=r;var s=Te;Te|=2;var a=XS();(Et!==e||At!==t)&&(Hr=null,fo=ut()+500,Oa(e,t));do try{O_();break}catch(l){YS(e,l)}while(!0);W0(),id.current=a,Te=s,pt!==null?t=0:(Et=null,At=0,t=St)}if(t!==0){if(t===2&&(s=Mm(e),s!==0&&(r=s,t=rp(e,s))),t===1)throw n=Fl,Oa(e,0),js(e,r),vn(e,ut()),n;if(t===6)js(e,r);else{if(s=e.current.alternate,!(r&30)&&!A_(s)&&(t=cd(e,r),t===2&&(a=Mm(e),a!==0&&(r=a,t=rp(e,a))),t===1))throw n=Fl,Oa(e,0),js(e,r),vn(e,ut()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(K(345));case 2:ga(e,un,Hr);break;case 3:if(js(e,r),(r&130023424)===r&&(t=ag+500-ut(),10<t)){if(Hu(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){tn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=$m(ga.bind(null,e,un,Hr),t);break}ga(e,un,Hr);break;case 4:if(js(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var i=31-dr(r);a=1<<i,i=t[i],i>s&&(s=i),r&=~a}if(r=s,r=ut()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*R_(r/1960))-r,10<r){e.timeoutHandle=$m(ga.bind(null,e,un,Hr),r);break}ga(e,un,Hr);break;case 5:ga(e,un,Hr);break;default:throw Error(K(329))}}}return vn(e,ut()),e.callbackNode===n?qS.bind(null,e):null}function rp(e,t){var n=hl;return e.current.memoizedState.isDehydrated&&(Oa(e,t).flags|=256),e=cd(e,t),e!==2&&(t=un,un=n,t!==null&&sp(t)),e}function sp(e){un===null?un=e:un.push.apply(un,e)}function A_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!mr(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function js(e,t){for(t&=~sg,t&=~Qd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-dr(t),r=1<<n;e[n]=-1,t&=~r}}function ux(e){if(Te&6)throw Error(K(327));Wi();var t=Hu(e,0);if(!(t&1))return vn(e,ut()),null;var n=cd(e,t);if(e.tag!==0&&n===2){var r=Mm(e);r!==0&&(t=r,n=rp(e,r))}if(n===1)throw n=Fl,Oa(e,0),js(e,t),vn(e,ut()),n;if(n===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ga(e,un,Hr),vn(e,ut()),null}function ig(e,t){var n=Te;Te|=1;try{return e(t)}finally{Te=n,Te===0&&(fo=ut()+500,Kd&&ra())}}function Wa(e){As!==null&&As.tag===0&&!(Te&6)&&Wi();var t=Te;Te|=1;var n=Hn.transition,r=Re;try{if(Hn.transition=null,Re=1,e)return e()}finally{Re=r,Hn.transition=n,Te=t,!(Te&6)&&ra()}}function og(){kn=Pi.current,Ve(Pi)}function Oa(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,c_(n)),pt!==null)for(n=pt.return;n!==null;){var r=n;switch(B0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xu();break;case 3:uo(),Ve(gn),Ve(Kt),X0();break;case 5:Y0(r);break;case 4:uo();break;case 13:Ve(Qe);break;case 19:Ve(Qe);break;case 10:H0(r.type._context);break;case 22:case 23:og()}n=n.return}if(Et=e,pt=e=Us(e.current,null),At=kn=t,St=0,Fl=null,sg=Qd=Ua=0,un=hl=null,ka!==null){for(t=0;t<ka.length;t++)if(n=ka[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var i=a.next;a.next=s,r.next=i}n.pending=r}ka=null}return e}function YS(e,t){do{var n=pt;try{if(W0(),ku.current=ad,sd){for(var r=Ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}sd=!1}if(Va=0,Nt=xt=Ze=null,ul=!1,Il=0,rg.current=null,n===null||n.return===null){St=1,Fl=t,pt=null;break}e:{var a=e,i=n.return,l=n,c=t;if(t=At,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Qv(i);if(m!==null){m.flags&=-257,Jv(m,i,l,a,t),m.mode&1&&Xv(a,u,t),t=m,c=u;var x=t.updateQueue;if(x===null){var g=new Set;g.add(c),t.updateQueue=g}else x.add(c);break e}else{if(!(t&1)){Xv(a,u,t),lg();break e}c=Error(K(426))}}else if(Ke&&l.mode&1){var b=Qv(i);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Jv(b,i,l,a,t),V0(ho(c,l));break e}}a=c=ho(c,l),St!==4&&(St=2),hl===null?hl=[a]:hl.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=RS(a,c,t);Wv(a,y);break e;case 1:l=c;var w=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Bs===null||!Bs.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var S=AS(a,l,t);Wv(a,S);break e}}a=a.return}while(a!==null)}JS(n)}catch(j){t=j,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(!0)}function XS(){var e=id.current;return id.current=ad,e===null?ad:e}function lg(){(St===0||St===3||St===2)&&(St=4),Et===null||!(Ua&268435455)&&!(Qd&268435455)||js(Et,At)}function cd(e,t){var n=Te;Te|=2;var r=XS();(Et!==e||At!==t)&&(Hr=null,Oa(e,t));do try{D_();break}catch(s){YS(e,s)}while(!0);if(W0(),Te=n,id.current=r,pt!==null)throw Error(K(261));return Et=null,At=0,St}function D_(){for(;pt!==null;)QS(pt)}function O_(){for(;pt!==null&&!iP();)QS(pt)}function QS(e){var t=e5(e.alternate,e,kn);e.memoizedProps=e.pendingProps,t===null?JS(e):pt=t,rg.current=null}function JS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=T_(n,t),n!==null){n.flags&=32767,pt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{St=6,pt=null;return}}else if(n=E_(n,t,kn),n!==null){pt=n;return}if(t=t.sibling,t!==null){pt=t;return}pt=t=e}while(t!==null);St===0&&(St=5)}function ga(e,t,n){var r=Re,s=Hn.transition;try{Hn.transition=null,Re=1,I_(e,t,n,r)}finally{Hn.transition=s,Re=r}return null}function I_(e,t,n,r){do Wi();while(As!==null);if(Te&6)throw Error(K(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(gP(e,a),e===Et&&(pt=Et=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wc||(Wc=!0,t5(Wu,function(){return Wi(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Hn.transition,Hn.transition=null;var i=Re;Re=1;var l=Te;Te|=4,rg.current=null,P_(e,n),GS(n,e),n_(Om),Gu=!!Dm,Om=Dm=null,e.current=n,__(n),oP(),Te=l,Re=i,Hn.transition=a}else e.current=n;if(Wc&&(Wc=!1,As=e,ld=s),a=e.pendingLanes,a===0&&(Bs=null),uP(n.stateNode),vn(e,ut()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(od)throw od=!1,e=tp,tp=null,e;return ld&1&&e.tag!==0&&Wi(),a=e.pendingLanes,a&1?e===np?fl++:(fl=0,np=e):fl=0,ra(),null}function Wi(){if(As!==null){var e=R2(ld),t=Hn.transition,n=Re;try{if(Hn.transition=null,Re=16>e?16:e,As===null)var r=!1;else{if(e=As,As=null,ld=0,Te&6)throw Error(K(331));var s=Te;for(Te|=4,Q=e.current;Q!==null;){var a=Q,i=a.child;if(Q.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Q=u;Q!==null;){var d=Q;switch(d.tag){case 0:case 11:case 15:dl(8,d,a)}var h=d.child;if(h!==null)h.return=d,Q=h;else for(;Q!==null;){d=Q;var f=d.sibling,m=d.return;if(US(d),d===u){Q=null;break}if(f!==null){f.return=m,Q=f;break}Q=m}}}var x=a.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}Q=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,Q=i;else e:for(;Q!==null;){if(a=Q,a.flags&2048)switch(a.tag){case 0:case 11:case 15:dl(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,Q=y;break e}Q=a.return}}var w=e.current;for(Q=w;Q!==null;){i=Q;var v=i.child;if(i.subtreeFlags&2064&&v!==null)v.return=i,Q=v;else e:for(i=w;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Xd(9,l)}}catch(j){ot(l,l.return,j)}if(l===i){Q=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,Q=S;break e}Q=l.return}}if(Te=s,ra(),Rr&&typeof Rr.onPostCommitFiberRoot=="function")try{Rr.onPostCommitFiberRoot(Vd,e)}catch{}r=!0}return r}finally{Re=n,Hn.transition=t}}return!1}function dx(e,t,n){t=ho(n,t),t=RS(e,t,1),e=zs(e,t,1),t=tn(),e!==null&&(oc(e,1,t),vn(e,t))}function ot(e,t,n){if(e.tag===3)dx(e,e,n);else for(;t!==null;){if(t.tag===3){dx(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bs===null||!Bs.has(r))){e=ho(n,e),e=AS(t,e,1),t=zs(t,e,1),e=tn(),t!==null&&(oc(t,1,e),vn(t,e));break}}t=t.return}}function $_(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=tn(),e.pingedLanes|=e.suspendedLanes&n,Et===e&&(At&n)===n&&(St===4||St===3&&(At&130023424)===At&&500>ut()-ag?Oa(e,0):sg|=n),vn(e,t)}function ZS(e,t){t===0&&(e.mode&1?(t=Dc,Dc<<=1,!(Dc&130023424)&&(Dc=4194304)):t=1);var n=tn();e=ns(e,t),e!==null&&(oc(e,t,n),vn(e,n))}function L_(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ZS(e,n)}function F_(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(t),ZS(e,n)}var e5;e5=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||gn.current)hn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return hn=!1,N_(e,t,n);hn=!!(e.flags&131072)}else hn=!1,Ke&&t.flags&1048576&&sS(t,Zu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Nu(e,t),e=t.pendingProps;var s=oo(t,Kt.current);Ui(t,n),s=J0(null,t,r,e,s,n);var a=Z0();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yn(r)?(a=!0,Qu(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,K0(t),s.updater=Yd,t.stateNode=s,s._reactInternals=t,Wm(t,r,e,n),t=Km(null,t,r,!0,a,n)):(t.tag=0,Ke&&a&&z0(t),Qt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Nu(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=B_(r),e=nr(r,e),s){case 0:t=Gm(null,t,r,e,n);break e;case 1:t=tx(null,t,r,e,n);break e;case 11:t=Zv(null,t,r,e,n);break e;case 14:t=ex(null,t,r,nr(r.type,e),n);break e}throw Error(K(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:nr(r,s),Gm(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:nr(r,s),tx(e,t,r,s,n);case 3:e:{if($S(t),e===null)throw Error(K(387));r=t.pendingProps,a=t.memoizedState,s=a.element,uS(e,t),nd(t,r,null,n);var i=t.memoizedState;if(r=i.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=ho(Error(K(423)),t),t=nx(e,t,r,n,s);break e}else if(r!==s){s=ho(Error(K(424)),t),t=nx(e,t,r,n,s);break e}else for(Mn=Fs(t.stateNode.containerInfo.firstChild),Pn=t,Ke=!0,cr=null,n=lS(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lo(),r===s){t=rs(e,t,n);break e}Qt(e,t,r,n)}t=t.child}return t;case 5:return dS(t),e===null&&Bm(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,i=s.children,Im(r,s)?i=null:a!==null&&Im(r,a)&&(t.flags|=32),IS(e,t),Qt(e,t,i,n),t.child;case 6:return e===null&&Bm(t),null;case 13:return LS(e,t,n);case 4:return q0(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=co(t,null,r,n):Qt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:nr(r,s),Zv(e,t,r,s,n);case 7:return Qt(e,t,t.pendingProps,n),t.child;case 8:return Qt(e,t,t.pendingProps.children,n),t.child;case 12:return Qt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,i=s.value,Fe(ed,r._currentValue),r._currentValue=i,a!==null)if(mr(a.value,i)){if(a.children===s.children&&!gn.current){t=rs(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Qr(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Vm(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(K(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Vm(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}Qt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ui(t,n),s=Gn(s),r=r(s),t.flags|=1,Qt(e,t,r,n),t.child;case 14:return r=t.type,s=nr(r,t.pendingProps),s=nr(r.type,s),ex(e,t,r,s,n);case 15:return DS(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:nr(r,s),Nu(e,t),t.tag=1,yn(r)?(e=!0,Qu(t)):e=!1,Ui(t,n),_S(t,r,s),Wm(t,r,s,n),Km(null,t,r,!0,e,n);case 19:return FS(e,t,n);case 22:return OS(e,t,n)}throw Error(K(156,t.tag))};function t5(e,t){return T2(e,t)}function z_(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(e,t,n,r){return new z_(e,t,n,r)}function cg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function B_(e){if(typeof e=="function")return cg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===T0)return 11;if(e===M0)return 14}return 2}function Us(e,t){var n=e.alternate;return n===null?(n=Wn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mu(e,t,n,r,s,a){var i=2;if(r=e,typeof e=="function")cg(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case bi:return Ia(n.children,s,a,t);case E0:i=8,s|=8;break;case mm:return e=Wn(12,n,t,s|2),e.elementType=mm,e.lanes=a,e;case pm:return e=Wn(13,n,t,s),e.elementType=pm,e.lanes=a,e;case gm:return e=Wn(19,n,t,s),e.elementType=gm,e.lanes=a,e;case d2:return Jd(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case c2:i=10;break e;case u2:i=9;break e;case T0:i=11;break e;case M0:i=14;break e;case xs:i=16,r=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=Wn(i,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function Ia(e,t,n,r){return e=Wn(7,e,r,t),e.lanes=n,e}function Jd(e,t,n,r){return e=Wn(22,e,r,t),e.elementType=d2,e.lanes=n,e.stateNode={isHidden:!1},e}function pf(e,t,n){return e=Wn(6,e,null,t),e.lanes=n,e}function gf(e,t,n){return t=Wn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function V_(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yh(0),this.expirationTimes=Yh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ug(e,t,n,r,s,a,i,l,c){return e=new V_(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Wn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},K0(a),e}function U_(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function n5(e){if(!e)return Ks;e=e._reactInternals;e:{if(ei(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var n=e.type;if(yn(n))return nS(e,n,t)}return t}function r5(e,t,n,r,s,a,i,l,c){return e=ug(n,r,!0,e,s,a,i,l,c),e.context=n5(null),n=e.current,r=tn(),s=Vs(n),a=Qr(r,s),a.callback=t??null,zs(n,a,s),e.current.lanes=s,oc(e,s,r),vn(e,r),e}function Zd(e,t,n,r){var s=t.current,a=tn(),i=Vs(s);return n=n5(n),t.context===null?t.context=n:t.pendingContext=n,t=Qr(a,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=zs(s,t,i),e!==null&&(hr(e,s,i,a),ju(e,s,i)),i}function ud(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function dg(e,t){hx(e,t),(e=e.alternate)&&hx(e,t)}function W_(){return null}var s5=typeof reportError=="function"?reportError:function(e){console.error(e)};function hg(e){this._internalRoot=e}eh.prototype.render=hg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));Zd(e,t,null,null)};eh.prototype.unmount=hg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wa(function(){Zd(null,e,null,null)}),t[ts]=null}};function eh(e){this._internalRoot=e}eh.prototype.unstable_scheduleHydration=function(e){if(e){var t=O2();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ss.length&&t!==0&&t<Ss[n].priority;n++);Ss.splice(n,0,e),n===0&&$2(e)}};function fg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function th(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fx(){}function H_(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=ud(i);a.call(u)}}var i=r5(t,r,e,0,null,!1,!1,"",fx);return e._reactRootContainer=i,e[ts]=i.current,_l(e.nodeType===8?e.parentNode:e),Wa(),i}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=ud(c);l.call(u)}}var c=ug(e,0,!1,null,null,!1,!1,"",fx);return e._reactRootContainer=c,e[ts]=c.current,_l(e.nodeType===8?e.parentNode:e),Wa(function(){Zd(t,c,n,r)}),c}function nh(e,t,n,r,s){var a=n._reactRootContainer;if(a){var i=a;if(typeof s=="function"){var l=s;s=function(){var c=ud(i);l.call(c)}}Zd(t,i,e,s)}else i=H_(n,t,e,s,r);return ud(i)}A2=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Xo(t.pendingLanes);n!==0&&(R0(t,n|1),vn(t,ut()),!(Te&6)&&(fo=ut()+500,ra()))}break;case 13:Wa(function(){var r=ns(e,1);if(r!==null){var s=tn();hr(r,e,1,s)}}),dg(e,1)}};A0=function(e){if(e.tag===13){var t=ns(e,134217728);if(t!==null){var n=tn();hr(t,e,134217728,n)}dg(e,134217728)}};D2=function(e){if(e.tag===13){var t=Vs(e),n=ns(e,t);if(n!==null){var r=tn();hr(n,e,t,r)}dg(e,t)}};O2=function(){return Re};I2=function(e,t){var n=Re;try{return Re=e,t()}finally{Re=n}};Nm=function(e,t,n){switch(t){case"input":if(xm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Gd(r);if(!s)throw Error(K(90));f2(r),xm(r,s)}}}break;case"textarea":p2(e,n);break;case"select":t=n.value,t!=null&&Fi(e,!!n.multiple,t,!1)}};S2=ig;j2=Wa;var G_={usingClientEntryPoint:!1,Events:[cc,ki,Gd,b2,w2,ig]},zo={findFiberByHostInstance:ja,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K_={bundleType:zo.bundleType,version:zo.version,rendererPackageName:zo.rendererPackageName,rendererConfig:zo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=N2(e),e===null?null:e.stateNode},findFiberByHostInstance:zo.findFiberByHostInstance||W_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{Vd=Hc.inject(K_),Rr=Hc}catch{}}On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G_;On.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fg(t))throw Error(K(200));return U_(e,t,null,n)};On.createRoot=function(e,t){if(!fg(e))throw Error(K(299));var n=!1,r="",s=s5;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=ug(e,1,!1,null,null,n,!1,r,s),e[ts]=t.current,_l(e.nodeType===8?e.parentNode:e),new hg(t)};On.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=N2(t),e=e===null?null:e.stateNode,e};On.flushSync=function(e){return Wa(e)};On.hydrate=function(e,t,n){if(!th(t))throw Error(K(200));return nh(null,e,t,!0,n)};On.hydrateRoot=function(e,t,n){if(!fg(e))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",i=s5;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=r5(t,null,e,1,n??null,s,!1,a,i),e[ts]=t.current,_l(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new eh(t)};On.render=function(e,t,n){if(!th(t))throw Error(K(200));return nh(null,e,t,!1,n)};On.unmountComponentAtNode=function(e){if(!th(e))throw Error(K(40));return e._reactRootContainer?(Wa(function(){nh(null,null,e,!1,function(){e._reactRootContainer=null,e[ts]=null})}),!0):!1};On.unstable_batchedUpdates=ig;On.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!th(n))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return nh(e,t,n,!1,r)};On.version="18.3.1-next-f1338f8080-20240426";function a5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a5)}catch(e){console.error(e)}}a5(),a2.exports=On;var sa=a2.exports;const i5=K1(sa);var o5,mx=sa;o5=mx.createRoot,mx.hydrateRoot;const q_=1,Y_=1e6;let yf=0;function X_(){return yf=(yf+1)%Number.MAX_SAFE_INTEGER,yf.toString()}const vf=new Map,px=e=>{if(vf.has(e))return;const t=setTimeout(()=>{vf.delete(e),ml({type:"REMOVE_TOAST",toastId:e})},Y_);vf.set(e,t)},Q_=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,q_)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?px(n):e.toasts.forEach(r=>{px(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Pu=[];let _u={toasts:[]};function ml(e){_u=Q_(_u,e),Pu.forEach(t=>{t(_u)})}function lt({...e}){const t=X_(),n=s=>ml({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>ml({type:"DISMISS_TOAST",toastId:t});return ml({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function J_(){const[e,t]=p.useState(_u);return p.useEffect(()=>(Pu.push(t),()=>{const n=Pu.indexOf(t);n>-1&&Pu.splice(n,1)}),[e]),{...e,toast:lt,dismiss:n=>ml({type:"DISMISS_TOAST",toastId:n})}}function te(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function gx(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function l5(...e){return t=>{let n=!1;const r=e.map(s=>{const a=gx(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():gx(e[s],null)}}}}function je(...e){return p.useCallback(l5(...e),e)}function Z_(e,t){const n=p.createContext(t),r=a=>{const{children:i,...l}=a,c=p.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:i})};r.displayName=e+"Provider";function s(a){const i=p.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function xn(e,t=[]){let n=[];function r(a,i){const l=p.createContext(i),c=n.length;n=[...n,i];const u=h=>{var y;const{scope:f,children:m,...x}=h,g=((y=f==null?void 0:f[e])==null?void 0:y[c])||l,b=p.useMemo(()=>x,Object.values(x));return o.jsx(g.Provider,{value:b,children:m})};u.displayName=a+"Provider";function d(h,f){var g;const m=((g=f==null?void 0:f[e])==null?void 0:g[c])||l,x=p.useContext(m);if(x)return x;if(i!==void 0)return i;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[u,d]}const s=()=>{const a=n.map(i=>p.createContext(i));return function(l){const c=(l==null?void 0:l[e])||a;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,eR(s,...t)]}function eR(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(a)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function mo(e){const t=nR(e),n=p.forwardRef((r,s)=>{const{children:a,...i}=r,l=p.Children.toArray(a),c=l.find(sR);if(c){const u=c.props.children,d=l.map(h=>h===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:h);return o.jsx(t,{...i,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return o.jsx(t,{...i,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}var tR=mo("Slot");function nR(e){const t=p.forwardRef((n,r)=>{const{children:s,...a}=n;if(p.isValidElement(s)){const i=iR(s),l=aR(a,s.props);return s.type!==p.Fragment&&(l.ref=r?l5(r,i):i),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var c5=Symbol("radix.slottable");function rR(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=c5,t}function sR(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===c5}function aR(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function iR(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function rh(e){const t=e+"CollectionProvider",[n,r]=xn(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=g=>{const{scope:b,children:y}=g,w=G.useRef(null),v=G.useRef(new Map).current;return o.jsx(s,{scope:b,itemMap:v,collectionRef:w,children:y})};i.displayName=t;const l=e+"CollectionSlot",c=mo(l),u=G.forwardRef((g,b)=>{const{scope:y,children:w}=g,v=a(l,y),S=je(b,v.collectionRef);return o.jsx(c,{ref:S,children:w})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",f=mo(d),m=G.forwardRef((g,b)=>{const{scope:y,children:w,...v}=g,S=G.useRef(null),j=je(b,S),k=a(d,y);return G.useEffect(()=>(k.itemMap.set(S,{ref:S,...v}),()=>void k.itemMap.delete(S))),o.jsx(f,{[h]:"",ref:j,children:w})});m.displayName=d;function x(g){const b=a(e+"CollectionConsumer",g);return G.useCallback(()=>{const w=b.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((k,N)=>v.indexOf(k.ref.current)-v.indexOf(N.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:i,Slot:u,ItemSlot:m},x,r]}var oR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],se=oR.reduce((e,t)=>{const n=mo(`Primitive.${t}`),r=p.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function u5(e,t){e&&sa.flushSync(()=>e.dispatchEvent(t))}function wt(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function lR(e,t=globalThis==null?void 0:globalThis.document){const n=wt(e);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var cR="DismissableLayer",ap="dismissableLayer.update",uR="dismissableLayer.pointerDownOutside",dR="dismissableLayer.focusOutside",yx,d5=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),dc=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,u=p.useContext(d5),[d,h]=p.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),x=je(t,N=>h(N)),g=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),w=d?g.indexOf(d):-1,v=u.layersWithOutsidePointerEventsDisabled.size>0,S=w>=y,j=fR(N=>{const E=N.target,C=[...u.branches].some(T=>T.contains(E));!S||C||(s==null||s(N),i==null||i(N),N.defaultPrevented||l==null||l())},f),k=mR(N=>{const E=N.target;[...u.branches].some(T=>T.contains(E))||(a==null||a(N),i==null||i(N),N.defaultPrevented||l==null||l())},f);return lR(N=>{w===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},f),p.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(yx=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),vx(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=yx)}},[d,f,n,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),vx())},[d,u]),p.useEffect(()=>{const N=()=>m({});return document.addEventListener(ap,N),()=>document.removeEventListener(ap,N)},[]),o.jsx(se.div,{...c,ref:x,style:{pointerEvents:v?S?"auto":"none":void 0,...e.style},onFocusCapture:te(e.onFocusCapture,k.onFocusCapture),onBlurCapture:te(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:te(e.onPointerDownCapture,j.onPointerDownCapture)})});dc.displayName=cR;var hR="DismissableLayerBranch",h5=p.forwardRef((e,t)=>{const n=p.useContext(d5),r=p.useRef(null),s=je(t,r);return p.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(se.div,{...e,ref:s})});h5.displayName=hR;function fR(e,t=globalThis==null?void 0:globalThis.document){const n=wt(e),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){f5(uR,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function mR(e,t=globalThis==null?void 0:globalThis.document){const n=wt(e),r=p.useRef(!1);return p.useEffect(()=>{const s=a=>{a.target&&!r.current&&f5(dR,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function vx(){const e=new CustomEvent(ap);document.dispatchEvent(e)}function f5(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?u5(s,a):s.dispatchEvent(a)}var pR=dc,gR=h5,jt=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},yR="Portal",sh=p.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[s,a]=p.useState(!1);jt(()=>a(!0),[]);const i=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return i?i5.createPortal(o.jsx(se.div,{...r,ref:t}),i):null});sh.displayName=yR;function vR(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var $n=e=>{const{present:t,children:n}=e,r=xR(t),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),a=je(r.ref,bR(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:a}):null};$n.displayName="Presence";function xR(e){const[t,n]=p.useState(),r=p.useRef(null),s=p.useRef(e),a=p.useRef("none"),i=e?"mounted":"unmounted",[l,c]=vR(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Gc(r.current);a.current=l==="mounted"?u:"none"},[l]),jt(()=>{const u=r.current,d=s.current;if(d!==e){const f=a.current,m=Gc(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),jt(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=m=>{const g=Gc(r.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!s.current)){const b=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=b)})}},f=m=>{m.target===t&&(a.current=Gc(r.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Gc(e){return(e==null?void 0:e.animationName)||"none"}function bR(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var wR=j0[" useInsertionEffect ".trim().toString()]||jt;function pr({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,i]=SR({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const d=p.useRef(e!==void 0);p.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=p.useCallback(d=>{var h;if(l){const f=jR(d)?d(e):d;f!==e&&((h=i.current)==null||h.call(i,f))}else a(d)},[l,e,a,i]);return[c,u]}function SR({defaultProp:e,onChange:t}){const[n,r]=p.useState(e),s=p.useRef(n),a=p.useRef(t);return wR(()=>{a.current=t},[t]),p.useEffect(()=>{var i;s.current!==n&&((i=a.current)==null||i.call(a,n),s.current=n)},[n,s]),[n,r,a]}function jR(e){return typeof e=="function"}var m5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),kR="VisuallyHidden",ah=p.forwardRef((e,t)=>o.jsx(se.span,{...e,ref:t,style:{...m5,...e.style}}));ah.displayName=kR;var CR=ah,mg="ToastProvider",[pg,NR,ER]=rh("Toast"),[p5]=xn("Toast",[ER]),[TR,ih]=p5(mg),g5=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:i}=e,[l,c]=p.useState(null),[u,d]=p.useState(0),h=p.useRef(!1),f=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${mg}\`. Expected non-empty \`string\`.`),o.jsx(pg.Provider,{scope:t,children:o.jsx(TR,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>d(m=>m+1),[]),onToastRemove:p.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:i})})};g5.displayName=mg;var y5="ToastViewport",MR=["F8"],ip="toast.viewportPause",op="toast.viewportResume",v5=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=MR,label:s="Notifications ({hotkey})",...a}=e,i=ih(y5,n),l=NR(n),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),h=p.useRef(null),f=je(t,h,i.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=i.toastCount>0;p.useEffect(()=>{const b=y=>{var v;r.length!==0&&r.every(S=>y[S]||y.code===S)&&((v=h.current)==null||v.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),p.useEffect(()=>{const b=c.current,y=h.current;if(x&&b&&y){const w=()=>{if(!i.isClosePausedRef.current){const k=new CustomEvent(ip);y.dispatchEvent(k),i.isClosePausedRef.current=!0}},v=()=>{if(i.isClosePausedRef.current){const k=new CustomEvent(op);y.dispatchEvent(k),i.isClosePausedRef.current=!1}},S=k=>{!b.contains(k.relatedTarget)&&v()},j=()=>{b.contains(document.activeElement)||v()};return b.addEventListener("focusin",w),b.addEventListener("focusout",S),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",j),window.addEventListener("blur",w),window.addEventListener("focus",v),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",S),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",j),window.removeEventListener("blur",w),window.removeEventListener("focus",v)}}},[x,i.isClosePausedRef]);const g=p.useCallback(({tabbingDirection:b})=>{const w=l().map(v=>{const S=v.ref.current,j=[S,...VR(S)];return b==="forwards"?j:j.reverse()});return(b==="forwards"?w.reverse():w).flat()},[l]);return p.useEffect(()=>{const b=h.current;if(b){const y=w=>{var j,k,N;const v=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!v){const E=document.activeElement,C=w.shiftKey;if(w.target===b&&C){(j=u.current)==null||j.focus();return}const O=g({tabbingDirection:C?"backwards":"forwards"}),$=O.findIndex(R=>R===E);xf(O.slice($+1))?w.preventDefault():C?(k=u.current)==null||k.focus():(N=d.current)==null||N.focus()}};return b.addEventListener("keydown",y),()=>b.removeEventListener("keydown",y)}},[l,g]),o.jsxs(gR,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&o.jsx(lp,{ref:u,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});xf(b)}}),o.jsx(pg.Slot,{scope:n,children:o.jsx(se.ol,{tabIndex:-1,...a,ref:f})}),x&&o.jsx(lp,{ref:d,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});xf(b)}})]})});v5.displayName=y5;var x5="ToastFocusProxy",lp=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,a=ih(x5,n);return o.jsx(ah,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:i=>{var u;const l=i.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});lp.displayName=x5;var hc="Toast",PR="toast.swipeStart",_R="toast.swipeMove",RR="toast.swipeCancel",AR="toast.swipeEnd",b5=p.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...i}=e,[l,c]=pr({prop:r,defaultProp:s??!0,onChange:a,caller:hc});return o.jsx($n,{present:n||l,children:o.jsx(IR,{open:l,...i,ref:t,onClose:()=>c(!1),onPause:wt(e.onPause),onResume:wt(e.onResume),onSwipeStart:te(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:te(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:te(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:te(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});b5.displayName=hc;var[DR,OR]=p5(hc,{onClose(){}}),IR=p.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...x}=e,g=ih(hc,n),[b,y]=p.useState(null),w=je(t,R=>y(R)),v=p.useRef(null),S=p.useRef(null),j=s||g.duration,k=p.useRef(0),N=p.useRef(j),E=p.useRef(0),{onToastAdd:C,onToastRemove:T}=g,M=wt(()=>{var z;(b==null?void 0:b.contains(document.activeElement))&&((z=g.viewport)==null||z.focus()),i()}),O=p.useCallback(R=>{!R||R===1/0||(window.clearTimeout(E.current),k.current=new Date().getTime(),E.current=window.setTimeout(M,R))},[M]);p.useEffect(()=>{const R=g.viewport;if(R){const z=()=>{O(N.current),u==null||u()},D=()=>{const V=new Date().getTime()-k.current;N.current=N.current-V,window.clearTimeout(E.current),c==null||c()};return R.addEventListener(ip,D),R.addEventListener(op,z),()=>{R.removeEventListener(ip,D),R.removeEventListener(op,z)}}},[g.viewport,j,c,u,O]),p.useEffect(()=>{a&&!g.isClosePausedRef.current&&O(j)},[a,j,g.isClosePausedRef,O]),p.useEffect(()=>(C(),()=>T()),[C,T]);const $=p.useMemo(()=>b?E5(b):null,[b]);return g.viewport?o.jsxs(o.Fragment,{children:[$&&o.jsx($R,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),o.jsx(DR,{scope:n,onClose:M,children:sa.createPortal(o.jsx(pg.ItemSlot,{scope:n,children:o.jsx(pR,{asChild:!0,onEscapeKeyDown:te(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||M(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(se.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:te(e.onKeyDown,R=>{R.key==="Escape"&&(l==null||l(R.nativeEvent),R.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:te(e.onPointerDown,R=>{R.button===0&&(v.current={x:R.clientX,y:R.clientY})}),onPointerMove:te(e.onPointerMove,R=>{if(!v.current)return;const z=R.clientX-v.current.x,D=R.clientY-v.current.y,V=!!S.current,P=["left","right"].includes(g.swipeDirection),_=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,I=P?_(0,z):0,L=P?0:_(0,D),H=R.pointerType==="touch"?10:2,U={x:I,y:L},Z={originalEvent:R,delta:U};V?(S.current=U,Kc(_R,h,Z,{discrete:!1})):xx(U,g.swipeDirection,H)?(S.current=U,Kc(PR,d,Z,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs(z)>H||Math.abs(D)>H)&&(v.current=null)}),onPointerUp:te(e.onPointerUp,R=>{const z=S.current,D=R.target;if(D.hasPointerCapture(R.pointerId)&&D.releasePointerCapture(R.pointerId),S.current=null,v.current=null,z){const V=R.currentTarget,P={originalEvent:R,delta:z};xx(z,g.swipeDirection,g.swipeThreshold)?Kc(AR,m,P,{discrete:!0}):Kc(RR,f,P,{discrete:!0}),V.addEventListener("click",_=>_.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),$R=e=>{const{__scopeToast:t,children:n,...r}=e,s=ih(hc,t),[a,i]=p.useState(!1),[l,c]=p.useState(!1);return zR(()=>i(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(sh,{asChild:!0,children:o.jsx(ah,{...r,children:a&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},LR="ToastTitle",w5=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(se.div,{...r,ref:t})});w5.displayName=LR;var FR="ToastDescription",S5=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return o.jsx(se.div,{...r,ref:t})});S5.displayName=FR;var j5="ToastAction",k5=p.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?o.jsx(N5,{altText:n,asChild:!0,children:o.jsx(gg,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${j5}\`. Expected non-empty \`string\`.`),null)});k5.displayName=j5;var C5="ToastClose",gg=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=OR(C5,n);return o.jsx(N5,{asChild:!0,children:o.jsx(se.button,{type:"button",...r,ref:t,onClick:te(e.onClick,s.onClose)})})});gg.displayName=C5;var N5=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return o.jsx(se.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function E5(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),BR(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...E5(r))}}),t}function Kc(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?u5(s,a):s.dispatchEvent(a)}var xx=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),a=r>s;return t==="left"||t==="right"?a&&r>n:!a&&s>n};function zR(e=()=>{}){const t=wt(e);jt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function BR(e){return e.nodeType===e.ELEMENT_NODE}function VR(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function xf(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var UR=g5,T5=v5,M5=b5,P5=w5,_5=S5,R5=k5,A5=gg;function D5(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=D5(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function O5(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=D5(e))&&(r&&(r+=" "),r+=t);return r}const bx=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,wx=O5,fc=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return wx(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=t,i=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=a==null?void 0:a[u];if(d===null)return null;const f=bx(d)||bx(h);return s[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(x=>{let[g,b]=x;return Array.isArray(b)?b.includes({...a,...l}[g]):{...a,...l}[g]===b})?[...u,h,f]:u},[]);return wx(e,i,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),I5=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...l},c)=>p.createElement("svg",{ref:c,...HR,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:I5("lucide",s),...l},[...i.map(([u,d])=>p.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=(e,t)=>{const n=p.forwardRef(({className:r,...s},a)=>p.createElement(GR,{ref:a,iconNode:t,className:I5(`lucide-${WR(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=J("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=J("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=J("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=J("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=J("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=J("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=J("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=J("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=J("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=J("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=J("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=J("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=J("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=J("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=J("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=J("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=J("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=J("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=J("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=J("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=J("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=J("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bg=J("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=J("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=J("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=J("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=J("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=J("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=J("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=J("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=J("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=J("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=J("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=J("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=J("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=J("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=J("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=J("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=J("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=J("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=J("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=J("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=J("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=J("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=J("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=J("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gA=J("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=J("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=J("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Cg="-",vA=e=>{const t=bA(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const l=i.split(Cg);return l[0]===""&&l.length!==1&&l.shift(),K5(l,t)||xA(i)},getConflictingClassGroupIds:(i,l)=>{const c=n[i]||[];return l&&r[i]?[...c,...r[i]]:c}}},K5=(e,t)=>{var i;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?K5(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(Cg);return(i=t.validators.find(({validator:l})=>l(a)))==null?void 0:i.classGroupId},kx=/^\[(.+)\]$/,xA=e=>{if(kx.test(e)){const t=kx.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},bA=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return SA(Object.entries(e.classGroups),n).forEach(([a,i])=>{mp(i,r,a,t)}),r},mp=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:Cx(t,s);a.classGroupId=n;return}if(typeof s=="function"){if(wA(s)){mp(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,i])=>{mp(i,Cx(t,a),n,r)})})},Cx=(e,t)=>{let n=e;return t.split(Cg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},wA=e=>e.isThemeGetter,SA=(e,t)=>t?e.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([i,l])=>[t+i,l])):a);return[n,s]}):e,jA=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(a,i)=>{n.set(a,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let i=n.get(a);if(i!==void 0)return i;if((i=r.get(a))!==void 0)return s(a,i),i},set(a,i){n.has(a)?n.set(a,i):s(a,i)}}},q5="!",kA=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],a=t.length,i=l=>{const c=[];let u=0,d=0,h;for(let b=0;b<l.length;b++){let y=l[b];if(u===0){if(y===s&&(r||l.slice(b,b+a)===t)){c.push(l.slice(d,b)),d=b+a;continue}if(y==="/"){h=b;continue}}y==="["?u++:y==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(q5),x=m?f.substring(1):f,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:i}):i},CA=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},NA=e=>({cache:jA(e.cacheSize),parseClassName:kA(e),...vA(e)}),EA=/\s+/,TA=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,a=[],i=e.trim().split(EA);let l="";for(let c=i.length-1;c>=0;c-=1){const u=i[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(u);let x=!!m,g=r(x?f.substring(0,m):f);if(!g){if(!x){l=u+(l.length>0?" "+l:l);continue}if(g=r(f),!g){l=u+(l.length>0?" "+l:l);continue}x=!1}const b=CA(d).join(":"),y=h?b+q5:b,w=y+g;if(a.includes(w))continue;a.push(w);const v=s(g,x);for(let S=0;S<v.length;++S){const j=v[S];a.push(y+j)}l=u+(l.length>0?" "+l:l)}return l};function MA(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Y5(t))&&(r&&(r+=" "),r+=n);return r}const Y5=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Y5(e[r]))&&(n&&(n+=" "),n+=t);return n};function PA(e,...t){let n,r,s,a=i;function i(c){const u=t.reduce((d,h)=>h(d),e());return n=NA(u),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=TA(c,n);return s(c,d),d}return function(){return a(MA.apply(null,arguments))}}const ze=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},X5=/^\[(?:([a-z-]+):)?(.+)\]$/i,_A=/^\d+\/\d+$/,RA=new Set(["px","full","screen"]),AA=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,DA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,OA=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,IA=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$A=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ur=e=>Hi(e)||RA.has(e)||_A.test(e),fs=e=>Co(e,"length",HA),Hi=e=>!!e&&!Number.isNaN(Number(e)),wf=e=>Co(e,"number",Hi),Bo=e=>!!e&&Number.isInteger(Number(e)),LA=e=>e.endsWith("%")&&Hi(e.slice(0,-1)),be=e=>X5.test(e),ms=e=>AA.test(e),FA=new Set(["length","size","percentage"]),zA=e=>Co(e,FA,Q5),BA=e=>Co(e,"position",Q5),VA=new Set(["image","url"]),UA=e=>Co(e,VA,KA),WA=e=>Co(e,"",GA),Vo=()=>!0,Co=(e,t,n)=>{const r=X5.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},HA=e=>DA.test(e)&&!OA.test(e),Q5=()=>!1,GA=e=>IA.test(e),KA=e=>$A.test(e),qA=()=>{const e=ze("colors"),t=ze("spacing"),n=ze("blur"),r=ze("brightness"),s=ze("borderColor"),a=ze("borderRadius"),i=ze("borderSpacing"),l=ze("borderWidth"),c=ze("contrast"),u=ze("grayscale"),d=ze("hueRotate"),h=ze("invert"),f=ze("gap"),m=ze("gradientColorStops"),x=ze("gradientColorStopPositions"),g=ze("inset"),b=ze("margin"),y=ze("opacity"),w=ze("padding"),v=ze("saturate"),S=ze("scale"),j=ze("sepia"),k=ze("skew"),N=ze("space"),E=ze("translate"),C=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto",be,t],O=()=>[be,t],$=()=>["",Ur,fs],R=()=>["auto",Hi,be],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],D=()=>["solid","dashed","dotted","double","none"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],_=()=>["","0",be],I=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[Hi,be];return{cacheSize:500,separator:":",theme:{colors:[Vo],spacing:[Ur,fs],blur:["none","",ms,be],brightness:L(),borderColor:[e],borderRadius:["none","","full",ms,be],borderSpacing:O(),borderWidth:$(),contrast:L(),grayscale:_(),hueRotate:L(),invert:_(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[LA,fs],inset:M(),margin:M(),opacity:L(),padding:O(),saturate:L(),scale:L(),sepia:_(),skew:L(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",be]}],container:["container"],columns:[{columns:[ms]}],"break-after":[{"break-after":I()}],"break-before":[{"break-before":I()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),be]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bo,be]}],basis:[{basis:M()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",be]}],grow:[{grow:_()}],shrink:[{shrink:_()}],order:[{order:["first","last","none",Bo,be]}],"grid-cols":[{"grid-cols":[Vo]}],"col-start-end":[{col:["auto",{span:["full",Bo,be]},be]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[Vo]}],"row-start-end":[{row:["auto",{span:[Bo,be]},be]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",be]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",be,t]}],"min-w":[{"min-w":[be,t,"min","max","fit"]}],"max-w":[{"max-w":[be,t,"none","full","min","max","fit","prose",{screen:[ms]},ms]}],h:[{h:[be,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[be,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[be,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[be,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ms,fs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",wf]}],"font-family":[{font:[Vo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",be]}],"line-clamp":[{"line-clamp":["none",Hi,wf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ur,be]}],"list-image":[{"list-image":["none",be]}],"list-style-type":[{list:["none","disc","decimal",be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...D(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ur,fs]}],"underline-offset":[{"underline-offset":["auto",Ur,be]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),BA]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",zA]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},UA]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...D(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:D()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...D()]}],"outline-offset":[{"outline-offset":[Ur,be]}],"outline-w":[{outline:[Ur,fs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ur,fs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ms,WA]}],"shadow-color":[{shadow:[Vo]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...V(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ms,be]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",be]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",be]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Bo,be]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",be]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ur,fs,wf]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},YA=PA(qA);function Y(...e){return YA(O5(e))}const XA=UR,J5=p.forwardRef(({className:e,...t},n)=>o.jsx(T5,{ref:n,className:Y("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));J5.displayName=T5.displayName;const QA=fc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Z5=p.forwardRef(({className:e,variant:t,...n},r)=>o.jsx(M5,{ref:r,className:Y(QA({variant:t}),e),...n}));Z5.displayName=M5.displayName;const JA=p.forwardRef(({className:e,...t},n)=>o.jsx(R5,{ref:n,className:Y("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));JA.displayName=R5.displayName;const ej=p.forwardRef(({className:e,...t},n)=>o.jsx(A5,{ref:n,className:Y("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:o.jsx(aa,{className:"h-4 w-4"})}));ej.displayName=A5.displayName;const tj=p.forwardRef(({className:e,...t},n)=>o.jsx(P5,{ref:n,className:Y("text-sm font-semibold",e),...t}));tj.displayName=P5.displayName;const nj=p.forwardRef(({className:e,...t},n)=>o.jsx(_5,{ref:n,className:Y("text-sm opacity-90",e),...t}));nj.displayName=_5.displayName;function ZA(){const{toasts:e}=J_();return o.jsxs(XA,{children:[e.map(function({id:t,title:n,description:r,action:s,...a}){return o.jsxs(Z5,{...a,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(tj,{children:n}),r&&o.jsx(nj,{children:r})]}),s,o.jsx(ej,{})]},t)}),o.jsx(J5,{})]})}var Nx=["light","dark"],e3="(prefers-color-scheme: dark)",t3=p.createContext(void 0),n3={setTheme:e=>{},themes:[]},r3=()=>{var e;return(e=p.useContext(t3))!=null?e:n3};p.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:i,attrs:l,nonce:c})=>{let u=a==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=s?Nx.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(x,g=!1,b=!0)=>{let y=i?i[x]:x,w=g?x+"|| ''":`'${y}'`,v="";return s&&b&&!g&&Nx.includes(x)&&(v+=`d.style.colorScheme = '${x}';`),n==="class"?g||y?v+=`c.add(${w})`:v+="null":y&&(v+=`d[s](n,${w})`),v},m=e?`!function(){${d}${f(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${e3}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}${u?"":"else{"+f(a,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${f(i?"x[e]":"e",!0)}}else{${f(a,!1,!1)};}${h}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var s3=e=>{switch(e){case"success":return o3;case"info":return c3;case"warning":return l3;case"error":return u3;default:return null}},a3=Array(12).fill(0),i3=({visible:e,className:t})=>G.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},G.createElement("div",{className:"sonner-spinner"},a3.map((n,r)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),o3=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),l3=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),c3=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),u3=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),d3=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),h3=()=>{let[e,t]=G.useState(document.hidden);return G.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},pp=1,f3=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,s=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:pp++,a=this.toasts.find(l=>l.id===s),i=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(s)&&this.dismissedToasts.delete(s),a?this.toasts=this.toasts.map(l=>l.id===s?(this.publish({...l,...e,id:s,title:n}),{...l,...e,id:s,dismissible:i,title:n}):l):this.addToast({title:n,...r,dismissible:i,id:s}),s},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),s=n!==void 0,a,i=r.then(async c=>{if(a=["resolve",c],G.isValidElement(c))s=!1,this.create({id:n,type:"default",message:c});else if(p3(c)&&!c.ok){s=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){s=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(a=["reject",c],t.error!==void 0){s=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;s&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>i.then(()=>a[0]==="reject"?u(a[1]):c(a[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||pp++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},cn=new f3,m3=(e,t)=>{let n=(t==null?void 0:t.id)||pp++;return cn.addToast({title:e,...t,id:n}),n},p3=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",g3=m3,y3=()=>cn.toasts,v3=()=>cn.getActiveToasts(),dn=Object.assign(g3,{success:cn.success,info:cn.info,warning:cn.warning,error:cn.error,custom:cn.custom,message:cn.message,promise:cn.promise,dismiss:cn.dismiss,loading:cn.loading},{getHistory:y3,getToasts:v3});function x3(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}x3(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function qc(e){return e.label!==void 0}var b3=3,w3="32px",S3="16px",Ex=4e3,j3=356,k3=14,C3=20,N3=200;function Xn(...e){return e.filter(Boolean).join(" ")}function E3(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var T3=e=>{var t,n,r,s,a,i,l,c,u,d,h;let{invert:f,toast:m,unstyled:x,interacting:g,setHeights:b,visibleToasts:y,heights:w,index:v,toasts:S,expanded:j,removeToast:k,defaultRichColors:N,closeButton:E,style:C,cancelButtonStyle:T,actionButtonStyle:M,className:O="",descriptionClassName:$="",duration:R,position:z,gap:D,loadingIcon:V,expandByDefault:P,classNames:_,icons:I,closeButtonAriaLabel:L="Close toast",pauseWhenPageIsHidden:H}=e,[U,Z]=G.useState(null),[q,ne]=G.useState(null),[A,B]=G.useState(!1),[ae,he]=G.useState(!1),[fe,ve]=G.useState(!1),[me,ee]=G.useState(!1),[ge,Ne]=G.useState(!1),[yt,Ot]=G.useState(0),[Ln,bn]=G.useState(0),Ae=G.useRef(m.duration||R||Ex),kt=G.useRef(null),dt=G.useRef(null),an=v===0,wr=v+1<=y,ht=m.type,It=m.dismissible!==!1,Vr=m.className||"",si=m.descriptionClassName||"",W=G.useMemo(()=>w.findIndex(de=>de.toastId===m.id)||0,[w,m.id]),Se=G.useMemo(()=>{var de;return(de=m.closeButton)!=null?de:E},[m.closeButton,E]),X=G.useMemo(()=>m.duration||R||Ex,[m.duration,R]),ue=G.useRef(0),ye=G.useRef(0),Ce=G.useRef(0),Ee=G.useRef(null),[nt,We]=z.split("-"),ds=G.useMemo(()=>w.reduce((de,Pe,Oe)=>Oe>=W?de:de+Pe.height,0),[w,W]),rt=h3(),He=m.invert||f,De=ht==="loading";ye.current=G.useMemo(()=>W*D+ds,[W,ds]),G.useEffect(()=>{Ae.current=X},[X]),G.useEffect(()=>{B(!0)},[]),G.useEffect(()=>{let de=dt.current;if(de){let Pe=de.getBoundingClientRect().height;return bn(Pe),b(Oe=>[{toastId:m.id,height:Pe,position:m.position},...Oe]),()=>b(Oe=>Oe.filter($t=>$t.toastId!==m.id))}},[b,m.id]),G.useLayoutEffect(()=>{if(!A)return;let de=dt.current,Pe=de.style.height;de.style.height="auto";let Oe=de.getBoundingClientRect().height;de.style.height=Pe,bn(Oe),b($t=>$t.find(xe=>xe.toastId===m.id)?$t.map(xe=>xe.toastId===m.id?{...xe,height:Oe}:xe):[{toastId:m.id,height:Oe,position:m.position},...$t])},[A,m.title,m.description,b,m.id]);let wn=G.useCallback(()=>{he(!0),Ot(ye.current),b(de=>de.filter(Pe=>Pe.toastId!==m.id)),setTimeout(()=>{k(m)},N3)},[m,k,b,ye]);G.useEffect(()=>{if(m.promise&&ht==="loading"||m.duration===1/0||m.type==="loading")return;let de;return j||g||H&&rt?(()=>{if(Ce.current<ue.current){let Pe=new Date().getTime()-ue.current;Ae.current=Ae.current-Pe}Ce.current=new Date().getTime()})():Ae.current!==1/0&&(ue.current=new Date().getTime(),de=setTimeout(()=>{var Pe;(Pe=m.onAutoClose)==null||Pe.call(m,m),wn()},Ae.current)),()=>clearTimeout(de)},[j,g,m,ht,H,rt,wn]),G.useEffect(()=>{m.delete&&wn()},[wn,m.delete]);function ua(){var de,Pe,Oe;return I!=null&&I.loading?G.createElement("div",{className:Xn(_==null?void 0:_.loader,(de=m==null?void 0:m.classNames)==null?void 0:de.loader,"sonner-loader"),"data-visible":ht==="loading"},I.loading):V?G.createElement("div",{className:Xn(_==null?void 0:_.loader,(Pe=m==null?void 0:m.classNames)==null?void 0:Pe.loader,"sonner-loader"),"data-visible":ht==="loading"},V):G.createElement(i3,{className:Xn(_==null?void 0:_.loader,(Oe=m==null?void 0:m.classNames)==null?void 0:Oe.loader),visible:ht==="loading"})}return G.createElement("li",{tabIndex:0,ref:dt,className:Xn(O,Vr,_==null?void 0:_.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,_==null?void 0:_.default,_==null?void 0:_[ht],(n=m==null?void 0:m.classNames)==null?void 0:n[ht]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:N,"data-styled":!(m.jsx||m.unstyled||x),"data-mounted":A,"data-promise":!!m.promise,"data-swiped":ge,"data-removed":ae,"data-visible":wr,"data-y-position":nt,"data-x-position":We,"data-index":v,"data-front":an,"data-swiping":fe,"data-dismissible":It,"data-type":ht,"data-invert":He,"data-swipe-out":me,"data-swipe-direction":q,"data-expanded":!!(j||P&&A),style:{"--index":v,"--toasts-before":v,"--z-index":S.length-v,"--offset":`${ae?yt:ye.current}px`,"--initial-height":P?"auto":`${Ln}px`,...C,...m.style},onDragEnd:()=>{ve(!1),Z(null),Ee.current=null},onPointerDown:de=>{De||!It||(kt.current=new Date,Ot(ye.current),de.target.setPointerCapture(de.pointerId),de.target.tagName!=="BUTTON"&&(ve(!0),Ee.current={x:de.clientX,y:de.clientY}))},onPointerUp:()=>{var de,Pe,Oe,$t;if(me||!It)return;Ee.current=null;let xe=Number(((de=dt.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),on=Number(((Pe=dt.current)==null?void 0:Pe.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),qt=new Date().getTime()-((Oe=kt.current)==null?void 0:Oe.getTime()),ft=U==="x"?xe:on,Yt=Math.abs(ft)/qt;if(Math.abs(ft)>=C3||Yt>.11){Ot(ye.current),($t=m.onDismiss)==null||$t.call(m,m),ne(U==="x"?xe>0?"right":"left":on>0?"down":"up"),wn(),ee(!0),Ne(!1);return}ve(!1),Z(null)},onPointerMove:de=>{var Pe,Oe,$t,xe;if(!Ee.current||!It||((Pe=window.getSelection())==null?void 0:Pe.toString().length)>0)return;let on=de.clientY-Ee.current.y,qt=de.clientX-Ee.current.x,ft=(Oe=e.swipeDirections)!=null?Oe:E3(z);!U&&(Math.abs(qt)>1||Math.abs(on)>1)&&Z(Math.abs(qt)>Math.abs(on)?"x":"y");let Yt={x:0,y:0};U==="y"?(ft.includes("top")||ft.includes("bottom"))&&(ft.includes("top")&&on<0||ft.includes("bottom")&&on>0)&&(Yt.y=on):U==="x"&&(ft.includes("left")||ft.includes("right"))&&(ft.includes("left")&&qt<0||ft.includes("right")&&qt>0)&&(Yt.x=qt),(Math.abs(Yt.x)>0||Math.abs(Yt.y)>0)&&Ne(!0),($t=dt.current)==null||$t.style.setProperty("--swipe-amount-x",`${Yt.x}px`),(xe=dt.current)==null||xe.style.setProperty("--swipe-amount-y",`${Yt.y}px`)}},Se&&!m.jsx?G.createElement("button",{"aria-label":L,"data-disabled":De,"data-close-button":!0,onClick:De||!It?()=>{}:()=>{var de;wn(),(de=m.onDismiss)==null||de.call(m,m)},className:Xn(_==null?void 0:_.closeButton,(s=m==null?void 0:m.classNames)==null?void 0:s.closeButton)},(a=I==null?void 0:I.close)!=null?a:d3):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:G.createElement(G.Fragment,null,ht||m.icon||m.promise?G.createElement("div",{"data-icon":"",className:Xn(_==null?void 0:_.icon,(i=m==null?void 0:m.classNames)==null?void 0:i.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||ua():null,m.type!=="loading"?m.icon||(I==null?void 0:I[ht])||s3(ht):null):null,G.createElement("div",{"data-content":"",className:Xn(_==null?void 0:_.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},G.createElement("div",{"data-title":"",className:Xn(_==null?void 0:_.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?G.createElement("div",{"data-description":"",className:Xn($,si,_==null?void 0:_.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&qc(m.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||T,onClick:de=>{var Pe,Oe;qc(m.cancel)&&It&&((Oe=(Pe=m.cancel).onClick)==null||Oe.call(Pe,de),wn())},className:Xn(_==null?void 0:_.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&qc(m.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||M,onClick:de=>{var Pe,Oe;qc(m.action)&&((Oe=(Pe=m.action).onClick)==null||Oe.call(Pe,de),!de.defaultPrevented&&wn())},className:Xn(_==null?void 0:_.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function Tx(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function M3(e,t){let n={};return[e,t].forEach((r,s)=>{let a=s===1,i=a?"--mobile-offset":"--offset",l=a?S3:w3;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${i}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${i}-${u}`]=l:n[`${i}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var P3=p.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:i,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:x=b3,toastOptions:g,dir:b=Tx(),gap:y=k3,loadingIcon:w,icons:v,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:j}=e,[k,N]=G.useState([]),E=G.useMemo(()=>Array.from(new Set([r].concat(k.filter(H=>H.position).map(H=>H.position)))),[k,r]),[C,T]=G.useState([]),[M,O]=G.useState(!1),[$,R]=G.useState(!1),[z,D]=G.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),V=G.useRef(null),P=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=G.useRef(null),I=G.useRef(!1),L=G.useCallback(H=>{N(U=>{var Z;return(Z=U.find(q=>q.id===H.id))!=null&&Z.delete||cn.dismiss(H.id),U.filter(({id:q})=>q!==H.id)})},[]);return G.useEffect(()=>cn.subscribe(H=>{if(H.dismiss){N(U=>U.map(Z=>Z.id===H.id?{...Z,delete:!0}:Z));return}setTimeout(()=>{i5.flushSync(()=>{N(U=>{let Z=U.findIndex(q=>q.id===H.id);return Z!==-1?[...U.slice(0,Z),{...U[Z],...H},...U.slice(Z+1)]:[H,...U]})})})}),[]),G.useEffect(()=>{if(d!=="system"){D(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?D("dark"):D("light")),typeof window>"u")return;let H=window.matchMedia("(prefers-color-scheme: dark)");try{H.addEventListener("change",({matches:U})=>{D(U?"dark":"light")})}catch{H.addListener(({matches:Z})=>{try{D(Z?"dark":"light")}catch(q){console.error(q)}})}},[d]),G.useEffect(()=>{k.length<=1&&O(!1)},[k]),G.useEffect(()=>{let H=U=>{var Z,q;s.every(ne=>U[ne]||U.code===ne)&&(O(!0),(Z=V.current)==null||Z.focus()),U.code==="Escape"&&(document.activeElement===V.current||(q=V.current)!=null&&q.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[s]),G.useEffect(()=>{if(V.current)return()=>{_.current&&(_.current.focus({preventScroll:!0}),_.current=null,I.current=!1)}},[V.current]),G.createElement("section",{ref:t,"aria-label":`${S} ${P}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},E.map((H,U)=>{var Z;let[q,ne]=H.split("-");return k.length?G.createElement("ol",{key:H,dir:b==="auto"?Tx():b,tabIndex:-1,ref:V,className:l,"data-sonner-toaster":!0,"data-theme":z,"data-y-position":q,"data-lifted":M&&k.length>1&&!a,"data-x-position":ne,style:{"--front-toast-height":`${((Z=C[0])==null?void 0:Z.height)||0}px`,"--width":`${j3}px`,"--gap":`${y}px`,...m,...M3(c,u)},onBlur:A=>{I.current&&!A.currentTarget.contains(A.relatedTarget)&&(I.current=!1,_.current&&(_.current.focus({preventScroll:!0}),_.current=null))},onFocus:A=>{A.target instanceof HTMLElement&&A.target.dataset.dismissible==="false"||I.current||(I.current=!0,_.current=A.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{$||O(!1)},onDragEnd:()=>O(!1),onPointerDown:A=>{A.target instanceof HTMLElement&&A.target.dataset.dismissible==="false"||R(!0)},onPointerUp:()=>R(!1)},k.filter(A=>!A.position&&U===0||A.position===H).map((A,B)=>{var ae,he;return G.createElement(T3,{key:A.id,icons:v,index:B,toast:A,defaultRichColors:h,duration:(ae=g==null?void 0:g.duration)!=null?ae:f,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:x,closeButton:(he=g==null?void 0:g.closeButton)!=null?he:i,interacting:$,position:H,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:L,toasts:k.filter(fe=>fe.position==A.position),heights:C.filter(fe=>fe.position==A.position),setHeights:T,expandByDefault:a,gap:y,loadingIcon:w,expanded:M,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const _3=({...e})=>{const{theme:t="system"}=r3();return o.jsx(P3,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var R3=j0[" useId ".trim().toString()]||(()=>{}),A3=0;function Or(e){const[t,n]=p.useState(R3());return jt(()=>{n(r=>r??String(A3++))},[e]),t?`radix-${t}`:""}const D3=["top","right","bottom","left"],Ys=Math.min,Cn=Math.max,hd=Math.round,Yc=Math.floor,Ir=e=>({x:e,y:e}),O3={left:"right",right:"left",bottom:"top",top:"bottom"},I3={start:"end",end:"start"};function gp(e,t,n){return Cn(e,Ys(t,n))}function as(e,t){return typeof e=="function"?e(t):e}function is(e){return e.split("-")[0]}function No(e){return e.split("-")[1]}function Ng(e){return e==="x"?"y":"x"}function Eg(e){return e==="y"?"height":"width"}const $3=new Set(["top","bottom"]);function _r(e){return $3.has(is(e))?"y":"x"}function Tg(e){return Ng(_r(e))}function L3(e,t,n){n===void 0&&(n=!1);const r=No(e),s=Tg(e),a=Eg(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=fd(i)),[i,fd(i)]}function F3(e){const t=fd(e);return[yp(e),t,yp(t)]}function yp(e){return e.replace(/start|end/g,t=>I3[t])}const Mx=["left","right"],Px=["right","left"],z3=["top","bottom"],B3=["bottom","top"];function V3(e,t,n){switch(e){case"top":case"bottom":return n?t?Px:Mx:t?Mx:Px;case"left":case"right":return t?z3:B3;default:return[]}}function U3(e,t,n,r){const s=No(e);let a=V3(is(e),n==="start",r);return s&&(a=a.map(i=>i+"-"+s),t&&(a=a.concat(a.map(yp)))),a}function fd(e){return e.replace(/left|right|bottom|top/g,t=>O3[t])}function W3(e){return{top:0,right:0,bottom:0,left:0,...e}}function rj(e){return typeof e!="number"?W3(e):{top:e,right:e,bottom:e,left:e}}function md(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function _x(e,t,n){let{reference:r,floating:s}=e;const a=_r(t),i=Tg(t),l=Eg(i),c=is(t),u=a==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,f=r[l]/2-s[l]/2;let m;switch(c){case"top":m={x:d,y:r.y-s.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(No(t)){case"start":m[i]-=f*(n&&u?-1:1);break;case"end":m[i]+=f*(n&&u?-1:1);break}return m}const H3=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:i}=n,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=_x(u,r,c),f=r,m={},x=0;for(let g=0;g<l.length;g++){const{name:b,fn:y}=l[g],{x:w,y:v,data:S,reset:j}=await y({x:d,y:h,initialPlacement:r,placement:f,strategy:s,middlewareData:m,rects:u,platform:i,elements:{reference:e,floating:t}});d=w??d,h=v??h,m={...m,[b]:{...m[b],...S}},j&&x<=50&&(x++,typeof j=="object"&&(j.placement&&(f=j.placement),j.rects&&(u=j.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):j.rects),{x:d,y:h}=_x(u,f,c)),g=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:m}};async function zl(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=as(t,e),x=rj(m),b=l[f?h==="floating"?"reference":"floating":h],y=md(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),w=h==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,v=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),S=await(a.isElement==null?void 0:a.isElement(v))?await(a.getScale==null?void 0:a.getScale(v))||{x:1,y:1}:{x:1,y:1},j=md(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:v,strategy:c}):w);return{top:(y.top-j.top+x.top)/S.y,bottom:(j.bottom-y.bottom+x.bottom)/S.y,left:(y.left-j.left+x.left)/S.x,right:(j.right-y.right+x.right)/S.x}}const G3=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=as(e,t)||{};if(u==null)return{};const h=rj(d),f={x:n,y:r},m=Tg(s),x=Eg(m),g=await i.getDimensions(u),b=m==="y",y=b?"top":"left",w=b?"bottom":"right",v=b?"clientHeight":"clientWidth",S=a.reference[x]+a.reference[m]-f[m]-a.floating[x],j=f[m]-a.reference[m],k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let N=k?k[v]:0;(!N||!await(i.isElement==null?void 0:i.isElement(k)))&&(N=l.floating[v]||a.floating[x]);const E=S/2-j/2,C=N/2-g[x]/2-1,T=Ys(h[y],C),M=Ys(h[w],C),O=T,$=N-g[x]-M,R=N/2-g[x]/2+E,z=gp(O,R,$),D=!c.arrow&&No(s)!=null&&R!==z&&a.reference[x]/2-(R<O?T:M)-g[x]/2<0,V=D?R<O?R-O:R-$:0;return{[m]:f[m]+V,data:{[m]:z,centerOffset:R-z-V,...D&&{alignmentOffset:V}},reset:D}}}),K3=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...b}=as(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const y=is(s),w=_r(l),v=is(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=f||(v||!g?[fd(l)]:F3(l)),k=x!=="none";!f&&k&&j.push(...U3(l,g,x,S));const N=[l,...j],E=await zl(t,b),C=[];let T=((r=a.flip)==null?void 0:r.overflows)||[];if(d&&C.push(E[y]),h){const R=L3(s,i,S);C.push(E[R[0]],E[R[1]])}if(T=[...T,{placement:s,overflows:C}],!C.every(R=>R<=0)){var M,O;const R=(((M=a.flip)==null?void 0:M.index)||0)+1,z=N[R];if(z&&(!(h==="alignment"?w!==_r(z):!1)||T.every(P=>P.overflows[0]>0&&_r(P.placement)===w)))return{data:{index:R,overflows:T},reset:{placement:z}};let D=(O=T.filter(V=>V.overflows[0]<=0).sort((V,P)=>V.overflows[1]-P.overflows[1])[0])==null?void 0:O.placement;if(!D)switch(m){case"bestFit":{var $;const V=($=T.filter(P=>{if(k){const _=_r(P.placement);return _===w||_==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(_=>_>0).reduce((_,I)=>_+I,0)]).sort((P,_)=>P[1]-_[1])[0])==null?void 0:$[0];V&&(D=V);break}case"initialPlacement":D=l;break}if(s!==D)return{reset:{placement:D}}}return{}}}};function Rx(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ax(e){return D3.some(t=>e[t]>=0)}const q3=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=as(e,t);switch(r){case"referenceHidden":{const a=await zl(t,{...s,elementContext:"reference"}),i=Rx(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Ax(i)}}}case"escaped":{const a=await zl(t,{...s,altBoundary:!0}),i=Rx(a,n.floating);return{data:{escapedOffsets:i,escaped:Ax(i)}}}default:return{}}}}},sj=new Set(["left","top"]);async function Y3(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=is(n),l=No(n),c=_r(n)==="y",u=sj.has(i)?-1:1,d=a&&c?-1:1,h=as(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof x=="number"&&(m=l==="end"?x*-1:x),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const X3=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:i,middlewareData:l}=t,c=await Y3(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},Q3=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:b=>{let{x:y,y:w}=b;return{x:y,y:w}}},...c}=as(e,t),u={x:n,y:r},d=await zl(t,c),h=_r(is(s)),f=Ng(h);let m=u[f],x=u[h];if(a){const b=f==="y"?"top":"left",y=f==="y"?"bottom":"right",w=m+d[b],v=m-d[y];m=gp(w,m,v)}if(i){const b=h==="y"?"top":"left",y=h==="y"?"bottom":"right",w=x+d[b],v=x-d[y];x=gp(w,x,v)}const g=l.fn({...t,[f]:m,[h]:x});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:a,[h]:i}}}}}},J3=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=as(e,t),d={x:n,y:r},h=_r(s),f=Ng(h);let m=d[f],x=d[h];const g=as(l,t),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const v=f==="y"?"height":"width",S=a.reference[f]-a.floating[v]+b.mainAxis,j=a.reference[f]+a.reference[v]-b.mainAxis;m<S?m=S:m>j&&(m=j)}if(u){var y,w;const v=f==="y"?"width":"height",S=sj.has(is(s)),j=a.reference[h]-a.floating[v]+(S&&((y=i.offset)==null?void 0:y[h])||0)+(S?0:b.crossAxis),k=a.reference[h]+a.reference[v]+(S?0:((w=i.offset)==null?void 0:w[h])||0)-(S?b.crossAxis:0);x<j?x=j:x>k&&(x=k)}return{[f]:m,[h]:x}}}},Z3=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...u}=as(e,t),d=await zl(t,u),h=is(s),f=No(s),m=_r(s)==="y",{width:x,height:g}=a.floating;let b,y;h==="top"||h==="bottom"?(b=h,y=f===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(y=h,b=f==="end"?"top":"bottom");const w=g-d.top-d.bottom,v=x-d.left-d.right,S=Ys(g-d[b],w),j=Ys(x-d[y],v),k=!t.middlewareData.shift;let N=S,E=j;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(E=v),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(N=w),k&&!f){const T=Cn(d.left,0),M=Cn(d.right,0),O=Cn(d.top,0),$=Cn(d.bottom,0);m?E=x-2*(T!==0||M!==0?T+M:Cn(d.left,d.right)):N=g-2*(O!==0||$!==0?O+$:Cn(d.top,d.bottom))}await c({...t,availableWidth:E,availableHeight:N});const C=await i.getDimensions(l.floating);return x!==C.width||g!==C.height?{reset:{rects:!0}}:{}}}};function lh(){return typeof window<"u"}function Eo(e){return aj(e)?(e.nodeName||"").toLowerCase():"#document"}function _n(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function zr(e){var t;return(t=(aj(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function aj(e){return lh()?e instanceof Node||e instanceof _n(e).Node:!1}function yr(e){return lh()?e instanceof Element||e instanceof _n(e).Element:!1}function Fr(e){return lh()?e instanceof HTMLElement||e instanceof _n(e).HTMLElement:!1}function Dx(e){return!lh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof _n(e).ShadowRoot}const e4=new Set(["inline","contents"]);function pc(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=vr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!e4.has(s)}const t4=new Set(["table","td","th"]);function n4(e){return t4.has(Eo(e))}const r4=[":popover-open",":modal"];function ch(e){return r4.some(t=>{try{return e.matches(t)}catch{return!1}})}const s4=["transform","translate","scale","rotate","perspective"],a4=["transform","translate","scale","rotate","perspective","filter"],i4=["paint","layout","strict","content"];function Mg(e){const t=Pg(),n=yr(e)?vr(e):e;return s4.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||a4.some(r=>(n.willChange||"").includes(r))||i4.some(r=>(n.contain||"").includes(r))}function o4(e){let t=Xs(e);for(;Fr(t)&&!po(t);){if(Mg(t))return t;if(ch(t))return null;t=Xs(t)}return null}function Pg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const l4=new Set(["html","body","#document"]);function po(e){return l4.has(Eo(e))}function vr(e){return _n(e).getComputedStyle(e)}function uh(e){return yr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Xs(e){if(Eo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Dx(e)&&e.host||zr(e);return Dx(t)?t.host:t}function ij(e){const t=Xs(e);return po(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fr(t)&&pc(t)?t:ij(t)}function Bl(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=ij(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),i=_n(s);if(a){const l=vp(i);return t.concat(i,i.visualViewport||[],pc(s)?s:[],l&&n?Bl(l):[])}return t.concat(s,Bl(s,[],n))}function vp(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function oj(e){const t=vr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=Fr(e),a=s?e.offsetWidth:n,i=s?e.offsetHeight:r,l=hd(n)!==a||hd(r)!==i;return l&&(n=a,r=i),{width:n,height:r,$:l}}function _g(e){return yr(e)?e:e.contextElement}function Gi(e){const t=_g(e);if(!Fr(t))return Ir(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=oj(t);let i=(a?hd(n.width):n.width)/r,l=(a?hd(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const c4=Ir(0);function lj(e){const t=_n(e);return!Pg()||!t.visualViewport?c4:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function u4(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==_n(e)?!1:t}function Ka(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=_g(e);let i=Ir(1);t&&(r?yr(r)&&(i=Gi(r)):i=Gi(e));const l=u4(a,n,r)?lj(a):Ir(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,d=s.width/i.x,h=s.height/i.y;if(a){const f=_n(a),m=r&&yr(r)?_n(r):r;let x=f,g=vp(x);for(;g&&r&&m!==x;){const b=Gi(g),y=g.getBoundingClientRect(),w=vr(g),v=y.left+(g.clientLeft+parseFloat(w.paddingLeft))*b.x,S=y.top+(g.clientTop+parseFloat(w.paddingTop))*b.y;c*=b.x,u*=b.y,d*=b.x,h*=b.y,c+=v,u+=S,x=_n(g),g=vp(x)}}return md({width:d,height:h,x:c,y:u})}function Rg(e,t){const n=uh(e).scrollLeft;return t?t.left+n:Ka(zr(e)).left+n}function cj(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:Rg(e,r)),a=r.top+t.scrollTop;return{x:s,y:a}}function d4(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",i=zr(r),l=t?ch(t.floating):!1;if(r===i||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=Ir(1);const d=Ir(0),h=Fr(r);if((h||!h&&!a)&&((Eo(r)!=="body"||pc(i))&&(c=uh(r)),Fr(r))){const m=Ka(r);u=Gi(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=i&&!h&&!a?cj(i,c,!0):Ir(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function h4(e){return Array.from(e.getClientRects())}function f4(e){const t=zr(e),n=uh(e),r=e.ownerDocument.body,s=Cn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Cn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Rg(e);const l=-n.scrollTop;return vr(r).direction==="rtl"&&(i+=Cn(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:i,y:l}}function m4(e,t){const n=_n(e),r=zr(e),s=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;const u=Pg();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:i,x:l,y:c}}const p4=new Set(["absolute","fixed"]);function g4(e,t){const n=Ka(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=Fr(e)?Gi(e):Ir(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:i,height:l,x:c,y:u}}function Ox(e,t,n){let r;if(t==="viewport")r=m4(e,n);else if(t==="document")r=f4(zr(e));else if(yr(t))r=g4(t,n);else{const s=lj(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return md(r)}function uj(e,t){const n=Xs(e);return n===t||!yr(n)||po(n)?!1:vr(n).position==="fixed"||uj(n,t)}function y4(e,t){const n=t.get(e);if(n)return n;let r=Bl(e,[],!1).filter(l=>yr(l)&&Eo(l)!=="body"),s=null;const a=vr(e).position==="fixed";let i=a?Xs(e):e;for(;yr(i)&&!po(i);){const l=vr(i),c=Mg(i);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&p4.has(s.position)||pc(i)&&!c&&uj(e,i))?r=r.filter(d=>d!==i):s=l,i=Xs(i)}return t.set(e,r),r}function v4(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?ch(t)?[]:y4(t,this._c):[].concat(n),r],l=i[0],c=i.reduce((u,d)=>{const h=Ox(t,d,s);return u.top=Cn(h.top,u.top),u.right=Ys(h.right,u.right),u.bottom=Ys(h.bottom,u.bottom),u.left=Cn(h.left,u.left),u},Ox(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function x4(e){const{width:t,height:n}=oj(e);return{width:t,height:n}}function b4(e,t,n){const r=Fr(t),s=zr(t),a=n==="fixed",i=Ka(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Ir(0);function u(){c.x=Rg(s)}if(r||!r&&!a)if((Eo(t)!=="body"||pc(s))&&(l=uh(t)),r){const m=Ka(t,!0,a,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else s&&u();a&&!r&&s&&u();const d=s&&!r&&!a?cj(s,l):Ir(0),h=i.left+l.scrollLeft-c.x-d.x,f=i.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:i.width,height:i.height}}function Sf(e){return vr(e).position==="static"}function Ix(e,t){if(!Fr(e)||vr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return zr(e)===n&&(n=n.ownerDocument.body),n}function dj(e,t){const n=_n(e);if(ch(e))return n;if(!Fr(e)){let s=Xs(e);for(;s&&!po(s);){if(yr(s)&&!Sf(s))return s;s=Xs(s)}return n}let r=Ix(e,t);for(;r&&n4(r)&&Sf(r);)r=Ix(r,t);return r&&po(r)&&Sf(r)&&!Mg(r)?n:r||o4(e)||n}const w4=async function(e){const t=this.getOffsetParent||dj,n=this.getDimensions,r=await n(e.floating);return{reference:b4(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function S4(e){return vr(e).direction==="rtl"}const j4={convertOffsetParentRelativeRectToViewportRelativeRect:d4,getDocumentElement:zr,getClippingRect:v4,getOffsetParent:dj,getElementRects:w4,getClientRects:h4,getDimensions:x4,getScale:Gi,isElement:yr,isRTL:S4};function hj(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function k4(e,t){let n=null,r;const s=zr(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||t(),!f||!m)return;const x=Yc(h),g=Yc(s.clientWidth-(d+f)),b=Yc(s.clientHeight-(h+m)),y=Yc(d),v={rootMargin:-x+"px "+-g+"px "+-b+"px "+-y+"px",threshold:Cn(0,Ys(1,c))||1};let S=!0;function j(k){const N=k[0].intersectionRatio;if(N!==c){if(!S)return i();N?i(!1,N):r=setTimeout(()=>{i(!1,1e-7)},1e3)}N===1&&!hj(u,e.getBoundingClientRect())&&i(),S=!1}try{n=new IntersectionObserver(j,{...v,root:s.ownerDocument})}catch{n=new IntersectionObserver(j,v)}n.observe(e)}return i(!0),a}function C4(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=_g(e),d=s||a?[...u?Bl(u):[],...Bl(t)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),a&&y.addEventListener("resize",n)});const h=u&&l?k4(u,n):null;let f=-1,m=null;i&&(m=new ResizeObserver(y=>{let[w]=y;w&&w.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=m)==null||v.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let x,g=c?Ka(e):null;c&&b();function b(){const y=Ka(e);g&&!hj(g,y)&&n(),g=y,x=requestAnimationFrame(b)}return n(),()=>{var y;d.forEach(w=>{s&&w.removeEventListener("scroll",n),a&&w.removeEventListener("resize",n)}),h==null||h(),(y=m)==null||y.disconnect(),m=null,c&&cancelAnimationFrame(x)}}const N4=X3,E4=Q3,T4=K3,M4=Z3,P4=q3,$x=G3,_4=J3,R4=(e,t,n)=>{const r=new Map,s={platform:j4,...n},a={...s.platform,_c:r};return H3(e,t,{...s,platform:a})};var A4=typeof document<"u",D4=function(){},Ru=A4?p.useLayoutEffect:D4;function pd(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!pd(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!pd(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function fj(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Lx(e,t){const n=fj(e);return Math.round(t*n)/n}function jf(e){const t=p.useRef(e);return Ru(()=>{t.current=e}),t}function O4(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=p.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=p.useState(r);pd(f,r)||m(r);const[x,g]=p.useState(null),[b,y]=p.useState(null),w=p.useCallback(P=>{P!==k.current&&(k.current=P,g(P))},[]),v=p.useCallback(P=>{P!==N.current&&(N.current=P,y(P))},[]),S=a||x,j=i||b,k=p.useRef(null),N=p.useRef(null),E=p.useRef(d),C=c!=null,T=jf(c),M=jf(s),O=jf(u),$=p.useCallback(()=>{if(!k.current||!N.current)return;const P={placement:t,strategy:n,middleware:f};M.current&&(P.platform=M.current),R4(k.current,N.current,P).then(_=>{const I={..._,isPositioned:O.current!==!1};R.current&&!pd(E.current,I)&&(E.current=I,sa.flushSync(()=>{h(I)}))})},[f,t,n,M,O]);Ru(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,h(P=>({...P,isPositioned:!1})))},[u]);const R=p.useRef(!1);Ru(()=>(R.current=!0,()=>{R.current=!1}),[]),Ru(()=>{if(S&&(k.current=S),j&&(N.current=j),S&&j){if(T.current)return T.current(S,j,$);$()}},[S,j,$,T,C]);const z=p.useMemo(()=>({reference:k,floating:N,setReference:w,setFloating:v}),[w,v]),D=p.useMemo(()=>({reference:S,floating:j}),[S,j]),V=p.useMemo(()=>{const P={position:n,left:0,top:0};if(!D.floating)return P;const _=Lx(D.floating,d.x),I=Lx(D.floating,d.y);return l?{...P,transform:"translate("+_+"px, "+I+"px)",...fj(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:_,top:I}},[n,l,D.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:$,refs:z,elements:D,floatingStyles:V}),[d,$,z,D,V])}const I4=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?$x({element:r.current,padding:s}).fn(n):{}:r?$x({element:r,padding:s}).fn(n):{}}}},$4=(e,t)=>({...N4(e),options:[e,t]}),L4=(e,t)=>({...E4(e),options:[e,t]}),F4=(e,t)=>({..._4(e),options:[e,t]}),z4=(e,t)=>({...T4(e),options:[e,t]}),B4=(e,t)=>({...M4(e),options:[e,t]}),V4=(e,t)=>({...P4(e),options:[e,t]}),U4=(e,t)=>({...I4(e),options:[e,t]});var W4="Arrow",mj=p.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return o.jsx(se.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});mj.displayName=W4;var H4=mj;function Ag(e){const[t,n]=p.useState(void 0);return jt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Dg="Popper",[pj,dh]=xn(Dg),[G4,gj]=pj(Dg),yj=e=>{const{__scopePopper:t,children:n}=e,[r,s]=p.useState(null);return o.jsx(G4,{scope:t,anchor:r,onAnchorChange:s,children:n})};yj.displayName=Dg;var vj="PopperAnchor",xj=p.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=gj(vj,n),i=p.useRef(null),l=je(t,i);return p.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||i.current)}),r?null:o.jsx(se.div,{...s,ref:l})});xj.displayName=vj;var Og="PopperContent",[K4,q4]=pj(Og),bj=p.forwardRef((e,t)=>{var A,B,ae,he,fe,ve;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:x,...g}=e,b=gj(Og,n),[y,w]=p.useState(null),v=je(t,me=>w(me)),[S,j]=p.useState(null),k=Ag(S),N=(k==null?void 0:k.width)??0,E=(k==null?void 0:k.height)??0,C=r+(a!=="center"?"-"+a:""),T=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},M=Array.isArray(u)?u:[u],O=M.length>0,$={padding:T,boundary:M.filter(X4),altBoundary:O},{refs:R,floatingStyles:z,placement:D,isPositioned:V,middlewareData:P}=O4({strategy:"fixed",placement:C,whileElementsMounted:(...me)=>C4(...me,{animationFrame:m==="always"}),elements:{reference:b.anchor},middleware:[$4({mainAxis:s+E,alignmentAxis:i}),c&&L4({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?F4():void 0,...$}),c&&z4({...$}),B4({...$,apply:({elements:me,rects:ee,availableWidth:ge,availableHeight:Ne})=>{const{width:yt,height:Ot}=ee.reference,Ln=me.floating.style;Ln.setProperty("--radix-popper-available-width",`${ge}px`),Ln.setProperty("--radix-popper-available-height",`${Ne}px`),Ln.setProperty("--radix-popper-anchor-width",`${yt}px`),Ln.setProperty("--radix-popper-anchor-height",`${Ot}px`)}}),S&&U4({element:S,padding:l}),Q4({arrowWidth:N,arrowHeight:E}),f&&V4({strategy:"referenceHidden",...$})]}),[_,I]=jj(D),L=wt(x);jt(()=>{V&&(L==null||L())},[V,L]);const H=(A=P.arrow)==null?void 0:A.x,U=(B=P.arrow)==null?void 0:B.y,Z=((ae=P.arrow)==null?void 0:ae.centerOffset)!==0,[q,ne]=p.useState();return jt(()=>{y&&ne(window.getComputedStyle(y).zIndex)},[y]),o.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:V?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:q,"--radix-popper-transform-origin":[(he=P.transformOrigin)==null?void 0:he.x,(fe=P.transformOrigin)==null?void 0:fe.y].join(" "),...((ve=P.hide)==null?void 0:ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(K4,{scope:n,placedSide:_,onArrowChange:j,arrowX:H,arrowY:U,shouldHideArrow:Z,children:o.jsx(se.div,{"data-side":_,"data-align":I,...g,ref:v,style:{...g.style,animation:V?void 0:"none"}})})})});bj.displayName=Og;var wj="PopperArrow",Y4={top:"bottom",right:"left",bottom:"top",left:"right"},Sj=p.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=q4(wj,r),i=Y4[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(H4,{...s,ref:n,style:{...s.style,display:"block"}})})});Sj.displayName=wj;function X4(e){return e!==null}var Q4=e=>({name:"transformOrigin",options:e,fn(t){var b,y,w;const{placement:n,rects:r,middlewareData:s}=t,i=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,d]=jj(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((y=s.arrow)==null?void 0:y.x)??0)+l/2,m=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let x="",g="";return u==="bottom"?(x=i?h:`${f}px`,g=`${-c}px`):u==="top"?(x=i?h:`${f}px`,g=`${r.floating.height+c}px`):u==="right"?(x=`${-c}px`,g=i?h:`${m}px`):u==="left"&&(x=`${r.floating.width+c}px`,g=i?h:`${m}px`),{data:{x,y:g}}}});function jj(e){const[t,n="center"]=e.split("-");return[t,n]}var J4=yj,kj=xj,Cj=bj,Nj=Sj,[hh]=xn("Tooltip",[dh]),Ig=dh(),Ej="TooltipProvider",Z4=700,Fx="tooltip.open",[eD,Tj]=hh(Ej),Mj=e=>{const{__scopeTooltip:t,delayDuration:n=Z4,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,i=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(eD,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};Mj.displayName=Ej;var Pj="Tooltip",[Hq,fh]=hh(Pj),xp="TooltipTrigger",tD=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=fh(xp,n),a=Tj(xp,n),i=Ig(n),l=p.useRef(null),c=je(t,l,s.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),h=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),o.jsx(kj,{asChild:!0,...i,children:o.jsx(se.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:te(e.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:te(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:te(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:te(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:te(e.onBlur,s.onClose),onClick:te(e.onClick,s.onClose)})})});tD.displayName=xp;var nD="TooltipPortal",[Gq,rD]=hh(nD,{forceMount:void 0}),go="TooltipContent",_j=p.forwardRef((e,t)=>{const n=rD(go,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,i=fh(go,e.__scopeTooltip);return o.jsx($n,{present:r||i.open,children:i.disableHoverableContent?o.jsx(Rj,{side:s,...a,ref:t}):o.jsx(sD,{side:s,...a,ref:t})})}),sD=p.forwardRef((e,t)=>{const n=fh(go,e.__scopeTooltip),r=Tj(go,e.__scopeTooltip),s=p.useRef(null),a=je(t,s),[i,l]=p.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,f=p.useCallback(()=>{l(null),h(!1)},[h]),m=p.useCallback((x,g)=>{const b=x.currentTarget,y={x:x.clientX,y:x.clientY},w=cD(y,b.getBoundingClientRect()),v=uD(y,w),S=dD(g.getBoundingClientRect()),j=fD([...v,...S]);l(j),h(!0)},[h]);return p.useEffect(()=>()=>f(),[f]),p.useEffect(()=>{if(c&&d){const x=b=>m(b,d),g=b=>m(b,c);return c.addEventListener("pointerleave",x),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),d.removeEventListener("pointerleave",g)}}},[c,d,m,f]),p.useEffect(()=>{if(i){const x=g=>{const b=g.target,y={x:g.clientX,y:g.clientY},w=(c==null?void 0:c.contains(b))||(d==null?void 0:d.contains(b)),v=!hD(y,i);w?f():v&&(f(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,d,i,u,f]),o.jsx(Rj,{...e,ref:a})}),[aD,iD]=hh(Pj,{isInside:!1}),oD=rR("TooltipContent"),Rj=p.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=e,c=fh(go,n),u=Ig(n),{onClose:d}=c;return p.useEffect(()=>(document.addEventListener(Fx,d),()=>document.removeEventListener(Fx,d)),[d]),p.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),o.jsx(dc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:o.jsxs(Cj,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(oD,{children:r}),o.jsx(aD,{scope:n,isInside:!0,children:o.jsx(CR,{id:c.contentId,role:"tooltip",children:s||r})})]})})});_j.displayName=go;var Aj="TooltipArrow",lD=p.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Ig(n);return iD(Aj,n).isInside?null:o.jsx(Nj,{...s,...r,ref:t})});lD.displayName=Aj;function cD(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function uD(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function dD(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function hD(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(s=!s)}return s}function fD(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),mD(t)}function mD(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var pD=Mj,Dj=_j;const gD=pD,yD=p.forwardRef(({className:e,sideOffset:t=4,...n},r)=>o.jsx(Dj,{ref:r,sideOffset:t,className:Y("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));yD.displayName=Dj.displayName;var mh=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ph=typeof window>"u"||"Deno"in globalThis;function rr(){}function vD(e,t){return typeof e=="function"?e(t):e}function xD(e){return typeof e=="number"&&e>=0&&e!==1/0}function bD(e,t){return Math.max(e+(t||0)-Date.now(),0)}function bp(e,t){return typeof e=="function"?e(t):e}function wD(e,t){return typeof e=="function"?e(t):e}function zx(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:i,stale:l}=e;if(i){if(r){if(t.queryHash!==$g(i,t.options))return!1}else if(!Ul(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function Bx(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Vl(t.options.mutationKey)!==Vl(a))return!1}else if(!Ul(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function $g(e,t){return((t==null?void 0:t.queryKeyHashFn)||Vl)(e)}function Vl(e){return JSON.stringify(e,(t,n)=>wp(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ul(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Ul(e[n],t[n])):!1}function Oj(e,t){if(e===t)return e;const n=Vx(e)&&Vx(t);if(n||wp(e)&&wp(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),i=a.length,l=n?[]:{},c=new Set(r);let u=0;for(let d=0;d<i;d++){const h=n?d:a[d];(!n&&c.has(h)||n)&&e[h]===void 0&&t[h]===void 0?(l[h]=void 0,u++):(l[h]=Oj(e[h],t[h]),l[h]===e[h]&&e[h]!==void 0&&u++)}return s===i&&u===s?e:l}return t}function Vx(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function wp(e){if(!Ux(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Ux(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Ux(e){return Object.prototype.toString.call(e)==="[object Object]"}function SD(e){return new Promise(t=>{setTimeout(t,e)})}function jD(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?Oj(e,t):t}function kD(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function CD(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Lg=Symbol();function Ij(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Lg?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ma,Es,Ji,F1,ND=(F1=class extends mh{constructor(){super();Me(this,Ma);Me(this,Es);Me(this,Ji);pe(this,Ji,t=>{if(!ph&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){F(this,Es)||this.setEventListener(F(this,Ji))}onUnsubscribe(){var t;this.hasListeners()||((t=F(this,Es))==null||t.call(this),pe(this,Es,void 0))}setEventListener(t){var n;pe(this,Ji,t),(n=F(this,Es))==null||n.call(this),pe(this,Es,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){F(this,Ma)!==t&&(pe(this,Ma,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof F(this,Ma)=="boolean"?F(this,Ma):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ma=new WeakMap,Es=new WeakMap,Ji=new WeakMap,F1),$j=new ND,Zi,Ts,eo,z1,ED=(z1=class extends mh{constructor(){super();Me(this,Zi,!0);Me(this,Ts);Me(this,eo);pe(this,eo,t=>{if(!ph&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){F(this,Ts)||this.setEventListener(F(this,eo))}onUnsubscribe(){var t;this.hasListeners()||((t=F(this,Ts))==null||t.call(this),pe(this,Ts,void 0))}setEventListener(t){var n;pe(this,eo,t),(n=F(this,Ts))==null||n.call(this),pe(this,Ts,t(this.setOnline.bind(this)))}setOnline(t){F(this,Zi)!==t&&(pe(this,Zi,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return F(this,Zi)}},Zi=new WeakMap,Ts=new WeakMap,eo=new WeakMap,z1),gd=new ED;function TD(){let e,t;const n=new Promise((s,a)=>{e=s,t=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function MD(e){return Math.min(1e3*2**e,3e4)}function Lj(e){return(e??"online")==="online"?gd.isOnline():!0}var Fj=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function kf(e){return e instanceof Fj}function zj(e){let t=!1,n=0,r=!1,s;const a=TD(),i=g=>{var b;r||(f(new Fj(g)),(b=e.abort)==null||b.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>$j.isFocused()&&(e.networkMode==="always"||gd.isOnline())&&e.canRun(),d=()=>Lj(e.networkMode)&&e.canRun(),h=g=>{var b;r||(r=!0,(b=e.onSuccess)==null||b.call(e,g),s==null||s(),a.resolve(g))},f=g=>{var b;r||(r=!0,(b=e.onError)==null||b.call(e,g),s==null||s(),a.reject(g))},m=()=>new Promise(g=>{var b;s=y=>{(r||u())&&g(y)},(b=e.onPause)==null||b.call(e)}).then(()=>{var g;s=void 0,r||(g=e.onContinue)==null||g.call(e)}),x=()=>{if(r)return;let g;const b=n===0?e.initialPromise:void 0;try{g=b??e.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(h).catch(y=>{var k;if(r)return;const w=e.retry??(ph?0:3),v=e.retryDelay??MD,S=typeof v=="function"?v(n,y):v,j=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(t||!j){f(y);return}n++,(k=e.onFail)==null||k.call(e,n,y),SD(S).then(()=>u()?void 0:m()).then(()=>{t?f(y):x()})})};return{promise:a,cancel:i,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?x():m().then(x),a)}}var PD=e=>setTimeout(e,0);function _D(){let e=[],t=0,n=l=>{l()},r=l=>{l()},s=PD;const a=l=>{t?e.push(l):s(()=>{n(l)})},i=()=>{const l=e;e=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||i()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Jt=_D(),Pa,B1,Bj=(B1=class{constructor(){Me(this,Pa)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),xD(this.gcTime)&&pe(this,Pa,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ph?1/0:5*60*1e3))}clearGcTimeout(){F(this,Pa)&&(clearTimeout(F(this,Pa)),pe(this,Pa,void 0))}},Pa=new WeakMap,B1),to,_a,Bn,Ra,Bt,sc,Aa,ar,Wr,V1,RD=(V1=class extends Bj{constructor(t){super();Me(this,ar);Me(this,to);Me(this,_a);Me(this,Bn);Me(this,Ra);Me(this,Bt);Me(this,sc);Me(this,Aa);pe(this,Aa,!1),pe(this,sc,t.defaultOptions),this.setOptions(t.options),this.observers=[],pe(this,Ra,t.client),pe(this,Bn,F(this,Ra).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,pe(this,to,DD(this.options)),this.state=t.state??F(this,to),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=F(this,Bt))==null?void 0:t.promise}setOptions(t){this.options={...F(this,sc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&F(this,Bn).remove(this)}setData(t,n){const r=jD(this.state.data,t,this.options);return Lt(this,ar,Wr).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Lt(this,ar,Wr).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,s;const n=(r=F(this,Bt))==null?void 0:r.promise;return(s=F(this,Bt))==null||s.cancel(t),n?n.then(rr).catch(rr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(F(this,to))}isActive(){return this.observers.some(t=>wD(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Lg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>bp(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!bD(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=F(this,Bt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=F(this,Bt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),F(this,Bn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(F(this,Bt)&&(F(this,Aa)?F(this,Bt).cancel({revert:!0}):F(this,Bt).cancelRetry()),this.scheduleGc()),F(this,Bn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Lt(this,ar,Wr).call(this,{type:"invalidate"})}fetch(t,n){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(F(this,Bt))return F(this,Bt).continueRetry(),F(this,Bt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(m=>m.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(pe(this,Aa,!0),r.signal)})},a=()=>{const f=Ij(this.options,n),x=(()=>{const g={client:F(this,Ra),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return pe(this,Aa,!1),this.options.persister?this.options.persister(f,x,this):f(x)},l=(()=>{const f={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:F(this,Ra),state:this.state,fetchFn:a};return s(f),f})();(u=this.options.behavior)==null||u.onFetch(l,this),pe(this,_a,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&Lt(this,ar,Wr).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=f=>{var m,x,g,b;kf(f)&&f.silent||Lt(this,ar,Wr).call(this,{type:"error",error:f}),kf(f)||((x=(m=F(this,Bn).config).onError)==null||x.call(m,f,this),(b=(g=F(this,Bn).config).onSettled)==null||b.call(g,this.state.data,f,this)),this.scheduleGc()};return pe(this,Bt,zj({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var m,x,g,b;if(f===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(y){c(y);return}(x=(m=F(this,Bn).config).onSuccess)==null||x.call(m,f,this),(b=(g=F(this,Bn).config).onSettled)==null||b.call(g,f,this.state.error,this),this.scheduleGc()},onError:c,onFail:(f,m)=>{Lt(this,ar,Wr).call(this,{type:"failed",failureCount:f,error:m})},onPause:()=>{Lt(this,ar,Wr).call(this,{type:"pause"})},onContinue:()=>{Lt(this,ar,Wr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),F(this,Bt).start()}},to=new WeakMap,_a=new WeakMap,Bn=new WeakMap,Ra=new WeakMap,Bt=new WeakMap,sc=new WeakMap,Aa=new WeakMap,ar=new WeakSet,Wr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...AD(r.data,this.options),fetchMeta:t.meta??null};case"success":return pe(this,_a,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return kf(s)&&s.revert&&F(this,_a)?{...F(this,_a),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Jt.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),F(this,Bn).notify({query:this,type:"updated",action:t})})},V1);function AD(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Lj(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function DD(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var kr,U1,OD=(U1=class extends mh{constructor(t={}){super();Me(this,kr);this.config=t,pe(this,kr,new Map)}build(t,n,r){const s=n.queryKey,a=n.queryHash??$g(s,n);let i=this.get(a);return i||(i=new RD({client:t,queryKey:s,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(s)}),this.add(i)),i}add(t){F(this,kr).has(t.queryHash)||(F(this,kr).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=F(this,kr).get(t.queryHash);n&&(t.destroy(),n===t&&F(this,kr).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Jt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return F(this,kr).get(t)}getAll(){return[...F(this,kr).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>zx(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>zx(t,r)):n}notify(t){Jt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Jt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Jt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},kr=new WeakMap,U1),Cr,Xt,Da,Nr,gs,W1,ID=(W1=class extends Bj{constructor(t){super();Me(this,Nr);Me(this,Cr);Me(this,Xt);Me(this,Da);this.mutationId=t.mutationId,pe(this,Xt,t.mutationCache),pe(this,Cr,[]),this.state=t.state||$D(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){F(this,Cr).includes(t)||(F(this,Cr).push(t),this.clearGcTimeout(),F(this,Xt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){pe(this,Cr,F(this,Cr).filter(n=>n!==t)),this.scheduleGc(),F(this,Xt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){F(this,Cr).length||(this.state.status==="pending"?this.scheduleGc():F(this,Xt).remove(this))}continue(){var t;return((t=F(this,Da))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,i,l,c,u,d,h,f,m,x,g,b,y,w,v,S,j,k,N,E;const n=()=>{Lt(this,Nr,gs).call(this,{type:"continue"})};pe(this,Da,zj({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,T)=>{Lt(this,Nr,gs).call(this,{type:"failed",failureCount:C,error:T})},onPause:()=>{Lt(this,Nr,gs).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>F(this,Xt).canRun(this)}));const r=this.state.status==="pending",s=!F(this,Da).canStart();try{if(r)n();else{Lt(this,Nr,gs).call(this,{type:"pending",variables:t,isPaused:s}),await((i=(a=F(this,Xt).config).onMutate)==null?void 0:i.call(a,t,this));const T=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));T!==this.state.context&&Lt(this,Nr,gs).call(this,{type:"pending",context:T,variables:t,isPaused:s})}const C=await F(this,Da).start();return await((d=(u=F(this,Xt).config).onSuccess)==null?void 0:d.call(u,C,t,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,C,t,this.state.context)),await((x=(m=F(this,Xt).config).onSettled)==null?void 0:x.call(m,C,null,this.state.variables,this.state.context,this)),await((b=(g=this.options).onSettled)==null?void 0:b.call(g,C,null,t,this.state.context)),Lt(this,Nr,gs).call(this,{type:"success",data:C}),C}catch(C){try{throw await((w=(y=F(this,Xt).config).onError)==null?void 0:w.call(y,C,t,this.state.context,this)),await((S=(v=this.options).onError)==null?void 0:S.call(v,C,t,this.state.context)),await((k=(j=F(this,Xt).config).onSettled)==null?void 0:k.call(j,void 0,C,this.state.variables,this.state.context,this)),await((E=(N=this.options).onSettled)==null?void 0:E.call(N,void 0,C,t,this.state.context)),C}finally{Lt(this,Nr,gs).call(this,{type:"error",error:C})}}finally{F(this,Xt).runNext(this)}}},Cr=new WeakMap,Xt=new WeakMap,Da=new WeakMap,Nr=new WeakSet,gs=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Jt.batch(()=>{F(this,Cr).forEach(r=>{r.onMutationUpdate(t)}),F(this,Xt).notify({mutation:this,type:"updated",action:t})})},W1);function $D(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qr,ir,ac,H1,LD=(H1=class extends mh{constructor(t={}){super();Me(this,qr);Me(this,ir);Me(this,ac);this.config=t,pe(this,qr,new Set),pe(this,ir,new Map),pe(this,ac,0)}build(t,n,r){const s=new ID({mutationCache:this,mutationId:++Tc(this,ac)._,options:t.defaultMutationOptions(n),state:r});return this.add(s),s}add(t){F(this,qr).add(t);const n=Xc(t);if(typeof n=="string"){const r=F(this,ir).get(n);r?r.push(t):F(this,ir).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(F(this,qr).delete(t)){const n=Xc(t);if(typeof n=="string"){const r=F(this,ir).get(n);if(r)if(r.length>1){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}else r[0]===t&&F(this,ir).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=Xc(t);if(typeof n=="string"){const r=F(this,ir).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===t}else return!0}runNext(t){var r;const n=Xc(t);if(typeof n=="string"){const s=(r=F(this,ir).get(n))==null?void 0:r.find(a=>a!==t&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Jt.batch(()=>{F(this,qr).forEach(t=>{this.notify({type:"removed",mutation:t})}),F(this,qr).clear(),F(this,ir).clear()})}getAll(){return Array.from(F(this,qr))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Bx(n,r))}findAll(t={}){return this.getAll().filter(n=>Bx(t,n))}notify(t){Jt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Jt.batch(()=>Promise.all(t.map(n=>n.continue().catch(rr))))}},qr=new WeakMap,ir=new WeakMap,ac=new WeakMap,H1);function Xc(e){var t;return(t=e.options.scope)==null?void 0:t.id}function Wx(e){return{onFetch:(t,n)=>{var d,h,f,m,x;const r=t.options,s=(f=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],i=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const b=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},y=Ij(t.options,t.fetchOptions),w=async(v,S,j)=>{if(g)return Promise.reject();if(S==null&&v.pages.length)return Promise.resolve(v);const N=(()=>{const M={client:t.client,queryKey:t.queryKey,pageParam:S,direction:j?"backward":"forward",meta:t.options.meta};return b(M),M})(),E=await y(N),{maxPages:C}=t.options,T=j?CD:kD;return{pages:T(v.pages,E,C),pageParams:T(v.pageParams,S,C)}};if(s&&a.length){const v=s==="backward",S=v?FD:Hx,j={pages:a,pageParams:i},k=S(r,j);l=await w(j,k,v)}else{const v=e??a.length;do{const S=c===0?i[0]??r.initialPageParam:Hx(r,l);if(c>0&&S==null)break;l=await w(l,S),c++}while(c<v)}return l};t.options.persister?t.fetchFn=()=>{var g,b;return(b=(g=t.options).persister)==null?void 0:b.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function Hx(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function FD(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var st,Ms,Ps,no,ro,_s,so,ao,G1,zD=(G1=class{constructor(e={}){Me(this,st);Me(this,Ms);Me(this,Ps);Me(this,no);Me(this,ro);Me(this,_s);Me(this,so);Me(this,ao);pe(this,st,e.queryCache||new OD),pe(this,Ms,e.mutationCache||new LD),pe(this,Ps,e.defaultOptions||{}),pe(this,no,new Map),pe(this,ro,new Map),pe(this,_s,0)}mount(){Tc(this,_s)._++,F(this,_s)===1&&(pe(this,so,$j.subscribe(async e=>{e&&(await this.resumePausedMutations(),F(this,st).onFocus())})),pe(this,ao,gd.subscribe(async e=>{e&&(await this.resumePausedMutations(),F(this,st).onOnline())})))}unmount(){var e,t;Tc(this,_s)._--,F(this,_s)===0&&((e=F(this,so))==null||e.call(this),pe(this,so,void 0),(t=F(this,ao))==null||t.call(this),pe(this,ao,void 0))}isFetching(e){return F(this,st).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return F(this,Ms).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=F(this,st).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=F(this,st).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(bp(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return F(this,st).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),s=F(this,st).get(r.queryHash),a=s==null?void 0:s.state.data,i=vD(t,a);if(i!==void 0)return F(this,st).build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return Jt.batch(()=>F(this,st).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=F(this,st).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=F(this,st);Jt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=F(this,st);return Jt.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Jt.batch(()=>F(this,st).findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(rr).catch(rr)}invalidateQueries(e,t={}){return Jt.batch(()=>(F(this,st).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Jt.batch(()=>F(this,st).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(rr)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(rr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=F(this,st).build(this,t);return n.isStaleByTime(bp(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(rr).catch(rr)}fetchInfiniteQuery(e){return e.behavior=Wx(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(rr).catch(rr)}ensureInfiniteQueryData(e){return e.behavior=Wx(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return gd.isOnline()?F(this,Ms).resumePausedMutations():Promise.resolve()}getQueryCache(){return F(this,st)}getMutationCache(){return F(this,Ms)}getDefaultOptions(){return F(this,Ps)}setDefaultOptions(e){pe(this,Ps,e)}setQueryDefaults(e,t){F(this,no).set(Vl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...F(this,no).values()],n={};return t.forEach(r=>{Ul(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){F(this,ro).set(Vl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...F(this,ro).values()],n={};return t.forEach(r=>{Ul(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...F(this,Ps).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=$g(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Lg&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...F(this,Ps).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){F(this,st).clear(),F(this,Ms).clear()}},st=new WeakMap,Ms=new WeakMap,Ps=new WeakMap,no=new WeakMap,ro=new WeakMap,_s=new WeakMap,so=new WeakMap,ao=new WeakMap,G1),BD=p.createContext(void 0),VD=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(BD.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wl.apply(this,arguments)}var Ds;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ds||(Ds={}));const Gx="popstate";function UD(e){e===void 0&&(e={});function t(r,s){let{pathname:a,search:i,hash:l}=r.location;return Sp("",{pathname:a,search:i,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:yd(s)}return HD(t,n,null,e)}function gt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vj(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function WD(){return Math.random().toString(36).substr(2,8)}function Kx(e,t){return{usr:e.state,key:e.key,idx:t}}function Sp(e,t,n,r){return n===void 0&&(n=null),Wl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?To(t):t,{state:n,key:t&&t.key||r||WD()})}function yd(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function To(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function HD(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,i=s.history,l=Ds.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(Wl({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function h(){l=Ds.Pop;let b=d(),y=b==null?null:b-u;u=b,c&&c({action:l,location:g.location,delta:y})}function f(b,y){l=Ds.Push;let w=Sp(g.location,b,y);u=d()+1;let v=Kx(w,u),S=g.createHref(w);try{i.pushState(v,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(S)}a&&c&&c({action:l,location:g.location,delta:1})}function m(b,y){l=Ds.Replace;let w=Sp(g.location,b,y);u=d();let v=Kx(w,u),S=g.createHref(w);i.replaceState(v,"",S),a&&c&&c({action:l,location:g.location,delta:0})}function x(b){let y=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof b=="string"?b:yd(b);return w=w.replace(/ $/,"%20"),gt(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let g={get action(){return l},get location(){return e(s,i)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Gx,h),c=b,()=>{s.removeEventListener(Gx,h),c=null}},createHref(b){return t(s,b)},createURL:x,encodeLocation(b){let y=x(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:m,go(b){return i.go(b)}};return g}var qx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qx||(qx={}));function GD(e,t,n){return n===void 0&&(n="/"),KD(e,t,n)}function KD(e,t,n,r){let s=typeof t=="string"?To(t):t,a=Fg(s.pathname||"/",n);if(a==null)return null;let i=Uj(e);qD(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=iO(a);l=rO(i[c],u)}return l}function Uj(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,i,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(gt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Ws([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(gt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Uj(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:tO(u,a.index),routesMeta:d})};return e.forEach((a,i)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,i);else for(let c of Wj(a.path))s(a,i,c)}),t}function Wj(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let i=Wj(r.join("/")),l=[];return l.push(...i.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function qD(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:nO(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YD=/^:[\w-]+$/,XD=3,QD=2,JD=1,ZD=10,eO=-2,Yx=e=>e==="*";function tO(e,t){let n=e.split("/"),r=n.length;return n.some(Yx)&&(r+=eO),t&&(r+=QD),n.filter(s=>!Yx(s)).reduce((s,a)=>s+(YD.test(a)?XD:a===""?JD:ZD),r)}function nO(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function rO(e,t,n){let{routesMeta:r}=e,s={},a="/",i=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=a==="/"?t:t.slice(a.length)||"/",h=sO({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h)return null;Object.assign(s,h.params),i.push({params:s,pathname:Ws([a,h.pathname]),pathnameBase:uO(Ws([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=Ws([a,h.pathnameBase]))}return i}function sO(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=aO(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let g=l[h]||"";i=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const x=l[h];return m&&!x?u[f]=void 0:u[f]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function aO(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Vj(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function iO(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vj(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Fg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function oO(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?To(e):e;return{pathname:n?n.startsWith("/")?n:lO(n,t):t,search:dO(r),hash:hO(s)}}function lO(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Cf(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cO(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Hj(e,t){let n=cO(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Gj(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=To(e):(s=Wl({},e),gt(!s.pathname||!s.pathname.includes("?"),Cf("?","pathname","search",s)),gt(!s.pathname||!s.pathname.includes("#"),Cf("#","pathname","hash",s)),gt(!s.search||!s.search.includes("#"),Cf("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,l;if(i==null)l=n;else{let h=t.length-1;if(!r&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=oO(s,l),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Ws=e=>e.join("/").replace(/\/\/+/g,"/"),uO=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),dO=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,hO=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function fO(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Kj=["post","put","patch","delete"];new Set(Kj);const mO=["get",...Kj];new Set(mO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hl(){return Hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hl.apply(this,arguments)}const zg=p.createContext(null),pO=p.createContext(null),ti=p.createContext(null),gh=p.createContext(null),ia=p.createContext({outlet:null,matches:[],isDataRoute:!1}),qj=p.createContext(null);function gO(e,t){let{relative:n}=t===void 0?{}:t;gc()||gt(!1);let{basename:r,navigator:s}=p.useContext(ti),{hash:a,pathname:i,search:l}=Xj(e,{relative:n}),c=i;return r!=="/"&&(c=i==="/"?r:Ws([r,i])),s.createHref({pathname:c,search:l,hash:a})}function gc(){return p.useContext(gh)!=null}function yc(){return gc()||gt(!1),p.useContext(gh).location}function Yj(e){p.useContext(ti).static||p.useLayoutEffect(e)}function Bg(){let{isDataRoute:e}=p.useContext(ia);return e?PO():yO()}function yO(){gc()||gt(!1);let e=p.useContext(zg),{basename:t,future:n,navigator:r}=p.useContext(ti),{matches:s}=p.useContext(ia),{pathname:a}=yc(),i=JSON.stringify(Hj(s,n.v7_relativeSplatPath)),l=p.useRef(!1);return Yj(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=Gj(u,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Ws([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,i,a,e])}function vO(){let{matches:e}=p.useContext(ia),t=e[e.length-1];return t?t.params:{}}function Xj(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=p.useContext(ti),{matches:s}=p.useContext(ia),{pathname:a}=yc(),i=JSON.stringify(Hj(s,r.v7_relativeSplatPath));return p.useMemo(()=>Gj(e,JSON.parse(i),a,n==="path"),[e,i,a,n])}function xO(e,t){return bO(e,t)}function bO(e,t,n,r){gc()||gt(!1);let{navigator:s}=p.useContext(ti),{matches:a}=p.useContext(ia),i=a[a.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=yc(),d;if(t){var h;let b=typeof t=="string"?To(t):t;c==="/"||(h=b.pathname)!=null&&h.startsWith(c)||gt(!1),d=b}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let b=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=GD(e,{pathname:m}),g=CO(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Ws([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Ws([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,n,r);return t&&g?p.createElement(gh.Provider,{value:{location:Hl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ds.Pop}},g):g}function wO(){let e=MO(),t=fO(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),n?p.createElement("pre",{style:s},n):null,null)}const SO=p.createElement(wO,null);class jO extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?p.createElement(ia.Provider,{value:this.props.routeContext},p.createElement(qj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kO(e){let{routeContext:t,match:n,children:r}=e,s=p.useContext(zg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(ia.Provider,{value:t},r)}function CO(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=i.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||gt(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<i.length;d++){let h=i[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,x=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||x){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,h,f)=>{let m,x=!1,g=null,b=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||SO,c&&(u<0&&f===0?(_O("route-fallback"),x=!0,b=null):u===f&&(x=!0,b=h.route.hydrateFallbackElement||null)));let y=t.concat(i.slice(0,f+1)),w=()=>{let v;return m?v=g:x?v=b:h.route.Component?v=p.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,p.createElement(kO,{match:h,routeContext:{outlet:d,matches:y,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?p.createElement(jO,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var Qj=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Qj||{}),Jj=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Jj||{});function NO(e){let t=p.useContext(zg);return t||gt(!1),t}function EO(e){let t=p.useContext(pO);return t||gt(!1),t}function TO(e){let t=p.useContext(ia);return t||gt(!1),t}function Zj(e){let t=TO(),n=t.matches[t.matches.length-1];return n.route.id||gt(!1),n.route.id}function MO(){var e;let t=p.useContext(qj),n=EO(),r=Zj();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function PO(){let{router:e}=NO(Qj.UseNavigateStable),t=Zj(Jj.UseNavigateStable),n=p.useRef(!1);return Yj(()=>{n.current=!0}),p.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Hl({fromRouteId:t},a)))},[e,t])}const Xx={};function _O(e,t,n){Xx[e]||(Xx[e]=!0)}function RO(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Jn(e){gt(!1)}function AO(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Ds.Pop,navigator:a,static:i=!1,future:l}=e;gc()&&gt(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:a,static:i,future:Hl({v7_relativeSplatPath:!1},l)}),[c,l,a,i]);typeof r=="string"&&(r=To(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:x="default"}=r,g=p.useMemo(()=>{let b=Fg(d,c);return b==null?null:{location:{pathname:b,search:h,hash:f,state:m,key:x},navigationType:s}},[c,d,h,f,m,x,s]);return g==null?null:p.createElement(ti.Provider,{value:u},p.createElement(gh.Provider,{children:n,value:g}))}function Qx(e){let{children:t,location:n}=e;return xO(jp(t),n)}new Promise(()=>{});function jp(e,t){t===void 0&&(t=[]);let n=[];return p.Children.forEach(e,(r,s)=>{if(!p.isValidElement(r))return;let a=[...t,s];if(r.type===p.Fragment){n.push.apply(n,jp(r.props.children,a));return}r.type!==Jn&&gt(!1),!r.props.index||!r.props.children||gt(!1);let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=jp(r.props.children,a)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kp(){return kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kp.apply(this,arguments)}function DO(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function OO(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function IO(e,t){return e.button===0&&(!t||t==="_self")&&!OO(e)}const $O=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LO="6";try{window.__reactRouterVersion=LO}catch{}const FO="startTransition",Jx=j0[FO];function zO(e){let{basename:t,children:n,future:r,window:s}=e,a=p.useRef();a.current==null&&(a.current=UD({window:s,v5Compat:!0}));let i=a.current,[l,c]=p.useState({action:i.action,location:i.location}),{v7_startTransition:u}=r||{},d=p.useCallback(h=>{u&&Jx?Jx(()=>c(h)):c(h)},[c,u]);return p.useLayoutEffect(()=>i.listen(d),[i,d]),p.useEffect(()=>RO(r),[r]),p.createElement(AO,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:i,future:r})}const BO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nn=p.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:a,replace:i,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=DO(t,$O),{basename:m}=p.useContext(ti),x,g=!1;if(typeof u=="string"&&VO.test(u)&&(x=u,BO))try{let v=new URL(window.location.href),S=u.startsWith("//")?new URL(v.protocol+u):new URL(u),j=Fg(S.pathname,m);S.origin===v.origin&&j!=null?u=j+S.search+S.hash:g=!0}catch{}let b=gO(u,{relative:s}),y=UO(u,{replace:i,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function w(v){r&&r(v),v.defaultPrevented||y(v)}return p.createElement("a",kp({},f,{href:x||b,onClick:g||a?r:w,ref:n,target:c}))});var Zx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Zx||(Zx={}));var eb;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(eb||(eb={}));function UO(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:i,viewTransition:l}=t===void 0?{}:t,c=Bg(),u=yc(),d=Xj(e,{relative:i});return p.useCallback(h=>{if(IO(h,n)){h.preventDefault();let f=r!==void 0?r:yd(u)===yd(d);c(e,{replace:f,state:s,preventScrollReset:a,relative:i,viewTransition:l})}},[u,c,d,r,s,n,e,a,i,l])}function vc(){const[e,t]=p.useState(()=>typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches);return p.useEffect(()=>{const n=window.matchMedia("(prefers-reduced-motion: reduce)"),r=s=>{t(s.matches)};return n.addEventListener?n.addEventListener("change",r):n.addListener(r),()=>{n.removeEventListener?n.removeEventListener("change",r):n.removeListener(r)}},[]),e}function WO(){const[e,t]=p.useState([]),[n,r]=p.useState(!1);p.useEffect(()=>{const i=()=>{const c=document.documentElement.getAttribute("data-mythic-theme");r(c==="pixelDreamMoon")};i();const l=new MutationObserver(i);return l.observe(document.documentElement,{attributes:!0,attributeFilter:["data-mythic-theme"]}),()=>l.disconnect()},[]);const s=i=>{if(!n)return;const l=i.currentTarget.getBoundingClientRect(),c=i.clientX-l.left,u=i.clientY-l.top,d={id:Date.now(),x:c,y:u,time:0};t(h=>[...h,d]),setTimeout(()=>{t(h=>h.filter(f=>f.id!==d.id))},600)};return p.useEffect(()=>{if(e.length===0)return;const i=setInterval(()=>{t(l=>l.map(c=>({...c,time:c.time+1})))},50);return()=>clearInterval(i)},[e.length]),{createRipple:s,RippleEffect:()=>!n||e.length===0?null:o.jsx(o.Fragment,{children:e.map(i=>{const l=i.time*15,c=Math.max(0,1-i.time/12);return o.jsxs("div",{className:"absolute pointer-events-none",style:{left:i.x,top:i.y,transform:"translate(-50%, -50%)",imageRendering:"pixelated"},children:[o.jsx("div",{style:{width:`${l}px`,height:`${l}px`,border:"3px solid #818cf8",borderRadius:"0",opacity:c*.8,boxShadow:`0 0 ${Math.floor(l/4)}px #818cf8`,transition:"none"}}),o.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:`${l*.6}px`,height:`${l*.6}px`,border:"2px solid #06b6d4",borderRadius:"0",opacity:c,boxShadow:`0 0 ${Math.floor(l/6)}px #06b6d4`}}),i.time<8&&[{x:-l/2,y:-l/2},{x:l/2,y:-l/2},{x:-l/2,y:l/2},{x:l/2,y:l/2}].map((u,d)=>o.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:`translate(calc(-50% + ${u.x}px), calc(-50% + ${u.y}px))`,width:"4px",height:"4px",backgroundColor:"#ffffff",boxShadow:"0 0 4px #ffffff",opacity:c}},d))]},i.id)})}),isPixelTheme:n}}function HO({data:e}){return e?o.jsxs("div",{"aria-hidden":"true",className:"contents",children:[o.jsxs("div",{className:"absolute left-0 right-0 h-[12px] z-50 pointer-events-none overflow-hidden",style:{top:"-12px"},children:[o.jsx("div",{className:"absolute bottom-0 left-0",style:{width:"200%",height:"100%",display:"flex",animation:"pixelWaveScroll 12s linear infinite"},children:[...Array(120)].map((t,n)=>{const r=n*.5%8,s=Math.sin(r*Math.PI/4),a=Math.floor((s+1)*3.5)+2;let i;return a<=3?i="#1e3a8a":a<=5?i="#3b82f6":a<=7?i="#06b6d4":a<=8?i="#22d3ee":i="#ffffff",o.jsx("div",{className:"absolute bottom-0",style:{left:`${n*.8333}%`,width:"0.9%",height:`${a}px`,backgroundColor:i,imageRendering:"pixelated",boxShadow:a>6?`0 0 6px ${i}`:"none"}},n)})}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{background:"linear-gradient(90deg, transparent 0%, rgba(6,182,212,0.3) 25%, rgba(255,255,255,0.5) 50%, rgba(6,182,212,0.3) 75%, transparent 100%)",animation:"pixelWaveGlow 2.5s linear infinite"}})]}),o.jsx("div",{className:"absolute left-0 right-0 h-[8px] z-40 pointer-events-none",style:{top:"-8px"},children:[...Array(6)].map((t,n)=>o.jsx("div",{className:"absolute w-[3px] h-[3px]",style:{left:`${15+n*15}%`,top:"2px",backgroundColor:"#ffffff",boxShadow:"0 0 6px #06b6d4",animation:`pixelTwinkle ${1+n*.3}s steps(2) infinite`,imageRendering:"pixelated"}},n))}),o.jsx("style",{children:`
        @keyframes pixelTwinkle {
          0%, 100% { opacity: 1; transform: scale(1); }
          50% { opacity: 0.3; transform: scale(0.7); }
        }
        @keyframes pixelWaveFloat {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-2px); }
        }
        @keyframes pixelWaveGlow {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        @keyframes pixelWaveScroll {
          0% { transform: translateX(0); }
          100% { transform: translateX(-50%); }
        }
      `}),o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[o.jsx("div",{className:"absolute left-0 right-0 h-[4px] z-50",style:{top:"-4px",background:"linear-gradient(90deg, transparent 0%, transparent 20%, #ffffff 40%, #ffffff 60%, transparent 80%, transparent 100%)",backgroundSize:"200% 100%",opacity:1,animation:"pixelBeam 2s linear infinite",boxShadow:"0 0 4px #ffffff"}}),o.jsx("style",{children:`
          @keyframes pixelBeam { 
            0% { background-position: 200% 0; } 
            100% { background-position: -200% 0; } 
          }
        `}),o.jsxs("div",{className:"absolute inset-x-0 top-0 h-[60%] overflow-hidden",children:[e.staticStars.map((t,n)=>o.jsx("div",{className:"absolute bg-white opacity-60",style:{width:"2px",height:"2px",top:t.top,left:t.left,boxShadow:"0 0 1px white"}},`star-static-${n}`)),e.twinkleStars.map((t,n)=>o.jsx("div",{className:"absolute bg-[#a5b4fc]",style:{width:"3px",height:"3px",top:t.top,left:t.left,animation:`pulse ${t.duration}s infinite alternate`}},`star-twinkle-${n}`)),o.jsx("div",{className:"absolute top-0 left-[20%]",style:{width:"4px",height:"4px",background:"#ffffff",boxShadow:"2px 2px 0 #c7d2fe, 4px 4px 0 #818cf8, 6px 6px 0 #4338ca",animation:"shootingStar 4s ease-in-out infinite"},children:o.jsx("style",{children:`
              @keyframes shootingStar {
                0% { transform: translate(-100px, -100px); opacity: 0; }
                10% { opacity: 1; }
                20% { transform: translate(200px, 200px); opacity: 0; }
                100% { transform: translate(200px, 200px); opacity: 0; }
              }
            `})})]}),o.jsxs("div",{className:"absolute inset-x-0 bottom-0 h-[60%]",children:[o.jsx("div",{className:"absolute inset-0 opacity-30 transform -rotate-12 scale-150",style:{background:"radial-gradient(ellipse at 50% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 60%)",pointerEvents:"none"}}),e.milkyStars.map((t,n)=>o.jsx("div",{className:"absolute bg-white opacity-40",style:{width:"1px",height:"1px",top:t.top,left:t.left,animation:`twinkle ${t.duration}s infinite`}},`star-milky-${n}`)),o.jsx("div",{className:"absolute top-[10%] left-[20%] w-[2px] h-[2px] bg-white rounded-full z-0 opacity-0",style:{boxShadow:"0 0 4px white, 2px 2px 0 rgba(255,255,255,0.5)",animation:"shootingStar 6s ease-in-out infinite"}}),o.jsx("div",{className:"absolute top-[30%] left-[50%] w-[1px] h-[1px] bg-cyan-200 rounded-full z-0 opacity-0",style:{boxShadow:"0 0 2px cyan",animation:"shootingStar 9s ease-in-out infinite 3s"}}),[...Array(3)].map((t,n)=>o.jsxs("div",{className:"absolute opacity-20",style:{top:`${20+n*15}%`,left:`${n*30}%`,animation:`cloudDrift ${15+n*5}s linear ${n*3}s infinite`},children:[o.jsx("div",{className:"w-[8px] h-[3px] bg-white rounded-sm"}),o.jsx("div",{className:"absolute top-[-2px] left-[2px] w-[4px] h-[3px] bg-white rounded-sm"}),o.jsx("div",{className:"absolute top-[-2px] right-[1px] w-[3px] h-[2px] bg-white rounded-sm"})]},`cloud-${n}`)),o.jsx("style",{children:"@keyframes cloudDrift { 0% { transform: translateX(0); } 100% { transform: translateX(100vw); } }"}),o.jsxs("div",{className:"absolute top-[15%] left-[5%] opacity-70",children:[o.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:0,left:0}}),o.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:"10px",left:"20px"}}),o.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:"25px",left:"35px"}}),o.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:"35px",left:"55px"}}),o.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:"45px",left:"55px"}}),o.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:"45px",left:"80px"}}),o.jsx("div",{className:"absolute w-[2px] h-[2px] bg-white shadow-[0_0_2px_white]",style:{top:"35px",left:"80px"}}),o.jsx("svg",{className:"absolute top-0 left-0 w-[100px] h-[60px] opacity-20 pointer-events-none",children:o.jsx("polyline",{points:"1,1 21,11 36,26 56,36 56,46 81,46 81,36 56,36",fill:"none",stroke:"white",strokeWidth:"0.5"})})]}),[10,20,70,85].map((t,n)=>o.jsxs("div",{className:"absolute bottom-[35%]",style:{left:`${t}%`},children:[o.jsxs("div",{style:{width:"0",height:"0",borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:"16px solid #164e63",transform:`scale(${1+n*.1})`,transformOrigin:"bottom center",animation:`treeSway ${4+n}s ease-in-out infinite alternate`},children:[o.jsx("div",{className:"absolute top-[4px] left-[-2px] w-[1px] h-[1px] bg-[#0eaaaf] opacity-50"}),o.jsx("div",{className:"absolute top-[8px] right-[-2px] w-[1px] h-[1px] bg-[#0eaaaf] opacity-50"})]}),n===1&&o.jsxs("div",{className:"absolute top-[6px] right-[-4px] animate-pulse",style:{animation:`treeSway ${4+n}s ease-in-out infinite alternate`},children:[o.jsx("div",{className:"w-[2px] h-[3px] bg-[#fbbf24] shadow-[0_0_4px_#fbbf24]"}),o.jsx("div",{className:"absolute -top-[1px] left-0 w-[2px] h-[1px] bg-[#78350f]"})]})]},`tree-detailed-${n}`)),o.jsx("div",{className:"absolute inset-0 w-[150%] -left-[20%] rounded-[100%] bg-[#155e75] shadow-[inset_0_2px_0_#164e63]",style:{transform:"scaleY(0.5) translateY(40%)",opacity:.8}}),o.jsx("div",{className:"absolute bottom-6 left-[45%] z-10",style:{width:"0",height:"0",borderLeft:"10px solid transparent",borderRight:"10px solid transparent",borderBottom:"12px solid #ef4444",filter:"drop-shadow(2px 0 0 #7f1d1d)"},children:o.jsx("div",{className:"absolute top-[2px] left-[-2px] w-0 h-0 border-l-[2px] border-r-[2px] border-b-[8px] border-b-[#1e293b] border-l-transparent border-r-transparent"})}),o.jsxs("div",{className:"absolute bottom-4 left-[42%] z-10",style:{animation:"foxBreathe 2s ease-in-out infinite"},children:[o.jsx("div",{className:"w-[6px] h-[4px] bg-[#f97316] rounded-t-lg rounded-bl-lg"})," ",o.jsx("div",{className:"absolute -top-[2px] left-0 w-[2px] h-[2px] bg-[#f97316]"})," ",o.jsx("div",{className:"absolute top-[1px] -right-[2px] w-[3px] h-[3px] bg-[#fff7ed] rounded-full"})," ",o.jsx("div",{className:"absolute -top-[6px] -right-[4px] text-[6px] text-white opacity-60",style:{animation:"zzz 3s ease-in-out infinite"},children:"z"})]}),o.jsx("style",{children:`
            @keyframes foxBreathe { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
            @keyframes zzz { 0%, 100% { transform: translateY(0); opacity: 0; } 50% { transform: translateY(-8px); opacity: 0.6; } }
          `}),o.jsxs("div",{className:"absolute bottom-5 left-[50%] w-1 h-1 bg-orange-500 rounded-full z-10",style:{boxShadow:"0 0 6px orange, 0 -2px 8px rgba(255, 69, 0, 0.8)",animation:"flicker 0.2s infinite alternate"},children:[o.jsx("div",{className:"absolute -bottom-[2px] -left-[2px] w-2 h-[2px] bg-[#78350f]"}),e.embers.map((t,n)=>o.jsx("div",{className:"absolute w-[1px] h-[1px] bg-orange-400 rounded-full",style:{bottom:"2px",left:`${t.left}px`,animation:`emberRise ${t.duration}s ease-out ${t.delay}s infinite`}},`ember-${n}`))]}),o.jsx("style",{children:"@keyframes emberRise { 0% { transform: translateY(0) scale(1); opacity: 1; } 100% { transform: translateY(-20px) scale(0.3); opacity: 0; } }"}),o.jsxs("div",{className:"absolute bottom-5 left-[52%] z-10",style:{animation:"guitarVibrate 0.5s ease-in-out infinite alternate"},children:[o.jsx("div",{className:"w-[3px] h-[8px] bg-[#92400e] rounded-[1px] shadow-[1px_1px_0_#000] rotate-12"}),o.jsx("div",{className:"absolute top-[2px] left-[1px] w-[1px] h-[4px] bg-[#fbbf24] opacity-30"})]}),o.jsx("style",{children:"@keyframes guitarVibrate { from { transform: rotate(-1deg); } to { transform: rotate(1deg); } }"}),[15,25,60,75,80].map((t,n)=>o.jsxs("div",{className:"absolute bottom-4 z-10",style:{left:`${t}%`},children:[o.jsx("div",{className:"w-[4px] h-[3px] bg-[#ef4444] rounded-t-sm"})," ",o.jsx("div",{className:"absolute top-[1px] left-[1px] w-[1px] h-[1px] bg-white"})," ",o.jsx("div",{className:"absolute bottom-[-2px] left-[1px] w-[2px] h-[2px] bg-[#fcd34d]"})," "]},`mushroom-${n}`)),e.grass.map((t,n)=>o.jsx("div",{className:"absolute bottom-3 w-[1px] h-[3px] bg-[#4ade80]",style:{left:t.left,opacity:.6,animation:`grassSway ${t.duration}s ease-in-out ${t.delay}s infinite alternate`,transformOrigin:"bottom"}},`grass-${n}`)),o.jsx("style",{children:"@keyframes grassSway { from { transform: rotate(-5deg); } to { transform: rotate(5deg); } }"}),e.fireflies.map((t,n)=>o.jsx("div",{className:"absolute w-[1px] h-[1px] bg-[#fcd34d] rounded-full",style:{bottom:t.bottom,left:t.left,boxShadow:"0 0 3px #fcd34d",animation:`fireflyBounce ${t.duration}s ease-in-out ${t.delay}s infinite`,"--fx1":t.fx1,"--fy1":t.fy1,"--fx2":t.fx2,"--fy2":t.fy2,"--fx3":t.fx3,"--fy3":t.fy3}},`firefly-${n}`)),o.jsx("style",{children:`
            @keyframes fireflyBounce { 
              0%, 100% { transform: translate(0, 0); opacity: 0.3; } 
              25% { transform: translate(var(--fx1), var(--fy1)); opacity: 1; }
              50% { transform: translate(var(--fx2), var(--fy2)); opacity: 0.8; }
              75% { transform: translate(var(--fx3), var(--fy3)); opacity: 1; }
            }
          `}),o.jsx("div",{className:"absolute bottom-0 left-0 w-[200%] h-12 pointer-events-none opacity-30",style:{background:"linear-gradient(to top, rgba(255,255,255,0.4), transparent)",maskImage:"linear-gradient(90deg, transparent, black 50%, transparent)",WebkitMaskImage:"linear-gradient(90deg, transparent, black 50%, transparent)",animation:"fogDrift 20s linear infinite"},children:o.jsx("style",{children:"@keyframes fogDrift { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }"})})]}),o.jsx("div",{className:"absolute top-[15%] right-[-20px] pointer-events-none opacity-80",style:{width:"6px",height:"2px",background:"#ec4899",boxShadow:"2px -2px 0 #22d3ee, -2px -2px 0 #22d3ee, 0 -4px 0 #e879f9",animation:"ufoFly 30s linear 5s infinite"},children:o.jsx("style",{children:"@keyframes ufoFly { 0% { transform: translateX(0) translateY(0); } 25% { transform: translateX(-150px) translateY(10px); } 50% { transform: translateX(-300px) translateY(-5px); } 100% { transform: translateX(-120vw) translateY(20px); } }"})})]})]}):null}function GO({data:e}){return e?o.jsxs("div",{"aria-hidden":"true",className:"contents",children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80"}),o.jsx("div",{className:"absolute inset-0 opacity-60",style:{background:"radial-gradient(circle at 40% 60%, rgba(180, 0, 50, 0.5), transparent 50%)",filter:"blur(20px)",animation:"plasmaFlow 10s ease-in-out infinite alternate"}}),o.jsx("div",{className:"absolute inset-0 opacity-60 mix-blend-screen",style:{background:"radial-gradient(circle at 60% 40%, rgba(50, 60, 200, 0.6), transparent 50%)",filter:"blur(15px)",animation:"plasmaFlow 8s ease-in-out infinite alternate-reverse"}}),e.stars.map((t,n)=>o.jsx("div",{className:"absolute rounded-full bg-white blur-[0.5px]",style:{width:`${t.size}px`,height:`${t.size}px`,top:t.top,left:t.left,animation:`starFloat ${t.floatDuration}s infinite linear, starTwinkle ${t.twinkleDuration}s infinite ease-in-out alternate`}},`super-blue-star-${n}`)),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-20",style:{background:"linear-gradient(90deg, transparent, rgba(255, 50, 50, 0.8), rgba(200, 100, 255, 1), rgba(50, 100, 255, 0.8), transparent)",backgroundSize:"200% 100%",animation:"flowRight 3s linear infinite",boxShadow:"0 0 15px rgba(200, 50, 200, 0.6)"}})]}),o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[o.jsx("div",{className:"absolute inset-0 bg-[#050510]"}),o.jsx("div",{className:"absolute inset-0 opacity-80",style:{background:"radial-gradient(circle at 50% 100%, rgba(80, 0, 100, 0.4), transparent 80%)"}}),o.jsx("div",{className:"absolute inset-0 opacity-70",style:{backgroundImage:"radial-gradient(1.5px 1.5px at 20% 20%, #aaddff 10%, transparent 0), radial-gradient(1.5px 1.5px at 80% 80%, #ffaaaa 10%, transparent 0)",backgroundSize:"250px 250px",animation:"pulse 5s ease-in-out infinite"}}),o.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-[35%] w-[320px] h-[320px] rounded-full z-10",style:{background:"radial-gradient(circle at 30% 30%, #1e1b4b 0%, #4c0519 60%, #000000 100%)",boxShadow:"0 0 60px rgba(100, 50, 255, 0.4), inset -10px -10px 50px rgba(100, 0, 50, 0.8)",filter:"contrast(1.3) brightness(1.1)"},children:[o.jsx("div",{className:"absolute inset-0 rounded-full opacity-50 mix-blend-overlay",style:{backgroundImage:"radial-gradient(circle at 30% 40%, rgba(50,50,100,0.5) 5%, transparent 15%), radial-gradient(circle at 70% 60%, rgba(100,50,50,0.5) 8%, transparent 20%)"}}),o.jsx("div",{className:"absolute inset-0 rounded-full",style:{boxShadow:"inset 10px 10px 30px rgba(100, 150, 255, 0.6), inset -10px -10px 30px rgba(255, 50, 100, 0.4)",mixBlendMode:"screen"}})]})]})]}):null}function KO({data:e}){return e?o.jsx("div",{"aria-hidden":"true",className:"contents",children:o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 3s ease-out forwards"},children:[o.jsx("div",{className:"absolute inset-0 bg-black"}),o.jsx("div",{className:"absolute inset-0 opacity-80",style:{background:"radial-gradient(circle at 50% 100%, rgba(50, 0, 0, 0.8), transparent 80%)"}}),o.jsx("div",{className:"absolute inset-0 opacity-60",style:{backgroundImage:"radial-gradient(1px 1px at 20% 20%, #ffaaaa 10%, transparent 0), radial-gradient(1.5px 1.5px at 60% 80%, #ff4444 10%, transparent 0)",backgroundSize:"200px 200px",animation:"pulse 4s ease-in-out infinite"}}),o.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-[35%] w-[320px] h-[320px] rounded-full z-10",style:{background:"radial-gradient(circle at 35% 35%, #800000 0%, #500000 40%, #2a0a0a 100%)",boxShadow:"0 0 60px rgba(255, 30, 30, 0.6), inset -10px -10px 40px rgba(0,0,0,0.9)",filter:"contrast(1.2) brightness(1.2)"},children:[o.jsx("div",{className:"absolute inset-0 rounded-full opacity-60 mix-blend-multiply",style:{backgroundImage:"radial-gradient(circle at 20% 40%, rgba(0,0,0,0.7) 4%, transparent 12%), radial-gradient(circle at 65% 60%, rgba(0,0,0,0.6) 8%, transparent 20%), radial-gradient(circle at 45% 75%, rgba(0,0,0,0.5) 5%, transparent 15%), radial-gradient(circle at 80% 30%, rgba(0,0,0,0.6) 3%, transparent 10%)"}}),o.jsx("div",{className:"absolute inset-0 rounded-full",style:{boxShadow:"inset 0 0 20px rgba(255, 100, 100, 0.8), 0 0 10px rgba(255, 50, 50, 0.5)",mixBlendMode:"screen"}}),o.jsx("div",{className:"absolute inset-0 rounded-full opacity-40 mix-blend-overlay",style:{background:"radial-gradient(circle at 50% 50%, rgba(255, 0, 0, 0.6), transparent 70%)",animation:"flashPulse 4s ease-in-out infinite"}})]}),o.jsx("div",{className:"absolute inset-0 z-20",style:{background:"linear-gradient(to top, rgba(50, 0, 0, 0.6), transparent)",maskImage:"linear-gradient(to top, black, transparent)",WebkitMaskImage:"linear-gradient(to top, black, transparent)"},children:e.mist.map((t,n)=>o.jsx("div",{className:"absolute rounded-full bg-red-600/20 blur-xl",style:{width:`${t.size}px`,height:`${t.size}px`,bottom:"-50px",left:t.left,animation:`singularFloat ${t.duration}s linear infinite reverse`}},`blood-mist-${n}`))}),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[3px] z-30",style:{background:"linear-gradient(90deg, transparent, #ff0000, #ff4444, #ff0000, transparent)",backgroundSize:"200% 100%",animation:"borderFlow 3s linear infinite",boxShadow:"0 0 20px rgba(255, 0, 0, 0.6)"}})]})}):null}function qO({data:e}){return e?o.jsx("div",{"aria-hidden":"true",className:"contents",children:o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 2.5s ease-out forwards"},children:[o.jsx("div",{className:"absolute inset-0 bg-[#1a0b2e]/95 backdrop-blur-md"}),o.jsx("div",{className:"absolute inset-0 opacity-60 mix-blend-screen",style:{background:"radial-gradient(circle at 30% 50%, rgba(255, 0, 150, 0.3), transparent 60%), radial-gradient(circle at 70% 50%, rgba(0, 200, 255, 0.3), transparent 60%)",filter:"blur(10px)",animation:"nebulaPulse 6s ease-in-out infinite"}}),o.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-color-dodge",style:{backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIj48ZmlsdGVyIGlkPSJnoiPjxmZVR1cmJ1bGVuY2UgdHlwZT0iZnJhY3RhbE5vaXNlIiBiYXNlRnJlcXVlbmN5PSIwLjAyIiBudW1PY3RhdmVzPSIzIiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PC9maWx0ZXI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsdGVyPSJ1cmwoI2cpIiBvcGFjaXR5PSIwLjUiLz48L3N2Zz4=')",animation:"mistFlow 10s linear infinite"}}),e.stardust.map((t,n)=>o.jsx("div",{className:"absolute bg-white rounded-full",style:{width:`${t.size}px`,height:`${t.size}px`,top:t.top,left:t.left,opacity:t.opacity,animation:`stardustTwinkle ${t.duration}s ease-in-out infinite ${t.delay}s`,boxShadow:`0 0 ${t.glow}px ${t.color}`}},`nebula-dust-${n}`)),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-20",style:{background:"linear-gradient(90deg, transparent, #ff00ff, #00ffff, transparent)",boxShadow:"0 0 15px rgba(255, 0, 255, 0.5), 0 0 30px rgba(0, 255, 255, 0.3)"}})]})}):null}function YO({data:e}){return e?o.jsx("div",{"aria-hidden":"true",className:"contents",children:o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[o.jsx("div",{className:"absolute inset-0 bg-[#0b0515]/95"}),o.jsx("div",{className:"absolute inset-y-0 left-0 w-[200%] opacity-50 mix-blend-screen",style:{backgroundImage:"linear-gradient(90deg, transparent, rgba(100, 20, 200, 0.3), rgba(60, 20, 150, 0.5), rgba(100, 20, 200, 0.3), transparent)",backgroundSize:"50% 100%",backgroundRepeat:"repeat-x",animation:"mistScroll 5s linear infinite"}}),e.warpStars.map((t,n)=>o.jsx("div",{className:"absolute w-[2px] bg-white rounded-full mix-blend-screen opacity-40",style:{height:`${t.height}px`,top:t.top,left:t.left,animation:`warpSpeed ${t.duration}s linear infinite ${t.delay}s`,boxShadow:"0 0 2px rgba(200, 200, 255, 0.5)"}},`warp-star-${n}`)),e.staticStars.map((t,n)=>o.jsx("div",{className:"absolute w-[1px] h-[1px] bg-white rounded-full opacity-60",style:{top:t.top,left:t.left,animation:`pulse ${t.duration}s ease-in-out infinite`}},`cosmic-static-${n}`)),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] z-20 opacity-40",style:{background:"linear-gradient(90deg, transparent, #8a2be2, transparent)"}}),o.jsx("div",{className:"absolute top-[-1px] left-0 right-0 h-[3px] z-21 mix-blend-screen",style:{background:"linear-gradient(90deg, transparent, rgba(150, 50, 255, 0), rgba(255, 200, 255, 1) 50%, rgba(150, 50, 255, 0), transparent)",backgroundSize:"200% 100%",boxShadow:"0 0 20px rgba(220, 150, 255, 0.8), 0 0 40px rgba(150, 50, 255, 0.5)",animation:"mistFlow 1.5s linear infinite"}})]})}):null}const XO=[{path:"/",icon:lA,label:"Home"},{path:"/logs",icon:YR,label:"Logs"},{path:"/library",icon:bg,label:"Library"},{path:"/story",icon:yg,label:"Story"},{path:"/statistics",icon:vg,label:"Stats"},{path:"/about",icon:B5,label:"About"}],$e=(e,t)=>Math.random()*(t-e)+e,tb={superBloodMoon:{background:"linear-gradient(to top, rgba(50, 0, 0, 0.95), rgba(80, 10, 10, 0.9), rgba(100, 20, 20, 0.8))",borderTop:"1px solid rgba(255, 50, 50, 0.6)",boxShadow:"0 -10px 40px rgba(220, 20, 60, 0.6), 0 -2px 10px rgba(255, 0, 0, 0.4), inset 0 2px 20px rgba(255, 50, 50, 0.2)",animation:"bloodPulse 3s ease-in-out infinite",backdropFilter:"blur(20px) saturate(150%)"},superBlueBloodMoon:{background:"linear-gradient(135deg, rgba(20, 0, 40, 0.95), rgba(60, 20, 80, 0.9), rgba(100, 40, 120, 0.8))",borderTop:"1px solid rgba(200, 100, 255, 0.6)",borderImage:"linear-gradient(90deg, transparent, rgba(200, 100, 255, 1), rgba(100, 200, 255, 1), transparent) 1",boxShadow:"0 -10px 40px rgba(120, 20, 220, 0.6), 0 -2px 10px rgba(200, 100, 255, 0.4), inset 0 2px 20px rgba(200, 100, 255, 0.2)",animation:"royalShimmer 4s ease-in-out infinite",backdropFilter:"blur(20px) saturate(180%)"},lunarTransientPhenomena:{background:"linear-gradient(to top, rgba(10, 10, 20, 0.95), rgba(30, 30, 60, 0.9))",borderTop:"1px solid rgba(150, 255, 255, 0.8)",boxShadow:"0 -5px 30px rgba(100, 255, 255, 0.5), 0 0 15px rgba(100, 255, 255, 0.3), inset 0 0 20px rgba(100, 255, 255, 0.1)",animation:"electricGlitch 3s steps(5) infinite",backdropFilter:"blur(15px) brightness(1.2)"},hybridEclipse:{background:"linear-gradient(to top, rgba(20, 10, 0, 0.95), rgba(60, 40, 10, 0.9))",borderTop:"1px solid rgba(255, 200, 100, 0.8)",boxShadow:"0 -5px 35px rgba(255, 160, 50, 0.6), 0 0 15px rgba(255, 200, 100, 0.4), inset 0 2px 10px rgba(255, 200, 100, 0.2)",animation:"eclipsePulse 4s ease-in-out infinite",backdropFilter:"blur(18px) contrast(1.1)"},stillMoon:{background:"linear-gradient(to top, rgba(200, 220, 255, 0.15), rgba(255, 255, 255, 0.05))",borderTop:"1px solid rgba(255, 255, 255, 0.6)",boxShadow:"0 -5px 30px rgba(200, 230, 255, 0.4), inset 0 0 30px rgba(200, 230, 255, 0.2)",backdropFilter:"blur(30px) brightness(1.1)",animation:"stillFreeze 10s linear infinite"},echoMoon:{background:"linear-gradient(to top, rgba(30, 15, 60, 0.98), rgba(15, 5, 30, 0.98))",backgroundSize:"200% 100%",borderTop:"2px solid rgba(180, 130, 255, 0.8)",borderImage:"repeating-linear-gradient(90deg, rgba(160, 100, 255, 0.5) 0, rgba(200, 150, 255, 1) 20px, rgba(160, 100, 255, 0.5) 40px) 1",boxShadow:`
      0 -5px 25px rgba(140, 70, 255, 0.6),
      0 -10px 50px rgba(124, 58, 237, 0.3),
      inset 0 4px 20px rgba(200, 160, 255, 0.2)
    `,animation:"echoRipple 3s infinite linear",backdropFilter:"blur(25px)"},brokenMoon:{background:"linear-gradient(to top, rgba(10, 10, 12, 0.95), rgba(30, 30, 35, 0.9))",borderTop:"2px dashed rgba(255, 255, 255, 0.4)",boxShadow:"0 -5px 25px rgba(255, 255, 255, 0.2), inset 0 0 10px rgba(255, 255, 255, 0.1)",backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.05) 10px, rgba(255,255,255,0.05) 11px)",backdropFilter:"blur(15px) grayscale(0.8)"},emptySky:{background:"#050505",borderTop:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 -10px 50px rgba(0, 0, 0, 1), 0 0 20px rgba(255, 255, 255, 0.1) inset",backdropFilter:"blur(50px) brightness(0.5)"},crystalMoon:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(200, 240, 255, 0.2))",borderTop:"1px solid rgba(255, 255, 255, 0.8)",boxShadow:"0 -5px 35px rgba(200, 240, 255, 0.6), inset 0 0 20px rgba(255, 255, 255, 0.4)",backdropFilter:"blur(25px) contrast(1.2)",animation:"crystalFacet 5s ease-in-out infinite"},arcticMoon:{background:"linear-gradient(to top, rgba(20, 40, 60, 0.9), rgba(50, 100, 150, 0.8))",borderTop:"1px solid rgba(150, 230, 255, 0.8)",boxShadow:"0 -8px 30px rgba(100, 200, 255, 0.5), inset 0 0 20px rgba(150, 230, 255, 0.3)",backdropFilter:"blur(20px) brightness(1.1)"},shatteredMoon:{background:"linear-gradient(to top, rgba(20, 20, 25, 0.95), rgba(50, 50, 60, 0.9))",borderTop:"1px double rgba(255, 255, 255, 0.5)",boxShadow:"0 -5px 25px rgba(255, 255, 255, 0.25), inset 0 0 10px rgba(255, 255, 255, 0.1)",backdropFilter:"blur(15px)"},cosmicVoyageMoon:{background:"linear-gradient(to top, rgba(30, 10, 60, 0.95), rgba(60, 20, 100, 0.9))",borderTop:"1px solid rgba(200, 100, 255, 0.7)",boxShadow:"0 -8px 35px rgba(150, 50, 255, 0.5), inset 0 0 15px rgba(200, 100, 255, 0.2)",backdropFilter:"blur(20px)"},nebulaDreamMoon:{background:"linear-gradient(to top, rgba(40, 20, 60, 0.95), rgba(80, 40, 100, 0.9))",borderTop:"1px solid rgba(255, 150, 255, 0.7)",boxShadow:"0 -8px 35px rgba(255, 100, 255, 0.5), 0 0 20px rgba(255, 100, 255, 0.2) inset",backdropFilter:"blur(20px)",animation:"nebulaSwirl 6s ease-in-out infinite"},pixelDreamMoon:{background:"linear-gradient(to bottom, #1e1b4b 60%, #0e7490 60%)",borderTop:"4px solid #3730a3",boxShadow:`
      0 -4px 0 #c7d2fe,              /* Top Highlight (Light Blue) */
      0 4px 0 #312e81,               /* Bottom Shadow (Deep Indigo) */
      0 8px 0 rgba(15, 23, 42, 0.5)  /* Drop Shadow */
    `,imageRendering:"pixelated"}};function yh(){const e=yc(),[t,n]=p.useState(null),s=vc()||typeof window<"u"&&window.innerWidth<=480,a=p.useMemo(()=>{if(t!=="arcticMoon")return[];const g=s?6:15;return Array.from({length:g}).map(()=>({size:Math.random()*2+1,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,duration:Math.random()*3+2,opacity:Math.random()*.8+.2}))},[t,s]),i=p.useMemo(()=>{if(t!=="arcticMoon")return[];const g=s?2:6;return Array.from({length:g}).map(()=>({top:-Math.random()*100-50,right:Math.random()*100-20,width:Math.random()*120+80,color:Math.random()>.5?"white":"#a5f3fc",glow:Math.random()>.5?"white":"cyan",duration:Math.random()*5+3,delay:Math.random()*10}))},[t,s]),l=p.useMemo(()=>{if(t!=="pixelDreamMoon")return null;const g=s?8:15,b=s?3:6,y=s?16:30,w=s?8:15,v=s?6:12;return{staticStars:Array.from({length:g}).map(()=>({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`})),twinkleStars:Array.from({length:b}).map(()=>({top:`${Math.random()*80+10}%`,left:`${Math.random()*90+5}%`,duration:$e(1,3)})),milkyStars:Array.from({length:y}).map(()=>({top:`${Math.random()*80}%`,left:`${Math.random()*80+10}%`,duration:$e(2,5)})),embers:Array.from({length:3}).map((S,j)=>({left:j,duration:$e(1,3),delay:j*.3})),grass:Array.from({length:w}).map(()=>({left:`${Math.random()*90+5}%`,duration:$e(1,3),delay:Math.random()})),fireflies:Array.from({length:v}).map(()=>({bottom:`${Math.random()*40}%`,left:`${Math.random()*100}%`,duration:$e(2,4),delay:$e(0,2),fx1:`${$e(-10,10)}px`,fy1:`${-$e(5,20)}px`,fx2:`${$e(-10,10)}px`,fy2:`${-$e(10,20)}px`,fx3:`${$e(-10,10)}px`,fy3:`${-$e(3,15)}px`}))}},[t,s]),c=p.useMemo(()=>{if(t!=="superBlueBloodMoon")return null;const g=s?8:15;return{stars:Array.from({length:g}).map(()=>({size:$e(1,3),top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,floatDuration:$e(10,20),twinkleDuration:$e(.5,1.5)}))}},[t,s]),u=p.useMemo(()=>{if(t!=="superBloodMoon")return null;const g=s?4:8;return{mist:Array.from({length:g}).map(()=>({size:$e(50,150),left:`${Math.random()*100}%`,duration:$e(10,20)}))}},[t,s]),d=p.useMemo(()=>{if(t!=="nebulaDreamMoon")return null;const g=s?8:15;return{stardust:Array.from({length:g}).map((b,y)=>({size:$e(1,3),top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,opacity:$e(.2,1),duration:$e(1,3),delay:$e(0,1),glow:$e(2,6),color:y%2===0?"#ff00ff":"#00ffff"}))}},[t,s]),h=p.useMemo(()=>{if(t!=="cosmicVoyageMoon")return null;const g=s?8:15,b=s?10:20;return{warpStars:Array.from({length:g}).map(()=>({height:$e(10,40),top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,duration:$e(1.5,3.5),delay:$e(0,3)})),staticStars:Array.from({length:b}).map(()=>({top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,duration:$e(1,3)}))}},[t,s]),{createRipple:f,RippleEffect:m}=WO();p.useEffect(()=>{const g=document.documentElement.getAttribute("data-mythic-theme");n(g);const b=new MutationObserver(()=>{const y=document.documentElement.getAttribute("data-mythic-theme");n(y)});return b.observe(document.documentElement,{attributes:!0,attributeFilter:["data-mythic-theme"]}),()=>b.disconnect()},[]);const x=t&&tb[t]?{...tb[t]}:void 0;if(x){const g=x.animation||"";x.animation=`mythicThemeEntrance 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards${g?`, ${g}`:""}`}return o.jsxs("nav",{className:Y("mythic-bottom-nav fixed bottom-0 left-0 right-0 border-t z-20",!t&&"bg-background"),style:x,children:[t==="hybridEclipse"&&o.jsx("div",{"aria-hidden":"true",className:"absolute top-0 left-0 right-0 h-[3px] pointer-events-none",style:{background:"linear-gradient(90deg, transparent, rgba(255, 220, 120, 0.8) 50%, transparent)",animation:"goldenWave 3s ease-in-out infinite"}}),o.jsx(HO,{data:l}),o.jsx(GO,{data:c}),o.jsx(KO,{data:u}),o.jsx(qO,{data:d}),o.jsx(YO,{data:h}),t==="arcticMoon"&&o.jsxs("div",{"aria-hidden":"true",className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 2.5s ease-out forwards"},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0b1026] via-[#1b2735] to-[#090a0f]"}),o.jsx("div",{className:"absolute inset-0 opacity-60",style:{backgroundImage:"radial-gradient(1px 1px at 10% 10%, white 10%, transparent 0), radial-gradient(1.5px 1.5px at 50% 40%, white 10%, transparent 0), radial-gradient(2px 2px at 80% 20%, white 10%, transparent 0), radial-gradient(1px 1px at 30% 70%, white 20%, transparent 0)",backgroundSize:"200px 200px"}}),o.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-color-dodge",style:{background:"linear-gradient(120deg, rgba(0,255,150,0.3), rgba(0,0,0,0), rgba(150,0,255,0.3))",backgroundSize:"200% 200%",animation:"auroraShift 15s ease-in-out infinite"}}),o.jsx("div",{className:"absolute inset-0 opacity-80 mix-blend-screen",style:{background:"radial-gradient(ellipse at 50% 100%, rgba(0, 255, 180, 0.5), transparent 70%), linear-gradient(90deg, transparent, rgba(50, 255, 200, 0.3), transparent)",filter:"blur(15px)",transformOrigin:"bottom center",animation:"auroraWave 8s ease-in-out infinite"}}),o.jsx("div",{className:"absolute inset-0 opacity-70 mix-blend-screen",style:{background:"radial-gradient(ellipse at 80% 80%, rgba(220, 50, 255, 0.4), transparent 60%)",filter:"blur(20px)",transformOrigin:"bottom center",animation:"auroraWave 12s ease-in-out infinite reverse"}}),o.jsx("div",{className:"absolute top-0 left-0 w-[200%] h-full opacity-50 mix-blend-overlay",style:{background:"linear-gradient(90deg, transparent, rgba(100, 255, 218, 0.8), rgba(180, 100, 255, 0.6), transparent)",transform:"skewX(-20deg)",backgroundSize:"200% 100%",animation:"borderFlow 6s linear infinite"}}),a.map((g,b)=>o.jsx("div",{className:"absolute bg-white rounded-full blur-[0.5px]",style:{width:`${g.size}px`,height:`${g.size}px`,top:g.top,left:g.left,animation:`twinkle ${g.duration}s ease-in-out infinite`,opacity:g.opacity}},b)),o.jsx("div",{className:"absolute inset-0 z-40 mix-blend-overlay pointer-events-none",style:{background:"radial-gradient(circle at 50% -20%, rgba(200, 255, 255, 0.8), transparent 70%)",animation:"auroraFlare 18s ease-in-out infinite"}}),i.map((g,b)=>o.jsx("div",{className:"absolute z-20",style:{top:`${g.top}%`,right:`${g.right}%`,width:`${g.width}px`,height:"2px",opacity:0,background:`linear-gradient(to right, transparent, ${g.color}, transparent)`,filter:`drop-shadow(0 0 3px ${g.glow})`,animation:`shootingStar ${g.duration}s linear infinite ${g.delay}s both`,transform:"rotate(-45deg)"}},b)),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[40px] z-10",style:{background:"linear-gradient(to top, rgba(100, 200, 255, 0.2), transparent)"}}),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-50 opacity-90",style:{background:"linear-gradient(90deg, transparent, #00ffcc, #bd00ff, #00ffcc, transparent)",backgroundSize:"200% 100%",animation:"borderFlow 3s linear infinite",boxShadow:"0 0 10px rgba(0, 255, 200, 0.6), 0 0 20px rgba(189, 0, 255, 0.4)"}}),o.jsx("div",{className:"absolute top-[2px] left-0 right-0 h-[1px] z-40 opacity-50 mix-blend-overlay",style:{background:"white"}})]}),t==="echoMoon"&&o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[o.jsx("div",{className:"absolute inset-0",style:{background:"linear-gradient(to top, rgba(20, 10, 40, 0.6), transparent)"}}),o.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[o.jsx("div",{className:"absolute rounded-full border border-white/30",style:{width:"100px",height:"100px",animation:"waterRipple 3s infinite ease-out"}}),o.jsx("div",{className:"absolute rounded-full border border-white/20",style:{width:"100px",height:"100px",animation:"waterRipple 3s infinite ease-out 1s"}}),o.jsx("div",{className:"absolute rounded-full border border-white/10",style:{width:"100px",height:"100px",animation:"waterRipple 3s infinite ease-out 2s"}})]}),o.jsx("div",{className:"absolute left-[20%] top-[40%] rounded-full border border-white/20",style:{width:"50px",height:"50px",animation:"waterRipple 4s infinite ease-out 0.5s"}}),o.jsx("div",{className:"absolute right-[20%] top-[30%] rounded-full border border-white/20",style:{width:"60px",height:"60px",animation:"waterRipple 5s infinite ease-out 2.5s"}}),[...Array(5)].map((g,b)=>o.jsx("div",{className:"absolute rounded-full bg-white blur-[1px]",style:{width:Math.random()*3+1+"px",height:Math.random()*3+1+"px",top:Math.random()*100+"%",left:Math.random()*100+"%",animation:`echoParticle ${Math.random()*2+2}s infinite ease-in-out ${Math.random()}s`}},b)),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[3px] z-20",style:{background:"linear-gradient(90deg, rgba(160, 100, 255, 0), rgba(200, 160, 255, 0.8), rgba(255, 255, 255, 1), rgba(200, 160, 255, 0.8), rgba(160, 100, 255, 0))",backgroundSize:"200% 100%",animation:"liquidBorder 3s linear infinite",boxShadow:"0 2px 10px rgba(180, 130, 255, 0.5)"}})]}),t==="hybridEclipse"&&o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[o.jsx("div",{className:"absolute inset-0 bg-[#0a0500]/95"}),o.jsx("div",{className:"absolute inset-y-0 left-0 w-[200%] opacity-40 mix-blend-screen",style:{backgroundImage:"linear-gradient(90deg, transparent, rgba(255, 180, 50, 0.3), rgba(255, 220, 100, 0.5), rgba(255, 180, 50, 0.3), transparent)",backgroundSize:"50% 100%",backgroundRepeat:"repeat-x",animation:"mistScroll 10s linear infinite"}}),o.jsx("div",{className:"absolute inset-y-0 left-0 w-[200%] opacity-30 mix-blend-screen",style:{backgroundImage:"linear-gradient(90deg, transparent, rgba(255, 140, 0, 0.2), transparent)",backgroundSize:"25% 100%",backgroundRepeat:"repeat-x",animation:"mistScroll 7s linear infinite reverse"}}),o.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E")`,mixBlendMode:"overlay"}}),[...Array(8)].map((g,b)=>o.jsx("div",{className:"absolute rounded-full bg-yellow-100 blur-[1px]",style:{width:Math.random()*2+1+"px",height:Math.random()*2+1+"px",top:Math.random()*100+"%",left:Math.random()*100+"%",boxShadow:"0 0 5px rgba(255, 200, 50, 0.8)",animation:`starFloat ${Math.random()*5+3}s infinite ease-in-out ${Math.random()}s`}},b)),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-20",style:{background:"linear-gradient(90deg, transparent, rgba(200, 120, 20, 0), rgba(255, 200, 100, 1), rgba(200, 120, 20, 0), transparent)",backgroundSize:"200% 100%",animation:"flowRight 4s linear infinite",boxShadow:"0 1px 15px rgba(255, 160, 50, 0.5)"}})]}),t==="brokenMoon"&&o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[o.jsx("div",{className:"absolute inset-0 bg-[#0c0c16]/98"}),o.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-overlay",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent 0, transparent 20px, rgba(160, 160, 200, 0.1) 21px, transparent 22px), repeating-linear-gradient(-45deg, transparent 0, transparent 35px, rgba(160, 160, 200, 0.1) 36px, transparent 37px)",animation:"voidCracks 5s ease-in-out infinite"}}),o.jsx("div",{className:"absolute inset-0 mix-blend-color-dodge opacity-20",style:{background:"linear-gradient(90deg, transparent, rgba(100, 100, 255, 0.2), transparent)",backgroundSize:"200% 100%",animation:"flowRight 0.2s steps(4) infinite",clipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)"}}),[...Array(10)].map((g,b)=>o.jsx("div",{className:"absolute bg-white/40",style:{width:Math.random()*4+2+"px",height:Math.random()*4+2+"px",top:Math.random()*100+"%",left:Math.random()*100+"%",clipPath:"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)",animation:`shardFloat ${Math.random()*4+2}s linear infinite ${Math.random()*2}s`}},b)),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-20",style:{background:"linear-gradient(90deg, transparent, rgba(150, 150, 200, 0.5), rgba(200, 200, 255, 0.9), rgba(150, 150, 200, 0.5), transparent)",boxShadow:"0 0 10px rgba(180, 180, 255, 0.4)",animation:"glitchBorder 3s infinite"}})]}),t==="crystalMoon"&&o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",children:[o.jsx("div",{className:"absolute inset-0 bg-[#0f1525]/90"}),o.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-screen",style:{background:"linear-gradient(135deg, rgba(200, 240, 255, 0.1), rgba(255, 200, 250, 0.15), rgba(200, 240, 255, 0.1), transparent)",backgroundSize:"200% 200%",animation:"prismReflect 5s ease-in-out infinite"}}),[...Array(6)].map((g,b)=>o.jsx("div",{className:"absolute bg-white/20 border border-white/40",style:{width:Math.random()*8+4+"px",height:Math.random()*8+4+"px",top:Math.random()*80+10+"%",left:Math.random()*90+5+"%",clipPath:"polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)",animation:`crystalFloat ${Math.random()*4+3}s ease-in-out infinite ${Math.random()*2}s`,backdropFilter:"blur(2px)"}},b)),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] z-20 bg-white/40"}),o.jsx("div",{className:"absolute top-[-1px] left-0 right-0 h-[3px] z-21 mix-blend-overlay",style:{background:"linear-gradient(90deg, transparent, rgba(255, 0, 0, 0.5), rgba(255, 165, 0, 0.5), rgba(255, 255, 0, 0.5), rgba(0, 255, 0, 0.5), rgba(0, 0, 255, 0.5), rgba(238, 130, 238, 0.5), transparent)",backgroundSize:"200% 100%",animation:"prismFlow 3s linear infinite, rainbowBorder 6s linear infinite"}})]}),t==="stillMoon"&&o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 2s ease-out forwards"},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#b3e5fc] via-[#e1f5fe] to-[#ffffff]"}),o.jsx("div",{className:"absolute inset-0 opacity-40 mix-blend-multiply",style:{backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIj48ZmlsdGVyIGlkPSJnoiPjxmZVR1cmJ1bGVuY2UgdHlwZT0iZnJhY3RhbE5vaXNlIiBiYXNlRnJlcXVlbmN5PSIwLjgiIG51bU9jdGF2ZXM9IjMiIHN0aXRjaFRpbGVzPSJzdGl0Y2giLz48L2ZpbHRlcj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWx0ZXI9InVybCgjZykiIG9wYWNpdHk9IjAuNSIvPjwvc3ZnPg==')",filter:"contrast(180%)"}}),o.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[50%] h-[150%] bg-white/20 backdrop-blur-sm z-10",style:{clipPath:"polygon(0 0, 100% 0, 80% 100%, 0 100%)",boxShadow:"inset 0 0 20px rgba(255,255,255,0.5)"}}),o.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-[60%] h-[150%] bg-white/10 backdrop-blur-md z-10",style:{clipPath:"polygon(20% 0, 100% 0, 100% 100%, 0 100%)",borderLeft:"1px solid rgba(255,255,255,0.4)"}}),[...Array(20)].map((g,b)=>o.jsx("div",{className:"absolute bg-white z-20",style:{width:Math.random()<.2?"3px":"1.5px",height:Math.random()<.2?"3px":"1.5px",top:Math.random()*100+"%",left:Math.random()*100+"%",opacity:Math.random()*.6+.4,boxShadow:"0 0 4px rgba(255,255,255,0.9)",animation:`pulse ${Math.random()*4+2}s ease-in-out infinite alternate`}},b)),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-30 bg-white",style:{boxShadow:"0 0 15px rgba(200, 240, 255, 1), 0 0 30px rgba(200, 240, 255, 0.6)"}})]}),(t==="brokenMoon"||t==="shatteredMoon")&&o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 2s ease-out forwards"},children:[o.jsx("div",{className:"absolute inset-0 bg-[#020205]"}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[95%] h-[12px] z-20",style:{background:"linear-gradient(90deg, #2e004d, #ffffff, #2e004d)",clipPath:"polygon(0% 45%, 10% 30%, 20% 60%, 30% 35%, 40% 65%, 50% 20%, 60% 70%, 70% 30%, 80% 60%, 90% 40%, 100% 50%, 100% 55%, 90% 45%, 80% 65%, 70% 35%, 60% 75%, 50% 25%, 40% 70%, 30% 40%, 20% 65%, 10% 35%, 0% 55%)",filter:"drop-shadow(0 0 10px rgba(100, 150, 255, 0.8)) drop-shadow(0 0 20px rgba(180, 50, 255, 0.6))",animation:"pulse 3s ease-in-out infinite alternate"},children:o.jsx("div",{className:"absolute inset-0 bg-white opacity-80 mix-blend-overlay",style:{animation:"flashPulse 0.1s infinite alternate"}})}),o.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full h-[60px] z-10 opacity-30",style:{background:"radial-gradient(ellipse at 50% 50%, rgba(100, 200, 255, 0.4) 0%, transparent 70%)",filter:"blur(10px)",animation:"pulse 4s ease-in-out infinite"}}),[...Array(20)].map((g,b)=>o.jsx("div",{className:"absolute bg-white rounded-full z-30",style:{width:Math.random()<.5?"1px":"2px",height:Math.random()<.5?"1px":"2px",top:Math.random()*100+"%",left:Math.random()*100+"%",boxShadow:"0 0 4px white",opacity:Math.random()*.7+.3,animation:`twinkle ${Math.random()*2+1}s infinite alternate`}},b)),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-[#a855f7] to-transparent opacity-50"}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-[#3b82f6] to-transparent opacity-50"})]}),t==="lunarTransientPhenomena"&&o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 1.5s ease-out forwards"},children:[o.jsx("div",{className:"absolute inset-0 bg-[#050510]/95 backdrop-blur-xl"}),o.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px)",backgroundSize:"20px 20px",maskImage:"radial-gradient(circle at 50% 50%, black 40%, transparent 80%)"}}),[...Array(6)].map((g,b)=>o.jsx("div",{className:"absolute top-0 h-[2px] bg-gradient-to-r from-transparent via-[#00ffcc] to-transparent",style:{width:"30%",top:b*20+"%",opacity:.7,animation:`dataStream ${Math.random()*2+2}s linear infinite ${Math.random()*2}s`,boxShadow:"0 0 8px #00ffcc"}},b)),o.jsx("div",{className:"absolute top-0 h-[3px] w-[50%] z-20",style:{background:"linear-gradient(90deg, transparent, #ff00ff, #00ffff, transparent)",animation:"laserScan 3s linear infinite",boxShadow:"0 0 15px rgba(255, 0, 255, 0.8)"}}),o.jsx("div",{className:"absolute inset-0 bg-white/10 mix-blend-overlay",style:{animation:"flashPulse 4s infinite random"}}),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-white/20"})]}),t==="emptySky"&&o.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-t-[inherit] pointer-events-none",style:{animation:"mythicThemeEntrance 4s ease-out forwards"},children:[o.jsx("div",{className:"absolute inset-0 bg-black"}),o.jsx("div",{className:"absolute inset-0 opacity-60",style:{background:"radial-gradient(circle at 50% 50%, rgba(70, 0, 150, 0.2), transparent 60%)",filter:"blur(20px)"}}),o.jsx("div",{className:"absolute inset-0 opacity-80",style:{backgroundImage:"radial-gradient(1px 1px at 10% 10%, white 10%, transparent 0), radial-gradient(1.5px 1.5px at 80% 40%, #b080ff 10%, transparent 0), radial-gradient(2px 2px at 40% 80%, white 10%, transparent 0)",backgroundSize:"300px 300px",animation:"accretionSpin 120s linear infinite"}}),o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] z-10 pointer-events-none rounded-full",style:{background:"radial-gradient(circle, transparent 30%, rgba(150, 50, 255, 0.05) 40%, transparent 70%)",backdropFilter:"blur(2px) contrast(1.1)",transform:"scale(1.2)"}}),o.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[300px] h-[300px] pointer-events-none z-40 flex items-center justify-center scale-60",children:[o.jsx("div",{className:"absolute w-[280px] h-[280px] rounded-full opacity-60 mix-blend-screen",style:{background:"radial-gradient(circle at 50% 50%, transparent 60%, rgba(120, 50, 255, 0.6) 65%, transparent 70%)",animation:"diskPulse 4s ease-in-out infinite",filter:"blur(4px)"}}),o.jsx("div",{className:"absolute w-[160px] h-[160px] rounded-full z-20",style:{background:"conic-gradient(from 0deg, #4c1d95 0%, #8b5cf6 25%, #ffffff 50%, #8b5cf6 75%, #4c1d95 100%)",maskImage:"radial-gradient(transparent 64%, black 66%)",WebkitMaskImage:"radial-gradient(transparent 64%, black 66%)",animation:"accretionSpin 0.9s linear infinite",boxShadow:"0 0 30px rgba(139, 92, 246, 0.6)"}}),o.jsx("div",{className:"absolute w-[150px] h-[150px] rounded-full z-10 bg-black box-border border border-purple-500/30"})]}),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[2px] z-30 opacity-100",style:{background:"linear-gradient(90deg, transparent 0%, #4c1d95 20%, #8b5cf6 45%, #ffffff 50%, #8b5cf6 55%, #4c1d95 80%, transparent 100%)",backgroundSize:"200% 100%",animation:"borderFlow 0.4s linear infinite",boxShadow:"0 0 15px rgba(139, 92, 246, 0.7)"}}),o.jsx("div",{className:"absolute top-0 left-0 right-0 h-[40px] z-20 opacity-30 pointer-events-none",style:{background:"radial-gradient(ellipse at 50% 0%, rgba(150, 50, 255, 0.5), transparent 70%)"}}),[...Array(12)].map((g,b)=>o.jsx("div",{className:"absolute bg-zinc-800 rounded-full z-20 opacity-80",style:{width:Math.random()*4+2+"px",height:Math.random()*3+2+"px",top:Math.random()*100+"%",left:Math.random()*100+"%",animation:`singularFloat ${Math.random()*15+10}s linear infinite`,boxShadow:"inset 1px 1px 2px rgba(0,0,0,0.8)"}},b))]}),o.jsx("div",{className:"flex justify-around items-center h-16 max-w-md mx-auto relative z-50",children:XO.map(({path:g,icon:b,label:y})=>{const w=e.pathname===g||g!=="/"&&e.pathname.startsWith(g);return o.jsxs(nn,{to:g,className:Y("mythic-nav-item flex flex-col items-center justify-center gap-1 px-3 py-2 transition-colors min-w-[60px] relative overflow-hidden",w?"text-primary bg-primary/10 rounded-lg mythic-nav-active":"text-muted-foreground hover:text-foreground hover:bg-accent rounded-lg"),onMouseEnter:f,style:t==="cosmicVoyageMoon"&&w?{background:"transparent"}:void 0,children:[o.jsx(m,{}),t==="cosmicVoyageMoon"&&w&&o.jsx("div",{className:"absolute inset-0 rounded-lg -z-10",style:{background:"linear-gradient(45deg, transparent, rgba(128, 144, 192, 0.3), transparent)",boxShadow:"0 0 15px rgba(100, 100, 255, 0.4)",animation:"pulse 2s ease-in-out infinite"}}),t==="superBloodMoon"&&w&&o.jsx(o.Fragment,{children:o.jsx("div",{className:"absolute inset-0 rounded-lg -z-10",style:{boxShadow:"0 0 20px rgba(220, 20, 60, 0.5), inset 0 0 10px rgba(255, 50, 80, 0.2)",animation:"bloodGlow 2s ease-in-out infinite"}})}),t==="lunarTransientPhenomena"&&w&&o.jsx("div",{className:"absolute inset-0 rounded-lg -z-10",style:{boxShadow:"0 0 15px rgba(200, 168, 248, 0.6), 0 0 5px rgba(255, 255, 255, 0.8)",animation:"electricSpark 0.5s steps(5) infinite"}}),t==="crystalMoon"&&w&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute inset-0 rounded-lg -z-10",style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(220, 240, 255, 0.12), rgba(200, 230, 255, 0.15), rgba(240, 250, 255, 0.1))",boxShadow:"inset 0 0 15px rgba(255, 255, 255, 0.3), 0 0 20px rgba(220, 240, 255, 0.4)",animation:"crystalSparkle 3s ease-in-out infinite"}}),o.jsx("div",{className:"absolute inset-0 rounded-lg -z-10",style:{background:"radial-gradient(circle at 30% 50%, rgba(255, 255, 255, 0.2) 0%, transparent 50%), radial-gradient(circle at 70% 50%, rgba(200, 230, 255, 0.15) 0%, transparent 50%)",animation:"crystalSparkle 3s ease-in-out infinite reverse"}})]}),t==="nebulaDreamMoon"&&w&&o.jsx("div",{className:"absolute inset-0 rounded-lg -z-10 overflow-hidden",children:o.jsx("div",{style:{position:"absolute",inset:"-20%",background:"radial-gradient(circle, rgba(184, 136, 216, 0.3) 0%, transparent 70%)",animation:"nebulaRotate 8s linear infinite"}})}),t==="emptySky"&&w&&o.jsx("div",{className:"absolute inset-0 rounded-lg -z-10",style:{background:"radial-gradient(circle at center, rgba(40, 40, 60, 0.3) 0%, rgba(20, 20, 40, 0.2) 50%, transparent 100%)",boxShadow:"inset 0 0 15px rgba(10, 10, 25, 0.5), 0 0 10px rgba(30, 30, 50, 0.4)",animation:"voidDrift 4s ease-in-out infinite"}}),t==="pixelDreamMoon"&&w&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute inset-0 -z-10",style:{borderRadius:"8px",border:"3px solid #818cf8",background:"linear-gradient(135deg, rgba(30, 27, 75, 0.8), rgba(14, 116, 144, 0.6))",boxShadow:`
                        0 0 20px rgba(129, 140, 248, 0.8),
                        inset 0 0 15px rgba(129, 140, 248, 0.3),
                        0 4px 0 rgba(49, 46, 129, 0.5)
                      `,imageRendering:"pixelated",animation:"pixelPulse 2s steps(4) infinite"}}),[{top:"-2px",left:"-2px"},{top:"-2px",right:"-2px"},{bottom:"-2px",left:"-2px"},{bottom:"-2px",right:"-2px"}].map((v,S)=>o.jsx("div",{className:"absolute w-[4px] h-[4px] bg-[#06b6d4] -z-10",style:{...v,boxShadow:"0 0 6px #06b6d4",animation:`pixelCornerBlink ${1+S*.2}s steps(2) infinite`}},S)),[...Array(8)].map((v,S)=>o.jsx("div",{className:"absolute w-[2px] h-[2px] -z-10",style:{left:`${20+S*10}%`,top:`${10+S%3*30}%`,backgroundColor:S%2===0?"#818cf8":"#06b6d4",boxShadow:`0 0 4px ${S%2===0?"#818cf8":"#06b6d4"}`,animation:`pixelFloat ${2+S*.3}s ease-in-out infinite`,animationDelay:`${S*.1}s`,imageRendering:"pixelated"}},S)),o.jsx("div",{className:"absolute -top-[14px] left-1/2 -translate-x-1/2 w-0 h-0",style:{borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"8px solid #818cf8",filter:"drop-shadow(0 0 6px #818cf8)",animation:"pixelBounce 1s steps(4) infinite"}})]}),o.jsx("style",{children:`
                @keyframes pixelPulse {
                  0%, 100% { transform: scale(1); opacity: 1; }
                  50% { transform: scale(1.05); opacity: 0.9; }
                }
                @keyframes pixelCornerBlink {
                  0%, 100% { opacity: 1; }
                  50% { opacity: 0.3; }
                }
                @keyframes pixelFloat {
                  0%, 100% { transform: translateY(0px); }
                  50% { transform: translateY(-4px); }
                }
                @keyframes pixelBounce {
                  0%, 100% { transform: translate(-50%, 0); }
                  50% { transform: translate(-50%, -3px); }
                }
              `}),o.jsx(b,{className:Y("w-5 h-5 transition-all duration-300",t&&w&&"drop-shadow-lg"),style:t&&w?{filter:t==="superBloodMoon"?"drop-shadow(0 0 6px rgba(220, 20, 60, 0.8))":t==="emptySky"?"drop-shadow(0 0 5px rgba(60, 60, 80, 0.7))":t==="lunarTransientPhenomena"?"drop-shadow(0 0 6px rgba(200, 168, 248, 0.8))":t==="crystalMoon"?"drop-shadow(0 0 6px rgba(224, 240, 255, 0.8))":t==="arcticMoon"?"drop-shadow(0 0 6px rgba(144, 220, 255, 0.8))":t==="nebulaDreamMoon"?"drop-shadow(0 0 6px rgba(184, 136, 216, 0.8))":t==="pixelDreamMoon"?"drop-shadow(3px 3px 0 rgba(0,0,0,1)) drop-shadow(0 0 8px rgba(129,140,248,0.9))":void 0,animation:t==="lunarTransientPhenomena"?"iconFlicker 0.3s steps(3) infinite":t==="pixelDreamMoon"?"pixelIconBob 0.6s steps(2) infinite":void 0,color:t==="pixelDreamMoon"&&w?"#ffffff":void 0,imageRendering:t==="pixelDreamMoon"?"pixelated":void 0}:void 0}),o.jsx("style",{children:`
                @keyframes pixelIconBob {
                  0%, 100% { transform: translateY(0); }
                  50% { transform: translateY(-2px); }
                }
              `}),o.jsx("span",{className:Y("text-[10px] font-medium transition-all duration-300",t==="pixelDreamMoon"&&w?"text-[#818cf8] font-['Press_Start_2P'] text-[8px] drop-shadow-[0_0_4px_rgba(129,140,248,0.8)]":t==="pixelDreamMoon"&&!w?"text-white/80 font-['Press_Start_2P'] text-[6px]":""),children:y})]},g)})})]})}function QO({children:e}){return o.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[o.jsx("header",{className:"border-b border-border sticky top-0 bg-background z-10",children:o.jsx("div",{className:"container-app py-3",children:o.jsxs(nn,{to:"/",className:"text-lg font-semibold",children:["Dream book"," ",o.jsx("span",{className:"text-muted-foreground font-normal",children:"by Bon"})]})})}),o.jsx("main",{className:"flex-1 container-app pb-24",children:e}),o.jsx(yh,{})]})}var Tr=function(){return Tr=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Tr.apply(this,arguments)};function Mo(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function JO(e,t,n,r){function s(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{u(r.next(d))}catch(h){i(h)}}function c(d){try{u(r.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})}function ZO(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}const eI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Vg extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class tI extends Vg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class nb extends Vg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class rb extends Vg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Cp;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Cp||(Cp={}));class nI{constructor(t,{headers:n={},customFetch:r,region:s=Cp.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=eI(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return JO(this,arguments,void 0,function*(n,r={}){var s;let a,i;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=r;let f={},{region:m}=r;m||(m=this.region);const x=new URL(`${this.url}/${n}`);m&&m!=="any"&&(f["x-region"]=m,x.searchParams.set("forceFunctionRegion",m));let g;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=u):typeof u=="string"?(f["Content-Type"]="text/plain",g=u):typeof FormData<"u"&&u instanceof FormData?g=u:(f["Content-Type"]="application/json",g=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?g=JSON.stringify(u):g=u;let b=d;h&&(i=new AbortController,a=setTimeout(()=>i.abort(),h),d?(b=i.signal,d.addEventListener("abort",()=>i.abort())):b=i.signal);const y=yield this.fetch(x.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:g,signal:b}).catch(j=>{throw new tI(j)}),w=y.headers.get("x-relay-error");if(w&&w==="true")throw new nb(y);if(!y.ok)throw new rb(y);let v=((s=y.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return v==="application/json"?S=yield y.json():v==="application/octet-stream"||v==="application/pdf"?S=yield y.blob():v==="text/event-stream"?S=y:v==="multipart/form-data"?S=yield y.formData():S=yield y.text(),{data:S,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof rb||l instanceof nb?l.context:void 0}}finally{a&&clearTimeout(a)}})}}var rI=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},sI=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{let i=null,l=null,c=null,u=a.status,d=a.statusText;if(a.ok){var h,f;if(n.method!=="HEAD"){var m;const y=await a.text();y===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((m=n.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?l=y:l=JSON.parse(y))}const g=(h=n.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),b=(f=a.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&b&&b.length>1&&(c=parseInt(b[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(l)&&(l.length>1?(i={code:"PGRST116",details:`Results contain ${l.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},l=null,c=null,u=406,d="Not Acceptable"):l.length===1?l=l[0]:l=null)}else{var x;const g=await a.text();try{i=JSON.parse(g),Array.isArray(i)&&a.status===404&&(l=[],i=null,u=200,d="OK")}catch{a.status===404&&g===""?(u=204,d="No Content"):i={message:g}}if(i&&n.isMaybeSingle&&(!(i==null||(x=i.details)===null||x===void 0)&&x.includes("0 rows"))&&(i=null,u=200,d="OK"),i&&n.shouldThrowOnError)throw new rI(i)}return{error:i,data:l,count:c,status:u,statusText:d}});return this.shouldThrowOnError||(s=s.catch(a=>{var i;let l="";const c=a==null?void 0:a.cause;if(c){var u,d,h,f;const x=(u=c==null?void 0:c.message)!==null&&u!==void 0?u:"",g=(d=c==null?void 0:c.code)!==null&&d!==void 0?d:"";l=`${(h=a==null?void 0:a.name)!==null&&h!==void 0?h:"FetchError"}: ${a==null?void 0:a.message}`,l+=`

Caused by: ${(f=c==null?void 0:c.name)!==null&&f!==void 0?f:"Error"}: ${x}`,g&&(l+=` (${g})`),c!=null&&c.stack&&(l+=`
${c.stack}`)}else{var m;l=(m=a==null?void 0:a.stack)!==null&&m!==void 0?m:""}return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:l,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}},aI=class extends sI{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var i;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(i=this.headers.get("Accept"))!==null&&i!==void 0?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const sb=new RegExp("[,()]");var gi=class extends aI{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&sb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&sb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},iI=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:n=!1,count:r}=t??{},s=n?"HEAD":"GET";let a=!1;const i=(e??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join(""),{url:l,headers:c}=this.cloneRequestState();return l.searchParams.set("select",i),r&&c.append("Prefer",`count=${r}`),new gi({method:s,url:l,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;const s="POST",{url:a,headers:i}=this.cloneRequestState();if(t&&i.append("Prefer",`count=${t}`),n||i.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);a.searchParams.set("columns",c.join(","))}}return new gi({method:s,url:a,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var a;const i="POST",{url:l,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&l.searchParams.set("on_conflict",t),r&&c.append("Prefer",`count=${r}`),s||c.append("Prefer","missing=default"),Array.isArray(e)){const u=e.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);l.searchParams.set("columns",d.join(","))}}return new gi({method:i,url:l,headers:c,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var n;const r="PATCH",{url:s,headers:a}=this.cloneRequestState();return t&&a.append("Prefer",`count=${t}`),new gi({method:r,url:s,headers:a,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return e&&s.append("Prefer",`count=${e}`),new gi({method:n,url:r,headers:s,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},oI=class ek{constructor(t,{headers:n={},schema:r,fetch:s}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=s}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new iI(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ek(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:s=!1,count:a}={}){var i;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;const d=m=>m!==null&&typeof m=="object"&&(!Array.isArray(m)||m.some(d)),h=r&&Object.values(n).some(d);h?(l="POST",u=n):r||s?(l=r?"HEAD":"GET",Object.entries(n).filter(([m,x])=>x!==void 0).map(([m,x])=>[m,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([m,x])=>{c.searchParams.append(m,x)})):(l="POST",u=n);const f=new Headers(this.headers);return h?f.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&f.set("Prefer",`count=${a}`),new gi({method:l,url:c,headers:f,schema:this.schemaName,body:u,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};class lI{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const cI="2.91.0",uI=`realtime-js/${cI}`,dI="1.0.0",tk="2.0.0",ab=tk,Np=1e4,hI=1e3,fI=100;var ws;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ws||(ws={}));var vt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(vt||(vt={}));var lr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(lr||(lr={}));var Ep;(function(e){e.websocket="websocket"})(Ep||(Ep={}));var wa;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(wa||(wa={}));class mI{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(t){var n,r;const s=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},i=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,i)}_encodeUserBroadcastPush(t,n,r){var s,a;const i=t.topic,l=(s=t.ref)!==null&&s!==void 0?s:"",c=(a=t.join_ref)!==null&&a!==void 0?a:"",u=t.payload.event,d=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(d).length===0?"":JSON.stringify(d);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`ref length ${l.length} exceeds maximum of 255`);if(i.length>255)throw new Error(`topic length ${i.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+i.length+u.length+h.length,m=new ArrayBuffer(this.HEADER_LENGTH+f);let x=new DataView(m),g=0;x.setUint8(g++,this.KINDS.userBroadcastPush),x.setUint8(g++,c.length),x.setUint8(g++,l.length),x.setUint8(g++,i.length),x.setUint8(g++,u.length),x.setUint8(g++,h.length),x.setUint8(g++,n),Array.from(c,y=>x.setUint8(g++,y.charCodeAt(0))),Array.from(l,y=>x.setUint8(g++,y.charCodeAt(0))),Array.from(i,y=>x.setUint8(g++,y.charCodeAt(0))),Array.from(u,y=>x.setUint8(g++,y.charCodeAt(0))),Array.from(h,y=>x.setUint8(g++,y.charCodeAt(0)));var b=new Uint8Array(m.byteLength+r.byteLength);return b.set(new Uint8Array(m),0),b.set(new Uint8Array(r),m.byteLength),b.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){const r=JSON.parse(t),[s,a,i,l,c]=r;return n({join_ref:s,ref:a,topic:i,event:l,payload:c})}return n({})}_binaryDecode(t){const n=new DataView(t),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,s)}}_decodeUserBroadcast(t,n,r){const s=n.getUint8(1),a=n.getUint8(2),i=n.getUint8(3),l=n.getUint8(4);let c=this.HEADER_LENGTH+4;const u=r.decode(t.slice(c,c+s));c=c+s;const d=r.decode(t.slice(c,c+a));c=c+a;const h=r.decode(t.slice(c,c+i));c=c+i;const f=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,x={type:this.BROADCAST_EVENT,event:d,payload:m};return i>0&&(x.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:x}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t==null?void 0:t.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}}class nk{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Le;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Le||(Le={}));const ib=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((a,i)=>(a[i]=pI(i,e,t,s),a),{}):{}},pI=(e,t,n,r)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,i=n[e];return a&&!r.includes(a)?rk(a,i):Tp(i)},rk=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return xI(t,n)}switch(e){case Le.bool:return gI(t);case Le.float4:case Le.float8:case Le.int2:case Le.int4:case Le.int8:case Le.numeric:case Le.oid:return yI(t);case Le.json:case Le.jsonb:return vI(t);case Le.timestamp:return bI(t);case Le.abstime:case Le.date:case Le.daterange:case Le.int4range:case Le.int8range:case Le.money:case Le.reltime:case Le.text:case Le.time:case Le.timestamptz:case Le.timetz:case Le.tsrange:case Le.tstzrange:return Tp(t);default:return Tp(t)}},Tp=e=>e,gI=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},yI=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},vI=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},xI=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const i=e.slice(1,n);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>rk(t,l))}return e},bI=e=>typeof e=="string"?e.replace(" ","T"):e,sk=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Nf{constructor(t,n,r={},s=Np){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ob;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(ob||(ob={}));class yl{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yl.syncState(this.state,s,a,i),this.pendingDiffs.forEach(c=>{this.state=yl.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=yl.syncDiff(this.state,s,a,i),l())}),this.onJoin((s,a,i)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:i})}),this.onLeave((s,a,i)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const a=this.cloneDeep(t),i=this.transformState(n),l={},c={};return this.map(a,(u,d)=>{i[u]||(c[u]=d)}),this.map(i,(u,d)=>{const h=a[u];if(h){const f=d.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),x=d.filter(b=>m.indexOf(b.presence_ref)<0),g=h.filter(b=>f.indexOf(b.presence_ref)<0);x.length>0&&(l[u]=x),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},r,s)}static syncDiff(t,n,r,s){const{joins:a,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}r(l,d,c)}),this.map(i,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var lb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(lb||(lb={}));var vl;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vl||(vl={}));var Gr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Gr||(Gr={}));class _i{constructor(t,n={config:{}},r){var s,a;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Nf(this,lr.join,this.params,this.timeout),this.rejoinTimer=new nk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vt.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(lr.reply,{},(i,l)=>{this._trigger(this._replyEventName(l),i)}),this.presence=new yl(this),this.broadcastEndpointURL=sk(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==vt.closed){const{config:{broadcast:i,presence:l,private:c}}=this.params,u=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[vl.PRESENCE]&&this.bindings[vl.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,h={},f={broadcast:i,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Gr.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Gr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var x;if(this.socket._isManualToken()||this.socket.setAuth(),m===void 0){t==null||t(Gr.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,b=(x=g==null?void 0:g.length)!==null&&x!==void 0?x:0,y=[];for(let w=0;w<b;w++){const v=g[w],{filter:{event:S,schema:j,table:k,filter:N}}=v,E=m&&m[w];if(E&&E.event===S&&_i.isFilterValueEqual(E.schema,j)&&_i.isFilterValueEqual(E.table,k)&&_i.isFilterValueEqual(E.filter,N))y.push(Object.assign(Object.assign({},v),{id:E.id}));else{this.unsubscribe(),this.state=vt.errored,t==null||t(Gr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Gr.SUBSCRIBED);return}}).receive("error",m=>{this.state=vt.errored,t==null||t(Gr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Gr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===vt.joined&&t===vl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const i={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,i,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:i}=t,l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=vt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(lr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Nf(this,lr.leave,{},t),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vt.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const s=new AbortController,a=setTimeout(()=>s.abort(),r),i=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(a),i}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Nf(this,t,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>fI){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,a;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=lr;if(r&&[l,c,u,d].indexOf(i)>=0&&r!==this._joinRef())return;let f=this._onMessage(i,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var x,g,b;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((b=(g=m.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===i}).map(m=>m.callback(f,r)):(a=this.bindings[i])===null||a===void 0||a.filter(m=>{var x,g,b,y,w,v,S,j;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in m){const k=m.id,N=(x=m.filter)===null||x===void 0?void 0:x.event;return k&&((g=n.ids)===null||g===void 0?void 0:g.includes(k))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))&&(!(!((y=m.filter)===null||y===void 0)&&y.table)||m.filter.table===((w=n.data)===null||w===void 0?void 0:w.table))}else{const k=(S=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return k==="*"||k===((j=n==null?void 0:n.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===i}).map(m=>{if(typeof f=="object"&&"ids"in f){const x=f.data,{schema:g,table:b,commit_timestamp:y,type:w,errors:v}=x;f=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:y,eventType:w,new:{},old:{},errors:v}),this._getPayloadRecords(x))}m.callback(f,r)})}_isClosed(){return this.state===vt.closed}_isJoined(){return this.state===vt.joined}_isJoining(){return this.state===vt.joining}_isLeaving(){return this.state===vt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),a={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&_i.isEqual(s.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(lr.close,{},t)}_onError(t){this._on(lr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=ib(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=ib(t.columns,t.old_record)),n}}const Ef=()=>{},Qc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},wI=[1e3,2e3,5e3,1e4],SI=1e4,jI=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kI{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Np,this.transport=null,this.heartbeatIntervalMs=Qc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ef,this.ref=0,this.reconnectTimer=null,this.vsn=ab,this.logger=Ef,this.conn=null,this.sendBuffer=[],this.serializer=new mI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...a)=>s(...a):(...a)=>fetch(...a),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Ep.websocket}`,this.httpEndpoint=sk(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=lI.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ws.connecting:return wa.Connecting;case ws.open:return wa.Open;case ws.closing:return wa.Closing;default:return wa.Closed}}isConnected(){return this.connectionState()===wa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===r);if(s)return s;{const a=new _i(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:s,ref:a}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${a})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(hI,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Qc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(d){this.log("error","error in heartbeat callback",d)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:a,ref:i}=n,l=i?`(${i})`:"",c=a.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(s,a,i)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===ws.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ws.open||this.conn.readyState===ws.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(lr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([jI],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:uI};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(lr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new nk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,s,a,i,l,c,u,d,h,f,m;switch(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Np,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Qc.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(i=t==null?void 0:t.accessToken)!==null&&i!==void 0?i:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Ef,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:ab,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:x=>wI[x-1]||SI,this.vsn){case dI:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(x,g)=>g(JSON.stringify(x)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(x,g)=>g(JSON.parse(x));break;case tk:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var Gl=class extends Error{constructor(e,t){var n;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((n=t.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function CI(e,t,n){const r=new URL(t,e);if(n)for(const[s,a]of Object.entries(n))a!==void 0&&r.searchParams.set(s,a);return r.toString()}async function NI(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function EI(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:a,headers:i}){const l=CI(e.baseUrl,r,s),c=await NI(e.auth),u=await t(l,{method:n,headers:{...a?{"Content-Type":"application/json"}:{},...c,...i},body:a?JSON.stringify(a):void 0}),d=await u.text(),h=(u.headers.get("content-type")||"").includes("application/json"),f=h&&d?JSON.parse(d):d;if(!u.ok){const m=h?f:void 0,x=m==null?void 0:m.error;throw new Gl((x==null?void 0:x.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:x==null?void 0:x.type,icebergCode:x==null?void 0:x.code,details:m})}return{status:u.status,headers:u.headers,data:f}}}}function Jc(e){return e.join("")}var TI=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:Jc(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){const n={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Jc(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Jc(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Jc(e.namespace)}`}),!0}catch(t){if(t instanceof Gl&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof Gl&&n.status===409)return;throw n}}};function ii(e){return e.join("")}var MI=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ii(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ii(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ii(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ii(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ii(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ii(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof Gl&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof Gl&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},PI=class{constructor(e){var r;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=EI({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(r=e.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new TI(this.client,t),this.tableOps=new MI(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},vh=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function Xe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var _I=class extends vh{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Mp=class extends vh{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};const Ug=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),RI=()=>Response,Pp=e=>{if(Array.isArray(e))return e.map(n=>Pp(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Pp(r)}),t},AI=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},DI=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function Kl(e){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kl(e)}function OI(e,t){if(Kl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function II(e){var t=OI(e,"string");return Kl(t)=="symbol"?t:t+""}function $I(e,t,n){return(t=II(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cb(Object(n),!0).forEach(function(r){$I(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Tf=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},LI=async(e,t,n)=>{e instanceof await RI()&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{const s=e.status||500,a=(r==null?void 0:r.statusCode)||s+"";t(new _I(Tf(r),s,a))}).catch(r=>{t(new Mp(Tf(r),r))}):t(new Mp(Tf(e),e))},FI=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?s:(AI(r)?(s.headers=le({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,t!=null&&t.duplex&&(s.duplex=t.duplex),le(le({},s),n))};async function xc(e,t,n,r,s,a){return new Promise((i,l)=>{e(n,FI(t,r,s,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>LI(c,l,r))})}async function ql(e,t,n,r){return xc(e,"GET",t,n,r)}async function sr(e,t,n,r,s){return xc(e,"POST",t,r,s,n)}async function _p(e,t,n,r,s){return xc(e,"PUT",t,r,s,n)}async function zI(e,t,n,r){return xc(e,"HEAD",t,le(le({},n),{},{noResolveJson:!0}),r)}async function Wg(e,t,n,r,s){return xc(e,"DELETE",t,r,s,n)}var BI=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xe(t))return{data:null,error:t};throw t}}};let ak;ak=Symbol.toStringTag;var VI=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[ak]="BlobDownloadBuilder",this.promise=null}asStream(){return new BI(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Xe(t))return{data:null,error:t};throw t}}};const UI={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ub={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var WI=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Ug(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(e,t,n,r){var s=this;try{let a;const i=le(le({},ub),r);let l=le(le({},s.headers),e==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",s.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",i.cacheControl),c&&!a.has("metadata")&&a.append("metadata",s.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=s.toBase64(s.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!i.duplex&&(i.duplex="half")),r!=null&&r.headers&&(l=le(le({},l),r.headers));const u=s._removeEmptyFolders(t),d=s._getFinalPath(u),h=await(e=="PUT"?_p:sr)(s.fetch,`${s.url}/object/${d}`,a,le({headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(a){if(s.shouldThrowOnError)throw a;if(Xe(a))return{data:null,error:a};throw a}}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var s=this;const a=s._removeEmptyFolders(e),i=s._getFinalPath(a),l=new URL(s.url+`/object/upload/sign/${i}`);l.searchParams.set("token",t);try{let c;const u=le({upsert:ub.upsert},r),d=le(le({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType),{data:{path:a,fullPath:(await _p(s.fetch,l.toString(),c,{headers:d})).Key},error:null}}catch(c){if(s.shouldThrowOnError)throw c;if(Xe(c))return{data:null,error:c};throw c}}async createSignedUploadUrl(e,t){var n=this;try{let r=n._getFinalPath(e);const s=le({},n.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const a=await sr(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),i=new URL(n.url+a.url),l=i.searchParams.get("token");if(!l)throw new vh("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:l},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;try{return{data:await sr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}}async copy(e,t,n){var r=this;try{return{data:{path:(await sr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}}async createSignedUrl(e,t,n){var r=this;try{let s=r._getFinalPath(e),a=await sr(r.fetch,`${r.url}/object/sign/${s}`,le({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${r.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}}async createSignedUrls(e,t,n){var r=this;try{const s=await sr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(i=>le(le({},i),{},{signedUrl:i.signedURL?encodeURI(`${r.url}${i.signedURL}${a}`):null})),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}}download(e,t){const n=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),s=r?`?${r}`:"",a=this._getFinalPath(e),i=()=>ql(this.fetch,`${this.url}/${n}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new VI(i,this.shouldThrowOnError)}async info(e){var t=this;const n=t._getFinalPath(e);try{return{data:Pp(await ql(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}async exists(e){var t=this;const n=t._getFinalPath(e);try{return await zI(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(Xe(r)&&r instanceof Mp){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});i!==""&&r.push(i);let l=r.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${l}`)}}}async remove(e){var t=this;try{return{data:await Wg(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async list(e,t,n){var r=this;try{const s=le(le(le({},UI),t),{},{prefix:e||""});return{data:await sr(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n),error:null}}catch(s){if(r.shouldThrowOnError)throw s;if(Xe(s))return{data:null,error:s};throw s}}async listV2(e,t){var n=this;try{const r=le({},e);return{data:await sr(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const ik="2.91.0",ok={"X-Client-Info":`storage-js/${ik}`};var HI=class{constructor(e,t={},n,r){this.shouldThrowOnError=!1;const s=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=le(le({},ok),t),this.fetch=Ug(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(e){var t=this;try{const n=t.listBucketOptionsToQueryString(e);return{data:await ql(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await ql(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async createBucket(e,t={public:!1}){var n=this;try{return{data:await sr(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}async updateBucket(e,t){var n=this;try{return{data:await _p(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}}async emptyBucket(e){var t=this;try{return{data:await sr(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Wg(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},GI=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=le(le({},ok),t),this.fetch=Ug(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await sr(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async listBuckets(e){var t=this;try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return{data:await ql(t.fetch,s,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await Wg(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}}from(e){var t=this;if(!DI(e))throw new vh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new PI({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,a){const i=s[a];return typeof i!="function"?i:async(...l)=>{try{return{data:await i.apply(s,l),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}};const Hg={"X-Client-Info":`storage-js/${ik}`,"Content-Type":"application/json"};var lk=class extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Nn(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}var Mf=class extends lk{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},KI=class extends lk{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}};const Gg=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),qI=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},db=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),YI=async(e,t,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(n!=null&&n.noResolveJson)){const r=e.status||500,s=e;if(typeof s.json=="function")s.json().then(a=>{const i=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||r+"";t(new Mf(db(a),r,i))}).catch(()=>{const a=r+"";t(new Mf(s.statusText||`HTTP ${r} error`,r,a))});else{const a=r+"";t(new Mf(s.statusText||`HTTP ${r} error`,r,a))}}else t(new KI(db(e),e))},XI=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return r?(qI(r)?(s.headers=le({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(r)):s.body=r,le(le({},s),n)):s};async function QI(e,t,n,r,s,a){return new Promise((i,l)=>{e(n,XI(t,r,s,a)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>i(c)).catch(c=>YI(c,l,r))})}async function En(e,t,n,r,s){return QI(e,"POST",t,r,s,n)}var JI=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=le(le({},Hg),t),this.fetch=Gg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}}async getIndex(e,t){var n=this;try{return{data:await En(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}}async listIndexes(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}}async deleteIndex(e,t){var n=this;try{return{data:await En(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}}},ZI=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=le(le({},Hg),t),this.fetch=Gg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(e){var t=this;try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await En(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}}async getVectors(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}}async listVectors(e){var t=this;try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:await En(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}}async queryVectors(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}}async deleteVectors(e){var t=this;try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await En(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}}},e8=class{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=le(le({},Hg),t),this.fetch=Gg(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}}async getBucket(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}}async listBuckets(e={}){var t=this;try{return{data:await En(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}}async deleteBucket(e){var t=this;try{return{data:await En(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{},error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}}},t8=class extends e8{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new n8(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},n8=class extends JI{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,le(le({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,le(le({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new r8(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},r8=class extends ZI{constructor(e,t,n,r,s){super(e,t,s),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,le(le({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,le(le({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,le(le({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,le(le({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,le(le({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},s8=class extends HI{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new WI(this.url,this.headers,e,this.fetch)}get vectors(){return new t8(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new GI(this.url+"/iceberg",this.headers,this.fetch)}};const ck="2.91.0",yi=30*1e3,Rp=3,Pf=Rp*yi,a8="http://localhost:9999",i8="supabase.auth.token",o8={"X-Client-Info":`gotrue-js/${ck}`},Ap="X-Supabase-Api-Version",uk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},l8=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,c8=10*60*1e3;class Yl extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function re(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class u8 extends Yl{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function d8(e){return re(e)&&e.name==="AuthApiError"}class Sa extends Yl{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class us extends Yl{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class jn extends us{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function h8(e){return re(e)&&e.name==="AuthSessionMissingError"}class oi extends us{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zc extends us{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class eu extends us{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function f8(e){return re(e)&&e.name==="AuthImplicitGrantRedirectError"}class hb extends us{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class m8 extends us{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Dp extends us{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function _f(e){return re(e)&&e.name==="AuthRetryableFetchError"}class fb extends us{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Op extends us{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const vd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),mb=` 	
\r=`.split(""),p8=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<mb.length;t+=1)e[mb[t].charCodeAt(0)]=-2;for(let t=0;t<vd.length;t+=1)e[vd[t].charCodeAt(0)]=t;return e})();function pb(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(vd[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(vd[r]),t.queuedBits-=6}}function dk(e,t,n){const r=p8[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function gb(e){const t=[],n=i=>{t.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=i=>{v8(i,r,n)};for(let i=0;i<e.length;i+=1)dk(e.charCodeAt(i),s,a);return t.join("")}function g8(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function y8(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}g8(r,t)}}function v8(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Ki(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)dk(e.charCodeAt(s),n,r);return new Uint8Array(t)}function x8(e){const t=[];return y8(e,n=>t.push(n)),new Uint8Array(t)}function Na(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>pb(s,n,r)),pb(null,n,r),t.join("")}function b8(e){return Math.round(Date.now()/1e3)+e}function w8(){return Symbol("auth-callback")}const Pt=()=>typeof window<"u"&&typeof document<"u",da={tested:!1,writable:!1},hk=()=>{if(!Pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(da.tested)return da.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),da.tested=!0,da.writable=!0}catch{da.tested=!0,da.writable=!1}return da.writable};function S8(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const fk=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),j8=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",vi=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},ha=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Mt=async(e,t)=>{await e.removeItem(t)};class xh{constructor(){this.promise=new xh.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}xh.promiseConstructor=Promise;function Rf(e){const t=e.split(".");if(t.length!==3)throw new Op("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!l8.test(t[r]))throw new Op("JWT not in base64url format");return{header:JSON.parse(gb(t[0])),payload:JSON.parse(gb(t[1])),signature:Ki(t[2]),raw:{header:t[0],payload:t[1]}}}async function k8(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function C8(e,t){return new Promise((r,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await e(a);if(!t(a,null,i)){r(i);return}}catch(i){if(!t(a,i)){s(i);return}}})()})}function N8(e){return("0"+e.toString(16)).substr(-2)}function E8(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let a=0;a<56;a++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,N8).join("")}async function T8(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function M8(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await T8(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function li(e,t,n=!1){const r=E8();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await vi(e,`${t}-code-verifier`,s);const a=await M8(r);return[a,r===a?"plain":"s256"]}const P8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _8(e){const t=e.headers.get(Ap);if(!t||!t.match(P8))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function R8(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function A8(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const D8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ci(e){if(!D8.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Af(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function O8(e,t){return new Proxy(e,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,s)}})}function yb(e){return JSON.parse(JSON.stringify(e))}const ya=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),I8=[502,503,504];async function vb(e){var t;if(!j8(e))throw new Dp(ya(e),0);if(I8.includes(e.status))throw new Dp(ya(e),e.status);let n;try{n=await e.json()}catch(a){throw new Sa(ya(a),a)}let r;const s=_8(e);if(s&&s.getTime()>=uk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new fb(ya(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new jn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new fb(ya(n),e.status,n.weak_password.reasons);throw new u8(ya(n),e.status||500,r)}const $8=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ie(e,t,n,r){var s;const a=Object.assign({},r==null?void 0:r.headers);a[Ap]||(a[Ap]=uk["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const i=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await L8(e,t,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function L8(e,t,n,r,s,a){const i=$8(t,r,s,a);let l;try{l=await e(n,Object.assign({},i))}catch(c){throw console.error(c),new Dp(ya(c),0)}if(l.ok||await vb(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await vb(c)}}function Zn(e){var t;let n=null;B8(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=b8(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function xb(e){const t=Zn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ks(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function F8(e){return{data:e,error:null}}function z8(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a}=e,i=Mo(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function bb(e){return e}function B8(e){return e.access_token&&e.refresh_token&&e.expires_in}const Df=["global","local","others"];class V8{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=fk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Df[0]){if(Df.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Df.join(", ")}`);try{return await ie(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ks})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Mo(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:z8,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ie(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ks})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:bb});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(re(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ci(t);try{return await ie(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ks})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){ci(t);try{return await ie(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:ks})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){ci(t);try{return await ie(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:ks})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){ci(t.userId);try{const{data:n,error:r}=await ie(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _deleteFactor(t){ci(t.userId),ci(t.id);try{return{data:await ie(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,s,a,i,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ie(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:bb});if(d.error)throw d.error;const h=await d.json(),f=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(x.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(re(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await ie(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await ie(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await ie(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await ie(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await ie(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}}function wb(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const ui={debug:!!(globalThis&&hk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mk extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class U8 extends mk{}async function W8(e,t,n){ui.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),ui.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){ui.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{ui.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw ui.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new U8(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ui.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function H8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function pk(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function G8(e){return parseInt(e,16)}function K8(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function q8(e){var t;const{chainId:n,domain:r,expirationTime:s,issuedAt:a=new Date,nonce:i,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=pk(e.address),x=d?`${d}://${r}`:r,g=e.statement?`${e.statement}
`:"",b=`${x} wants you to sign in with your Ethereum account:
${m}

${g}`;let y=`URI: ${h}
Version: ${f}
Chain ID: ${n}${i?`
Nonce: ${i}`:""}
Issued At: ${a.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let w=`
Resources:`;for(const v of u){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);w+=`
- ${v}`}y+=w}return`${b}
${y}`}class mt extends Error{constructor({message:t,code:n,cause:r,name:s}){var a;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=s??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class xd extends mt{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function Y8({error:e,options:t}){var n,r,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new mt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new mt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new mt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new mt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new mt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new mt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new mt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new mt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const i=window.location.hostname;if(gk(i)){if(a.rp.id!==i)return new mt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new mt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function X8({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new mt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new mt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(gk(r)){if(n.rpId!==r)return new mt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Q8{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const J8=new Q8;function Z8(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,s=Mo(e,["challenge","user","excludeCredentials"]),a=Ki(t).buffer,i=Object.assign(Object.assign({},n),{id:Ki(n.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:a,user:i});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Ki(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function e$(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=Mo(e,["challenge","allowCredentials"]),s=Ki(t).buffer,a=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let i=0;i<n.length;i++){const l=n[i];a.allowCredentials[i]=Object.assign(Object.assign({},l),{id:Ki(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function t$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Na(new Uint8Array(e.response.attestationObject)),clientDataJSON:Na(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function n$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Na(new Uint8Array(s.authenticatorData)),clientDataJSON:Na(new Uint8Array(s.clientDataJSON)),signature:Na(new Uint8Array(s.signature)),userHandle:s.userHandle?Na(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function gk(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Sb(){var e,t;return!!(Pt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function r$(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new xd("Browser returned unexpected credential type",t)}:{data:null,error:new xd("Empty credential response",t)}}catch(t){return{data:null,error:Y8({error:t,options:e})}}}async function s$(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new xd("Browser returned unexpected credential type",t)}:{data:null,error:new xd("Empty credential response",t)}}catch(t){return{data:null,error:X8({error:t,options:e})}}}const a$={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},i$={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function bd(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of e)if(s)for(const a in s){const i=s[a];if(i!==void 0)if(Array.isArray(i))r[a]=i;else if(n(i))r[a]=i;else if(t(i)){const l=r[a];t(l)?r[a]=bd(l,i):r[a]=bd(i)}else r[a]=i}return r}function o$(e,t){return bd(a$,e,t||{})}function l$(e,t){return bd(i$,e,t||{})}class c${constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:s},a){try{const{data:i,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!i)return{data:null,error:l};const c=s??J8.createNewAbortSignal();if(i.webauthn.type==="create"){const{user:u}=i.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(i.webauthn.type){case"create":{const u=o$(i.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:d,error:h}=await r$({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=l$(i.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:d,error:h}=await s$(Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:i.id,webauthn:{type:i.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(i){return re(i)?{data:null,error:i}:{data:null,error:new Sa("Unexpected error in challenge",i)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new Yl("rpId is required for WebAuthn authentication")};try{if(!Sb())return{data:null,error:new Sa("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:a});if(!i)return{data:null,error:l};const{webauthn:c}=i;return this._verify({factorId:t,challengeId:i.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(i){return re(i)?{data:null,error:i}:{data:null,error:new Sa("Unexpected error in authenticate",i)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},a){if(!n)return{data:null,error:new Yl("rpId is required for WebAuthn registration")};try{if(!Sb())return{data:null,error:new Sa("Browser does not support WebAuthn",null)};const{data:i,error:l}=await this._enroll({friendlyName:t});if(!i)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:i.id,friendlyName:i.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:a});return c?this._verify({factorId:i.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(i){return re(i)?{data:null,error:i}:{data:null,error:new Sa("Unexpected error in register",i)}}}}H8();const u$={url:a8,storageKey:i8,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:o8,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function jb(e,t,n){return await n()}const di={};class Xl{get jwks(){var t,n;return(n=(t=di[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){di[this.storageKey]=Object.assign(Object.assign({},di[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=di[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){di[this.storageKey]=Object.assign(Object.assign({},di[this.storageKey]),{cachedAt:t})}constructor(t){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},u$),t);if(this.storageKey=a.storageKey,this.instanceID=(n=Xl.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Xl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Pt()){const i=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(i),this.logDebugMessages&&console.trace(i)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new V8({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=fk(a.fetch),this.lock=a.lock||jb,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,this.lockAcquireTimeout=a.lockAcquireTimeout,a.lock?this.lock=a.lock:this.persistSession&&Pt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=W8:this.lock=jb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new c$(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:hk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=wb(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=wb(this.memoryStorage)),Pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ck}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let n={},r="none";if(Pt()&&(n=S8(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Pt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),f8(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return{error:a}}const{session:i,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return re(n)?this._returnResult({error:n}):this._returnResult({error:new Sa("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const a=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Zn}),{data:i,error:l}=a;if(l||!i)return this._returnResult({data:{user:null,session:null},error:l});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var n,r,s;try{let a;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await li(this.storage,this.storageKey)),a=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:x},xform:Zn})}else if("phone"in t){const{phone:d,password:h,options:f}=t;a=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Zn})}else throw new Zc("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return await Mt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:l});const c=i.session,u=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),re(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:i,options:l}=t;n=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:xb})}else if("phone"in t){const{phone:a,password:i,options:l}=t;n=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:xb})}else throw new Zc("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const a=new oi;return this._returnResult({data:{user:null,session:null},error:a})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(t){var n,r,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,s,a,i,l,c,u,d,h,f;let m,x;if("message"in t)m=t.message,x=t.signature;else{const{chain:g,wallet:b,statement:y,options:w}=t;let v;if(Pt())if(typeof b=="object")v=b;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")v=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=b}const S=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href),j=await v.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const k=pk(j[0]);let N=(r=w==null?void 0:w.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!N){const C=await v.request({method:"eth_chainId"});N=G8(C)}const E={domain:S.host,address:k,statement:y,uri:S.href,version:"1",chainId:N,nonce:(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(i=(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date,expirationTime:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=w==null?void 0:w.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=q8(E),x=await v.request({method:"personal_sign",params:[K8(m),k]})}try{const{data:g,error:b}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:x},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Zn});if(b)throw b;if(!g||!g.session||!g.user){const y=new oi;return this._returnResult({data:{user:null,session:null},error:y})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:b})}catch(g){if(re(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(t){var n,r,s,a,i,l,c,u,d,h,f,m;let x,g;if("message"in t)x=t.message,g=t.signature;else{const{chain:b,wallet:y,statement:w,options:v}=t;let S;if(Pt())if(typeof y=="object")S=y;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))S=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const j=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const k=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),w?{statement:w}:null));let N;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")N=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)N=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)x=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${j.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((i=v==null?void 0:v.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const k=await S.signMessage(new TextEncoder().encode(x),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=k}}try{const{data:b,error:y}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:Na(g)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Zn});if(y)throw y;if(!b||!b.session||!b.user){const w=new oi;return this._returnResult({data:{user:null,session:null},error:w})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:y})}catch(b){if(re(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async _exchangeCodeForSession(t){const n=await ha(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new m8;const{data:a,error:i}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Zn});if(await Mt(this.storage,`${this.storageKey}-code-verifier`),i)throw i;if(!a||!a.session||!a.user){const l=new oi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",a.session)},0)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:i})}catch(a){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),re(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:a,nonce:i}=t,l=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Zn}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new oi;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(t){var n,r,s,a,i;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await li(this.storage,this.storageKey));const{error:h}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new Zc("You must provide either an email or phone number.")}catch(l){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),re(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var n,r;try{let s,a;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Zn});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,u=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var n,r,s,a,i;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await li(this.storage,this.storageKey));const u=await ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:F8});return!((a=u.data)===null||a===void 0)&&a.url&&Pt()&&!(!((i=t.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),re(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new jn;const{error:s}=await ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(re(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:a}=t,{error:i}=await ie(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:i})}else if("phone"in t){const{phone:r,type:s,options:a}=t,{data:i,error:l}=await ie(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l})}throw new Zc("You must provide either an email or phone number and a type")}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await ha(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Pf:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const i=await ha(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=Af()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const i={value:this.suppressGetSessionWarning};t.user=O8(t.user,i),i.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(t){try{return t?await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ks}):await this._useSession(async n=>{var r,s,a;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jn}:await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:ks})})}catch(n){if(re(n))return h8(n)&&(await this._removeSession(),await Mt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:a}=r;if(a)throw a;if(!s.session)throw new jn;const i=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await li(this.storage,this.storageKey));const{data:u,error:d}=await ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:ks});if(d)throw d;return i.user=u.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),this._returnResult({data:{user:i.user},error:null})})}catch(r){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),re(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new jn;const n=Date.now()/1e3;let r=n,s=!0,a=null;const{payload:i}=Rf(t.access_token);if(i.exp&&(r=i.exp,s=r<=n),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(n){if(re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:i,error:l}=n;if(l)throw l;t=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new jn;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(re(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(t,n){try{if(!Pt())throw new eu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new eu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new hb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new eu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new hb("No code detected.");const{data:w,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!i||!u)throw new eu("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=yi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const x=f-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,f,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,f,d);const{data:g,error:b}=await this._getUser(a);if(b)throw b;const y={provider_token:r,provider_refresh_token:s,access_token:a,expires_in:h,expires_at:f,refresh_token:i,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(r){if(re(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await ha(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({error:a});const i=(r=s.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(d8(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Mt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const n=w8(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:a},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await li(this.storage,this.storageKey,!0));try{return await ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),re(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:s}=await this._useSession(async a=>{var i,l,c,u,d;const{data:h,error:f}=a;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ie(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Pt()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(re(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:a}}=n;if(s)throw s;const{options:i,provider:l,token:c,access_token:u,nonce:d}=t,h=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Zn}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new oi}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(await Mt(this.storage,`${this.storageKey}-code-verifier`),re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:i}=n;if(i)throw i;return await ie(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await C8(async s=>(s>0&&await k8(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Zn})),(s,a)=>{const i=200*Math.pow(2,s);return a&&_f(a)&&Date.now()+i-r<yi})}catch(r){if(this._debug(n,"error",r),re(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Pt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ha(this.storage,this.storageKey);if(s&&this.userStorage){let i=await ha(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:s.user},await vi(this.userStorage,this.storageKey+"-user",i)),s.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:Af()}else if(s&&!s.user&&!s.user){const i=await ha(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(s.user=i.user,await Mt(this.storage,this.storageKey+"-user"),await vi(this.storage,this.storageKey,s)):s.user=Af()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const a=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Pf;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Pf}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),_f(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(s.access_token);!l&&(i!=null&&i.user)?(s.user=i.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new jn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new xh;const{data:a,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!a.session)throw new jn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),re(a)){const i={data:null,error:a};return _f(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Mt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await vi(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const a=yb(s);await vi(this.storage,this.storageKey,a)}else{const s=yb(n);await vi(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Mt(this.storage,this.storageKey),await Mt(this.storage,this.storageKey+"-code-verifier"),await Mt(this.storage,this.storageKey+"-user"),this.userStorage&&await Mt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Pt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),yi);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/yi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${yi}ms, refresh threshold is ${Rp} ticks`),s<=Rp&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof mk)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Pt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,i]=await li(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});s.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);s.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;return a?this._returnResult({data:null,error:a}):await ie(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:a,error:i}=n;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await ie(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?t$(t.webauthn.credential_response):n$(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:i,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:a}=n;if(a)return this._returnResult({data:null,error:a});const i=await ie(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(i.error)return i;const{data:l}=i;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Z8(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:e$(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Rf(r.access_token);let i=null;a.aal&&(i=a.aal);let l=i;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await ie(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new jn})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new jn});const i=await ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Pt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,n){try{return await this._useSession(async r=>{const{data:{session:s},error:a}=r;if(a)return this._returnResult({data:null,error:a});if(!s)return this._returnResult({data:null,error:new jn});const i=await ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return i.data&&i.data.redirect_url&&Pt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(i.data.redirect_url),i})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;return r?this._returnResult({data:null,error:r}):n?await ie(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new jn})})}catch(t){if(re(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await ie(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new jn})})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+c8>s)return r;const{data:a,error:i}=await ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,r=a.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:x}=await this.getSession();if(x||!m.session)return this._returnResult({data:null,error:x});r=m.session.access_token}const{header:s,payload:a,signature:i,raw:{header:l,payload:c}}=Rf(r);n!=null&&n.allowExpired||R8(a.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:a,header:s,signature:i},error:null}}const d=A8(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,i,x8(`${l}.${c}`)))throw new Op("Invalid JWT signature");return{data:{claims:a,header:s,signature:i},error:null}}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}}Xl.nextInstanceID={};const d$=Xl,h$="2.91.0";let Jo="";typeof Deno<"u"?Jo="deno":typeof document<"u"?Jo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jo="react-native":Jo="node";const f$={"X-Client-Info":`supabase-js-${Jo}/${h$}`},m$={headers:f$},p$={schema:"public"},g$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},y$={};function Ql(e){"@babel/helpers - typeof";return Ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ql(e)}function v$(e,t){if(Ql(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ql(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x$(e){var t=v$(e,"string");return Ql(t)=="symbol"?t:t+""}function b$(e,t,n){return(t=x$(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kb(Object(n),!0).forEach(function(r){b$(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kb(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const w$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),S$=()=>Headers,j$=(e,t,n)=>{const r=w$(n),s=S$();return async(a,i)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(i==null?void 0:i.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(a,at(at({},i),{},{headers:u}))}};function k$(e){return e.endsWith("/")?e:e+"/"}function C$(e,t){var n,r;const{db:s,auth:a,realtime:i,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:at(at({},c),s),auth:at(at({},u),a),realtime:at(at({},d),i),storage:{},global:at(at(at({},h),l),{},{headers:at(at({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function N$(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(k$(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var E$=class extends d${constructor(e){super(e)}},T$=class{constructor(e,t,n){var r,s;this.supabaseUrl=e,this.supabaseKey=t;const a=N$(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const i=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:p$,realtime:y$,auth:at(at({},g$),{},{storageKey:i}),global:m$},c=C$(n??{},l);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=j$(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(at({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new oI(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new s8(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new nI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();const{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:a,flowType:i,lock:l,debug:c,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new E$({url:this.authUrl.href,headers:at(at({},f),d),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:s,flowType:i,lock:l,debug:c,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new kI(this.realtimeUrl.href,at(at({},e),{},{params:at(at({},{apikey:this.supabaseKey}),e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const M$=(e,t,n)=>new T$(e,t,n);function P$(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}P$()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _$="https://rapxqrjhrehfhqsafovf.supabase.co",R$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhcHhxcmpocmVoZmhxc2Fmb3ZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5MjczOTYsImV4cCI6MjA4NDUwMzM5Nn0.OpoDaXxYH0wDGj9S4AYRDwVVfW2xhOsBjY8Nh8zl2co",Ge=M$(_$,R$,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});async function ni(){const{data:e,error:t}=await Ge.from("dream_logs").select(`
      *,
      world:worlds(id, name),
      entities:dream_log_entities(entity:entities(id, name))
    `).order("date",{ascending:!1});return t?(console.error("Error fetching dream logs:",t),[]):(e||[]).map(n=>{var r,s;return{id:n.dream_id,date:n.date,wakeTime:n.wake_time,world:((r=n.world)==null?void 0:r.name)||"",timeSystem:n.time_system,environments:n.environments||[],entities:((s=n.entities)==null?void 0:s.map(a=>{var i;return(i=a.entity)==null?void 0:i.name}).filter(Boolean))||[],threatLevel:n.threat_level,safetyOverride:n.safety_override,exit:n.exit,notes:n.notes||void 0,createdAt:n.created_at}})}async function yk(e){let t=null;if(e.world){const{data:s}=await Ge.from("worlds").select("id").eq("name",e.world).maybeSingle();if(s)t=s.id;else{const{data:a}=await Ge.from("worlds").insert({name:e.world,type:"transient",stability:3}).select("id").single();t=(a==null?void 0:a.id)||null}}const{data:n,error:r}=await Ge.from("dream_logs").insert({dream_id:"",date:e.date,wake_time:e.wakeTime,world_id:t,time_system:e.timeSystem,environments:e.environments,threat_level:e.threatLevel,safety_override:e.safetyOverride,exit:e.exit,notes:e.notes}).select().single();if(r||!n)return console.error("Error adding dream log:",r),null;for(const s of e.entities){let a;const{data:i}=await Ge.from("entities").select("id").eq("name",s).maybeSingle();if(i)a=i.id;else{const{data:l}=await Ge.from("entities").insert({name:s,role:"observer"}).select("id").single();a=(l==null?void 0:l.id)||""}a&&await Ge.from("dream_log_entities").insert({dream_log_id:n.id,entity_id:a})}return{id:n.dream_id,date:n.date,wakeTime:n.wake_time,world:e.world,timeSystem:n.time_system,environments:n.environments||[],entities:e.entities,threatLevel:n.threat_level,safetyOverride:n.safety_override,exit:n.exit,notes:n.notes||void 0,createdAt:n.created_at}}async function A$(e,t){const{data:n}=await Ge.from("dream_logs").select("*").eq("dream_id",e).single();if(!n)return null;let r=n.world_id;if(t.world){const{data:l}=await Ge.from("worlds").select("id").eq("name",t.world).maybeSingle();if(l)r=l.id;else{const{data:c}=await Ge.from("worlds").insert({name:t.world,type:"transient",stability:3}).select("id").single();r=(c==null?void 0:c.id)||r}}const{data:s,error:a}=await Ge.from("dream_logs").update({world_id:r,time_system:t.timeSystem||n.time_system,environments:t.environments||n.environments,threat_level:t.threatLevel!==void 0?t.threatLevel:n.threat_level,safety_override:t.safetyOverride||n.safety_override,exit:t.exit||n.exit,notes:t.notes!==void 0?t.notes:n.notes}).eq("dream_id",e).select().single();if(a||!s)return console.error("Error updating dream log:",a),null;if(t.entities){await Ge.from("dream_log_entities").delete().eq("dream_log_id",s.id);for(const l of t.entities){let c;const{data:u}=await Ge.from("entities").select("id").eq("name",l).maybeSingle();if(u)c=u.id;else{const{data:d}=await Ge.from("entities").insert({name:l,role:"observer"}).select("id").single();c=(d==null?void 0:d.id)||""}c&&await Ge.from("dream_log_entities").insert({dream_log_id:s.id,entity_id:c})}}let i=t.world||"";if(!i&&r){const{data:l}=await Ge.from("worlds").select("name").eq("id",r).maybeSingle();i=(l==null?void 0:l.name)||""}return{id:s.dream_id,date:s.date,wakeTime:s.wake_time,world:i,timeSystem:s.time_system,environments:s.environments||[],entities:t.entities||[],threatLevel:s.threat_level,safetyOverride:s.safety_override,exit:s.exit,notes:s.notes||void 0,createdAt:s.created_at}}async function D$(e){const{error:t}=await Ge.from("dream_logs").delete().eq("dream_id",e);return!t}async function bc(){const{data:e,error:t}=await Ge.from("worlds").select(`
      *,
      dream_logs(dream_id)
    `).order("name");return t?(console.error("Error fetching worlds:",t),[]):(e||[]).map(n=>{var r;return{id:n.id,name:n.name,type:n.type,stability:n.stability,description:n.description||void 0,dreamIds:((r=n.dream_logs)==null?void 0:r.map(s=>s.dream_id))||[]}})}async function bh(){const{data:e,error:t}=await Ge.from("entities").select(`
      *,
      dream_log_entities(dream_log:dream_logs(dream_id))
    `).order("name");return t?(console.error("Error fetching entities:",t),[]):(e||[]).map(n=>{var r;return{id:n.id,name:n.name,role:n.role,description:n.description||void 0,dreamIds:((r=n.dream_log_entities)==null?void 0:r.map(s=>{var a;return(a=s.dream_log)==null?void 0:a.dream_id}).filter(Boolean))||[]}})}async function O$(e){const{data:t,error:n}=await Ge.from("entities").insert({name:e.name,role:e.role,description:e.description}).select().single();return n||!t?(console.error("Error adding entity:",n),null):{id:t.id,name:t.name,role:t.role,description:t.description||void 0,dreamIds:[]}}async function I$(){const{data:e,error:t}=await Ge.from("threats").select(`
      *,
      dream_log_threats(dream_log:dream_logs(dream_id))
    `).order("name");return t?(console.error("Error fetching threats:",t),[]):(e||[]).map(n=>{var r;return{id:n.id,name:n.name,level:n.level,response:n.response||void 0,dreamIds:((r=n.dream_log_threats)==null?void 0:r.map(s=>{var a;return(a=s.dream_log)==null?void 0:a.dream_id}).filter(Boolean))||[]}})}async function $$(e,t,n,r){const s=await fetch("https://rapxqrjhrehfhqsafovf.supabase.co/functions/v1/suggest-tags",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJhcHhxcmpocmVoZmhxc2Fmb3ZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg5MjczOTYsImV4cCI6MjA4NDUwMzM5Nn0.OpoDaXxYH0wDGj9S4AYRDwVVfW2xhOsBjY8Nh8zl2co"},body:JSON.stringify({text:e,existingWorlds:t,existingEntities:n,existingEnvironments:r})});return s.ok?s.json():{world:null,environments:[],entities:[],threatLevel:0,safetyOverride:"unknown",exit:"unknown",timeSystem:"unknown"}}async function L$(e){const{data:t,error:n}=await Ge.from("threats").insert({name:e.name,level:e.level,response:e.response}).select().single();return n||!t?(console.error("Error adding threat:",n),null):{id:t.id,name:t.name,level:t.level,response:t.response||void 0,dreamIds:[]}}const Ht={newMoon:{id:"newMoon",name:"",nameEn:"New Moon",rarity:"normal",moonTint:"#2a2a3a",skyPalette:["#000000","#0a0a1a","#14142a"],uiAccent:"#5a5a7a",transitionSpeed:35,starDensity:1,cloudOpacity:.15,cloudSpeed:.7,shootingStarChance:.2,emotionTag:"new_beginning",subtitle:""},waxingCrescent:{id:"waxingCrescent",name:"",nameEn:"Waxing Crescent",rarity:"normal",moonTint:"#D8D8E8",skyPalette:["#0a0e27","#1a1e37","#2a2e47"],uiAccent:"#8888a8",transitionSpeed:30,starDensity:.85,cloudOpacity:.25,cloudSpeed:.9,shootingStarChance:.22,emotionTag:"growing",subtitle:" "},firstQuarter:{id:"firstQuarter",name:"",nameEn:"First Quarter",rarity:"normal",moonTint:"#E0E0F0",skyPalette:["#0c1028","#1c2038","#2c3048"],uiAccent:"#9090b0",transitionSpeed:30,starDensity:.8,cloudOpacity:.3,cloudSpeed:1,shootingStarChance:.25,emotionTag:"balanced",subtitle:""},waxingGibbous:{id:"waxingGibbous",name:"",nameEn:"Waxing Gibbous",rarity:"normal",moonTint:"#E8E8F8",skyPalette:["#0a0e2a","#1a1e3a","#2a2e4a"],uiAccent:"#9898c8",transitionSpeed:30,starDensity:.75,cloudOpacity:.35,cloudSpeed:1.1,shootingStarChance:.28,emotionTag:"anticipation",subtitle:""},fullMoon:{id:"fullMoon",name:"",nameEn:"Full Moon",rarity:"normal",moonTint:"#E6E6FA",skyPalette:["#0a0e27","#1a1e3e","#2a2e4e"],uiAccent:"#9090c0",transitionSpeed:30,starDensity:.8,cloudOpacity:.3,cloudSpeed:1,shootingStarChance:.25,emotionTag:"peaceful",subtitle:""},waningGibbous:{id:"waningGibbous",name:"",nameEn:"Waning Gibbous",rarity:"normal",moonTint:"#D0D0E0",skyPalette:["#0a0e25","#1a1e35","#2a2e45"],uiAccent:"#8080a0",transitionSpeed:32,starDensity:.82,cloudOpacity:.28,cloudSpeed:.95,shootingStarChance:.23,emotionTag:"reflection",subtitle:""},lastQuarter:{id:"lastQuarter",name:"",nameEn:"Last Quarter",rarity:"normal",moonTint:"#C8C8D8",skyPalette:["#0b0f26","#1b1f36","#2b2f46"],uiAccent:"#7878a8",transitionSpeed:33,starDensity:.85,cloudOpacity:.25,cloudSpeed:.9,shootingStarChance:.2,emotionTag:"letting_go",subtitle:""},waningCrescent:{id:"waningCrescent",name:"",nameEn:"Waning Crescent",rarity:"normal",moonTint:"#B8B8C8",skyPalette:["#080c24","#181c34","#282c44"],uiAccent:"#6868a0",transitionSpeed:35,starDensity:.9,cloudOpacity:.2,cloudSpeed:.8,shootingStarChance:.18,emotionTag:"fading",subtitle:" "},penumbralEclipse:{id:"penumbralEclipse",name:"",nameEn:"Penumbral Lunar Eclipse",rarity:"rare",moonTint:"#A8A8B8",skyPalette:["#0a0a1a","#1a1a2a","#2a2a3a"],uiAccent:"#7878a8",transitionSpeed:40,starDensity:.85,cloudOpacity:.25,cloudSpeed:.8,shootingStarChance:.3,emotionTag:"subtle_change",subtitle:""},partialEclipse:{id:"partialEclipse",name:"",nameEn:"Partial Lunar Eclipse",rarity:"very_rare",moonTint:"#987070",skyPalette:["#150a0a","#251a1a","#352a2a"],uiAccent:"#a87878",transitionSpeed:45,starDensity:.75,cloudOpacity:.35,cloudSpeed:1,shootingStarChance:.35,emotionTag:"partial_shadow",subtitle:""},totalEclipse:{id:"totalEclipse",name:"",nameEn:"Total Lunar Eclipse",rarity:"legendary",moonTint:"#8B4545",skyPalette:["#1a0a0a","#2a1a1a","#3a2a2a"],uiAccent:"#a85555",transitionSpeed:45,starDensity:.7,cloudOpacity:.4,cloudSpeed:1.2,shootingStarChance:.4,specialEffect:"bloodRing",effectIntensity:.75,emotionTag:"intense",subtitle:""},superBloodMoon:{id:"superBloodMoon",name:"",nameEn:"Super Blood Moon",rarity:"mythic",moonTint:"#A03030",skyPalette:["#200505","#301515","#402525"],uiAccent:"#c84040",transitionSpeed:50,starDensity:.65,cloudOpacity:.45,cloudSpeed:1.3,shootingStarChance:.5,specialEffect:"meteorShower",effectIntensity:.9,emotionTag:"dramatic",subtitle:"",moonSize:1.5},superBlueBloodMoon:{id:"superBlueBloodMoon",name:"",nameEn:"Super Blue Blood Moon",rarity:"mythic",moonTint:"#B84060",skyPalette:["#1a0510","#2a1520","#3a2530"],uiAccent:"#d85080",transitionSpeed:60,starDensity:.95,cloudOpacity:.35,cloudSpeed:1.4,shootingStarChance:.6,specialEffect:"meteorShower",effectIntensity:.7,emotionTag:"once_in_lifetime",subtitle:"",moonSize:1.5},lunarTransientPhenomena:{id:"lunarTransientPhenomena",name:"",nameEn:"Lunar Transient Phenomena",rarity:"mythic",moonTint:"#E8D8FF",skyPalette:["#0e0a1e","#1e1a2e","#2e2a3e"],uiAccent:"#c8a8f8",transitionSpeed:55,starDensity:.9,cloudOpacity:.2,cloudSpeed:.9,shootingStarChance:.45,specialEffect:"flash",effectIntensity:.8,emotionTag:"mysterious_flash",subtitle:"",moonSize:1.4},hybridEclipse:{id:"hybridEclipse",name:"",nameEn:"Hybrid Eclipse",rarity:"mythic",moonTint:"#D8A860",skyPalette:["#1a1008","#2a2018","#3a3028"],uiAccent:"#e8b870",transitionSpeed:58,starDensity:.7,cloudOpacity:.3,cloudSpeed:1.1,shootingStarChance:.35,specialEffect:"fog",effectIntensity:.7,emotionTag:"dual_nature",subtitle:"",moonSize:1.4},supermoon:{id:"supermoon",name:"",nameEn:"Supermoon",rarity:"rare",moonTint:"#F0F0FF",skyPalette:["#0a0e2c","#1a1e3c","#2a2e4c"],uiAccent:"#a0a0d0",transitionSpeed:35,starDensity:.75,cloudOpacity:.35,cloudSpeed:1.1,shootingStarChance:.3,emotionTag:"grand",subtitle:""},micromoon:{id:"micromoon",name:"",nameEn:"Micromoon",rarity:"rare",moonTint:"#C0C0D0",skyPalette:["#0a0e22","#1a1e32","#2a2e42"],uiAccent:"#7070a0",transitionSpeed:38,starDensity:.9,cloudOpacity:.2,cloudSpeed:.8,shootingStarChance:.2,emotionTag:"distant",subtitle:""},perigeeMoon:{id:"perigeeMoon",name:"",nameEn:"Perigee Moon",rarity:"rare",moonTint:"#F8F8FF",skyPalette:["#0a0e2e","#1a1e3e","#2a2e4e"],uiAccent:"#a8a8d8",transitionSpeed:35,starDensity:.75,cloudOpacity:.35,cloudSpeed:1.15,shootingStarChance:.32,emotionTag:"close",subtitle:""},apogeeMoon:{id:"apogeeMoon",name:"",nameEn:"Apogee Moon",rarity:"rare",moonTint:"#B0B0C0",skyPalette:["#0a0e20","#1a1e30","#2a2e40"],uiAccent:"#6060a0",transitionSpeed:40,starDensity:.95,cloudOpacity:.15,cloudSpeed:.7,shootingStarChance:.18,emotionTag:"far",subtitle:""},earthshine:{id:"earthshine",name:"",nameEn:"Earthshine Moon",rarity:"rare",moonTint:"#FFE4B5",skyPalette:["#0d0a1f","#1d1a2f","#2d2a3f"],uiAccent:"#d4a574",transitionSpeed:40,starDensity:.9,cloudOpacity:.2,cloudSpeed:.8,shootingStarChance:.35,emotionTag:"warm",subtitle:""},moonHalo:{id:"moonHalo",name:"",nameEn:"Moon Halo",rarity:"very_rare",moonTint:"#E0E0FA",skyPalette:["#0a0e28","#1a1e38","#2a2e48"],uiAccent:"#9898c8",transitionSpeed:42,starDensity:.8,cloudOpacity:.4,cloudSpeed:.9,shootingStarChance:.28,emotionTag:"mystical",subtitle:""},moonCorona:{id:"moonCorona",name:"",nameEn:"Moon Corona",rarity:"very_rare",moonTint:"#D8D8F8",skyPalette:["#0a0e29","#1a1e39","#2a2e49"],uiAccent:"#8888c8",transitionSpeed:43,starDensity:.75,cloudOpacity:.45,cloudSpeed:.85,shootingStarChance:.3,emotionTag:"crowned",subtitle:""},coloredMoon:{id:"coloredMoon",name:"",nameEn:"Colored Moon",rarity:"rare",moonTint:"#E8C8D8",skyPalette:["#0c0a1e","#1c1a2e","#2c2a3e"],uiAccent:"#b898a8",transitionSpeed:38,starDensity:.85,cloudOpacity:.3,cloudSpeed:1,shootingStarChance:.27,emotionTag:"colorful",subtitle:""},moonIllusion:{id:"moonIllusion",name:"",nameEn:"Moon Illusion",rarity:"rare",moonTint:"#F8E8D8",skyPalette:["#0d0b1d","#1d1b2d","#2d2b3d"],uiAccent:"#c8b898",transitionSpeed:37,starDensity:.8,cloudOpacity:.35,cloudSpeed:1.05,shootingStarChance:.25,emotionTag:"illusory",subtitle:""},blueMoon:{id:"blueMoon",name:"",nameEn:"Blue Moon",rarity:"very_rare",moonTint:"#B0C8E0",skyPalette:["#0a0e2a","#1a1e3a","#2a2e4a"],uiAccent:"#8098c0",transitionSpeed:45,starDensity:.85,cloudOpacity:.25,cloudSpeed:.9,shootingStarChance:.33,emotionTag:"rare",subtitle:""},blackMoon:{id:"blackMoon",name:"",nameEn:"Black Moon",rarity:"very_rare",moonTint:"#1a1a2e",skyPalette:["#000000","#0a0a1a","#14142a"],uiAccent:"#4a4a6a",transitionSpeed:50,starDensity:1,cloudOpacity:.1,cloudSpeed:.5,shootingStarChance:.15,emotionTag:"mysterious",subtitle:""},harvestMoon:{id:"harvestMoon",name:"",nameEn:"Harvest Moon",rarity:"rare",moonTint:"#FFD8A0",skyPalette:["#1a1008","#2a2018","#3a3028"],uiAccent:"#d8a870",transitionSpeed:38,starDensity:.75,cloudOpacity:.3,cloudSpeed:1,shootingStarChance:.28,specialEffect:"fireflies",effectIntensity:.6,emotionTag:"abundant",subtitle:""},hunterMoon:{id:"hunterMoon",name:"",nameEn:"Hunter Moon",rarity:"rare",moonTint:"#E8B878",skyPalette:["#1a1208","#2a2218","#3a3228"],uiAccent:"#c89858",transitionSpeed:38,starDensity:.8,cloudOpacity:.25,cloudSpeed:1.1,shootingStarChance:.3,emotionTag:"alert",subtitle:""},pinkMoon:{id:"pinkMoon",name:"",nameEn:"Pink Moon",rarity:"rare",moonTint:"#FFD8E8",skyPalette:["#1a0e18","#2a1e28","#3a2e38"],uiAccent:"#d8a8b8",transitionSpeed:35,starDensity:.85,cloudOpacity:.3,cloudSpeed:.95,shootingStarChance:.27,emotionTag:"gentle",subtitle:""},wolfMoon:{id:"wolfMoon",name:"",nameEn:"Wolf Moon",rarity:"rare",moonTint:"#D8D8E8",skyPalette:["#0a0e24","#1a1e34","#2a2e44"],uiAccent:"#9898b8",transitionSpeed:40,starDensity:.9,cloudOpacity:.2,cloudSpeed:.8,shootingStarChance:.25,emotionTag:"wild",subtitle:""},snowMoon:{id:"snowMoon",name:"",nameEn:"Snow Moon",rarity:"rare",moonTint:"#F0F0FF",skyPalette:["#0a0e2e","#1a1e3e","#2a2e4e"],uiAccent:"#b0b0d0",transitionSpeed:42,starDensity:.95,cloudOpacity:.4,cloudSpeed:.7,shootingStarChance:.22,specialEffect:"snow",effectIntensity:.7,emotionTag:"cold",subtitle:""},strawberryMoon:{id:"strawberryMoon",name:"",nameEn:"Strawberry Moon",rarity:"rare",moonTint:"#FFE0D0",skyPalette:["#1a0e0e","#2a1e1e","#3a2e2e"],uiAccent:"#d8b0a0",transitionSpeed:36,starDensity:.8,cloudOpacity:.3,cloudSpeed:1,shootingStarChance:.28,emotionTag:"sweet",subtitle:""},stillMoon:{id:"stillMoon",name:"",nameEn:"Still Moon",rarity:"mythic",moonTint:"#B0C4DE",skyPalette:["#0f0f1f","#1f1f2f","#2f2f3f"],uiAccent:"#7090b0",transitionSpeed:60,starDensity:.6,cloudOpacity:.5,cloudSpeed:.1,shootingStarChance:0,specialEffect:"frozenTime",effectIntensity:.75,emotionTag:"frozen",subtitle:"",moonSize:1.4},fadingMoon:{id:"fadingMoon",name:"",nameEn:"Fading Moon",rarity:"legendary",moonTint:"#A0A0B0",skyPalette:["#0a0a1a","#1a1a2a","#2a2a3a"],uiAccent:"#707090",transitionSpeed:55,starDensity:.7,cloudOpacity:.45,cloudSpeed:.6,shootingStarChance:.15,specialEffect:"fadeParticles",effectIntensity:.7,emotionTag:"disappearing",subtitle:" "},veiledMoon:{id:"veiledMoon",name:"",nameEn:"Veiled Moon",rarity:"very_rare",moonTint:"#C0C0D0",skyPalette:["#0c0c1c","#1c1c2c","#2c2c3c"],uiAccent:"#8080a0",transitionSpeed:48,starDensity:.65,cloudOpacity:.6,cloudSpeed:.8,shootingStarChance:.18,emotionTag:"obscured",subtitle:""},echoMoon:{id:"echoMoon",name:"",nameEn:"Echo Moon",rarity:"mythic",moonTint:"#D0D0E8",skyPalette:["#0e0e1e","#1e1e2e","#2e2e3e"],uiAccent:"#9090b8",transitionSpeed:52,starDensity:.75,cloudOpacity:.35,cloudSpeed:.9,shootingStarChance:.25,specialEffect:"echo",effectIntensity:.75,emotionTag:"repeating",subtitle:"",moonSize:1.4},silentMoon:{id:"silentMoon",name:"",nameEn:"Silent Moon",rarity:"legendary",moonTint:"#A8A8C8",skyPalette:["#08081a","#18182a","#28283a"],uiAccent:"#6868a8",transitionSpeed:58,starDensity:0,cloudOpacity:.2,cloudSpeed:.5,shootingStarChance:0,specialEffect:"silence",effectIntensity:.8,emotionTag:"silent",subtitle:" "},brokenMoon:{id:"brokenMoon",name:"",nameEn:"Broken Moon",rarity:"mythic",moonTint:"#9898B8",skyPalette:["#0a0a1c","#1a1a2c","#2a2a3c"],uiAccent:"#6868a8",transitionSpeed:54,starDensity:.8,cloudOpacity:.3,cloudSpeed:1,shootingStarChance:.2,emotionTag:"fractured",subtitle:"",moonSize:1.4},emptySky:{id:"emptySky",name:"",nameEn:"Empty Sky",rarity:"mythic",moonTint:"#404050",skyPalette:["#000000","#050510","#0a0a20"],uiAccent:"#505070",transitionSpeed:60,starDensity:0,cloudOpacity:0,cloudSpeed:0,shootingStarChance:0,specialEffect:"voidRipples",effectIntensity:.6,emotionTag:"void",subtitle:"",moonSize:1.4},dreamMoon:{id:"dreamMoon",name:"",nameEn:"Dream Moon",rarity:"legendary",moonTint:"#C8B8D8",skyPalette:["#0e0a1e","#1e1a2e","#2e2a3e"],uiAccent:"#a888c8",transitionSpeed:50,starDensity:.85,cloudOpacity:.4,cloudSpeed:.7,shootingStarChance:.35,specialEffect:"dreamDust",effectIntensity:.75,emotionTag:"dreamy",subtitle:""},whisperingMoon:{id:"whisperingMoon",name:"",nameEn:"Whispering Moon",rarity:"very_rare",moonTint:"#D8C8E8",skyPalette:["#0c0a1c","#1c1a2c","#2c2a3c"],uiAccent:"#b898d8",transitionSpeed:46,starDensity:.8,cloudOpacity:.35,cloudSpeed:.85,shootingStarChance:.28,emotionTag:"whispering",subtitle:""},forgottenMoon:{id:"forgottenMoon",name:"",nameEn:"Forgotten Moon",rarity:"legendary",moonTint:"#888898",skyPalette:["#0a0a18","#1a1a28","#2a2a38"],uiAccent:"#585878",transitionSpeed:56,starDensity:.5,cloudOpacity:.5,cloudSpeed:.4,shootingStarChance:.1,specialEffect:"memoryFragments",effectIntensity:.65,emotionTag:"forgotten",subtitle:""},mirrorMoon:{id:"mirrorMoon",name:"",nameEn:"Mirror Moon",rarity:"very_rare",moonTint:"#E8E8F8",skyPalette:["#0a0e2a","#1a1e3a","#2a2e4a"],uiAccent:"#a8a8d8",transitionSpeed:44,starDensity:.9,cloudOpacity:.25,cloudSpeed:1,shootingStarChance:.3,emotionTag:"reflective",subtitle:""},twilightMoon:{id:"twilightMoon",name:"",nameEn:"Twilight Moon",rarity:"rare",moonTint:"#C8B8D8",skyPalette:["#1a1428","#2a2438","#3a3448"],uiAccent:"#9888b8",transitionSpeed:40,starDensity:.7,cloudOpacity:.4,cloudSpeed:.9,shootingStarChance:.25,emotionTag:"transition",subtitle:""},ancientMoon:{id:"ancientMoon",name:"",nameEn:"Ancient Moon",rarity:"legendary",moonTint:"#B8A888",skyPalette:["#1a1408","#2a2418","#3a3428"],uiAccent:"#988868",transitionSpeed:52,starDensity:.85,cloudOpacity:.3,cloudSpeed:.6,shootingStarChance:.22,specialEffect:"ancientRunes",effectIntensity:.7,emotionTag:"ancient",subtitle:""},crystalMoon:{id:"crystalMoon",name:"",nameEn:"Crystal Moon",rarity:"mythic",moonTint:"#E0F0FF",skyPalette:["#0a0e30","#1a1e40","#2a2e50"],uiAccent:"#b0c0e0",transitionSpeed:48,starDensity:1,cloudOpacity:.15,cloudSpeed:.8,shootingStarChance:.4,specialEffect:"prismLights",effectIntensity:.9,emotionTag:"crystalline",subtitle:"",moonSize:1.5},shadowMoon:{id:"shadowMoon",name:"",nameEn:"Shadow Moon",rarity:"very_rare",moonTint:"#606078",skyPalette:["#050510","#151520","#252530"],uiAccent:"#404068",transitionSpeed:50,starDensity:.6,cloudOpacity:.5,cloudSpeed:.7,shootingStarChance:.15,emotionTag:"shadowy",subtitle:""},luminousMoon:{id:"luminousMoon",name:"",nameEn:"Luminous Moon",rarity:"legendary",moonTint:"#F8F8FF",skyPalette:["#0a0e32","#1a1e42","#2a2e52"],uiAccent:"#c8c8f0",transitionSpeed:46,starDensity:.95,cloudOpacity:.2,cloudSpeed:1.1,shootingStarChance:.38,specialEffect:"lightRays",effectIntensity:.8,emotionTag:"radiant",subtitle:""},arcticMoon:{id:"arcticMoon",name:"",nameEn:"Arctic Moon",rarity:"mythic",moonTint:"#D0E8F8",skyPalette:["#000814","#001428","#00243c"],uiAccent:"#90c0d8",transitionSpeed:50,starDensity:.9,cloudOpacity:.1,cloudSpeed:.5,shootingStarChance:.15,specialEffect:"aurora",effectIntensity:.85,emotionTag:"ethereal",subtitle:"",moonSize:1.4},meteorShowerMoon:{id:"meteorShowerMoon",name:"",nameEn:"Meteor Shower Moon",rarity:"legendary",moonTint:"#E8E8FF",skyPalette:["#0a0a20","#1a1a30","#2a2a40"],uiAccent:"#a8a8d8",transitionSpeed:44,starDensity:1,cloudOpacity:.15,cloudSpeed:.8,shootingStarChance:0,specialEffect:"shootingStars",effectIntensity:.85,emotionTag:"spectacular",subtitle:""},shatteredMoon:{id:"shatteredMoon",name:"",nameEn:"Shattered Moon",rarity:"mythic",moonTint:"#E8E8F8",skyPalette:["#0a0a1f","#141428","#1e1e38"],uiAccent:"#9898c8",transitionSpeed:52,starDensity:.85,cloudOpacity:.15,cloudSpeed:.4,shootingStarChance:.22,moonSize:1.6,specialEffect:"shattered",effectIntensity:1,emotionTag:"broken",subtitle:""},cosmicVoyageMoon:{id:"cosmicVoyageMoon",name:"",nameEn:"Cosmic Voyage Moon",rarity:"mythic",moonTint:"#E0E8FF",skyPalette:["#000510","#001020","#001530"],uiAccent:"#8090C0",transitionSpeed:55,starDensity:.95,cloudOpacity:.05,cloudSpeed:.3,shootingStarChance:.25,moonSize:1.3,specialEffect:"starfield",effectIntensity:1,emotionTag:"cosmic",subtitle:""},nebulaDreamMoon:{id:"nebulaDreamMoon",name:"",nameEn:"Nebula Dream Moon",rarity:"mythic",moonTint:"#F0D8FF",skyPalette:["#0a0515","#150a25","#200f35"],uiAccent:"#B888D8",transitionSpeed:58,starDensity:.9,cloudOpacity:.1,cloudSpeed:.4,shootingStarChance:.2,moonSize:1.5,specialEffect:"nebula",effectIntensity:.9,emotionTag:"dreamy",subtitle:""},pixelDreamMoon:{id:"pixelDreamMoon",name:"",nameEn:"Pixel Dream Moon",rarity:"mythic",moonTint:"#5fffd2",skyPalette:["#070614","#140a2a","#241042"],uiAccent:"#ff8fd6",transitionSpeed:62,starDensity:1,cloudOpacity:.36,cloudSpeed:.35,shootingStarChance:.18,moonSize:1.55,specialEffect:"pixel",effectIntensity:1,emotionTag:"pixel_dream",subtitle:""}},F$=()=>Object.values(Ht),vk="dream-book-unlocked-moons",Kg="mythic-moon-collection",z$="2b80af53f46faf01d623ac1ccd6665fac0617ef59bbbe37664646a5ebc7ecf0e";async function B$(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}async function V$(e){try{return await B$(e.trim().toUpperCase())===z$}catch(t){return console.error("Error verifying code:",t),!1}}function wd(){try{const e=localStorage.getItem(vk);return e?JSON.parse(e):{isFullyUnlocked:!1}}catch(e){return console.error("Error reading unlock status:",e),{isFullyUnlocked:!1}}}function U$(e,t){return{id:e,firstEncountered:t,encounterCount:1,lastEncountered:t,isFavorite:!1,isLocked:!1,themeDurationBoost:0}}function xk(){const e=localStorage.getItem(Kg);if(!e)return null;try{const t=JSON.parse(e);return!t||typeof t!="object"||Array.isArray(t)?null:t}catch(t){return console.error("Error parsing moon collection:",t),null}}function bk(e){const t=new Date().toISOString(),n={...e??{}};let r=!1;return Object.keys(Ht).forEach(s=>{n[s]||(n[s]=U$(s,t),r=!0)}),{merged:n,updated:r}}function W$(){const e=xk(),{merged:t}=bk(e),n=Object.keys(Ht).length;localStorage.setItem(Kg,JSON.stringify(t)),console.log(` All ${n} moons unlocked in collection (localStorage)!`)}function H$(){const e={isFullyUnlocked:!0,unlockedAt:new Date().toISOString()};localStorage.setItem(vk,JSON.stringify(e)),W$()}function G$(){try{if(!wd().isFullyUnlocked)return;const t=xk(),{merged:n,updated:r}=bk(t);(!t||r)&&localStorage.setItem(Kg,JSON.stringify(n))}catch(e){console.error("Error syncing unlocked collection:",e)}}function qa(){return wd().isFullyUnlocked}const K$={normal:70,rare:20,very_rare:15,legendary:10,mythic:5},q$={normal:30,rare:30,very_rare:30,legendary:30,mythic:30},Au="dreambook_moon_phenomenon",Du="dreambook_moon_expiry",wk="mythic-moon-collection",Y$="mythic-locked-moon",Ip="mythic-shuffle-enabled",X$=30*60*1e3,Cb=()=>{const e=F$(),n=qa()?q$:K$,r=e.reduce((a,i)=>a+n[i.rarity],0);let s=Math.random()*r;for(const a of e)if(s-=n[a.rarity],s<=0)return a;return e[0]},Q$=e=>{var t;try{const n=localStorage.getItem(wk);if(n)return((t=JSON.parse(n)[e])==null?void 0:t.themeDurationBoost)||0}catch(n){console.error("Failed to get duration boost:",n)}return 0},J$=()=>{const e=Object.values(Ht).filter(t=>t.rarity==="mythic");try{const t=localStorage.getItem(wk);if(!t)return qa()?e:[];const n=JSON.parse(t),r=e.filter(s=>!!n[s.id]);return r.length===0&&qa()?e:r}catch(t){return console.error("Failed to read mythic collection:",t),[]}},Z$=(e,t)=>{if(e.length===0)return null;if(t&&e.length>1){const n=e.filter(r=>r.id!==t);if(n.length>0)return n[Math.floor(Math.random()*n.length)]}return e[Math.floor(Math.random()*e.length)]},Sk=()=>{try{return localStorage.getItem(Ip)==="1"}catch(e){return console.error("Failed to read mythic shuffle state:",e),!1}},Nb=e=>{try{e?localStorage.setItem(Ip,"1"):localStorage.removeItem(Ip)}catch(t){console.error("Failed to set mythic shuffle state:",t)}},eL=e=>{const n=Q$(e.id)*1e3;return X$+n},tL=()=>{const e=localStorage.getItem(Y$);return e&&Ht[e]?Ht[e]:null},Ea=()=>{const e=Sk(),t=e?J$():[],n=e&&t.length>0,r=tL();if(r)return console.log(` Using locked moon: ${r.name}`),localStorage.setItem(Au,JSON.stringify(r)),localStorage.removeItem(Du),{phenomenon:r,isNewEncounter:!1};const s=Date.now(),a=localStorage.getItem(Au),i=localStorage.getItem(Du);let l;if(a&&i)try{const m=JSON.parse(a),x=parseInt(i,10);if(l=m==null?void 0:m.id,m&&m.id&&s<x)if(n){const g=m.rarity==="mythic",b=t.some(y=>y.id===m.id);if(g&&b){const y=x-s,w=Math.round(y/6e4);return console.log(` Mythic shuffle valid for ${w} more minutes`),{phenomenon:m,isNewEncounter:!1}}}else{const g=x-s,b=Math.round(g/6e4);return console.log(` Moon theme valid for ${b} more minutes`),{phenomenon:m,isNewEncounter:!1}}s>=x&&console.log(" Moon theme expired, selecting new one...")}catch(m){console.error("Failed to parse stored phenomenon:",m)}const c=n&&Z$(t,l)||Cb(),u=eL(c),d=s+u;localStorage.setItem(Au,JSON.stringify(c)),localStorage.setItem(Du,d.toString());const h=Math.round(u/6e4),f=qa()?"  [UNLOCKED MODE]":"";return console.log(` New moon selected: ${c.name} (duration: ${h} minutes)${f}`),{phenomenon:c,isNewEncounter:!0}},Of=()=>{localStorage.removeItem(Au),localStorage.removeItem(Du),console.log(" Moon phenomenon cleared")},qi=e=>{const t=document.documentElement,n=e.transitionSpeed;t.style.setProperty("--sky-transition-duration",`${n*.8}s`),t.style.setProperty("--moon-transition-duration",`${n}s`),t.style.setProperty("--ui-transition-duration",`${n*1.5}s`),t.style.setProperty("--moon-accent",e.uiAccent);const r=jk(e.uiAccent);if(r){const s=nL(r.r,r.g,r.b);if(e.rarity==="mythic"){t.setAttribute("data-mythic-theme",e.id),console.log(` Applied Mythic Theme: ${e.id}`),console.log(" Attribute set on:",t),console.log(` Check CSS selector: :root[data-mythic-theme="${e.id}"]`);const h={superBloodMoon:{background:"0 50% 5%",foreground:"0 100% 95%",card:"0 50% 8%",primary:"0 84% 60%",bgColor:"#100505"},superBlueBloodMoon:{background:"270 50% 5%",foreground:"270 100% 95%",card:"270 50% 8%",primary:"290 80% 60%",bgColor:"#1a0520"},lunarTransientPhenomena:{background:"250 50% 4%",foreground:"250 100% 95%",card:"250 50% 7%",primary:"260 100% 70%",bgColor:"#050510"},hybridEclipse:{background:"30 40% 5%",foreground:"40 80% 90%",card:"30 40% 8%",primary:"40 100% 60%",bgColor:"#1a1008"},stillMoon:{background:"210 50% 10%",foreground:"210 20% 95%",card:"210 30% 15%",primary:"210 80% 70%",bgColor:"#0f1f2f"},echoMoon:{background:"240 20% 8%",foreground:"240 20% 90%",card:"240 20% 12%",primary:"245 40% 70%",bgColor:"#0e0e1e"},brokenMoon:{background:"250 15% 8%",foreground:"250 15% 90%",card:"250 15% 11%",primary:"255 30% 65%",bgColor:"#0a0a1c"},emptySky:{background:"0 0% 0%",foreground:"0 0% 80%",card:"0 0% 5%",primary:"0 0% 60%",bgColor:"#000000"},crystalMoon:{background:"220 50% 8%",foreground:"220 50% 95%",card:"220 40% 12%",primary:"200 80% 70%",bgColor:"#0a0e30"},arcticMoon:{background:"200 60% 6%",foreground:"200 50% 95%",card:"200 50% 10%",primary:"190 90% 65%",bgColor:"#001428"},shatteredMoon:{background:"260 20% 8%",foreground:"260 20% 90%",card:"260 20% 12%",primary:"250 50% 60%",bgColor:"#0a0a1f"},cosmicVoyageMoon:{background:"230 60% 4%",foreground:"230 40% 95%",card:"230 50% 8%",primary:"220 80% 70%",bgColor:"#000510"},nebulaDreamMoon:{background:"280 40% 8%",foreground:"280 40% 95%",card:"280 40% 12%",primary:"290 70% 70%",bgColor:"#150a25"},pixelDreamMoon:{background:"270 55% 6%",foreground:"300 80% 95%",card:"270 40% 10%",primary:"320 90% 70%",bgColor:"#120826",glowColor:"#ff8fd6"}}[e.id];h&&(t.style.setProperty("--background",h.background),t.style.setProperty("--foreground",h.foreground),t.style.setProperty("--card",h.card),t.style.setProperty("--card-foreground",h.foreground),t.style.setProperty("--primary",h.primary),t.style.setProperty("--primary-foreground","0 0% 100%"),document.body.style.backgroundColor=h.bgColor,console.log(" Mythic theme colors applied via JavaScript"));return}else t.removeAttribute("data-mythic-theme"),console.log(` Moon Rarity: ${e.rarity} - Using dynamic theme`);t.style.setProperty("--primary",`${s.h} ${s.s}% ${s.l}%`),t.style.setProperty("--primary-foreground","0 0% 100%"),t.style.setProperty("--accent",`${s.h} ${s.s}% ${Math.min(s.l+10,95)}%`),t.style.setProperty("--accent-foreground",`${s.h} ${s.s}% ${Math.max(s.l-40,10)}%`),t.style.setProperty("--ring",`${s.h} ${s.s}% ${s.l}%`),t.style.setProperty("--border",`${s.h} ${Math.max(s.s-30,10)}% ${Math.min(s.l+30,90)}%`),t.style.setProperty("--input",`${s.h} ${Math.max(s.s-30,10)}% ${Math.min(s.l+30,90)}%`),t.style.setProperty("--card",`${s.h} ${Math.max(s.s-50,15)}% 95%`),t.style.setProperty("--card-foreground",`${s.h} ${Math.max(s.s-60,10)}% 10%`),t.style.setProperty("--popover",`${s.h} ${Math.max(s.s-50,15)}% 96%`),t.style.setProperty("--popover-foreground",`${s.h} ${Math.max(s.s-60,10)}% 10%`),t.style.setProperty("--secondary",`${s.h} ${Math.max(s.s-40,20)}% 90%`),t.style.setProperty("--secondary-foreground",`${s.h} ${s.s}% ${Math.max(s.l-30,10)}%`),t.style.setProperty("--muted",`${s.h} ${Math.max(s.s-40,20)}% 88%`),t.style.setProperty("--muted-foreground",`${s.h} ${Math.max(s.s-40,15)}% 45%`),t.style.setProperty("--background",`${s.h} ${Math.max(s.s-50,20)}% 92%`),t.style.setProperty("--foreground",`${s.h} ${Math.max(s.s-60,10)}% 5%`),t.style.setProperty("--sidebar-background",`${s.h} ${Math.max(s.s-50,20)}% 93%`),t.style.setProperty("--sidebar-foreground",`${s.h} ${Math.max(s.s-60,10)}% 5%`),t.style.setProperty("--sidebar-primary",`${s.h} ${s.s}% ${s.l}%`),t.style.setProperty("--sidebar-primary-foreground","0 0% 100%"),t.style.setProperty("--sidebar-accent",`${s.h} ${Math.max(s.s-40,20)}% 88%`),t.style.setProperty("--sidebar-accent-foreground",`${s.h} ${Math.max(s.s-50,15)}% 10%`),t.style.setProperty("--sidebar-border",`${s.h} ${Math.max(s.s-30,10)}% 85%`),t.style.setProperty("--sidebar-ring",`${s.h} ${s.s}% ${s.l}%`);const a=If(e.uiAccent,1.2);t.style.setProperty("--moon-text",a);const i=If(e.uiAccent,.6);t.style.setProperty("--moon-placeholder",i);const l=`rgba(${r.r}, ${r.g}, ${r.b}, 0.2)`;t.style.setProperty("--moon-divider",l),t.style.setProperty("--moon-caret",e.uiAccent);const c=`rgba(${r.r}, ${r.g}, ${r.b}, 0.3)`;t.style.setProperty("--moon-selection",c);const u=If(e.uiAccent,1.1);t.style.setProperty("--moon-button-hover",u)}console.log(" Applied complete system-wide moon theme:",e.name)},jk=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},nL=(e,t,n)=>{e/=255,t/=255,n/=255;const r=Math.max(e,t,n),s=Math.min(e,t,n);let a=0,i=0;const l=(r+s)/2;if(r!==s){const c=r-s;switch(i=l>.5?c/(2-r-s):c/(r+s),r){case e:a=((t-n)/c+(t<n?6:0))/6;break;case t:a=((n-e)/c+2)/6;break;case n:a=((e-t)/c+4)/6;break}}return{h:Math.round(a*360),s:Math.round(i*100),l:Math.round(l*100)}},If=(e,t)=>{const n=jk(e);if(!n)return e;const r=Math.min(255,Math.floor(n.r*t)),s=Math.min(255,Math.floor(n.g*t)),a=Math.min(255,Math.floor(n.b*t));return`#${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}`},Sd=(e=new Date)=>{const t=new Date("2000-01-06T18:14:00Z"),n=29.530588853,s=(e.getTime()-t.getTime())/(1e3*60*60*24)%n,a=s/n,i=(1-Math.cos(a*Math.PI*2))/2;let l,c;return a<.033||a>.967?(l="New Moon",c=""):a<.216?(l="Waxing Crescent",c=""):a<.283?(l="First Quarter",c=""):a<.467?(l="Waxing Gibbous",c=""):a<.533?(l="Full Moon",c=""):a<.717?(l="Waning Gibbous",c=""):a<.783?(l="Last Quarter",c=""):(l="Waning Crescent",c=""),{phase:a,phaseName:l,phaseNameTh:c,illumination:i,age:s}};function rL(){const e=p.useRef({x:0,y:0});return p.useEffect(()=>{const t=n=>{let r=0,s=0;n instanceof MouseEvent?(r=(n.clientX/window.innerWidth-.5)*20,s=(n.clientY/window.innerHeight-.5)*20):window.DeviceOrientationEvent&&n instanceof DeviceOrientationEvent&&(n.gamma!==null&&(r=Math.max(-20,Math.min(20,n.gamma/2))),n.beta!==null&&(s=Math.max(-20,Math.min(20,(n.beta-45)/2)))),e.current={x:r,y:s}};return window.addEventListener("mousemove",t),window.addEventListener("deviceorientation",t),()=>{window.removeEventListener("mousemove",t),window.removeEventListener("deviceorientation",t)}},[]),e}function sL(e={}){const{targetFPS:t=60,enableAdaptive:n=!0,minFPS:r=20,maxFPS:s=60}=e,a=p.useRef(0),i=p.useRef(0),l=p.useRef([]),c=p.useRef(t),u=p.useRef(0),[d,h]=p.useState({currentFPS:t,averageFPS:t,isThrottled:!1}),[f,m]=p.useState(!1);p.useEffect(()=>{var S;const y=(S=navigator.getBattery)==null?void 0:S.bind(navigator);if(!y)return;let w=!0,v;return y().then(j=>{if(!w)return;const k=()=>{m(j.level<.2&&!j.charging)};k(),j.addEventListener("levelchange",k),j.addEventListener("chargingchange",k),v=()=>{j.removeEventListener("levelchange",k),j.removeEventListener("chargingchange",k)}}).catch(j=>{console.warn("Battery API unavailable:",j)}),()=>{w=!1,v==null||v()}},[]);const x=p.useCallback(()=>{let y=c.current;return f&&(y=Math.min(y,30)),1e3/y},[f]),g=p.useCallback(y=>{const w=x();if(y-a.current>=w){if(i.current++,y-u.current>=1e3){const S=i.current;l.current.push(S),l.current.length>5&&l.current.shift();const j=l.current.reduce((k,N)=>k+N,0)/l.current.length;n&&(S<c.current*.8?c.current=Math.max(r,c.current-5):S>=c.current*.95&&c.current<s&&(c.current=Math.min(s,c.current+2))),h({currentFPS:S,averageFPS:Math.round(j),isThrottled:c.current<t}),i.current=0,u.current=y}return a.current=y,!0}return!1},[x,n,r,s,t]),b=p.useCallback(()=>{a.current=0,i.current=0,l.current=[],c.current=t,u.current=0},[t]);return{shouldRenderFrame:g,resetThrottle:b,metrics:d,isLowPowerMode:f,currentTargetFPS:c.current}}const aL=()=>[],kk=(e,t,n=40)=>{const r=Math.random()*Math.PI*2,s=Math.random()*n*.8;return{x:e+Math.cos(r)*s,y:t+Math.sin(r)*s,size:Math.random()*8+4,opacity:1,lifetime:0,maxLifetime:30+Math.random()*20}},iL=(e,t)=>t.map(n=>{if(n.lifetime++,n.opacity=1-n.lifetime/n.maxLifetime,n.opacity>0){const r=e.createRadialGradient(n.x,n.y,0,n.x,n.y,n.size);r.addColorStop(0,`rgba(255,255,255,${n.opacity})`),r.addColorStop(.5,`rgba(200,200,255,${n.opacity*.6})`),r.addColorStop(1,"rgba(150,150,255,0)"),e.fillStyle=r,e.beginPath(),e.arc(n.x,n.y,n.size,0,Math.PI*2),e.fill()}return n}).filter(n=>n.lifetime<n.maxLifetime),$f=(e=20,t="#B84060",n="#d85080",r=.01,s=.02)=>Array.from({length:e},(a,i)=>({angle:Math.PI*2*i/e,distance:50+Math.random()*30,size:Math.random()*3+1,speed:r+Math.random()*(s-r),color:i%2===0?t:n,opacity:Math.random()*.5+.3})),oL=(e,t,n,r)=>{t.forEach(s=>{s.angle+=s.speed;const a=n+Math.cos(s.angle)*s.distance,i=r+Math.sin(s.angle)*s.distance,l=e.createRadialGradient(a,i,0,a,i,s.size*2);l.addColorStop(0,`${s.color}${Math.floor(s.opacity*255).toString(16).padStart(2,"0")}`),l.addColorStop(1,`${s.color}00`),e.fillStyle=l,e.beginPath(),e.arc(a,i,s.size*2,0,Math.PI*2),e.fill(),e.fillStyle=s.color,e.globalAlpha=s.opacity,e.beginPath(),e.arc(a,i,s.size,0,Math.PI*2),e.fill(),e.globalAlpha=1})},Ck=(e,t,n=40)=>Array.from({length:50},()=>{const r=Math.random()*Math.PI*2,s=Math.random()*n*1.8;return{x:e+Math.cos(r)*s,y:t+Math.sin(r)*s,size:Math.random()*4+1.5,opacity:Math.random()*.9+.3,twinklePhase:Math.random()*Math.PI*2,twinkleSpeed:.03+Math.random()*.05}}),lL=(e,t)=>{t.forEach(n=>{n.twinklePhase+=n.twinkleSpeed;const r=(Math.sin(n.twinklePhase)+1)/2,s=n.opacity*r;if(s>.1){e.save(),e.translate(n.x,n.y),e.rotate(n.twinklePhase*.2);const a=e.createRadialGradient(0,0,0,0,0,n.size*6),i=n.twinklePhase*50%360;a.addColorStop(0,`hsla(${i}, 70%, 85%, ${s*.4})`),a.addColorStop(.3,`hsla(${i+60}, 60%, 80%, ${s*.3})`),a.addColorStop(.6,`hsla(${i+120}, 50%, 75%, ${s*.2})`),a.addColorStop(1,"rgba(176, 192, 224, 0)"),e.fillStyle=a,e.beginPath(),e.arc(0,0,n.size*6,0,Math.PI*2),e.fill();const l=e.createRadialGradient(0,0,0,0,0,n.size*4);l.addColorStop(0,`rgba(240, 248, 255, ${s})`),l.addColorStop(.4,`rgba(200, 220, 255, ${s*.7})`),l.addColorStop(.7,`rgba(176, 192, 224, ${s*.4})`),l.addColorStop(1,"rgba(176, 192, 224, 0)"),e.fillStyle=l,e.beginPath(),e.arc(0,0,n.size*4,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(255, 255, 255, ${s*.8})`,e.beginPath();for(let c=0;c<6;c++){const u=c*Math.PI/3,d=Math.cos(u)*n.size*1.2,h=Math.sin(u)*n.size*1.2;c===0?e.moveTo(d,h):e.lineTo(d,h)}e.closePath(),e.fill(),e.fillStyle=`rgba(200, 220, 255, ${s*.6})`,e.beginPath();for(let c=0;c<6;c++){const u=c*Math.PI/3,d=Math.cos(u)*n.size*.6,h=Math.sin(u)*n.size*.6;c===0?e.moveTo(d,h):e.lineTo(d,h)}e.closePath(),e.fill(),e.fillStyle=`rgba(255, 255, 255, ${s})`,e.beginPath(),e.arc(0,0,n.size*.3,0,Math.PI*2),e.fill(),e.strokeStyle=`rgba(240, 248, 255, ${s*.9})`,e.lineWidth=1.5,e.lineCap="round";for(let c=0;c<6;c++){const u=c*Math.PI/3,d=n.size*6;e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(u)*d,Math.sin(u)*d),e.stroke()}e.strokeStyle=`rgba(200, 220, 255, ${s*.5})`,e.lineWidth=.8;for(let c=0;c<12;c++){const u=c*Math.PI/6+Math.PI/12,d=n.size*4;e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(u)*d,Math.sin(u)*d),e.stroke()}e.restore()}})},cL=(e,t,n,r=4)=>Array.from({length:r},(s,a)=>({x:e,y:t,radius:n,opacity:.6-a*.15,delay:a*15,scale:1+a*.15,phaseOffset:0})),uL=(e,t,n,r,s,a)=>{t.forEach((i,l)=>{i.phaseOffset+=.001;const c=n,u=r+Math.sin(s-i.phaseOffset*50)*3;i.x+=(c-i.x)*(.05/(l+1)),i.y+=(u-i.y)*(.05/(l+1));const d=i.radius*i.scale,h=e.createRadialGradient(i.x,i.y,d*.3,i.x,i.y,d*2);h.addColorStop(0,`${a}${Math.floor(i.opacity*.4*255).toString(16).padStart(2,"0")}`),h.addColorStop(.5,`${a}${Math.floor(i.opacity*.2*255).toString(16).padStart(2,"0")}`),h.addColorStop(1,`${a}00`),e.fillStyle=h,e.beginPath(),e.arc(i.x,i.y,d*2,0,Math.PI*2),e.fill();const f=e.createRadialGradient(i.x-d*.25,i.y-d*.25,0,i.x,i.y,d);f.addColorStop(0,`${a}${Math.floor(i.opacity*.8*255).toString(16).padStart(2,"0")}`),f.addColorStop(.7,`${a}${Math.floor(i.opacity*.5*255).toString(16).padStart(2,"0")}`),f.addColorStop(1,`${a}${Math.floor(i.opacity*.2*255).toString(16).padStart(2,"0")}`),e.fillStyle=f,e.beginPath(),e.arc(i.x,i.y,d,0,Math.PI*2),e.fill(),e.strokeStyle=`rgba(255, 255, 255, ${i.opacity*.3})`,e.lineWidth=1.5,e.beginPath(),e.arc(i.x-d*.3,i.y-d*.3,d*.6,Math.PI,Math.PI*2),e.stroke();const m=(Date.now()/1e3+l*.5)%2;for(let x=0;x<3;x++){const g=d*(1.2+m*.5+x*.3),b=i.opacity*(1-m/2)*.4;b>.05&&(e.strokeStyle=`rgba(208, 208, 232, ${b})`,e.lineWidth=2,e.beginPath(),e.arc(i.x,i.y,g,0,Math.PI*2),e.stroke())}})},dL=e=>{const t=["#00ff88","#00ddaa","#00ccbb"];return Array.from({length:3},(n,r)=>({y:e*.3+r*80,amplitude:25+Math.random()*20,frequency:.003+Math.random()*.004,phase:Math.random()*Math.PI*2,speed:.004+Math.random()*.005,color:t[r],opacity:.08+Math.random()*.06}))},hL=(e,t,n)=>{t.forEach(r=>{r.phase+=r.speed;const s=r.opacity*(1+Math.sin(r.phase*.5)*.3);e.beginPath(),e.moveTo(0,r.y);for(let l=0;l<=n;l+=2){const c=r.y+Math.sin(l*r.frequency+r.phase)*r.amplitude,u=Math.sin(l*r.frequency*2+r.phase*1.5)*(r.amplitude*.3),d=Math.sin(l*r.frequency*4+r.phase*2)*(r.amplitude*.15),h=Math.sin(l*.05+r.phase*3)*5;e.lineTo(l,c+u+d+h)}const a=e.createLinearGradient(0,r.y,n,r.y);a.addColorStop(0,`${r.color}${Math.floor(s*.4*255).toString(16).padStart(2,"0")}`),a.addColorStop(.25,`${r.color}${Math.floor(s*.7*255).toString(16).padStart(2,"0")}`),a.addColorStop(.5,`${r.color}${Math.floor(s*255).toString(16).padStart(2,"0")}`),a.addColorStop(.75,`${r.color}${Math.floor(s*.7*255).toString(16).padStart(2,"0")}`),a.addColorStop(1,`${r.color}${Math.floor(s*.4*255).toString(16).padStart(2,"0")}`),e.strokeStyle=a,e.lineWidth=70,e.lineCap="round",e.lineJoin="round",e.shadowBlur=40,e.shadowColor=r.color,e.stroke(),e.shadowBlur=0;const i=e.createLinearGradient(0,r.y-r.amplitude*2,0,r.y+r.amplitude*3);if(i.addColorStop(0,`${r.color}00`),i.addColorStop(.2,`${r.color}${Math.floor(s*.5*255).toString(16).padStart(2,"0")}`),i.addColorStop(.5,`${r.color}${Math.floor(s*.8*255).toString(16).padStart(2,"0")}`),i.addColorStop(.8,`${r.color}${Math.floor(s*.4*255).toString(16).padStart(2,"0")}`),i.addColorStop(1,`${r.color}00`),e.strokeStyle=i,e.lineWidth=50,e.globalAlpha=.6,e.stroke(),e.globalAlpha=1,Math.random()<.3)for(let l=0;l<3;l++){const c=Math.random()*n,u=r.y+Math.sin(c*r.frequency+r.phase)*r.amplitude,d=2+Math.random()*3,h=e.createRadialGradient(c,u,0,c,u,d*3);h.addColorStop(0,`rgba(255, 255, 255, ${s*.6})`),h.addColorStop(.5,`${r.color}${Math.floor(s*.4*255).toString(16).padStart(2,"0")}`),h.addColorStop(1,`${r.color}00`),e.fillStyle=h,e.beginPath(),e.arc(c,u,d*3,0,Math.PI*2),e.fill()}})},fL=(e,t,n=20)=>Array.from({length:n},()=>{const r=Math.random()*e,s=t*.5+Math.random()*t*.4;return{x:r,y:s,vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5,size:2+Math.random()*2,opacity:0,blinkPhase:Math.random()*Math.PI*2,blinkSpeed:.05+Math.random()*.05,targetX:r,targetY:s}}),mL=(e,t,n,r)=>{t.forEach(s=>{if(s.blinkPhase+=s.blinkSpeed,s.opacity=Math.max(0,Math.sin(s.blinkPhase))*.8,Math.random()<.02&&(s.targetX=Math.random()*n,s.targetY=r*.5+Math.random()*r*.4),s.vx+=(s.targetX-s.x)*.001,s.vy+=(s.targetY-s.y)*.001,s.vx*=.95,s.vy*=.95,s.x+=s.vx,s.y+=s.vy,s.opacity>0){const a=e.createRadialGradient(s.x,s.y,0,s.x,s.y,s.size*3);a.addColorStop(0,`rgba(255,255,150,${s.opacity})`),a.addColorStop(.5,`rgba(255,200,100,${s.opacity*.5})`),a.addColorStop(1,"rgba(255,200,100,0)"),e.fillStyle=a,e.beginPath(),e.arc(s.x,s.y,s.size*3,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(255,255,200,${s.opacity})`,e.beginPath(),e.arc(s.x,s.y,s.size,0,Math.PI*2),e.fill()}})},pL=(e,t,n=100)=>Array.from({length:n},()=>({x:Math.random()*e,y:Math.random()*-100,size:Math.random()*3+1,speed:Math.random()*.5+.3,drift:(Math.random()-.5)*.5,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.02,opacity:Math.random()*.6+.4})),gL=(e,t,n,r)=>{t.forEach(s=>{s.y+=s.speed,s.x+=s.drift,s.rotation+=s.rotationSpeed,s.y>r&&(s.y=-10,s.x=Math.random()*n),e.save(),e.translate(s.x,s.y),e.rotate(s.rotation),e.globalAlpha=s.opacity,e.strokeStyle="#ffffff",e.lineWidth=1,e.lineCap="round";for(let a=0;a<6;a++)e.rotate(Math.PI/3),e.beginPath(),e.moveTo(0,0),e.lineTo(0,s.size*2),e.stroke(),e.beginPath(),e.moveTo(0,s.size),e.lineTo(-s.size*.5,s.size*1.5),e.stroke(),e.beginPath(),e.moveTo(0,s.size),e.lineTo(s.size*.5,s.size*1.5),e.stroke();e.restore()})},yL=(e,t,n=5)=>{const r=["#f0e8e0","#e8d8d0","#d8c8c0"];return Array.from({length:n},(s,a)=>({x:-e-Math.random()*e*.5,y:t*.5+a*40,width:e*2.5,height:100+a*20,speed:.06+a*.04,opacity:.1+a*.04,color:r[a%r.length],wave:Math.random()*Math.PI*2,waveSpeed:.01+Math.random()*.01}))},vL=(e,t,n)=>{t.forEach((r,s)=>{r.x+=r.speed,r.wave+=r.waveSpeed,r.x>n*.3&&(r.x=-r.width);const a=Math.sin(r.wave)*15,i=r.y+a,l=e.createRadialGradient(r.x+r.width*.5,i+r.height*.5,0,r.x+r.width*.5,i+r.height*.5,r.width*.6);if(l.addColorStop(0,`${r.color}${Math.floor(r.opacity*255*.5).toString(16).padStart(2,"0")}`),l.addColorStop(.3,`${r.color}${Math.floor(r.opacity*255*.9).toString(16).padStart(2,"0")}`),l.addColorStop(.7,`${r.color}${Math.floor(r.opacity*255*.4).toString(16).padStart(2,"0")}`),l.addColorStop(1,`${r.color}00`),e.save(),e.globalCompositeOperation="lighter",e.fillStyle=l,e.fillRect(r.x,i,r.width,r.height),r.x>0?e.fillRect(r.x-r.width,i,r.width,r.height):r.x+r.width<n,e.fillRect(r.x-r.width,i,r.width,r.height),e.restore(),s%2===0&&Math.random()<.02){const c=r.x+Math.random()*r.width,u=i+Math.random()*r.height,d=e.createRadialGradient(c,u,0,c,u,3);d.addColorStop(0,"rgba(255,255,255,0.3)"),d.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=d,e.beginPath(),e.arc(c,u,3,0,Math.PI*2),e.fill()}e.restore()})},xL=e=>Array.from({length:3},(t,n)=>({radius:e*(1.15+n*.2),opacity:.6-n*.15,pulsePhase:Math.PI*2*n/3,thickness:3-n*.5})),bL=(e,t,n,r)=>{t.forEach(s=>{s.pulsePhase+=.02;const a=Math.sin(s.pulsePhase)*.2+.8,i=s.opacity*a;e.strokeStyle=`rgba(160, 48, 48, ${i})`,e.lineWidth=s.thickness,e.shadowBlur=10,e.shadowColor=`rgba(200, 64, 64, ${i})`,e.beginPath(),e.arc(n,r,s.radius,0,Math.PI*2),e.stroke(),e.shadowBlur=0})},wL=(e,t,n=30)=>Array.from({length:n},()=>({x:Math.random()*e,y:Math.random()*t,vx:(Math.random()-.5)*.3,vy:(Math.random()-.5)*.3,size:Math.random()*4+2,opacity:Math.random()*.8+.2,fadeSpeed:.002+Math.random()*.003,lifetime:0,maxLifetime:200+Math.random()*200})),SL=(e,t)=>{t.forEach(n=>{if(n.x+=n.vx,n.y+=n.vy,n.lifetime++,n.opacity-=n.fadeSpeed,(n.lifetime>=n.maxLifetime||n.opacity<=0)&&(n.x=Math.random()*e.canvas.width,n.y=Math.random()*e.canvas.height,n.opacity=Math.random()*.8+.2,n.lifetime=0),n.opacity>0){const r=e.createRadialGradient(n.x,n.y,0,n.x,n.y,n.size*3);r.addColorStop(0,`rgba(160, 160, 176, ${n.opacity})`),r.addColorStop(.5,`rgba(160, 160, 176, ${n.opacity*.5})`),r.addColorStop(1,"rgba(160, 160, 176, 0)"),e.fillStyle=r,e.beginPath(),e.arc(n.x,n.y,n.size*3,0,Math.PI*2),e.fill()}})},jL=()=>[],kL=(e,t,n,r,s)=>(Math.random()<.015&&t.push({radius:s,opacity:.6,lifetime:0,maxLifetime:120}),t.map(a=>(a.lifetime++,a.radius+=1,a.opacity=(1-a.lifetime/a.maxLifetime)*.6,a.lifetime<a.maxLifetime&&a.opacity>.05&&(e.strokeStyle=`rgba(168, 168, 200, ${a.opacity})`,e.lineWidth=2,e.setLineDash([5,5]),e.beginPath(),e.arc(n,r,a.radius,0,Math.PI*2),e.stroke(),e.setLineDash([])),a)).filter(a=>a.lifetime<a.maxLifetime)),CL=(e,t,n=40)=>{const r=["#C8B8D8","#B8A8C8","#D8C8E8"];return Array.from({length:n},()=>({x:Math.random()*e,y:Math.random()*t,vx:(Math.random()-.5)*.4,vy:-.2-Math.random()*.3,size:Math.random()*3+1.5,opacity:Math.random()*.7+.3,color:r[Math.floor(Math.random()*r.length)],floatPhase:Math.random()*Math.PI*2,floatSpeed:.02+Math.random()*.03}))},NL=(e,t)=>{t.forEach(n=>{n.floatPhase+=n.floatSpeed,n.x+=n.vx+Math.sin(n.floatPhase)*.3,n.y+=n.vy,n.y<-10&&(n.y=e.canvas.height+10,n.x=Math.random()*e.canvas.width),n.x<-10&&(n.x=e.canvas.width+10),n.x>e.canvas.width+10&&(n.x=-10);const r=e.createRadialGradient(n.x,n.y,0,n.x,n.y,n.size*2.5);r.addColorStop(0,`${n.color}${Math.floor(n.opacity*255).toString(16).padStart(2,"0")}`),r.addColorStop(.5,`${n.color}${Math.floor(n.opacity*128).toString(16).padStart(2,"0")}`),r.addColorStop(1,`${n.color}00`),e.fillStyle=r,e.beginPath(),e.arc(n.x,n.y,n.size*2.5,0,Math.PI*2),e.fill(),e.fillStyle=`${n.color}${Math.floor(n.opacity*200).toString(16).padStart(2,"0")}`,e.beginPath(),e.arc(n.x,n.y,n.size*.8,0,Math.PI*2),e.fill()})},EL=(e,t,n=25)=>Array.from({length:n},()=>({x:Math.random()*e,y:Math.random()*t,vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5,size:Math.random()*6+3,opacity:Math.random()*.4+.2,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.03,lifetime:0,maxLifetime:300+Math.random()*300,fragmentType:Math.floor(Math.random()*3)})),TL=(e,t)=>{t.forEach(n=>{n.x+=n.vx,n.y+=n.vy,n.rotation+=n.rotationSpeed,n.lifetime++,n.x<0&&(n.x=e.canvas.width),n.x>e.canvas.width&&(n.x=0),n.y<0&&(n.y=e.canvas.height),n.y>e.canvas.height&&(n.y=0),n.lifetime>=n.maxLifetime&&(n.lifetime=0,n.opacity=Math.random()*.4+.2);const r=n.lifetime<60?n.lifetime/60:(n.maxLifetime-n.lifetime)/60,s=Math.min(n.opacity,r);if(s>.05){if(e.save(),e.translate(n.x,n.y),e.rotate(n.rotation),e.globalAlpha=s,e.strokeStyle="#888898",e.fillStyle="rgba(136, 136, 152, 0.3)",e.lineWidth=1.5,e.beginPath(),n.fragmentType===0)e.moveTo(0,-n.size),e.lineTo(n.size,n.size),e.lineTo(-n.size,n.size);else if(n.fragmentType===1)e.rect(-n.size/2,-n.size/2,n.size,n.size);else for(let a=0;a<5;a++){const i=Math.PI*2*a/5-Math.PI/2,l=Math.cos(i)*n.size,c=Math.sin(i)*n.size;a===0?e.moveTo(l,c):e.lineTo(l,c)}e.closePath(),e.fill(),e.stroke(),e.restore()}})},ML=(e,t,n)=>{const r=["","","","","",""];return Array.from({length:6},(s,a)=>({x:e,y:t,symbol:r[a],size:12+Math.random()*8,opacity:.6+Math.random()*.3,rotation:0,pulsePhase:Math.PI*2*a/6,orbitAngle:Math.PI*2*a/6,orbitSpeed:.005+Math.random()*.003,orbitRadius:n*(1.4+Math.random()*.3)}))},PL=(e,t,n,r)=>{t.forEach(s=>{s.orbitAngle+=s.orbitSpeed,s.pulsePhase+=.02,s.rotation+=.01;const a=n+Math.cos(s.orbitAngle)*s.orbitRadius,i=r+Math.sin(s.orbitAngle)*s.orbitRadius,l=Math.sin(s.pulsePhase)*.3+.7,c=s.opacity*l,u=e.createRadialGradient(a,i,0,a,i,s.size*2);u.addColorStop(0,`rgba(184, 168, 136, ${c*.5})`),u.addColorStop(1,"rgba(184, 168, 136, 0)"),e.fillStyle=u,e.beginPath(),e.arc(a,i,s.size*2,0,Math.PI*2),e.fill(),e.save(),e.translate(a,i),e.rotate(s.rotation),e.fillStyle=`rgba(184, 168, 136, ${c})`,e.font=`${s.size}px serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(s.symbol,0,0),e.restore()})},_L=(e=12)=>Array.from({length:e},(t,n)=>({angle:Math.PI*2*n/e,length:50+Math.random()*30,opacity:.3+Math.random()*.4,width:2+Math.random()*3,pulsePhase:Math.random()*Math.PI*2,speed:.02+Math.random()*.02})),RL=(e,t,n,r,s)=>{if(!isFinite(n)||!isFinite(r)||!isFinite(s)){console.warn("Invalid moon parameters in drawLightRays:",{moonX:n,moonY:r,moonRadius:s});return}t.forEach(a=>{a.pulsePhase+=a.speed,a.angle+=.003;const i=Math.sin(a.pulsePhase)*.4+.6,l=a.opacity*i,c=n+Math.cos(a.angle)*s,u=r+Math.sin(a.angle)*s,d=n+Math.cos(a.angle)*(s+a.length),h=r+Math.sin(a.angle)*(s+a.length);if(!isFinite(c)||!isFinite(u)||!isFinite(d)||!isFinite(h))return;const f=e.createLinearGradient(c,u,d,h);f.addColorStop(0,`rgba(248, 248, 255, ${l})`),f.addColorStop(.5,`rgba(248, 248, 255, ${l*.6})`),f.addColorStop(1,"rgba(248, 248, 255, 0)"),e.strokeStyle=f,e.lineWidth=a.width,e.lineCap="round",e.beginPath(),e.moveTo(c,u),e.lineTo(d,h),e.stroke()})},jd=[{core:"#fff4d6",mid:"#ffd28a",tail:"#7ac9ff",glow:"#ffe0b3"},{core:"#fff0ff",mid:"#ff8dd4",tail:"#8a6bff",glow:"#ffb7e8"},{core:"#f7fbff",mid:"#9fe6ff",tail:"#5aa8ff",glow:"#d2f4ff"},{core:"#f9f2ff",mid:"#c7a3ff",tail:"#6f5bff",glow:"#d9c2ff"},{core:"#fff2e6",mid:"#ffb07a",tail:"#ff6a8f",glow:"#ffd3b8"}],Nk="right",Ek=Math.PI/4.6,Tk=.16,Sn=(e,t)=>{const n=Math.min(1,Math.max(0,t));return`${e}${Math.round(n*255).toString(16).padStart(2,"0")}`},yo=e=>e[0]+Math.floor(Math.random()*(e[1]-e[0]+1)),Mk=(e,t,n,r)=>{const s=e.get(t);if(s)return s;const a=Math.random()<.6,i=yo(n),l=yo(r),c=Math.floor(Math.random()*(a?i:l)),u={active:a,timer:c,activeDuration:i,cooldownDuration:l};return e.set(t,u),u},Pk=(e,t,n)=>{const r=(Math.random()-.5)*n;return t+r},_k=(e,t,n)=>{const r=Math.max(t,n)*.14;return Math.random()<.65?{x:Math.random()*(t*.65+r)-r,y:-r-Math.random()*r}:{x:-r-Math.random()*r,y:Math.random()*(n*.65+r)-r*.2}},Rk=(e,t,n,r)=>{if(n<=0)return;const s=Math.hypot(t.vx,t.vy);if(s<=.001)return;const a=t.vx/s,i=t.vy/s,l=t.x-a*t.length,c=t.y-i*t.length,u=-i,d=a,h=u*t.offset,f=d*t.offset,m=t.x+h,x=t.y+f,g=l+h,b=c+f;e.save(),e.globalCompositeOperation="lighter",e.globalAlpha=n;const y=e.createLinearGradient(m,x,g,b);y.addColorStop(0,Sn(t.coreColor,.95)),y.addColorStop(.35,Sn(t.midColor,.8)),y.addColorStop(.7,Sn(t.tailColor,.55)),y.addColorStop(1,Sn(t.tailColor,0)),e.strokeStyle=y,e.lineWidth=t.width,e.lineCap="round",e.beginPath(),e.moveTo(m,x),e.lineTo(g,b),e.stroke(),e.strokeStyle=Sn(t.tailColor,.4),e.lineWidth=Math.max(.45,t.width*.4),e.beginPath(),e.moveTo(m-h*.3,x-f*.3),e.lineTo(g-h*.3,b-f*.3),e.stroke(),e.strokeStyle=Sn("#ffffff",.9),e.lineWidth=Math.max(.4,t.width*.35),e.beginPath(),e.moveTo(m,x),e.lineTo(g,b),e.stroke();const w=e.createRadialGradient(m,x,0,m,x,t.headSize*2.6);if(w.addColorStop(0,Sn("#ffffff",.95)),w.addColorStop(.4,Sn(t.glowColor,.8)),w.addColorStop(1,Sn(t.glowColor,0)),e.fillStyle=w,e.beginPath(),e.arc(m,x,t.headSize*2.2,0,Math.PI*2),e.fill(),e.fillStyle=Sn("#ffffff",.9),e.beginPath(),e.arc(m,x,Math.max(1.2,t.headSize*.25),0,Math.PI*2),e.fill(),Math.random()<r){const v=Math.random()*.6+.15,S=m-a*t.length*v,j=x-i*t.length*v,k=t.width*(.8+Math.random()*.8),N=e.createRadialGradient(S,j,0,S,j,k*4);N.addColorStop(0,Sn("#ffffff",.8)),N.addColorStop(.4,Sn(t.tailColor,.6)),N.addColorStop(1,Sn(t.tailColor,0)),e.fillStyle=N,e.beginPath(),e.arc(S,j,k*1.8,0,Math.PI*2),e.fill()}e.restore()},Eb=Nk,AL=Ek,DL=Tk,Tb=[420,720],Mb=[900,1800],OL=new WeakMap,$p=(e,t,n=!1)=>{const r=Math.random()<.22?"hero":"streak",s=jd[Math.floor(Math.random()*jd.length)],a=Pk(Eb,AL,DL),i=(r==="hero"?9:6)+Math.random()*(r==="hero"?6:4),l=Math.cos(a)*i,c=Math.sin(a)*i,u=r==="hero"?180+Math.random()*120:90+Math.random()*80,d=r==="hero"?2.4+Math.random()*1.4:1.1+Math.random()*.7,h=r==="hero"?7+Math.random()*5:4+Math.random()*3,f=_k(Eb,e,t),m=f.x,x=f.y,g=r==="hero"?140+Math.random()*70:95+Math.random()*60,b=Math.random()*g*.6;return{x:m,y:x,vx:l,vy:c,length:u,opacity:.5+Math.random()*.3,coreColor:s.core,midColor:s.mid,tailColor:s.tail,glowColor:s.glow,width:d,headSize:h,life:b,maxLife:g,flickerPhase:Math.random()*Math.PI*2,flickerSpeed:.02+Math.random()*.03,offset:(Math.random()-.5)*(r==="hero"?3.5:2),kind:r,active:n?!0:Math.random()<.7}},IL=(e,t,n=15)=>{const r=Math.max(10,Math.round(n*1.05));return Array.from({length:r},()=>$p(e,t))},$L=(e,t,n,r)=>{const s=Mk(OL,t,Tb,Mb);s.timer+=1,s.active&&s.timer>=s.activeDuration?(s.active=!1,s.timer=0,s.cooldownDuration=yo(Mb)):!s.active&&s.timer>=s.cooldownDuration&&(s.active=!0,s.timer=0,s.activeDuration=yo(Tb));const a=s.active,i=Math.max(n,r)*.25;for(let l=0;l<t.length;l+=1){const c=t[l];if(!c.active){a&&Math.random()<.03&&(t[l]=$p(n,r,!0));continue}c.x+=c.vx,c.y+=c.vy,c.life+=1,c.flickerPhase+=c.flickerSpeed;const u=c.life/c.maxLife,d=u<.12?u/.12:1,h=u>.85?(1-u)/.15:1,f=Math.max(0,Math.min(1,Math.min(d,h))),m=.85+Math.sin(c.flickerPhase)*.15,x=c.opacity*f*m;x>.02&&Rk(e,c,x*.7,c.kind==="hero"?.14:.08),(c.x>n+i||c.y>r+i||c.life>=c.maxLife)&&(a?t[l]=$p(n,r,!0):c.active=!1)}},LL=[["#FF6B9D","#C44569","#8B3A62"],["#4A90E2","#7B68EE","#9370DB"],["#00D9FF","#0099CC","#006699"],["#FF8C42","#FF6B35","#C44536"],["#6BCF7F","#4ECDC4","#44A08D"]],FL=[["#7e4bff","#b07cff","#f2b6ff"],["#5a2dff","#8a4fff","#c58bff"],["#a450ff","#d284ff","#ffb4e8"],["#3b2b8f","#6a3bb0","#b071ff"]],Ak=(e,t,n=4,r={})=>{const s=r.palettes??LL,[a,i]=r.opacityRange??[.15,.3],[l,c]=r.sizeRange??[150,400],[u,d]=r.rotationSpeedRange??[2e-4,5e-4],[h,f]=r.pulseSpeedRange??[.01,.02];return Array.from({length:n},()=>{const m=s[Math.floor(Math.random()*s.length)];return{x:Math.random()*e,y:Math.random()*t,size:l+Math.random()*(c-l),rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()*(d-u)+u)*(Math.random()<.5?-1:1),colors:m,opacity:a+Math.random()*(i-a),pulsePhase:Math.random()*Math.PI*2,pulseSpeed:h+Math.random()*(f-h)}})},zL=(e,t,n=6)=>Ak(e,t,n,{palettes:FL,opacityRange:[.18,.34],sizeRange:[220,460]}),BL=(e,t,n,r,s=0,a=0)=>t.map(i=>{i.rotation+=i.rotationSpeed,i.pulsePhase+=i.pulseSpeed;const l=Math.sin(i.pulsePhase)*.2+.8,c=i.size*l,u=i.opacity*l,d=i.x+s*.1,h=i.y+a*.1,f=(d%n+n)%n,m=(h%r+r)%r;return e.save(),e.translate(f,m),e.rotate(i.rotation),i.colors.forEach((x,g)=>{const b=c*(1-g*.2),y=u*(1-g*.3),w=e.createRadialGradient(0,0,0,0,0,b);w.addColorStop(0,`${x}${Math.floor(y*255).toString(16).padStart(2,"0")}`),w.addColorStop(.4,`${x}${Math.floor(y*.6*255).toString(16).padStart(2,"0")}`),w.addColorStop(.7,`${x}${Math.floor(y*.3*255).toString(16).padStart(2,"0")}`),w.addColorStop(1,`${x}00`),e.fillStyle=w,e.fillRect(-b,-b,b*2,b*2)}),e.restore(),i}),Pb=Nk,VL=Ek,UL=Tk,_b=[360,600],Rb=[900,1500],WL=new WeakMap,HL=(e,t)=>{const n=Math.random()<.35?"hero":"streak",r=jd[Math.floor(Math.random()*jd.length)],s=Pk(Pb,VL,UL),a=(n==="hero"?12:9)+Math.random()*(n==="hero"?7:5),i=Math.cos(s)*a,l=Math.sin(s)*a,c=n==="hero"?220+Math.random()*140:120+Math.random()*100,u=n==="hero"?2.8+Math.random()*1.6:1.2+Math.random()*.8,d=n==="hero"?8+Math.random()*6:5+Math.random()*3,h=_k(Pb,e,t),f=h.x,m=h.y,x=n==="hero"?120+Math.random()*80:90+Math.random()*60;return{x:f,y:m,vx:i,vy:l,length:c,opacity:.7+Math.random()*.3,coreColor:r.core,midColor:r.mid,tailColor:r.tail,glowColor:r.glow,width:u,headSize:d,life:0,maxLife:x,flickerPhase:Math.random()*Math.PI*2,flickerSpeed:.018+Math.random()*.03,offset:(Math.random()-.5)*(n==="hero"?3.8:2.2),kind:n}},GL=()=>[],KL=(e,t,n,r)=>{const s=Mk(WL,t,_b,Rb);if(s.timer+=1,s.active&&s.timer>=s.activeDuration?(s.active=!1,s.timer=0,s.cooldownDuration=yo(Rb)):!s.active&&s.timer>=s.cooldownDuration&&(s.active=!0,s.timer=0,s.activeDuration=yo(_b)),s.active&&Math.random()<.18){const l=Math.random()<.4?2:1;for(let c=0;c<l;c+=1)t.push(HL(n,r))}const a=Math.max(n,r)*.25;return t.map(i=>{i.x+=i.vx,i.y+=i.vy,i.life+=1,i.flickerPhase+=i.flickerSpeed;const l=i.life/i.maxLife,c=l<.12?l/.12:1,u=l>.82?(1-l)/.18:1,d=Math.max(0,Math.min(1,Math.min(c,u))),h=.85+Math.sin(i.flickerPhase)*.15,f=i.opacity*d*h;return f>.02&&Rk(e,i,f,i.kind==="hero"?.2:.1),i}).filter(i=>i.life<i.maxLife&&i.x<n+a&&i.y<r+a)},qL=(e=120)=>Array.from({length:e},()=>({x:(Math.random()-.5)*2,y:(Math.random()-.5)*2,z:Math.random(),speed:.001+Math.random()*.002,size:1+Math.random()*2,brightness:.3+Math.random()*.7})),YL=(e,t,n,r)=>{const s=n/2,a=r/2;return t.map(i=>{i.z+=i.speed,i.z>=1&&(i.x=(Math.random()-.5)*2,i.y=(Math.random()-.5)*2,i.z=0);const l=i.z*2,c=s+i.x*s*l,u=a+i.y*a*l,d=i.size*(.5+i.z*1.5),h=i.brightness*i.z,f=i.z-i.speed,m=f*2,x=s+i.x*s*m,g=a+i.y*a*m;if(f>0){const y=e.createLinearGradient(x,g,c,u);y.addColorStop(0,"rgba(255, 255, 255, 0)"),y.addColorStop(1,`rgba(255, 255, 255, ${h*.6})`),e.strokeStyle=y,e.lineWidth=d*.5,e.lineCap="round",e.beginPath(),e.moveTo(x,g),e.lineTo(c,u),e.stroke()}const b=e.createRadialGradient(c,u,0,c,u,d*2);return b.addColorStop(0,`rgba(255, 255, 255, ${h})`),b.addColorStop(.5,`rgba(200, 220, 255, ${h*.5})`),b.addColorStop(1,"rgba(200, 220, 255, 0)"),e.fillStyle=b,e.beginPath(),e.arc(c,u,d*2,0,Math.PI*2),e.fill(),i})},XL=()=>{const e=["rgba(220, 240, 255, 0.9)","rgba(255, 255, 255, 0.95)","rgba(200, 230, 255, 0.85)","rgba(240, 250, 255, 0.9)"],t=["hexagon","diamond","triangle"];return Array.from({length:12},(n,r)=>({angle:Math.PI*2*r/12,distance:80+r%3*20,size:8+Math.random()*8,rotation:Math.random()*Math.PI*2,rotationSpeed:.02+Math.random()*.03,orbitSpeed:.008+Math.random()*.004,opacity:.6+Math.random()*.3,color:e[r%e.length],pulsePhase:Math.random()*Math.PI*2,shardType:t[r%3]}))},QL=(e,t,n,r,s)=>{e.save(),t.forEach(i=>{i.angle+=i.orbitSpeed,i.rotation+=i.rotationSpeed,i.pulsePhase+=.03;const l=n+Math.cos(i.angle)*(s+i.distance),c=r+Math.sin(i.angle)*(s+i.distance),u=i.opacity*(.8+.2*Math.sin(i.pulsePhase));if(e.save(),e.translate(l,c),e.rotate(i.rotation),e.globalCompositeOperation="screen",e.shadowBlur=15,e.shadowColor=i.color,e.fillStyle=i.color.replace(/[\d.]+\)$/g,`${u})`),e.strokeStyle=`rgba(255, 255, 255, ${u*.8})`,e.lineWidth=1.5,e.beginPath(),i.shardType==="hexagon"){for(let d=0;d<6;d++){const h=Math.PI/3*d,f=Math.cos(h)*i.size,m=Math.sin(h)*i.size;d===0?e.moveTo(f,m):e.lineTo(f,m)}e.closePath()}else i.shardType==="diamond"?(e.moveTo(0,-i.size),e.lineTo(i.size*.6,0),e.lineTo(0,i.size),e.lineTo(-i.size*.6,0),e.closePath()):(e.moveTo(0,-i.size),e.lineTo(i.size*.866,i.size*.5),e.lineTo(-i.size*.866,i.size*.5),e.closePath());e.fill(),e.stroke(),e.globalCompositeOperation="lighter",e.fillStyle=`rgba(255, 255, 255, ${u*.6})`,e.beginPath(),e.arc(0,0,i.size*.3,0,Math.PI*2),e.fill(),e.restore()});const a=e.createRadialGradient(n,r,s*.8,n,r,s*1.5);a.addColorStop(0,"rgba(220, 240, 255, 0.15)"),a.addColorStop(.6,"rgba(200, 230, 255, 0.08)"),a.addColorStop(1,"rgba(255, 255, 255, 0)"),e.globalCompositeOperation="screen",e.fillStyle=a,e.beginPath(),e.arc(n,r,s*1.5,0,Math.PI*2),e.fill(),e.restore()},JL=(e,t,n=40)=>Array.from({length:n},()=>({x:Math.random()*e,y:Math.random()*t,size:Math.random()*5+2,opacity:0,lifetime:0,maxLifetime:240+Math.random()*180,freezePoint:40+Math.random()*30,isFrozen:!1,trailLength:Math.random()*30+15,color:Math.random()>.5?"#B0C4DE":"#7090b0",rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.02,frozenIntensity:Math.random()*.5+.5})),ZL=(e,t)=>{t.forEach(n=>{if(n.lifetime++,n.lifetime<20?(n.opacity=n.lifetime/20,n.y-=.5):n.lifetime>=n.freezePoint&&n.lifetime<n.freezePoint+150?(n.isFrozen||(n.isFrozen=!0,n.rotationSpeed=0),n.opacity=.9*n.frozenIntensity):n.lifetime>=n.freezePoint+150?n.opacity=Math.max(0,1-(n.lifetime-n.freezePoint-150)/90):(n.opacity=.7,n.y-=.4,n.rotation+=n.rotationSpeed),n.lifetime>=n.maxLifetime&&(n.lifetime=0,n.y=Math.random()*e.canvas.height,n.x=Math.random()*e.canvas.width,n.freezePoint=40+Math.random()*30,n.isFrozen=!1,n.rotation=Math.random()*Math.PI*2,n.rotationSpeed=(Math.random()-.5)*.02),n.opacity>0){if(e.save(),e.translate(n.x,n.y),e.rotate(n.rotation),!n.isFrozen&&n.lifetime>=20&&n.lifetime<n.freezePoint){const a=e.createLinearGradient(0,0,0,n.trailLength);a.addColorStop(0,`${n.color}${Math.floor(n.opacity*200).toString(16).padStart(2,"0")}`),a.addColorStop(.5,`${n.color}${Math.floor(n.opacity*100).toString(16).padStart(2,"0")}`),a.addColorStop(1,`${n.color}00`),e.strokeStyle=a,e.lineWidth=2,e.beginPath(),e.moveTo(0,0),e.lineTo(0,n.trailLength),e.stroke()}const r=n.isFrozen?n.size*4:n.size*3,s=e.createRadialGradient(0,0,0,0,0,r);s.addColorStop(0,`${n.color}${Math.floor(n.opacity*255).toString(16).padStart(2,"0")}`),s.addColorStop(.3,`${n.color}${Math.floor(n.opacity*180).toString(16).padStart(2,"0")}`),s.addColorStop(1,`${n.color}00`),e.fillStyle=s,e.beginPath(),e.arc(0,0,r,0,Math.PI*2),e.fill(),e.fillStyle=`${n.color}${Math.floor(n.opacity*230).toString(16).padStart(2,"0")}`,e.beginPath();for(let a=0;a<6;a++){const i=Math.PI/3*a,l=Math.cos(i)*n.size,c=Math.sin(i)*n.size;a===0?e.moveTo(l,c):e.lineTo(l,c)}if(e.closePath(),e.fill(),e.fillStyle=`#ffffff${Math.floor(n.opacity*255).toString(16).padStart(2,"0")}`,e.beginPath(),e.arc(0,0,n.size*.5,0,Math.PI*2),e.fill(),n.isFrozen){e.strokeStyle=`rgba(176, 196, 222, ${n.opacity*.8})`,e.lineWidth=1.5;for(let i=0;i<6;i++){const l=Math.PI/3*i,c=n.size*3.5;e.beginPath(),e.moveTo(0,0),e.lineTo(Math.cos(l)*c,Math.sin(l)*c),e.stroke(),e.fillStyle=`rgba(220, 235, 255, ${n.opacity*.9})`,e.beginPath(),e.arc(Math.cos(l)*c,Math.sin(l)*c,2,0,Math.PI*2),e.fill()}const a=n.size*2.5+Math.sin(n.lifetime*.05)*n.size*.3;e.strokeStyle=`rgba(176, 196, 222, ${n.opacity*.5})`,e.lineWidth=2,e.beginPath(),e.arc(0,0,a,0,Math.PI*2),e.stroke(),e.strokeStyle=`rgba(220, 235, 255, ${n.opacity*.3})`,e.lineWidth=1,e.beginPath(),e.arc(0,0,a*.6,0,Math.PI*2),e.stroke();for(let i=0;i<4;i++){const l=Math.PI/2*i+n.lifetime*.01,c=a*1.2,u=Math.cos(l)*c,d=Math.sin(l)*c;e.fillStyle=`rgba(255, 255, 255, ${n.opacity*.7})`,e.beginPath(),e.arc(u,d,1.5,0,Math.PI*2),e.fill()}}e.restore()}})},e6=()=>[],t6=(e,t,n)=>({radius:n*.5,maxRadius:n*5+Math.random()*n*3,opacity:1,lifetime:0,maxLifetime:120+Math.random()*80,centerX:e,centerY:t,speed:.8+Math.random()*.6,thickness:2+Math.random()*2}),n6=(e,t)=>t.map(n=>{n.lifetime++,n.radius+=n.speed;const r=20,s=n.maxLifetime-40;if(n.lifetime<r?n.opacity=n.lifetime/r:n.lifetime>s?n.opacity=Math.max(0,1-(n.lifetime-s)/40):n.opacity=.6+Math.sin(n.lifetime*.1)*.2,n.opacity>0){e.strokeStyle=`rgba(80, 80, 112, ${n.opacity*.4})`,e.lineWidth=n.thickness,e.beginPath(),e.arc(n.centerX,n.centerY,n.radius,0,Math.PI*2),e.stroke(),e.strokeStyle=`rgba(64, 64, 80, ${n.opacity*.6})`,e.lineWidth=n.thickness*.5,e.beginPath(),e.arc(n.centerX,n.centerY,n.radius-n.thickness,0,Math.PI*2),e.stroke();const a=e.createRadialGradient(n.centerX,n.centerY,n.radius-n.thickness*3,n.centerX,n.centerY,n.radius+n.thickness*2);if(a.addColorStop(0,"rgba(0, 0, 0, 0)"),a.addColorStop(.4,`rgba(0, 0, 0, ${n.opacity*.15})`),a.addColorStop(.6,`rgba(0, 0, 0, ${n.opacity*.15})`),a.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=a,e.beginPath(),e.arc(n.centerX,n.centerY,n.radius,0,Math.PI*2),e.fill(),n.lifetime%8===0&&n.opacity>.3)for(let l=0;l<3;l++){const c=Math.random()*Math.PI*2,u=n.centerX+Math.cos(c)*n.radius,d=n.centerY+Math.sin(c)*n.radius,h=e.createRadialGradient(u,d,0,u,d,3);h.addColorStop(0,`rgba(112, 144, 176, ${n.opacity*.8})`),h.addColorStop(1,"rgba(112, 144, 176, 0)"),e.fillStyle=h,e.beginPath(),e.arc(u,d,3,0,Math.PI*2),e.fill()}}return n}).filter(n=>n.lifetime<n.maxLifetime),r6=(e,t,n=12)=>{const r=[];for(let s=0;s<n;s++){const a=Math.PI*2/n*s+(Math.random()-.5)*.4,i=60+Math.random()*45;r.push({x:e+Math.cos(a)*i,y:t+Math.sin(a)*i,size:5+Math.random()*8,angle:a,distance:i,orbitSpeed:8e-4+Math.random()*.0015,rotation:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.025,opacity:.7+Math.random()*.3})}return r},s6=(e,t,n,r,s)=>{t.forEach(a=>{a.angle+=a.orbitSpeed,a.rotation+=a.rotationSpeed,a.x=n+Math.cos(a.angle)*a.distance,a.y=r+Math.sin(a.angle)*a.distance,e.save(),e.translate(a.x,a.y),e.rotate(a.rotation),e.fillStyle=`rgba(0, 0, 0, ${a.opacity*.4})`,e.shadowBlur=10,e.shadowColor="rgba(0, 0, 0, 0.6)",e.beginPath();const i=5+Math.floor(Math.random()*3);for(let c=0;c<i;c++){const u=Math.PI*2/i*c,d=a.size*(.8+Math.random()*.5),h=Math.cos(u)*d,f=Math.sin(u)*d;c===0?e.moveTo(h,f):e.lineTo(h,f)}e.closePath(),e.fill(),e.fillStyle=`${s}${Math.floor(a.opacity*255).toString(16).padStart(2,"0")}`,e.shadowBlur=8,e.shadowColor=s,e.fill(),e.strokeStyle=`rgba(255, 255, 255, ${a.opacity*.6})`,e.lineWidth=1.5,e.shadowBlur=5,e.shadowColor="rgba(255, 255, 255, 0.8)",e.stroke();const l=e.createRadialGradient(0,0,0,0,0,a.size*.6);l.addColorStop(0,`rgba(255, 255, 255, ${a.opacity*.4})`),l.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=l,e.shadowBlur=0,e.beginPath(),e.arc(0,0,a.size*.6,0,Math.PI*2),e.fill(),e.restore()})},Ab=(e,t,n=25)=>{const r=[];for(let s=0;s<n;s++){const a=Math.random()*Math.PI*2,i=.15+Math.random()*.3;r.push({x:e+(Math.random()-.5)*90,y:t+(Math.random()-.5)*90,vx:Math.cos(a)*i,vy:Math.sin(a)*i,size:.8+Math.random()*1.5,opacity:.2+Math.random()*.3,life:0,maxLife:120+Math.random()*120})}return r},a6=(e,t,n,r,s)=>{t.forEach(a=>{a.x+=a.vx,a.y+=a.vy,a.life++;const i=1-a.life/a.maxLife,l=a.opacity*i;if(a.life<a.maxLife&&l>.01){const c=e.createRadialGradient(a.x,a.y,0,a.x,a.y,a.size*4);c.addColorStop(0,`${n}${Math.floor(l*.8*255).toString(16).padStart(2,"0")}`),c.addColorStop(.5,`${n}${Math.floor(l*.3*255).toString(16).padStart(2,"0")}`),c.addColorStop(1,`${n}00`),e.fillStyle=c,e.beginPath(),e.arc(a.x,a.y,a.size*4,0,Math.PI*2),e.fill(),e.fillStyle=`${n}${Math.floor(l*255).toString(16).padStart(2,"0")}`,e.shadowBlur=5,e.shadowColor=n,e.beginPath(),e.arc(a.x,a.y,a.size,0,Math.PI*2),e.fill(),e.shadowBlur=0,Math.random()<.15&&(e.fillStyle=`rgba(255, 255, 255, ${l*.8})`,e.beginPath(),e.arc(a.x,a.y,a.size*.5,0,Math.PI*2),e.fill())}if(a.life>=a.maxLife){if(r!==void 0&&s!==void 0){const c=Math.random()*Math.PI*2,u=70+Math.random()*30;a.x=r+Math.cos(c)*u,a.y=s+Math.sin(c)*u;const d=.15+Math.random()*.35,h=Math.random()*Math.PI*2;a.vx=Math.cos(h)*d,a.vy=Math.sin(h)*d}a.life=0,a.opacity=.35+Math.random()*.45}})},tu=(e,t,n)=>{const r=Math.sin(e*12.9898+t*78.233+n*.17)*43758.5453;return r-Math.floor(r)};function i6(e){const{ctx:t,width:n,height:r,phenomenon:s,time:a=0}=e,i=t.createLinearGradient(0,0,0,r);s.id==="pixelDreamMoon"?(i.addColorStop(0,"#120826"),i.addColorStop(.5,"#241042"),i.addColorStop(1,"#3b1e69")):(i.addColorStop(0,s.skyPalette[0]),i.addColorStop(.5,s.skyPalette[1]),i.addColorStop(1,s.skyPalette[2])),t.fillStyle=i,t.fillRect(0,0,n,r),s.id==="pixelDreamMoon"&&o6(t,n,r,a)}function o6(e,t,n,r){e.save();for(let c=0;c<3;c++){const u=c*123,d=tu(c,1,123)*t,h=tu(c,2,456)*n*.9,f=80+tu(c,3,789)*120;for(let m=-f;m<=f;m+=3)for(let x=-f;x<=f;x+=3){const g=Math.sqrt(x*x+m*m);if(g>f)continue;const b=tu(Math.floor((d+x)/3),Math.floor((h+m)/3),u),y=1-g/f;b>.92-y*.4&&(e.fillStyle=c%2===0?"#5b21b6":"#4338ca",e.globalAlpha=.15*y,e.fillRect(d+x,h+m,3,3))}}e.restore();const i=[{x:t*.15,y:n*.25,r:6,color:"#fcd34d",ring:!1,glow:"#fbbf24"},{x:t*.88,y:n*.65,r:9,color:"#67e8f9",ring:!0,glow:"#22d3ee"}];e.save(),i.forEach(c=>{e.shadowBlur=15,e.shadowColor=c.glow;for(let u=-c.r;u<=c.r;u+=3)for(let d=-c.r;d<=c.r;d+=3)d*d+u*u<=c.r*c.r&&(e.fillStyle=c.color,e.globalAlpha=.9,e.fillRect(c.x+d,c.y+u,3,3));if(c.ring){e.fillStyle="#e0f2fe",e.globalAlpha=.7;const u=c.r*1.8;for(let d=-u;d<=u;d+=3){const h=d*.3;Math.abs(Math.sqrt(d*d+h*h*10)-u)<3*1.5&&(h>0||Math.abs(d)>c.r)&&e.fillRect(c.x+d,c.y+h,3,3)}}}),e.restore();const l=[{x:t*.08,y:n*.1,type:"cross",color:"#fef3c7"},{x:t*.92,y:n*.2,type:"sparkle",color:"#a5f3fc"},{x:t*.8,y:n*.85,type:"cross",color:"#fbcfe8"}];e.save(),l.forEach((c,u)=>{const d=Math.sin(r/300+u*2)*.3+.7,h=3,f=c.x,m=c.y;e.shadowBlur=10,e.shadowColor=c.color,e.fillStyle="#ffffff",e.globalAlpha=d,c.type==="cross"?(e.fillRect(f,m-h*2,h,h*5),e.fillRect(f-h*2,m,h*5,h)):c.type==="sparkle"&&(e.fillRect(f,m,h,h),e.globalAlpha=d*.7,e.fillStyle=c.color,e.fillRect(f-h,m,h,h),e.fillRect(f+h,m,h,h),e.fillRect(f,m-h,h,h),e.fillRect(f,m+h,h,h))}),e.restore()}const Db=["#ffd7a6","#ff9ad5","#b882ff","#6fffd0","#9ad0ff","#ffffff"];function l6(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)}function c6(e){return()=>{let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}function u6(e,t,n,r=0){const s=n.specialEffect==="pixel",a=s?3:1,i=h=>Math.round(h/a)*a,l=Math.min(.6,r/200),c=Math.floor(120*n.starDensity*(1+l)),u=Math.min(80,Math.floor(r*.6)),d=Math.max(60,c+u);return Array.from({length:d},()=>({x:s?i(Math.random()*e):Math.random()*e,y:s?i(Math.random()*t*.6):Math.random()*t*.6,size:s?Math.random()*2+1:Math.random()*2+.5,opacity:Math.random()*.8+.2,twinkleSpeed:s?Math.random()*.015+.004:Math.random()*.02+.01,twinklePhase:Math.random()*Math.PI*2,color:s?Db[Math.floor(Math.random()*Db.length)]:void 0}))}function d6(e,t,n){if(e.length===0)return[];const r=l6(t),s=c6(r),a=Math.min(12,Math.max(4,Math.round(4+n*6))),i=e.length-1,l=[],c=[],u=Math.floor(s()*i);for(l.push(e[u]),c.push(u);c.length<a;){const d=l[l.length-1];let h=-1,f=Number.POSITIVE_INFINITY;for(let m=0;m<e.length;m+=1){if(c.includes(m))continue;const x=e[m].x-d.x,g=e[m].y-d.y,b=x*x+g*g;b<f&&(f=b,h=m)}if(h===-1)break;c.push(h),l.push(e[h])}return[{starIndices:c,intensity:.22+s()*.18}]}function h6({ctx:e,phenomenon:t,parallaxOffset:n,stars:r,constellations:s,timeMs:a,constellationScale:i,constellationIntensity:l,constellationReveal:c}){if(t.starDensity===0)return;const u=t.specialEffect==="pixel",d=u?3:1,h=b=>Math.round(b/d)*d,f=n.x*.5,m=n.y*.5,x=(a??0)*.001,g=.6+Math.sin(x*.8)*.4;if(s&&s.length>0){e.save();const b=Math.min(1.8,Math.max(.8,i??1)),y=Math.min(1.8,Math.max(.6,l??1)),w=Math.min(1,Math.max(.15,c??1));e.lineWidth=.9*b,e.lineCap="round",e.lineJoin="round",e.strokeStyle="rgba(255,255,255,0.25)",s.forEach(v=>{const S=v.starIndices.map($=>r[$]).filter(Boolean);if(S.length<2)return;const j=Math.max(2,Math.ceil(S.length*w)),k=S.slice(0,j);if(k.length<2)return;e.globalAlpha=Math.min(1,v.intensity*.35*y),u?k.forEach(($,R)=>{if(R===0)return;const z=k[R-1],D=h(z.x+f),V=h(z.y+m),P=h($.x+f),_=h($.y+m);m6(e,D,V,P,_,"rgba(255,255,255,1)",.25)}):(e.beginPath(),k.forEach(($,R)=>{const z=$.x+f,D=$.y+m;R===0?e.moveTo(z,D):e.lineTo(z,D)}),e.stroke());const E=x*.15%1,C=.18,T=E,M=(E+C)%1,O=k.length-1;if(O>0){e.save(),e.strokeStyle="rgba(255,255,255,0.85)",e.lineWidth=1.3*b,e.lineCap="round",e.lineJoin="round",e.shadowBlur=10+b*4,e.shadowColor="rgba(255,255,255,0.6)",e.globalAlpha=Math.min(1,v.intensity*.9*y);const $=(z,D)=>{const V=z*O,P=D*O,_=Math.floor(V),I=Math.min(O-1,Math.floor(P)),L=(q,ne,A)=>q+(ne-q)*A,H=(q,ne)=>{const A=k[q],B=k[q+1];return{x:L(A.x,B.x,ne)+f,y:L(A.y,B.y,ne)+m}},U=V-_,Z=H(_,U);e.beginPath(),e.moveTo(Z.x,Z.y);for(let q=_;q<=I;q+=1){const ne=q===I?P-q:1,A=H(q,ne);e.lineTo(A.x,A.y)}return e.stroke(),H(I,P-I)};let R=null;M>T?R=$(T,M):($(T,1),R=$(0,M)),R&&(e.beginPath(),e.arc(R.x,R.y,2.2*b+g*.4*b,0,Math.PI*2),e.fillStyle="rgba(255,255,255,0.95)",e.shadowBlur=12+b*4,e.shadowColor="rgba(255,255,255,0.8)",e.fill()),e.restore()}k.forEach($=>{const R=$.x+f,z=$.y+m;e.beginPath(),e.arc(R,z,Math.max(1.6,$.size*(1+.25*b)+g*.6*b),0,Math.PI*2),e.fillStyle=`rgba(255,255,255,${Math.min(1,.45*y+g*.35)})`,e.shadowBlur=6*b+g*6,e.shadowColor="rgba(255,255,255,0.45)",e.fill()})}),e.restore()}if(r.forEach(b=>{b.twinklePhase+=b.twinkleSpeed;const y=b.opacity*(Math.sin(b.twinklePhase)*.5+.5);if(u){const S=h(b.x+f),j=h(b.y+m),k=Math.max(1,Math.round(b.size)),N=b.color??"#ffffff";e.save(),e.imageSmoothingEnabled=!1,e.fillStyle=N,e.globalAlpha=y,e.fillRect(S,j,k,k),b.size>1.6&&(e.fillRect(S-k,j,k*3,k),e.fillRect(S,j-k,k,k*3)),e.restore();return}const w=b.x+f,v=b.y+m;e.beginPath(),e.arc(w,v,b.size,0,Math.PI*2),e.fillStyle=`rgba(255,255,255,${y})`,e.fill(),b.size>1.5&&(e.beginPath(),e.arc(w,v,b.size*2,0,Math.PI*2),e.fillStyle=`rgba(255,255,255,${y*.2})`,e.fill())}),u){const b=(a??Date.now())/1e3,y=e.canvas.width/(window.devicePixelRatio||1),w=e.canvas.height/(window.devicePixelRatio||1),v=3,S=3,j=Math.floor(b/v);for(let C=0;C<S;C++){const T=j-C,M=Zo(T,1,111),O=Zo(T,2,222),$=Zo(T,3,333);if(M>.6)continue;const R=200+$*300,z=Math.PI/4+(M-.5)*.4;let D,V;O>.4?(D=y*(O-.2)*1.5,V=-50):(D=-50,V=w*O*2);const P=T*v,_=b-P,I=M*2.5,L=_-I;if(L<0||L>2.5)continue;const U=R*L,Z=D+Math.cos(z)*U,q=V+Math.sin(z)*U,ne=.8+$*.6,A=["#5fffd2","#ff8fd6","#ffffff","#fcd34d"],B=Math.floor(O*A.length),ae=A[B];f6(e,Z,q,25,ne,ae,L*1e3)}const k=45,N=Math.floor(b/k),E=Zo(N,66,77);if(E>.6){const C=b%k,T=12;if(C<T){const M=C/T,O=w*(.2+E*.4),$=y*1.1-y*1.4*M,R=Math.sin(b*3)*10,z=O+R;p6(e,$,z,b)}}}}const Zo=(e,t,n)=>{const r=Math.sin(e*12.9898+t*78.233+n*.17)*43758.5453;return r-Math.floor(r)},f6=(e,t,n,r,s,a,i)=>{e.fillStyle="#ffffff",e.fillRect(t,n,3*2,3*2);const c=20;for(let u=0;u<c;u++){const d=t-u*3*1.5,h=n-u*3*1.2;(u%2===0||Zo(u,Math.floor(i/50),10)>.3)&&(e.fillStyle=a,e.globalAlpha=1-u/c,e.fillRect(d,h,3,3))}e.globalAlpha=1},m6=(e,t,n,r,s,a,i)=>{let c=Math.floor(t/3),u=Math.floor(n/3);const d=Math.floor(r/3),h=Math.floor(s/3),f=Math.abs(d-c),m=Math.abs(h-u),x=c<d?1:-1,g=u<h?1:-1;let b=f-m;for(e.fillStyle=a,e.globalAlpha=i;e.fillRect(c*3,u*3,3,3),!(c===d&&u===h);){const y=2*b;y>-m&&(b-=m,c+=x),y<f&&(b+=f,u+=g)}},p6=(e,t,n,r)=>{e.save(),e.translate(t,n),e.fillStyle="#a5f3fc",e.globalAlpha=.9,e.fillRect(4*3,0,3*3,2*3),e.fillStyle="#5d5d5d",e.globalAlpha=1,e.fillRect(2*3,2*3,7*3,1*3),e.fillRect(1*3,3*3,9*3,1*3),e.fillRect(2*3,4*3,7*3,1*3);const a=Math.floor(r*8)%3,i=["#ff0000","#00ff00","#0000ff"];e.fillStyle=i[a],e.fillRect(2*3,3*3,1*3,1*3),e.fillStyle=i[(a+1)%3],e.fillRect(5*3,3*3,1*3,1*3),e.fillStyle=i[(a+2)%3],e.fillRect(8*3,3*3,1*3,1*3),e.restore()},Uo={shadow:"#1b0b2f",base:"#2c1248",mid:"#3b1f5e",highlight:"#a967ff",glow:"#ffd3f0"},g6=(e,t,n)=>{const r=Math.sin(e*12.9898+t*78.233+n*.13)*43758.5453;return r-Math.floor(r)},y6=(e,t)=>{const r=t.width/4,s=t.height/4,a=t.x,i=t.y;e.save(),e.imageSmoothingEnabled=!1,e.globalAlpha=t.opacity;const l=Date.now()/2e3,c=Math.sin(l+t.seed)*3;for(let u=-s/2;u<=s/2;u++)for(let d=-r/2;d<=r/2;d++){const h=d/(r/2),f=u/(s/2),m=g6(d,u,t.seed);if(h*h+f*(f>0?.5:1)*(f*(f>0?.5:1))>.8-m*.3||f>.3&&Math.abs(h)>.8)continue;const g=a+d*4,b=i+u*4+c;let y=Uo.base;if(f<-.4)y=Uo.highlight,f<-.6&&m>.6&&(y=Uo.glow);else if(f>.1&&(y=Uo.mid,f>.4&&(y=Uo.shadow,f>.7&&(Math.floor(g)+Math.floor(b))%2!==0)))continue;e.fillStyle=y,e.fillRect(g,b,4,4)}e.restore()};function v6(e,t,n){if(n.specialEffect==="pixel"){const r=[];return[{count:3,y:.75,size:1,speed:.2,opacity:.6},{count:4,y:.82,size:1.2,speed:.4,opacity:.8},{count:2,y:.9,size:1.4,speed:.6,opacity:1}].forEach(a=>{for(let i=0;i<a.count;i++){const l=180*a.size,c=Math.random()*60;r.push({x:Math.random()*e,y:t*a.y+Math.random()*t*.05,width:l+c,height:(l+c)*.25,speed:(.1+Math.random()*.1)*a.speed*n.cloudSpeed,opacity:a.opacity*n.cloudOpacity,seed:Math.random()*1e3})}}),r}return Array.from({length:5},()=>({x:Math.random()*e,y:t*.2+Math.random()*t*.3,width:Math.random()*100+80,height:Math.random()*40+30,speed:(Math.random()*.15+.05)*n.cloudSpeed,opacity:(Math.random()*.15+.1)*n.cloudOpacity,seed:Math.floor(Math.random()*1e4)}))}function x6({ctx:e,width:t,phenomenon:n,clouds:r}){n.cloudOpacity!==0&&r.forEach(s=>{if(n.cloudSpeed>.2&&(s.x+=s.speed,s.x>t+s.width&&(s.x=-s.width)),n.specialEffect==="pixel"){y6(e,s);return}e.fillStyle=`rgba(150,150,180,${s.opacity*.6})`,e.beginPath(),e.ellipse(s.x+5,s.y+5,s.width/2,s.height/2,0,0,Math.PI*2),e.fill();const a=e.createRadialGradient(s.x,s.y-s.height*.3,0,s.x,s.y,s.width/2);a.addColorStop(0,`rgba(230,230,250,${s.opacity})`),a.addColorStop(.6,`rgba(200,200,230,${s.opacity*.8})`),a.addColorStop(1,`rgba(180,180,210,${s.opacity*.5})`),e.fillStyle=a,e.beginPath(),e.ellipse(s.x,s.y,s.width/2,s.height/2,0,0,Math.PI*2),e.fill(),[{x:-.4,y:-.3,w:.35,h:.5},{x:-.2,y:-.4,w:.3,h:.45},{x:.1,y:-.35,w:.35,h:.5},{x:.35,y:-.25,w:.3,h:.45}].forEach(l=>{const c=e.createRadialGradient(s.x+s.width*l.x,s.y+s.height*l.y,0,s.x+s.width*l.x,s.y+s.height*l.y,s.width*l.w);c.addColorStop(0,`rgba(240,240,255,${s.opacity})`),c.addColorStop(.7,`rgba(210,210,240,${s.opacity*.7})`),c.addColorStop(1,`rgba(190,190,220,${s.opacity*.3})`),e.fillStyle=c,e.beginPath(),e.ellipse(s.x+s.width*l.x,s.y+s.height*l.y,s.width*l.w,s.height*l.h,0,0,Math.PI*2),e.fill()})})}const b6=["#FFFFFF","#FFE4B5","#87CEEB","#DDA0DD","#F0E68C","#98FB98","#FFB6C1","#B0E0E6","#FFDAB9","#E6E6FA"],Ri=["#FF6B9D","#C44CFF","#00D4FF","#FFE66D","#4DFFB8","#00FF88"],w6="right",S6=Math.PI/4.6,j6=.16;function k6(e){return Array.from({length:10},(n,r)=>({x:-100+Math.random()*120,y:-80-Math.random()*140,length:Math.random()*60+40,speed:Math.random()*1.5+1,angle:S6+(Math.random()-.5)*j6,color:b6[r],opacity:Math.random()*.3+.7,isActive:!1,trailLength:Math.random()*80+60}))}function C6(e,t,n){const s=Math.floor(t.trailLength/3),a=Math.floor(n/300)%Ri.length,i=n%300/300,l=Math.sin(i*Math.PI);e.save(),e.imageSmoothingEnabled=!1;for(let d=0;d<s;d++){const h=d/s,f=t.x-Math.cos(t.angle)*(d*3),m=t.y-Math.sin(t.angle)*(d*3),x=(1-h)*t.opacity*(.8+l*.2),g=(a+Math.floor(d/3))%Ri.length,b=d<3?"#FFFFFF":Ri[g];e.globalAlpha=x,e.fillStyle=b;const y=d<2?4:3-Math.floor(h*2);y>0&&e.fillRect(Math.floor(f/3)*3,Math.floor(m/3)*3,y,y)}e.globalAlpha=t.opacity,e.fillStyle="#FFFFFF";const c=Math.floor(t.x/3)*3,u=Math.floor(t.y/3)*3;e.fillRect(c,u,4,4),e.globalAlpha=.4+l*.3,e.fillStyle=Ri[a],e.fillRect(c-3,u-3,3*3+1,3*3+1),e.restore()}function N6(e,t){e.save();const n=e.createLinearGradient(t.x,t.y,t.x-Math.cos(t.angle)*t.trailLength,t.y-Math.sin(t.angle)*t.trailLength);n.addColorStop(0,t.color),n.addColorStop(.5,`${t.color}88`),n.addColorStop(1,`${t.color}00`),e.strokeStyle=n,e.lineWidth=2,e.lineCap="round",e.globalAlpha=t.opacity,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x-Math.cos(t.angle)*t.trailLength,t.y-Math.sin(t.angle)*t.trailLength),e.stroke();const r=e.createRadialGradient(t.x,t.y,0,t.x,t.y,8);r.addColorStop(0,"#FFFFFF"),r.addColorStop(.3,t.color),r.addColorStop(1,`${t.color}00`),e.fillStyle=r,e.beginPath(),e.arc(t.x,t.y,8,0,Math.PI*2),e.fill(),e.fillStyle="#FFFFFF",e.beginPath(),e.arc(t.x,t.y,2,0,Math.PI*2),e.fill(),e.restore()}function E6(e){const{ctx:t,width:n,height:r,phenomenon:s,shootingStars:a}=e;let i=e.timer;const l=Date.now(),c=s.id==="pixelDreamMoon";if(s.shootingStarChance===0)return{shootingStars:a,timer:i};a.forEach(h=>{if(h.isActive){if(h.x+=1*Math.cos(h.angle)*h.speed,h.y+=Math.sin(h.angle)*h.speed,h.x>n+h.trailLength||w6==="left"||h.y>r+h.trailLength){h.isActive=!1;return}c?C6(t,h,l):N6(t,h)}});const u=c?2400:3600,d=c?2400:3600;if(i++,i>u+Math.random()*d){i=0;const h=a.map((f,m)=>f.isActive?-1:m).filter(f=>f!==-1);if(h.length>0){const m=Math.random()<s.shootingStarChance&&h.length>=3?Math.min(Math.floor(Math.random()*3)+3,h.length):1;for(let x=0;x<m;x++){const g=h.splice(Math.floor(Math.random()*h.length),1)[0],b=a[g];b.isActive=!0,b.x=-120-Math.random()*120,b.y=-80-Math.random()*140,c&&(b.color=Ri[Math.floor(Math.random()*Ri.length)])}}}return{shootingStars:a,timer:i}}const $a=(e,t)=>{e=e.replace("#","");const n=parseInt(e.substring(0,2),16),r=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16),a=Math.min(255,Math.floor(n*t)),i=Math.min(255,Math.floor(r*t)),l=Math.min(255,Math.floor(s*t));return`#${a.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${l.toString(16).padStart(2,"0")}`},Ob=(e,t,n)=>Math.min(n,Math.max(t,e)),nu=(e,t,n)=>{const r=Math.sin(e*12.9898+t*78.233+n*.17)*43758.5453;return r-Math.floor(r)},T6=(e,t)=>({bg:"#120826",shadow:"#241042",mid:"#3b1e69",base:e,highlight:$a(e,1.25),rim:t,crater:$a(e,.6),glow:t}),Lf=["#FF6B9D","#C44CFF","#00D4FF","#FFE66D","#4DFFB8","#FF8A5B","#7B68EE","#00FF88"],M6=(e,t,n,r,s)=>{const i=r*1.8,l=Math.floor(s/400)%Lf.length,c=s%400/400,u=Math.sin(c*Math.PI);e.save(),e.imageSmoothingEnabled=!1;for(let d=0;d<20;d++){const h=d/20*Math.PI*2,f=s/12e4,m=h+f+Math.sin(s/8e3+d)*.15,x=.85+Math.sin(d*1.5)*.25,g=t+Math.cos(m)*i*x,b=n+Math.sin(m)*i*x*.35,y=Math.sin(s/600+d*2.3)*.5+.5,w=2+y*2+u*1.5,v=(l+d)%Lf.length,S=Lf[v];e.globalAlpha=.5+y*.4+u*.1,e.fillStyle=S,e.fillRect(Math.floor(g),Math.floor(b),w,w),(y>.5||u>.7)&&(e.globalAlpha=.25+u*.15,e.fillRect(Math.floor(g)-1,Math.floor(b)-1,w+2,w+2),u>.8&&d%3===0&&(e.globalAlpha=.15,e.fillStyle="#FFFFFF",e.fillRect(Math.floor(g)-2,Math.floor(b)-2,w+4,w+4)))}e.restore()},P6=(e,t,n,r,s,a,i)=>{const c=r*r,u=T6(a,i),d=Date.now();e.save(),e.imageSmoothingEnabled=!1;const h=m=>{const b=[{inner:1.4,outer:1.6,color:u.shadow,baseAlpha:.5,noise:.5},{inner:1.65,outer:1.75,color:u.base,baseAlpha:.7,noise:.3},{inner:1.8,outer:2.1,color:u.rim,baseAlpha:.35,noise:.7}];if(e.save(),e.translate(t,n),e.rotate(-Math.PI/12),b.forEach((y,w)=>{for(let S=y.inner*r;S<=y.outer*r;S+=2){const j=2*Math.PI*S,k=Math.floor(j/2);for(let N=0;N<k;N++){const E=N/k*Math.PI*2,C=Math.sin(E)<0;if(m==="back"&&!C||m==="front"&&C)continue;const T=d/(6e5+w*3e5)*(w%2===0?1:-1),M=E+T,O=Math.cos(M)*S,$=Math.sin(M)*S*.3;if(nu(Math.floor(O),Math.floor($),d*1e-5)>y.noise){e.fillStyle=y.color;const z=(S-y.inner*r)/((y.outer-y.inner)*r),D=Math.sin(z*Math.PI);e.globalAlpha=y.baseAlpha*D*(C?.5:1),e.fillRect(O,$,2,2)}}}}),m==="front"){for(let w=0;w<12;w++)if(nu(w,d/2e3,42)>.75){const v=(d/45e3+w*.5)%(Math.PI*2);if(Math.sin(v)>.1){const S=r*(1.5+Math.sin(w)*.3),j=Math.cos(v)*S,k=Math.sin(v)*S*.3;e.globalAlpha=.6+Math.sin(d/500+w)*.4,e.fillStyle=w%2===0?"#ffffff":u.rim,e.fillRect(j,k,2,2)}}}e.restore()};M6(e,t,n,r,d),h("back");for(let m=-r;m<=r;m+=3)for(let x=-r;x<=r;x+=3){const g=x+1.5,b=m+3*.5,y=g*g+b*b;if(y>c)continue;const w=g/r,v=b/r,S=Math.sqrt(Math.max(0,1-w*w-v*v)),j=-Math.cos(s*Math.PI*2),k=w*j+S*Math.sqrt(Math.max(0,1-j*j)),N=nu(Math.round(g/3),Math.round(b/3),123),E=N>.94,C=N>.985,T=(k+1)/2,M=(Math.round((g+r)/3)+Math.round((b+r)/3))%2===0;let O=u.bg;T>.9?O=u.highlight:T>.7?O=T<.8&&M?u.base:u.highlight:T>.5?(O=u.base,T<.6&&M&&(O=u.mid)):T>.3?(O=u.mid,T<.4&&M&&(O=u.shadow)):T>.1?(O=u.shadow,T<.2&&M&&(O=u.bg)):O=u.bg,T>.3&&(C?(O=u.crater,w<0&&nu(x,m,1)>.5&&(O=u.highlight)):E&&T>.6&&(O=u.crater));const $=Math.sqrt(y)/r;$>.85&&(w*-j>.2||$>.92)&&($>.95||$>.88&&M)&&(O=u.rim),k<-.1&&(O=u.shadow,k<-.3&&(O=u.bg),k>-.3&&M&&(O=u.mid)),e.fillStyle=O,e.fillRect(t+x,n+m,3,3)}h("front"),e.globalAlpha=.15;const f=e.createRadialGradient(t,n,r*.8,t,n,r*2.5);f.addColorStop(0,u.glow),f.addColorStop(1,"transparent"),e.fillStyle=f,e.beginPath(),e.arc(t,n,r*2.5,0,Math.PI*2),e.fill(),e.restore()},_6=(e,t,n,r,s,a)=>{if(s.id==="pixelDreamMoon"){P6(e,t,n,r,a,s.moonTint,s.uiAccent);return}const i=3,l=r*r,c=r-i*1.2,u=s.moonTint,d=s.uiAccent;let h=0,f=!1,m=!1;a<.5?(h=r*(1-4*a),f=!0):a>.5&&(h=-r+(a-.5)*4*r,m=!0),e.save(),e.imageSmoothingEnabled=!1;for(let x=-r;x<=r;x+=i)for(let g=-r;g<=r;g+=i){const b=g+i*.5,y=x+i*.5;if(b*b+y*y>l)continue;const w=Ob(.85+(-b*.5-y*.4)/(r*2),.6,1.2);let v=1;f?b<h-i?v=.35:b<h+i&&(v=.6):m&&(b>h+i?v=.35:b>h-i&&(v=.6));const S=Math.sqrt(b*b+y*y),j=S>c?.12:0,k=S>c?d:u,N=$a(k,Ob(w*v+j,.35,1.35));e.fillStyle=N,e.fillRect(t+g,n+x,i,i)}e.globalAlpha=.35,e.fillStyle=$a(d,1.1);for(let x=-r-i*2;x<=r+i*2;x+=i*2)for(let g=-r-i*2;g<=r+i*2;g+=i*2){const b=g+i,y=x+i,w=Math.sqrt(b*b+y*y);w>r*1.25||w<r*1.05||e.fillRect(t+g,n+x,i*1.5,i*1.5)}e.restore()};function R6(e,t,n,r,s){if(Math.abs(s-.5)<.01)return;e.save(),e.beginPath(),e.arc(t,n,r,0,Math.PI*2),e.clip();const a="rgba(5, 10, 25, 0.85)",i="rgba(5, 10, 25, 0.5)";if(s<.5){const l=s*2,c=r*(1-l),u=e.createLinearGradient(t-r,n,t-r+c*2.2,n);u.addColorStop(0,a),u.addColorStop(.4,a),u.addColorStop(.7,i),u.addColorStop(1,"rgba(5, 10, 25, 0)"),e.fillStyle=u,e.fillRect(t-r,n-r,c*2.2,r*2)}else if(s>.5){const l=1-(s-.5)*2,c=r*(1-l),u=e.createLinearGradient(t+r-c*2.2,n,t+r,n);u.addColorStop(0,"rgba(5, 10, 25, 0)"),u.addColorStop(.3,i),u.addColorStop(.6,a),u.addColorStop(1,a),e.fillStyle=u,e.fillRect(t+r-c*2.2,n-r,c*2.2,r*2)}e.restore()}function Jl(e){const n={normal:1,rare:1.05,very_rare:1.1,legendary:1.15,mythic:1.2}[e.rarity];return 40*(e.moonSize||1)*n}function A6({ctx:e,phenomenon:t,parallaxOffset:n,moonPosition:r,moonPhase:s}){const a={...r};a.phase+=.005;const i=Math.sin(a.phase)*3,l=n.x*.8,c=n.y*.8,u=a.x+l,d=a.y+c,h=Jl(t);if(t.specialEffect==="pixel")return _6(e,u,d+i,h,t,s.phase),a;const f=t.moonTint,m=e.createRadialGradient(u,d+i,0,u,d+i,h*1.5);m.addColorStop(0,`${f}50`),m.addColorStop(.5,`${f}26`),m.addColorStop(1,`${f}00`),e.fillStyle=m,e.beginPath(),e.arc(u,d+i,h*1.5,0,Math.PI*2),e.fill();const x=e.createLinearGradient(u-h,d+i-h,u+h,d+i+h);return x.addColorStop(0,t.moonTint),x.addColorStop(.3,$a(t.moonTint,.9)),x.addColorStop(.6,$a(t.moonTint,.8)),x.addColorStop(1,$a(t.moonTint,.7)),e.fillStyle=x,e.beginPath(),e.arc(u,d+i,h,0,Math.PI*2),e.fill(),t.rarity==="mythic"&&D6(e,u,d+i,h,t,a.phase),t.id==="lunarTransientPhenomena"&&O6(e,u,d+i,h,t,a.phase),R6(e,u,d+i,h,s.phase),t.id==="crystalMoon"&&I6(e,u,d+i,h,a.phase),a}function D6(e,t,n,r,s,a){const i=e.createRadialGradient(t,n,r*.7,t,n,r*1.8);i.addColorStop(0,`${s.uiAccent}00`),i.addColorStop(.3,`${s.uiAccent}40`),i.addColorStop(.6,`${s.uiAccent}20`),i.addColorStop(1,`${s.uiAccent}00`),e.fillStyle=i,e.beginPath(),e.arc(t,n,r*1.8,0,Math.PI*2),e.fill(),e.strokeStyle=`${s.uiAccent}60`,e.lineWidth=2,e.beginPath(),e.arc(t,n,r-1,0,Math.PI*2),e.stroke();const l=a*2,c=(Math.sin(l)*.15+.25)*255,u=Math.floor(c).toString(16).padStart(2,"0"),d=e.createRadialGradient(t-r*.3,n-r*.3,0,t-r*.3,n-r*.3,r*.6);d.addColorStop(0,`#ffffff${u}`),d.addColorStop(1,"#ffffff00"),e.fillStyle=d,e.beginPath(),e.arc(t,n,r,0,Math.PI*2),e.fill()}function O6(e,t,n,r,s,a){const i=a*3,l=Math.sin(i)*.3+.7,c=e.createRadialGradient(t,n,r*.5,t,n,r*3);c.addColorStop(0,`${s.uiAccent}${Math.floor(l*120).toString(16).padStart(2,"0")}`),c.addColorStop(.3,`${s.uiAccent}${Math.floor(l*80).toString(16).padStart(2,"0")}`),c.addColorStop(.6,`${s.uiAccent}${Math.floor(l*40).toString(16).padStart(2,"0")}`),c.addColorStop(1,`${s.uiAccent}00`),e.fillStyle=c,e.beginPath(),e.arc(t,n,r*3,0,Math.PI*2),e.fill();const u=a*4,d=(Math.sin(u)*60+280)%360;e.strokeStyle=`hsla(${d}, 80%, 70%, ${l*.8})`,e.lineWidth=3,e.beginPath(),e.arc(t,n,r+2,0,Math.PI*2),e.stroke();const h=e.createRadialGradient(t,n,0,t,n,r*.8);h.addColorStop(0,`rgba(255, 255, 255, ${l*.4})`),h.addColorStop(.5,`${s.uiAccent}${Math.floor(l*100).toString(16).padStart(2,"0")}`),h.addColorStop(1,`${s.uiAccent}00`),e.fillStyle=h,e.beginPath(),e.arc(t,n,r*.8,0,Math.PI*2),e.fill();const f=12,m=r*2;for(let x=0;x<f;x++){const g=x/f*Math.PI*2+a,b=t+Math.cos(g)*m,y=n+Math.sin(g)*m,w=e.createRadialGradient(b,y,0,b,y,4);w.addColorStop(0,`${s.uiAccent}${Math.floor(l*200).toString(16).padStart(2,"0")}`),w.addColorStop(1,`${s.uiAccent}00`),e.fillStyle=w,e.beginPath(),e.arc(b,y,4,0,Math.PI*2),e.fill()}}function I6(e,t,n,r,s){e.save();const a=8;for(let l=0;l<a;l++){const c=Math.PI*2*l/a+s*.3,u=Math.PI*2*(l+1)/a+s*.3,d=r*.95,h=r*.6,f=t+Math.cos(c)*d,m=n+Math.sin(c)*d,x=t+Math.cos(u)*d,g=n+Math.sin(u)*d,b=t+Math.cos(u)*h,y=n+Math.sin(u)*h,w=t+Math.cos(c)*h,v=n+Math.sin(c)*h,S=l%2===0?.08:.04,j=e.createLinearGradient(f,m,t,n);j.addColorStop(0,`rgba(255, 255, 255, ${S})`),j.addColorStop(.5,`rgba(200, 230, 255, ${S*.8})`),j.addColorStop(1,`rgba(180, 220, 255, ${S*.5})`),e.fillStyle=j,e.strokeStyle=`rgba(220, 240, 255, ${.15+S})`,e.lineWidth=.5,e.beginPath(),e.moveTo(f,m),e.lineTo(x,g),e.lineTo(b,y),e.lineTo(w,v),e.closePath(),e.fill(),e.stroke()}const i=20;for(let l=0;l<i;l++){const c=Math.PI*2*l/i+s*(l%3),u=.2+l%5*.15,d=r*u,h=t+Math.cos(c)*d,f=n+Math.sin(c)*d,m=Math.sin(s*4+l*.5)*.5+.5,x=(.8+m*1.2)*(l%3===0?1.2:.8),g=e.createRadialGradient(h,f,0,h,f,x*2.5);g.addColorStop(0,`rgba(255, 255, 255, ${.5*m})`),g.addColorStop(.4,`rgba(220, 240, 255, ${.3*m})`),g.addColorStop(1,"rgba(200, 230, 255, 0)"),e.fillStyle=g,e.beginPath(),e.arc(h,f,x*2.5,0,Math.PI*2),e.fill()}e.restore()}function $6(){const e=p.useRef([]),t=p.useRef([]),n=p.useRef([]),r=p.useRef([]),s=p.useRef([]),a=p.useRef([]),i=p.useRef([]),l=p.useRef([]),c=p.useRef([]),u=p.useRef([]),d=p.useRef([]),h=p.useRef([]),f=p.useRef([]),m=p.useRef([]),x=p.useRef([]),g=p.useRef([]),b=p.useRef([]),y=p.useRef([]),w=p.useRef([]),v=p.useRef([]),S=p.useRef([]),j=p.useRef([]),k=p.useRef([]),N=p.useRef([]),E=p.useRef(Date.now()),C=p.useCallback((_,I,L,H,U)=>{const Z=_.effectIntensity||.5,q={normal:0,rare:.3,very_rare:.5,legendary:.75,mythic:1}[_.rarity];if(_.id==="superBlueBloodMoon"?t.current=$f(20,"#B84060","#d85080"):_.id==="brokenMoon"?t.current=$f(25,"#9898B8","#6868a8",.008,.015):_.id==="emptySky"&&(t.current=$f(30,"#606080","#707090",.008,.012)),_.rarity==="normal"||!_.specialEffect)return;const ne=_.specialEffect;ne==="flash"?e.current=aL():ne==="sparkle"?n.current=Ck(I.x,I.y,60):ne==="echo"?f.current=cL(I.x,I.y,L,4):ne==="aurora"?r.current=dL(U):ne==="fireflies"?s.current=fL(H,U,Math.floor((10+Z*20)*q)):ne==="snow"?a.current=pL(H):ne==="fog"?i.current=yL(H,U):ne==="meteorShower"?(u.current=IL(H,U,Math.floor((10+Z*15)*q)),k.current=zL(H,U,6)):ne==="frozenTime"?d.current=JL(H,U,Math.floor((20+Z*20)*q)):ne==="voidRipples"?h.current=e6():ne==="shattered"?(l.current=r6(I.x,I.y,12),c.current=Ab(I.x,I.y,25)):ne==="bloodRing"?m.current=xL(L):ne==="fadeParticles"?x.current=wL(H,U):ne==="silence"?g.current=jL():ne==="dreamDust"?b.current=CL(H,U):ne==="memoryFragments"?y.current=EL(H,U):ne==="ancientRunes"?w.current=ML(I.x,I.y,L):ne==="lightRays"?v.current=_L():ne==="shootingStars"?S.current=GL():ne==="starfield"?j.current=qL(150):ne==="nebula"?k.current=Ak(H,U,5):ne==="prismLights"&&(N.current=XL())},[]),T=p.useCallback((_,I,L,H,U)=>{(I.specialEffect==="nebula"||I.specialEffect==="meteorShower")&&k.current.length>0&&(k.current=BL(_,k.current,L,H,U.x,U.y)),I.specialEffect==="meteorShower"&&u.current.length>0&&$L(_,u.current,L,H),I.specialEffect==="starfield"&&j.current.length>0&&(j.current=YL(_,j.current,L,H))},[]),M=p.useCallback((_,I,L)=>{I.specialEffect==="aurora"&&r.current.length>0&&hL(_,r.current,L),I.specialEffect==="fog"&&i.current.length>0&&vL(_,i.current,L)},[]),O=p.useCallback((_,I,L)=>{if(I.specialEffect!=="shattered")return;const H=Date.now();H-E.current>1e4&&(c.current=Ab(L.x,L.y,25),E.current=H),c.current.length>0&&a6(_,c.current,I.moonTint,L.x,L.y),l.current.length>0&&s6(_,l.current,L.x,L.y,I.moonTint)},[]),$=p.useCallback((_,I,L,H,U,Z)=>{const q=I.specialEffect;q&&(q==="flash"&&e.current.length>=0&&(Math.random()<.025&&e.current.push(kk(L.x,L.y,H)),e.current=iL(_,e.current)),q==="sparkle"&&n.current.length>0&&lL(_,n.current),q==="bloodRing"&&m.current.length>0&&bL(_,m.current,L.x,L.y),q==="fadeParticles"&&x.current.length>0&&SL(_,x.current),q==="silence"&&g.current.length>=0&&(g.current=kL(_,g.current,L.x,L.y,H)),q==="dreamDust"&&b.current.length>0&&NL(_,b.current),q==="memoryFragments"&&y.current.length>0&&TL(_,y.current),q==="ancientRunes"&&w.current.length>0&&PL(_,w.current,L.x,L.y),q==="lightRays"&&v.current.length>0&&RL(_,v.current,L.x,L.y,H),q==="prismLights"&&N.current.length>0&&QL(_,N.current,L.x,L.y,H),q==="shootingStars"&&S.current.length>=0&&(S.current=KL(_,S.current,U,Z)))},[]),R=p.useCallback((_,I,L)=>{(I.id==="superBlueBloodMoon"||I.id==="brokenMoon"||I.id==="emptySky")&&t.current.length>0&&oL(_,t.current,L.x,L.y)},[]),z=p.useCallback((_,I,L,H)=>{I.specialEffect==="snow"&&a.current.length>0&&gL(_,a.current,L,H),I.specialEffect==="frozenTime"&&d.current.length>0&&ZL(_,d.current)},[]),D=p.useCallback((_,I,L)=>{if(I.specialEffect!=="voidRipples")return;const H=Jl(I);Math.random()<.015&&h.current.push(t6(L.x,L.y+Math.sin(L.phase)*3,H)),h.current=n6(_,h.current)},[]),V=p.useCallback((_,I,L)=>{I.specialEffect==="echo"&&f.current.length>0&&uL(_,f.current,L.x,L.y,L.phase,I.moonTint)},[]),P=p.useCallback((_,I,L,H)=>{I.specialEffect==="fireflies"&&s.current.length>0&&mL(_,s.current,L,H)},[]);return{moonFlashesRef:e,sparklesRef:n,echoMoonsRef:f,firefliesRef:s,initializeParticleEffects:C,drawBackgroundEffects:T,drawAtmosphericEffects:M,drawShatteredEffects:O,drawSpecialEffects:$,drawOrbitingEffects:R,drawWeatherEffects:z,drawVoidEffects:D,drawEchoMoonsEffect:V,drawFirefliesEffect:P}}function L6({canvasRef:e,phenomenon:t,moonPositionRef:n,parallaxOffsetRef:r,moonFlashesRef:s,sparklesRef:a}){const i=p.useRef(null),l=p.useRef(0),c=p.useRef(!1),[u,d]=p.useState(null),[h,f]=p.useState(Sd()),m=p.useCallback((k,N)=>{var _,I;if(!e.current||!t||!n.current)return console.log(" isMoonHit: No canvas or phenomenon"),!1;const E=e.current.getBoundingClientRect(),C=k-E.left,T=N-E.top,M=n.current,O=((_=r.current)==null?void 0:_.x)??0,$=((I=r.current)==null?void 0:I.y)??0,R=M.x+O*.8,z=M.y+Math.sin(M.phase)*3+$*.8,D=Jl(t),V=Math.sqrt(Math.pow(C-R,2)+Math.pow(T-z,2)),P=V<D*1.5;return console.log(" Moon Hit Check:",{clickX:C.toFixed(0),clickY:T.toFixed(0),moonX:R.toFixed(0),moonY:z.toFixed(0),dist:V.toFixed(0),moonRadius:D.toFixed(0),threshold:(D*1.5).toFixed(0),hit:P}),P},[e,t,n,r]),x=p.useCallback(()=>{var O,$;if(!e.current||!t||!n.current)return;const k=n.current,N=((O=r.current)==null?void 0:O.x)??0,E=(($=r.current)==null?void 0:$.y)??0,C=k.x+N*.8,T=k.y+Math.sin(k.phase)*3+E*.8;navigator.vibrate&&navigator.vibrate(20),s.current.push(kk(C,T));const M=Ck(C,T,15);a.current=[...a.current,...M]},[e,t,n,r,s,a]),g=p.useCallback(()=>{f(Sd()),d("phase"),x()},[x]),b=p.useCallback(()=>{navigator.vibrate&&navigator.vibrate([50,30,50]),d("phenomenon")},[]),y=p.useCallback(k=>{console.log(" Touch Start triggered");const N=k.touches[0];m(N.clientX,N.clientY)&&(k.preventDefault(),c.current=!1,l.current=Date.now(),i.current=setTimeout(()=>{c.current||b()},500))},[m,b]),w=p.useCallback(()=>{c.current=!0,i.current&&(clearTimeout(i.current),i.current=null)},[]),v=p.useCallback(k=>{if(i.current&&(clearTimeout(i.current),i.current=null),Date.now()-l.current<500&&!c.current){const E=k.changedTouches[0];m(E.clientX,E.clientY)&&g()}},[m,g]),S=p.useCallback(k=>{m(k.clientX,k.clientY)&&g()},[m,g]),j=p.useCallback(()=>{d(null)},[]);return p.useEffect(()=>()=>{i.current&&clearTimeout(i.current)},[]),{overlayType:u,currentMoonPhase:h,handleTouchStart:y,handleTouchMove:w,handleTouchEnd:v,handleCanvasClick:S,handleCloseOverlay:j}}function F6({onRefresh:e,onExpand:t,onCollapse:n,pullThreshold:r=100,expandThreshold:s=50}={}){const a=p.useRef(null),[i,l]=p.useState({pullDistance:0,isRefreshing:!1,isPulling:!1,isExpanded:!1,gestureDirection:"none"}),c=p.useRef(0),u=p.useRef(0),d=p.useRef(!1),h=p.useRef(null),f=p.useCallback(y=>{if(i.isRefreshing)return;const w=y.touches[0];c.current=w.clientY,u.current=w.clientX,d.current=!0,h.current=null,l(v=>({...v,isPulling:!0,gestureDirection:"none"}))},[i.isRefreshing]),m=p.useCallback(y=>{if(!d.current||i.isRefreshing)return;const w=y.touches[0],v=w.clientY-c.current,S=w.clientX-u.current;if(h.current||(Math.abs(v)>10||Math.abs(S)>10)&&(h.current=Math.abs(v)>Math.abs(S)?"vertical":"horizontal"),h.current!=="vertical")return;const j=v>0?2.5:4,k=v/j;l(N=>({...N,pullDistance:Math.max(-50,Math.min(150,k)),gestureDirection:v>0?"down":"up"})),v>0&&y.preventDefault()},[i.isRefreshing]),x=p.useCallback(async()=>{if(!d.current)return;d.current=!1,h.current=null;const{pullDistance:y,gestureDirection:w}=i;if(w==="down"&&y>=r&&e){l(v=>({...v,isRefreshing:!0,pullDistance:r,isPulling:!1}));try{await e()}finally{l(v=>({...v,isRefreshing:!1,pullDistance:0}))}return}w==="down"&&y>=s&&t?(t(),l(v=>({...v,isExpanded:!0}))):w==="up"&&y<=-s&&n&&(n(),l(v=>({...v,isExpanded:!1}))),l(v=>({...v,pullDistance:0,isPulling:!1,gestureDirection:"none"}))},[i,r,s,e,t,n]);p.useEffect(()=>{const y=a.current;if(y)return y.addEventListener("touchstart",f,{passive:!0}),y.addEventListener("touchmove",m,{passive:!1}),y.addEventListener("touchend",x,{passive:!0}),()=>{y.removeEventListener("touchstart",f),y.removeEventListener("touchmove",m),y.removeEventListener("touchend",x)}},[f,m,x]);const g=Math.min(Math.abs(i.pullDistance)/r,1),b=i.pullDistance>=r;return{containerRef:a,...i,progress:g,isReady:b}}const Ib="mythic-moon-collection",Ff="mythic-locked-moon",$b={superBloodMoon:{type:"blood",color:"#DC143C",secondaryColor:"#8B0000",speed:1.5,density:.8,glow:!0},superBlueBloodMoon:{type:"aurora",color:"#B840A0",secondaryColor:"#4040B8",speed:1.2,density:.7,glow:!0},lunarTransientPhenomena:{type:"lightning",color:"#C8A8F8",secondaryColor:"#FFFFFF",speed:2.5,density:.5,glow:!0},hybridEclipse:{type:"fire",color:"#FFB870",secondaryColor:"#D8A860",speed:1,density:.6,glow:!0},stillMoon:{type:"crystals",color:"#B0C4DE",secondaryColor:"#E0F0FF",speed:.3,density:.4,glow:!1},echoMoon:{type:"stars",color:"#D0D0E8",secondaryColor:"#9090B8",speed:.8,density:.6,glow:!1},brokenMoon:{type:"void",color:"#9898B8",secondaryColor:"#484868",speed:1.8,density:.9,glow:!1},emptySky:{type:"void",color:"#404040",secondaryColor:"#202020",speed:.5,density:.2,glow:!1},crystalMoon:{type:"crystals",color:"#E0F0FF",secondaryColor:"#80C0FF",speed:.6,density:.7,glow:!0},arcticMoon:{type:"snow",color:"#90DCC8",secondaryColor:"#FFFFFF",speed:.7,density:.8,glow:!1},shatteredMoon:{type:"void",color:"#9898C8",secondaryColor:"#6060A0",speed:2,density:.7,glow:!0},cosmicVoyageMoon:{type:"stars",color:"#8090C0",secondaryColor:"#4060A0",speed:1,density:.9,glow:!0},nebulaDreamMoon:{type:"aurora",color:"#B888D8",secondaryColor:"#D060A0",speed:.9,density:.6,glow:!0},pixelDreamMoon:{type:"pixels",color:"#FFBFA3",secondaryColor:"#FF8FD6",speed:.6,density:.5,glow:!1}};function Dk(){const[e,t]=p.useState({}),[n,r]=p.useState(!1);p.useEffect(()=>{const g=localStorage.getItem(Ib);if(g)try{t(JSON.parse(g))}catch(b){console.error("Failed to parse moon collection:",b)}r(!0)},[]),p.useEffect(()=>{n&&localStorage.setItem(Ib,JSON.stringify(e))},[e,n]);const s=p.useCallback(g=>{const b=new Date().toISOString();t(y=>{const w=y[g.id];return w?{...y,[g.id]:{...w,encounterCount:w.encounterCount+1,lastEncountered:b}}:{...y,[g.id]:{id:g.id,firstEncountered:b,encounterCount:1,lastEncountered:b,isFavorite:!1,isLocked:!1,themeDurationBoost:0}}})},[]),a=p.useCallback(g=>{t(b=>{const y=b[g];return y?{...b,[g]:{...y,isFavorite:!y.isFavorite}}:b})},[]),i=p.useCallback(g=>{t(b=>{const y=b[g];if(!y)return b;if(!qa()&&y.encounterCount<5&&!y.isLocked)return console.log(` Need ${5-y.encounterCount} more encounters to unlock Lock Theme feature`),b;const w=!y.isLocked;w?(localStorage.setItem(Ff,g),console.log(` Moon locked: ${g}`)):(localStorage.removeItem(Ff),console.log(` Moon unlocked: ${g}`));const v={...b};return Object.keys(v).forEach(S=>{S!==g&&v[S].isLocked&&(v[S]={...v[S],isLocked:!1})}),{...v,[g]:{...y,isLocked:w}}})},[]),l=p.useCallback(()=>localStorage.getItem(Ff),[]),c=p.useCallback((g,b)=>{t(y=>{const w=y[g];return w?{...y,[g]:{...w,themeDurationBoost:Math.min(86400,w.themeDurationBoost+b)}}:y})},[]),u=p.useCallback(g=>{const b=g.transitionSpeed*2,y=e[g.id],w=(y==null?void 0:y.themeDurationBoost)||0;return b+w},[e]),d=p.useCallback(()=>{const g=Object.keys(Ht),b=Object.keys(e),y=v=>b.filter(S=>{var j;return((j=Ht[S])==null?void 0:j.rarity)===v}).length,w=Object.values(e).reduce((v,S)=>v+S.encounterCount,0);return{totalDiscovered:b.length,totalEncounters:w,mythicCount:y("mythic"),legendaryCount:y("legendary"),veryRareCount:y("very_rare"),rareCount:y("rare"),normalCount:y("normal"),completionPercent:Math.round(b.length/g.length*100)}},[e]),h=p.useCallback(()=>Object.values(Ht).filter(g=>g.rarity==="mythic").map(g=>({...g,discovered:!!e[g.id],entry:e[g.id]||null,particles:$b[g.id]||null})),[e]),f=p.useCallback(g=>$b[g]||null,[]),m=p.useCallback(g=>!!e[g],[e]),x=p.useCallback(()=>{const g=new Date().toISOString(),b={};Object.values(Ht).forEach(y=>{b[y.id]={id:y.id,firstEncountered:g,encounterCount:1,lastEncountered:g,isFavorite:!1,isLocked:!1,themeDurationBoost:0}}),t(b),console.log(" All 54 moons unlocked in collection!")},[]);return{collection:e,isLoaded:n,recordEncounter:s,toggleFavorite:a,toggleLock:i,getLockedMoonId:l,addDurationBoost:c,getEffectiveThemeDuration:u,getStats:d,getMythicMoons:h,getParticleConfig:f,isDiscovered:m,unlockAllMoonsInCollection:x}}const z6={normal:{bg:"bg-slate-900/90",border:"border-slate-600",text:"text-slate-300"},rare:{bg:"bg-blue-950/90",border:"border-blue-500",text:"text-blue-300"},very_rare:{bg:"bg-purple-950/90",border:"border-purple-500",text:"text-purple-300"},legendary:{bg:"bg-amber-950/90",border:"border-amber-500",text:"text-amber-300"},mythic:{bg:"bg-rose-950/90",border:"border-rose-400",text:"text-rose-300"}},Lb={normal:"",rare:"",very_rare:"",legendary:"",mythic:""};function B6({type:e,moonPhase:t,phenomenon:n,onClose:r}){const s=z6[(n==null?void 0:n.rarity)||"normal"];return o.jsxs("div",{className:"absolute inset-0 z-50 flex items-center justify-center p-4 animate-fade-in",onClick:r,children:[o.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),o.jsxs("div",{className:`relative max-w-sm w-full rounded-2xl border-2 ${s.bg} ${s.border} p-6 shadow-2xl animate-scale-in`,onClick:a=>a.stopPropagation(),children:[o.jsx("button",{onClick:r,className:"absolute top-3 right-3 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors","aria-label":"Close",children:o.jsx(aa,{className:"w-4 h-4 text-white/80"})}),e==="phase"?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 rounded-full bg-white/10",children:o.jsx(wg,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-white",children:t.phaseName}),o.jsx("p",{className:"text-sm text-white/70",children:t.phaseNameTh})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),o.jsxs("p",{className:"text-xl font-bold text-white",children:[Math.round(t.illumination*100),"%"]})]}),o.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),o.jsxs("p",{className:"text-xl font-bold text-white",children:[t.age.toFixed(1)," ",o.jsx("span",{className:"text-sm font-normal",children:""})]})]})]}),o.jsx("div",{className:"flex justify-center py-2",children:o.jsxs("div",{className:"relative w-20 h-20",children:[o.jsx("div",{className:"absolute inset-0 rounded-full bg-white/90 shadow-lg"}),o.jsx("div",{className:"absolute inset-0 rounded-full bg-slate-900/90",style:{clipPath:t.phase<.5?`inset(0 ${(1-t.phase*2)*100}% 0 0)`:`inset(0 0 0 ${(t.phase-.5)*2*100}%)`}})]})}),o.jsx("p",{className:"text-center text-sm text-white/60",children:""})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 rounded-full",style:{backgroundColor:(n==null?void 0:n.uiAccent)+"30"},children:o.jsx(fr,{className:"w-6 h-6",style:{color:n==null?void 0:n.uiAccent}})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-white",children:n==null?void 0:n.name}),o.jsx("p",{className:"text-sm text-white/70",children:n==null?void 0:n.nameEn})]})]}),(n==null?void 0:n.id)==="pixelDreamMoon"?o.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 border-4 border-double",style:{backgroundColor:"#2a2a40",borderColor:n.uiAccent,boxShadow:"4px 4px 0px rgba(0,0,0,0.5)",fontFamily:"'Press Start 2P', cursive",imageRendering:"pixelated"},children:[o.jsx(fp,{className:"w-3 h-3",style:{color:n.uiAccent}}),o.jsx("span",{className:"text-xs tracking-widest uppercase",style:{color:n.uiAccent},children:Lb[n.rarity]})]}):o.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full ${s.bg} border ${s.border}`,children:[o.jsx(fp,{className:`w-4 h-4 ${s.text}`}),o.jsx("span",{className:`text-sm font-medium ${s.text}`,children:Lb[(n==null?void 0:n.rarity)||"normal"]})]}),o.jsxs("p",{className:"text-lg italic text-white/80 border-l-2 pl-3",style:{borderColor:n==null?void 0:n.uiAccent},children:['"',n==null?void 0:n.subtitle,'"']}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),o.jsxs("p",{className:"text-lg font-semibold text-white",children:[Math.round(((n==null?void 0:n.starDensity)||0)*100),"%"]})]}),o.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),o.jsxs("p",{className:"text-lg font-semibold text-white",children:[Math.round(((n==null?void 0:n.cloudOpacity)||0)*100),"%"]})]}),o.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),o.jsxs("p",{className:"text-lg font-semibold text-white",children:[Math.round(((n==null?void 0:n.shootingStarChance)||0)*100),"%"]})]}),o.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),o.jsxs("p",{className:"text-lg font-semibold text-white",children:[(((n==null?void 0:n.moonSize)||1)*100).toFixed(0),"%"]})]})]}),(n==null?void 0:n.specialEffect)&&o.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-white/50 mb-1",children:""}),o.jsxs("p",{className:"text-base font-medium text-white capitalize",children:[n.specialEffect,n.effectIntensity&&o.jsxs("span",{className:"text-white/60 ml-2",children:["(",Math.round(n.effectIntensity*100),"%)"]})]})]}),o.jsx("div",{className:"flex items-center justify-center gap-2 pt-2",children:o.jsxs("span",{className:"px-3 py-1 rounded-full text-sm font-medium",style:{backgroundColor:(n==null?void 0:n.uiAccent)+"20",color:n==null?void 0:n.uiAccent},children:["#",n==null?void 0:n.emotionTag]})}),o.jsx("p",{className:"text-center text-sm text-white/60",children:""})]})]})]})}function V6({phenomenon:e}){const t=()=>e?e.rarity==="mythic"?{superBloodMoon:"'Cinzel', serif",superBlueBloodMoon:"'UnifrakturMaguntia', cursive",lunarTransientPhenomena:"'Orbitron', sans-serif",hybridEclipse:"'Spectral', serif",stillMoon:"'Abril Fatface', serif",echoMoon:"'Righteous', cursive",brokenMoon:"'Creepster', cursive",emptySky:"'Nosifer', cursive",crystalMoon:"'Poiret One', cursive",shatteredMoon:"'Creepster', cursive",pixelDreamMoon:"'Press Start 2P', 'Space Grotesk', sans-serif"}[e.id]||"'Cinzel', serif":e.rarity==="legendary"?"'Playfair Display', serif":e.rarity==="very_rare"?"'Cormorant Garamond', serif":e.rarity==="rare"?e.id==="snowMoon"?"'Mountains of Christmas', cursive":"'Philosopher', sans-serif":"'Inter', sans-serif":"'Inter', sans-serif",n=()=>e?e.id==="pixelDreamMoon"?"text-5xl md:text-6xl":e.rarity==="mythic"?"text-6xl":e.rarity==="legendary"||e.rarity==="very_rare"?"text-5xl":"text-4xl":"text-4xl",r=()=>e?e.rarity==="mythic"?e.id==="pixelDreamMoon"?"2px 2px 0 rgba(20, 10, 40, 0.9), 0 0 12px rgba(255, 170, 220, 0.6)":`0 0 5px ${e.uiAccent}99, 0 0 12px ${e.uiAccent}55, 0 3px 8px rgba(0, 0, 0, 0.8)`:e.rarity==="legendary"?`0 0 12px ${e.uiAccent}, 0 0 25px ${e.uiAccent}aa, 0 4px 10px rgba(0, 0, 0, 0.8)`:e.rarity==="very_rare"?`0 0 20px ${e.uiAccent}aa, 0 0 40px ${e.uiAccent}66, 0 4px 8px rgba(0, 0, 0, 0.6)`:e.rarity==="rare"?"0 0 15px rgba(255, 255, 255, 0.5), 0 0 30px rgba(255, 255, 255, 0.3), 0 4px 8px rgba(0, 0, 0, 0.5)":"0 0 10px rgba(255, 255, 255, 0.4), 0 2px 6px rgba(0, 0, 0, 0.5)":"0 0 10px rgba(255, 255, 255, 0.4), 0 2px 6px rgba(0, 0, 0, 0.5)",s=()=>e&&(e.rarity==="mythic"||e.rarity==="legendary")?e.id==="emptySky"||e.id==="brokenMoon"?"#ffffff":e.uiAccent:"#ffffff",a=()=>e?e.id==="pixelDreamMoon"?"pixelFlicker 3s steps(6) infinite":e.rarity==="mythic"?"pulse 3s ease-in-out infinite":e.rarity==="legendary"?"pulse 4s ease-in-out infinite":"none":"none",i=()=>e?e.id==="pixelDreamMoon"?"'Chakra Petch', 'Space Grotesk', sans-serif":e.rarity==="mythic"||e.rarity==="legendary"?"'Cormorant Garamond', serif":e.rarity==="very_rare"?"'Philosopher', sans-serif":"'Inter', sans-serif":"'Inter', sans-serif",l=()=>e?e.rarity==="mythic"?e.id==="pixelDreamMoon"?"1px 1px 0 rgba(15, 8, 30, 0.9), 0 0 8px rgba(255, 190, 140, 0.6)":`0 0 12px ${e.uiAccent}aa, 0 0 25px ${e.uiAccent}44, 0 2px 6px rgba(0, 0, 0, 0.7)`:e.rarity==="legendary"?`0 0 15px ${e.uiAccent}99, 0 2px 5px rgba(0, 0, 0, 0.6)`:e.rarity==="very_rare"?`0 0 12px ${e.uiAccent}66, 0 2px 4px rgba(0, 0, 0, 0.5)`:"0 0 10px rgba(255, 255, 255, 0.4), 0 2px 4px rgba(0, 0, 0, 0.5)":"0 0 10px rgba(255, 255, 255, 0.4), 0 2px 4px rgba(0, 0, 0, 0.5)",c=()=>e&&(e.rarity==="mythic"||e.rarity==="legendary")?e.uiAccent:"rgba(255, 255, 255, 0.95)",u=()=>e?e.id==="pixelDreamMoon"?"text-base md:text-lg":e.rarity==="mythic"?"text-xl":"text-lg":"text-lg";return o.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center px-6 pt-10 pointer-events-none",children:[o.jsx("h1",{className:`font-bold text-white mb-2 tracking-wide transition-all duration-500 ${n()}`,style:{fontFamily:t(),textShadow:r(),color:s(),animation:a(),letterSpacing:(e==null?void 0:e.id)==="pixelDreamMoon"?"0.18em":void 0,textTransform:(e==null?void 0:e.id)==="pixelDreamMoon"?"uppercase":void 0},children:"Dream book"}),e&&o.jsx("p",{className:`font-light transition-all duration-500 ${u()}`,style:{fontFamily:i(),textShadow:l(),color:c(),letterSpacing:(e==null?void 0:e.id)==="pixelDreamMoon"?"0.08em":void 0,fontStyle:(e==null?void 0:e.id)==="pixelDreamMoon"?"normal":"italic"},children:e.subtitle})]})}function U6({pullDistance:e,progress:t,isRefreshing:n,isReady:r,isPulling:s}){const a=e>15||n,i=.5+t*.5,l=t*180,c=t*.6;return o.jsxs("div",{className:Y("absolute left-1/2 -translate-x-1/2 z-20 pointer-events-none","transition-all duration-300 ease-out",a?"opacity-100":"opacity-0"),style:{top:Math.max(8,Math.min(e*.8,80)),transform:`translateX(-50%) scale(${i})`},children:[o.jsx("div",{className:Y("absolute inset-0 rounded-full blur-xl transition-opacity",r?"bg-primary/40":"bg-white/20"),style:{opacity:c,transform:`scale(${1.5+t*.5})`}}),o.jsx("div",{className:Y("relative flex items-center justify-center w-12 h-12 rounded-full","backdrop-blur-md border transition-all duration-300",n?"bg-primary/30 border-primary/50 shadow-lg shadow-primary/20":r?"bg-primary/20 border-primary/40":"bg-white/10 border-white/20"),children:n?o.jsxs("div",{className:"relative",children:[o.jsx(oh,{className:"w-5 h-5 text-primary animate-spin"}),o.jsx(fr,{className:"absolute -top-1 -right-1 w-3 h-3 text-primary animate-pulse",style:{animationDelay:"0.2s"}}),o.jsx(fr,{className:"absolute -bottom-1 -left-1 w-2 h-2 text-primary animate-pulse",style:{animationDelay:"0.5s"}})]}):o.jsx(gr,{className:Y("w-6 h-6 transition-all duration-300",r?"text-primary":"text-white/70"),style:{transform:`rotate(${l}deg)`}})}),o.jsx("div",{className:Y("absolute -bottom-6 left-1/2 -translate-x-1/2 whitespace-nowrap","text-[10px] font-medium transition-all duration-300",r?"text-primary":"text-white/50"),style:{opacity:t>.3?1:0,transform:`translateX(-50%) translateY(${(1-t)*10}px)`},children:n?"...":r?"":"..."}),s&&t>.2&&o.jsx("div",{className:"absolute inset-0",children:[...Array(3)].map((u,d)=>o.jsx("div",{className:"absolute w-1 h-1 rounded-full bg-white/40",style:{left:`${50+(d-1)*20}%`,top:`${-20-d*10}%`,opacity:t*(.8-d*.2),transform:`scale(${1-d*.2})`,animation:`float ${1+d*.3}s ease-in-out infinite`}},d))})]})}const Qn={cyan:"#22d3ee",pink:"#f472b6",sky:"#93c5fd",mint:"#a7f3d0",glow:"rgba(34,211,238,0.8)"},ln=(e,t)=>Math.random()*(t-e)+e,W6=e=>e[Math.floor(Math.random()*e.length)];function H6({show:e,onComplete:t}){const[n,r]=p.useState(!1),[s,a]=p.useState(!1),i=p.useMemo(()=>e?Array.from({length:26}).map(()=>({size:Math.random()>.7?2:1,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,opacity:ln(.2,.8),duration:ln(3,7),delay:ln(0,2)})):[],[e]),l=p.useMemo(()=>e?Array.from({length:12}).map(()=>({size:Math.random()>.6?8:4,top:`${Math.random()*90}%`,left:`${Math.random()*90}%`,color:W6([Qn.cyan,Qn.pink]),duration:ln(2,5),delay:ln(0,1)})):[],[e]),c=p.useMemo(()=>e?Array.from({length:6}).map((v,S)=>({top:`${10+Math.random()*70}%`,left:`${10+Math.random()*70}%`,duration:4+S,delay:S*.2})):[],[e]),u=p.useMemo(()=>e?Array.from({length:34}).map(()=>({size:Math.random()>.5?4:8,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,opacity:ln(.2,.7),duration:ln(1,3),delay:ln(0,1)})):[],[e]),d=p.useMemo(()=>e?Array.from({length:16}).map(()=>({height:Math.random()>.7?6:4,top:`${-10-Math.random()*30}%`,left:`${Math.random()*100}%`,opacity:.5,duration:ln(4,10),delay:ln(0,2)})):[],[e]),h=p.useMemo(()=>e?Array.from({length:12}).map(()=>({bottom:`${5+Math.random()*20}px`,left:`${Math.random()*100}%`,opacity:.4,duration:ln(3,6),delay:ln(0,1)})):[],[e]),f=p.useMemo(()=>e?Array.from({length:8}).map(()=>({top:`${Math.random()*90}%`,left:`${Math.random()*90}%`,duration:ln(3,6),delay:ln(0,2)})):[],[e]);if(p.useEffect(()=>{if(e){r(!0),a(!1);const v=setTimeout(()=>a(!0),3e3),S=setTimeout(()=>{r(!1),t()},4e3);return()=>{clearTimeout(v),clearTimeout(S)}}},[e,t]),!n)return null;const m=o.jsxs("div",{"aria-hidden":"true",className:"contents",children:[o.jsx("div",{className:"absolute inset-3 border-4 border-[#7dd3fc]/40 shadow-[0_0_20px_rgba(125,211,252,0.35),inset_0_0_20px_rgba(59,130,246,0.25)] pointer-events-none"}),o.jsxs("div",{className:"absolute inset-3 pointer-events-none",style:{animation:"framePulse 3s ease-in-out infinite"},children:[o.jsx("div",{className:"absolute -top-2 left-0 right-0 h-1",style:{background:`repeating-linear-gradient(90deg, ${Qn.cyan} 0 10px, ${Qn.pink} 10px 16px, ${Qn.sky} 16px 24px, transparent 24px 40px)`,backgroundSize:"64px 100%",animation:"topBarScroll 2.6s steps(8) infinite",boxShadow:`0 0 6px ${Qn.glow}`,willChange:"background-position"}}),o.jsx("div",{className:"absolute -top-2 left-4 h-1 w-12 bg-[#22d3ee]/70 shadow-[0_0_8px_rgba(34,211,238,0.8)]"}),o.jsx("div",{className:"absolute -top-2 right-4 h-1 w-8 bg-[#f472b6]/70 shadow-[0_0_8px_rgba(244,114,182,0.8)]"}),o.jsx("div",{className:"absolute -bottom-2 left-6 h-1 w-10 bg-[#a7f3d0]/60 shadow-[0_0_8px_rgba(167,243,208,0.8)]"}),o.jsx("div",{className:"absolute -bottom-2 right-6 h-1 w-14 bg-[#93c5fd]/60 shadow-[0_0_8px_rgba(147,197,253,0.8)]"})]}),o.jsxs("div",{className:"absolute inset-6 pointer-events-none opacity-60",children:[o.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-2 border-l-2 border-[#7dd3fc]"}),o.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-2 border-r-2 border-[#7dd3fc]"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-2 border-l-2 border-[#7dd3fc]"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-2 border-r-2 border-[#7dd3fc]"})]})]}),x=o.jsxs("div",{"aria-hidden":"true",className:"contents",children:[o.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(0,0,0,0)_0%,rgba(0,0,0,0.35)_60%,rgba(0,0,0,0.7)_100%)] pointer-events-none"}),o.jsx("div",{className:"absolute inset-0 opacity-25 mix-blend-screen pointer-events-none",style:{background:"linear-gradient(90deg, rgba(244,114,182,0.2) 0 50%, transparent 50%), linear-gradient(0deg, rgba(34,211,238,0.2) 0 50%, transparent 50%)",backgroundSize:"16px 16px",animation:"nebulaStep 8s steps(6) infinite"}}),o.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(#4c1d95 1px, transparent 1px), linear-gradient(90deg, #4c1d95 1px, transparent 1px)",backgroundSize:"40px 40px",transform:"perspective(500px) rotateX(20deg) scale(1.5)",animation:"gridPulse 4s ease-in-out infinite"}}),o.jsx("div",{className:"absolute inset-0 opacity-25 mix-blend-screen pointer-events-none",style:{backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,0.03) 0px, rgba(255,255,255,0.03) 1px, transparent 1px, transparent 3px)",animation:"scanlineShift 6s linear infinite"}}),o.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none",style:{background:"linear-gradient(90deg, transparent 0%, rgba(56,189,248,0.2) 48%, rgba(56,189,248,0.45) 50%, rgba(56,189,248,0.2) 52%, transparent 100%)",animation:"beamSweep 5s linear infinite"}})]}),g=o.jsxs("div",{"aria-hidden":"true",className:"contents",children:[o.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 w-44 h-44 opacity-35 pointer-events-none",style:{background:"repeating-linear-gradient(0deg, rgba(244,114,182,0.35) 0 6px, rgba(59,130,246,0.18) 6px 12px)",clipPath:"polygon(40% 0, 60% 0, 72% 10%, 82% 22%, 90% 40%, 90% 60%, 82% 78%, 72% 90%, 60% 100%, 40% 100%, 28% 90%, 18% 78%, 10% 60%, 10% 40%, 18% 22%, 28% 10%)",boxShadow:"0 0 0 4px rgba(244,114,182,0.2), 6px 6px 0 rgba(0,0,0,0.35)",animation:"pixelSunPulse 4s steps(4) infinite"}}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 opacity-35 pointer-events-none",style:{background:"linear-gradient(180deg, rgba(15,23,42,0) 0%, rgba(15,23,42,0.8) 50%, rgba(2,6,23,0.95) 100%)",clipPath:"polygon(0 70%, 10% 55%, 20% 68%, 35% 40%, 45% 60%, 60% 35%, 72% 55%, 85% 42%, 100% 65%, 100% 100%, 0 100%)",animation:"mountainDrift 14s ease-in-out infinite"}}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-20 opacity-55 pointer-events-none",style:{background:"linear-gradient(180deg, rgba(30,41,59,0) 0%, rgba(30,41,59,0.7) 50%, rgba(2,6,23,0.95) 100%)",clipPath:"polygon(0 80%, 12% 60%, 26% 78%, 40% 55%, 55% 72%, 70% 50%, 82% 70%, 100% 58%, 100% 100%, 0 100%)",animation:"mountainDrift 10s ease-in-out infinite reverse"}}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-40 opacity-60 pointer-events-none",style:{background:"linear-gradient(0deg, rgba(34,211,238,0.35), rgba(34,211,238,0))"}})]}),b=o.jsxs("div",{"aria-hidden":"true",className:"contents",children:[i.map((v,S)=>o.jsx("div",{className:"absolute bg-white/80",style:{width:`${v.size}px`,height:`${v.size}px`,top:v.top,left:v.left,opacity:v.opacity,boxShadow:"1px 1px 0 rgba(0,0,0,0.3)",animation:`starTwinkle ${v.duration}s steps(4) ${v.delay}s infinite`}},`star-${S}`)),l.map((v,S)=>o.jsx("div",{className:"absolute",style:{width:`${v.size}px`,height:`${v.size}px`,top:v.top,left:v.left,background:v.color,opacity:.6,boxShadow:"1px 1px 0 rgba(0,0,0,0.35)",animation:`glitchBlock ${v.duration}s steps(2) ${v.delay}s infinite`}},`glitch-${S}`)),c.map((v,S)=>o.jsx("div",{className:"absolute",style:{width:"2px",height:"2px",top:v.top,left:v.left,background:Qn.sky,boxShadow:`6px 0 ${Qn.sky}, 0 6px ${Qn.sky}, 6px 6px ${Qn.sky}`,opacity:.5,animation:`clusterDrift ${v.duration}s steps(4) ${v.delay}s infinite`}},`cluster-${S}`)),u.map((v,S)=>o.jsx("div",{className:"absolute bg-white",style:{width:`${v.size}px`,height:`${v.size}px`,top:v.top,left:v.left,opacity:v.opacity,animation:`pixelFloat ${v.duration}s steps(4) ${v.delay}s infinite`}},`float-${S}`)),d.map((v,S)=>o.jsx("div",{className:"absolute bg-[#c7d2fe]",style:{width:"2px",height:`${v.height}px`,top:v.top,left:v.left,opacity:v.opacity,animation:`pixelFall ${v.duration}s steps(6) ${v.delay}s infinite`}},`fall-${S}`)),f.map((v,S)=>o.jsx("div",{className:"absolute bg-[#a7f3d0]",style:{width:"2px",height:"2px",top:v.top,left:v.left,boxShadow:"0 0 8px rgba(167,243,208,0.8)",animation:`sparklePop ${v.duration}s steps(3) ${v.delay}s infinite`}},`spark-${S}`)),h.map((v,S)=>o.jsx("div",{className:"absolute",style:{width:"2px",height:"2px",bottom:v.bottom,left:v.left,background:Qn.mint,opacity:v.opacity,animation:`dustRise ${v.duration}s steps(3) ${v.delay}s infinite`}},`dust-${S}`))]}),y=o.jsxs("div",{"aria-hidden":"true",className:"contents",children:[o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:o.jsxs("div",{className:"relative w-16 h-16 opacity-40",style:{animation:"hudBlink 2.4s steps(2) infinite"},children:[o.jsx("div",{className:"absolute left-1/2 top-0 -translate-x-1/2 w-[2px] h-4 bg-[#7dd3fc]"}),o.jsx("div",{className:"absolute left-1/2 bottom-0 -translate-x-1/2 w-[2px] h-4 bg-[#7dd3fc]"}),o.jsx("div",{className:"absolute top-1/2 left-0 -translate-y-1/2 h-[2px] w-4 bg-[#7dd3fc]"}),o.jsx("div",{className:"absolute top-1/2 right-0 -translate-y-1/2 h-[2px] w-4 bg-[#7dd3fc]"})]})}),o.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[o.jsx("div",{className:"absolute w-[320px] h-[320px] rounded-full border border-[#93c5fd]/20",style:{animation:"ringSpin 18s linear infinite"}}),o.jsx("div",{className:"absolute w-[240px] h-[240px] rounded-full border border-[#f472b6]/20",style:{animation:"ringSpin 12s linear infinite reverse"}}),o.jsx("div",{className:"absolute w-[320px] h-[320px]",style:{animation:"ringSpin 10s linear infinite"},children:o.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-2 h-2 bg-[#22d3ee] shadow-[1px_1px_0_rgba(0,0,0,0.4)]"})})]}),o.jsx("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 flex flex-col gap-2 pointer-events-none opacity-50",children:Array.from({length:6}).map((v,S)=>o.jsx("div",{className:"w-6 h-[3px] bg-[#7dd3fc]",style:{animation:`hudBlink ${2+S*.2}s steps(2) ${S*.2}s infinite`}},`meter-l-${S}`))}),o.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 flex flex-col gap-2 pointer-events-none opacity-50",children:Array.from({length:6}).map((v,S)=>o.jsx("div",{className:"w-6 h-[3px] bg-[#f472b6]",style:{animation:`hudBlink ${2.2+S*.2}s steps(2) ${S*.2}s infinite`}},`meter-r-${S}`))}),o.jsx("div",{className:"absolute top-8 left-8 text-[10px] text-white/70 pointer-events-none",style:{fontFamily:"'Press Start 2P', 'Courier New', monospace"},children:"SYS: PIXEL"}),o.jsx("div",{className:"absolute top-8 right-8 text-[10px] text-white/70 pointer-events-none",style:{fontFamily:"'Press Start 2P', 'Courier New', monospace"},children:"MODE: DREAM"})]}),w=o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative z-10 text-center space-y-4",style:{animation:"titleFloat 3s ease-in-out infinite"},children:[o.jsxs("div",{className:"relative inline-block",children:[o.jsx("h1",{className:"text-6xl md:text-9xl font-black text-transparent bg-clip-text bg-gradient-to-b from-[#22d3ee] to-[#3b82f6]",style:{fontFamily:"'Press Start 2P', 'Courier New', monospace",filter:"drop-shadow(4px 4px 0 #d946ef)",animation:"glitchText 2s infinite"},children:"PIXEL"}),o.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[#22d3ee] mix-blend-overlay opacity-40",style:{animation:"glitchSlice 1.6s steps(2) infinite"}}),o.jsx("div",{className:"absolute -inset-1 border border-[#22d3ee]/30",style:{animation:"titleBorder 2.4s ease-in-out infinite"}})]}),o.jsx("div",{className:"block"}),o.jsxs("div",{className:"relative inline-block",children:[o.jsx("h1",{className:"text-6xl md:text-9xl font-black text-transparent bg-clip-text bg-gradient-to-b from-[#f472b6] to-[#a855f7]",style:{fontFamily:"'Press Start 2P', 'Courier New', monospace",filter:"drop-shadow(4px 4px 0 #06b6d4)",animation:"glitchText 2s infinite reverse"},children:"TIME"}),o.jsx("div",{className:"absolute inset-0 bg-[#f472b6] mix-blend-screen opacity-20",style:{animation:"glitchSlice 2s steps(2) 0.2s infinite"}}),o.jsx("div",{className:"absolute -inset-1 border border-[#f472b6]/25",style:{animation:"titleBorder 2.8s ease-in-out infinite"}})]})]}),o.jsxs("div",{className:"mt-12 w-72 h-7 border-4 border-white p-1 bg-black/50 relative",style:{animation:"loadingPulse 2.8s steps(2) infinite"},children:[o.jsx("div",{className:"h-full bg-[#5fffd2]",style:{width:"0%",animation:"loadBar 2.8s steps(14) forwards",boxShadow:"0 0 10px #5fffd2"}}),o.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundImage:"repeating-linear-gradient(90deg, rgba(0,0,0,0.25) 0 6px, transparent 6px 12px)"}}),o.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 text-[10px] text-white/70 pointer-events-none",style:{fontFamily:"'Press Start 2P', 'Courier New', monospace",animation:"crtFlicker 2s steps(2) infinite"},children:"LOADING..."})]})]});return sa.createPortal(o.jsxs("div",{className:`fixed inset-0 z-[9999] bg-[#1a0b2e] flex flex-col items-center justify-center transition-opacity duration-1000 ${s?"opacity-0 pointer-events-none":"opacity-100"}`,style:{imageRendering:"pixelated"},children:[m,x,g,b,y,w,o.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 opacity-10 pointer-events-none mix-blend-overlay",style:{backgroundImage:"repeating-linear-gradient(0deg, rgba(255,255,255,0.04) 0 1px, transparent 1px 2px), repeating-linear-gradient(90deg, rgba(255,255,255,0.03) 0 1px, transparent 1px 3px)",animation:"noiseJitter 1.2s steps(2) infinite"}})]}),document.body)}function G6(e){let t=0;for(let n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Math.abs(t)}function K6(e){let t=0;return[...e].sort((r,s)=>r.id.localeCompare(s.id)).forEach(r=>{var l,c;const s=((l=r.entities)==null?void 0:l.length)??0,a=((c=r.environments)==null?void 0:c.length)??0,i=`${r.id}|${r.world}|${r.date}|${r.threatLevel}|${s}|${a}`;t^=G6(i)}),`${t}`}const Fb="pixel-intro-seen";function ru(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}function q6(e){if(e.length===0)return 0;const t=new Set(e.map(s=>ru(new Date(s.date))));let n=0,r=new Date;for(r.setHours(0,0,0,0);t.has(ru(r));)n+=1,r.setDate(r.getDate()-1);if(n===0&&(r=new Date,r.setDate(r.getDate()-1),r.setHours(0,0,0,0),t.has(ru(r))))for(n=1,r.setDate(r.getDate()-1);t.has(ru(r));)n+=1,r.setDate(r.getDate()-1);return n}function Y6({dreams:e=[]}){const t=p.useRef(null),n=p.useRef(),r=rL(),s=p.useRef(e.length),a=p.useRef(null),{recordEncounter:i,getStats:l}=Dk(),c=vc(),{shouldRenderFrame:u}=sL({targetFPS:c?15:60,enableAdaptive:!0,minFPS:15,maxFPS:60}),d=p.useRef([]),h=p.useRef([]),f=p.useRef([]),m=p.useRef([]),x=p.useRef(0),g=p.useRef({x:0,y:0,phase:0}),b=p.useRef(Sd()),y=p.useRef({x:0,y:0}),[w,v]=p.useState(!1),[S,j]=p.useState(null),k=p.useMemo(()=>q6(e),[e]),N=p.useCallback(()=>{v(!1)},[]),E=p.useCallback(async()=>{const{phenomenon:ee,isNewEncounter:ge}=Ea();j(ee),qi(ee),ee.id==="pixelDreamMoon"&&v(!0),ge&&i(ee);const Ne=ee.rarity==="mythic"?" MYTHIC  ":"";dn.success(` ${Ne}${ee.name}`,{description:ee.subtitle,duration:ee.rarity==="mythic"?5e3:3e3}),await new Promise(yt=>setTimeout(yt,800))},[i]),{containerRef:C,pullDistance:T,isRefreshing:M,isPulling:O,progress:$,isReady:R}=F6({onRefresh:E,pullThreshold:100}),{moonFlashesRef:z,sparklesRef:D,initializeParticleEffects:V,drawBackgroundEffects:P,drawAtmosphericEffects:_,drawShatteredEffects:I,drawSpecialEffects:L,drawOrbitingEffects:H,drawWeatherEffects:U,drawVoidEffects:Z,drawEchoMoonsEffect:q,drawFirefliesEffect:ne}=$6(),{overlayType:A,currentMoonPhase:B,handleTouchStart:ae,handleTouchMove:he,handleTouchEnd:fe,handleCanvasClick:ve,handleCloseOverlay:me}=L6({canvasRef:t,phenomenon:S,moonPositionRef:g,parallaxOffsetRef:r,moonFlashesRef:z,sparklesRef:D});return p.useEffect(()=>{const{phenomenon:ee,isNewEncounter:ge}=Ea();j(ee),qi(ee),ee.id==="pixelDreamMoon"&&(sessionStorage.getItem(Fb)||(v(!0),sessionStorage.setItem(Fb,"1"))),ge&&i(ee)},[i]),p.useEffect(()=>{if(!S)return;const ee=t.current;if(!ee)return;const ge=ee.getContext("2d");if(!ge)return;const Ne={width:0,height:0,dpr:1},yt=()=>{const Ae=ee.getBoundingClientRect(),kt=window.devicePixelRatio||1;ee.width=Ae.width*kt,ee.height=Ae.height*kt,ge.setTransform(1,0,0,1,0,0),ge.scale(kt,kt),Ne.width=Ae.width,Ne.height=Ae.height,Ne.dpr=kt,d.current=u6(Ae.width,Ae.height,S,e.length);const dt=l(),an=e.length>0?`${S.id}|${K6(e)}`:`${S.id}|${dt.totalEncounters}|${dt.totalDiscovered}|${dt.mythicCount}`,wr=Math.min(.5,e.length/200);h.current=d6(d.current,an,Math.min(1,S.starDensity+wr)),f.current=v6(Ae.width,Ae.height,S),m.current=k6(Ae.width),g.current={x:Ae.width*.7,y:Ae.height*.25,phase:0},b.current=Sd();const ht=g.current,It=Jl(S);V(S,ht,It,Ae.width,Ae.height)};yt();const Ot=()=>{y.current={x:window.scrollX,y:window.scrollY}};window.addEventListener("scroll",Ot,{passive:!0});const Ln=Ae=>{if(!u(Ae)){n.current=requestAnimationFrame(Ln);return}const kt=Ne.width,dt=Ne.height;ge.clearRect(0,0,kt,dt);const an={ctx:ge,width:kt,height:dt,phenomenon:S,parallaxOffset:c?{x:0,y:0}:r.current};i6({...an,time:Ae}),c||(P(ge,S,kt,dt,y.current),_(ge,S,kt));const wr=Math.min(.8,k/14),ht=1+wr*.5,It=1+wr*.7,Vr=c?300:1600,si=a.current?Math.min(1,(Ae-a.current)/Vr):1;h6({...an,stars:d.current,constellations:h.current,timeMs:Ae,constellationScale:ht,constellationIntensity:It,constellationReveal:si}),c||(q(ge,S,g.current),ne(ge,S,kt,dt));const W=c?.001:.005,Se={...g.current};if(c&&(Se.phase+=W),g.current=A6({...an,moonPosition:c?Se:g.current,moonPhase:b.current}),!c){const X=Jl(S);I(ge,S,g.current),L(ge,S,g.current,X,kt,dt),H(ge,S,g.current)}if(x6({...an,clouds:f.current}),!c){U(ge,S,kt,dt),Z(ge,S,g.current);const X=E6({...an,shootingStars:m.current,timer:x.current});m.current=X.shootingStars,x.current=X.timer}n.current=requestAnimationFrame(Ln)};n.current=requestAnimationFrame(Ln);let bn=null;return typeof ResizeObserver<"u"?(bn=new ResizeObserver(()=>{yt()}),bn.observe(ee)):window.addEventListener("resize",yt),()=>{n.current&&cancelAnimationFrame(n.current),bn==null||bn.disconnect(),window.removeEventListener("resize",yt),window.removeEventListener("scroll",Ot)}},[S,c,u,V,P,_,I,L,H,U,Z,q,ne,r,l,k,e]),p.useEffect(()=>{e.length!==s.current&&(a.current=performance.now(),s.current=e.length)},[e.length]),o.jsxs("div",{ref:C,className:"relative w-full h-[60vh] min-h-[400px] overflow-hidden",style:{transform:`translateY(${M?20:T*.3}px)`,transition:O?"none":"transform 0.3s ease-out"},children:[o.jsx(U6,{pullDistance:T,progress:$,isRefreshing:M,isReady:R,isPulling:O}),o.jsx("canvas",{ref:t,onClick:ve,onTouchStart:ae,onTouchMove:he,onTouchEnd:fe,className:"absolute inset-0 w-full h-full cursor-pointer",style:{width:"100%",height:"100%",touchAction:"pan-y"}}),o.jsx(V6,{phenomenon:S}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-background via-background/50 to-transparent pointer-events-none"}),A&&o.jsx(B6,{type:A,moonPhase:B,phenomenon:S,onClose:me}),o.jsx(H6,{show:w,onComplete:N})]})}function we({className:e,...t}){return o.jsx("div",{className:Y("animate-pulse rounded-md bg-muted",e),...t})}function Ok({compact:e}){return e?o.jsxs("div",{className:"card-minimal flex items-center gap-3",children:[o.jsx(we,{className:"w-10 h-10 rounded-full shrink-0"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx(we,{className:"h-4 w-24"}),o.jsx(we,{className:"h-3 w-32"})]}),o.jsx(we,{className:"h-6 w-6 rounded-full"})]}):o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(we,{className:"h-4 w-20"}),o.jsx(we,{className:"h-5 w-5 rounded-full"})]}),o.jsx(we,{className:"h-4 w-16"})]}),o.jsx(we,{className:"h-5 w-32"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(we,{className:"h-5 w-16 rounded-full"}),o.jsx(we,{className:"h-5 w-20 rounded-full"}),o.jsx(we,{className:"h-5 w-14 rounded-full"})]}),o.jsx(we,{className:"h-12 w-full"})]})}function X6(){return o.jsxs("div",{className:"space-y-8 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(we,{className:"h-8 w-32"}),o.jsx(we,{className:"h-4 w-48"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(we,{className:"h-[120px] w-full rounded-md"}),o.jsx(we,{className:"h-10 w-full rounded-md"})]}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:[...Array(3)].map((e,t)=>o.jsx(we,{className:"h-12 w-full rounded-md"},t))}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(we,{className:"h-5 w-24"}),o.jsx(we,{className:"h-4 w-16"})]}),o.jsx("div",{className:"space-y-2",children:[...Array(3)].map((e,t)=>o.jsx(Ok,{compact:!0},t))})]})]})}function Q6({onRefresh:e,threshold:t=80,resistance:n=2.5}){const r=p.useRef(null),[s,a]=p.useState(0),[i,l]=p.useState(!1),[c,u]=p.useState(!1),d=p.useRef(0),h=p.useRef(0),f=p.useCallback(g=>{i||(d.current=g.touches[0].clientY)},[i]),m=p.useCallback(g=>{if(i)return;const b=r.current;if(!b)return;h.current=g.touches[0].clientY;const y=h.current-d.current,w=b.scrollTop<=0,v=y>0;if(w&&v){const S=y/n;S>5&&(g.preventDefault(),u(!0),a(S))}else c&&!v&&(u(!1),a(0))},[i,n,c]),x=p.useCallback(async()=>{if(!(!c||i)){if(u(!1),s>=t){l(!0),a(t);try{await e()}catch(g){console.error("Refresh failed:",g)}finally{l(!1),a(0)}}else a(0);d.current=0,h.current=0}},[c,i,s,t,e]);return p.useEffect(()=>{const g=r.current;if(g)return g.addEventListener("touchstart",f,{passive:!0}),g.addEventListener("touchmove",m,{passive:!1}),g.addEventListener("touchend",x,{passive:!0}),()=>{g.removeEventListener("touchstart",f),g.removeEventListener("touchmove",m),g.removeEventListener("touchend",x)}},[f,m,x]),{containerRef:r,pullDistance:s,isRefreshing:i,isPulling:c}}function Ik({children:e,onRefresh:t,className:n}){const{containerRef:r,pullDistance:s,isRefreshing:a,isPulling:i}=Q6({onRefresh:t,threshold:80}),l=Math.min(s/80,1),c=s>10||a;return o.jsxs("div",{ref:r,className:Y("relative",n),style:{overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain"},children:[o.jsx("div",{className:Y("absolute left-0 right-0 flex justify-center transition-all duration-200 z-10",c?"opacity-100":"opacity-0"),style:{top:-40+s,transform:`translateY(${Math.min(s,60)}px)`},children:o.jsx("div",{className:Y("flex items-center justify-center w-10 h-10 rounded-full","bg-primary/10 backdrop-blur-sm border border-primary/20","shadow-lg"),children:a?o.jsx(oh,{className:"w-5 h-5 text-primary animate-spin"}):o.jsx(KR,{className:Y("w-5 h-5 text-primary transition-transform duration-200",l>=1&&"rotate-180"),style:{transform:`rotate(${l*180}deg)`,opacity:l}})})}),o.jsx("div",{style:{transform:`translateY(${a?60:s*.5}px)`,transition:i?"none":"transform 0.2s ease-out"},children:e})]})}const Lp=(e,t)=>t.some(n=>e instanceof n);let zb,Bb;function J6(){return zb||(zb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z6(){return Bb||(Bb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fp=new WeakMap,zf=new WeakMap,wh=new WeakMap;function eF(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",a),e.removeEventListener("error",i)},a=()=>{n(kd(e.result)),s()},i=()=>{r(e.error),s()};e.addEventListener("success",a),e.addEventListener("error",i)});return wh.set(t,e),t}function tF(e){if(Fp.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=()=>{n(),s()},i=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)});Fp.set(e,t)}let zp={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Fp.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kd(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function $k(e){zp=e(zp)}function nF(e){return Z6().includes(e)?function(...t){return e.apply(Bp(this),t),kd(this.request)}:function(...t){return kd(e.apply(Bp(this),t))}}function rF(e){return typeof e=="function"?nF(e):(e instanceof IDBTransaction&&tF(e),Lp(e,J6())?new Proxy(e,zp):e)}function kd(e){if(e instanceof IDBRequest)return eF(e);if(zf.has(e))return zf.get(e);const t=rF(e);return t!==e&&(zf.set(e,t),wh.set(t,e)),t}const Bp=e=>wh.get(e),sF=["get","getKey","getAll","getAllKeys","count"],aF=["put","add","delete","clear"],Bf=new Map;function Vb(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Bf.get(t))return Bf.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=aF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||sF.includes(n)))return;const a=async function(i,...l){const c=this.transaction(i,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Bf.set(t,a),a}$k(e=>({...e,get:(t,n,r)=>Vb(t,n)||e.get(t,n,r),has:(t,n)=>!!Vb(t,n)||e.has(t,n)}));const iF=["continue","continuePrimaryKey","advance"],Ub={},Vp=new WeakMap,Lk=new WeakMap,oF={get(e,t){if(!iF.includes(t))return e[t];let n=Ub[t];return n||(n=Ub[t]=function(...r){Vp.set(this,Lk.get(this)[t](...r))}),n}};async function*lF(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,oF);for(Lk.set(n,t),wh.set(n,Bp(t));t;)yield n,t=await(Vp.get(n)||t.continue()),Vp.delete(n)}function Wb(e,t){return t===Symbol.asyncIterator&&Lp(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&Lp(e,[IDBIndex,IDBObjectStore])}$k(e=>({...e,get(t,n,r){return Wb(t,n)?lF:e.get(t,n,r)},has(t,n){return Wb(t,n)||e.has(t,n)}}));function cF(){return navigator.onLine}function uF(e){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t),window.addEventListener("offline",n),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}function dF(){const[e,t]=p.useState(cF());return p.useEffect(()=>uF(t),[]),e}function Fk(){const e=dF(),[t,n]=p.useState(!1),[r,s]=p.useState(!1);return p.useEffect(()=>{if(!e)s(!0);else if(r){n(!0);const a=setTimeout(()=>{n(!1),s(!1)},3e3);return()=>clearTimeout(a)}},[e,r]),e&&!t?null:o.jsx("div",{className:Y("fixed top-16 left-1/2 -translate-x-1/2 z-50","flex items-center gap-2 px-4 py-2 rounded-full","text-sm font-medium shadow-lg","animate-in slide-in-from-top duration-300",e?"bg-green-500/90 text-white":"bg-yellow-500/90 text-yellow-950"),children:e?o.jsxs(o.Fragment,{children:[o.jsx(yA,{className:"w-4 h-4"}),o.jsx("span",{children:""})]}):o.jsxs(o.Fragment,{children:[o.jsx(gA,{className:"w-4 h-4"}),o.jsx("span",{children:""})]})})}function Yi({children:e,delay:t=0,duration:n=400,className:r=""}){const[s,a]=p.useState(!1);return p.useEffect(()=>{const i=setTimeout(()=>{a(!0)},t);return()=>clearTimeout(i)},[t]),o.jsx("div",{className:`transition-all ${r}`,style:{opacity:s?1:0,transform:s?"translateY(0)":"translateY(20px)",transitionDuration:`${n}ms`,transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e})}function hF(){return o.jsx(Yi,{delay:0,duration:500,children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("h1",{className:"text-2xl",children:""}),o.jsx("p",{className:"text-muted-foreground",children:""})]})})}const fF=fc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ce=p.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},a)=>{const i=r?tR:"button";return o.jsx(i,{className:Y(fF({variant:t,size:n,className:e})),ref:a,...s})});ce.displayName="Button";const Qs=p.forwardRef(({className:e,...t},n)=>o.jsx("textarea",{className:Y("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Qs.displayName="Textarea";const Tt=p.forwardRef(({className:e,type:t,...n},r)=>o.jsx("input",{type:t,className:Y("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Tt.displayName="Input";const mF=fc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ie({className:e,variant:t,...n}){return o.jsx("div",{className:Y(mF({variant:t}),e),...n})}function pF({suggestions:e,editing:t,analyzing:n,onToggleEdit:r,onConfirm:s,onCancel:a,onUpdate:i}){var l,c;return o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fr,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"AI "})]}),o.jsx(ce,{variant:"ghost",size:"sm",onClick:r,children:t?o.jsx(dd,{className:"w-4 h-4"}):o.jsx(Sg,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:": "}),t?o.jsx(Tt,{value:e.world,onChange:u=>i("world",u.target.value),className:"mt-1 h-8"}):o.jsx(Ie,{variant:"secondary",children:e.world})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:": "}),o.jsxs(Ie,{variant:e.threatLevel>=3?"destructive":"secondary",children:["Level ",e.threatLevel]})]}),((l=e.entities)==null?void 0:l.length)>0&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Entities: "}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.entities.map((u,d)=>o.jsx(Ie,{variant:"outline",children:u},d))})]}),((c=e.environments)==null?void 0:c.length)>0&&o.jsxs("div",{children:[o.jsx("span",{className:"text-muted-foreground",children:"Environments: "}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.environments.map((u,d)=>o.jsx(Ie,{variant:"outline",children:u},d))})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ce,{onClick:s,disabled:n,className:"flex-1 gap-2",children:n?o.jsxs(o.Fragment,{children:[o.jsx(pl,{className:"w-4 h-4 animate-spin"}),"..."]}):o.jsxs(o.Fragment,{children:[o.jsx(dd,{className:"w-4 h-4"}),""]})}),o.jsx(ce,{variant:"outline",onClick:a,children:o.jsx(aa,{className:"w-4 h-4"})})]})]})}function gF({existingWorlds:e,existingEntities:t,onDreamSaved:n}){const[r,s]=p.useState(""),[a,i]=p.useState(!1),[l,c]=p.useState(null),[u,d]=p.useState(!1),[h,f]=p.useState(!1),m=async()=>{if(!r.trim()){dn.error("");return}i(!0);try{const y=await $$(r,e,t,["fog","sea","mountain","city","tunnel","rain","night","sunset","forest","building"]);c(y),d(!0),dn.success("! ")}catch(y){console.error("Error analyzing:",y),dn.error("")}finally{i(!1)}},x=async()=>{if(l){i(!0);try{const y=new Date;if(await yk({date:y.toISOString().split("T")[0],wakeTime:y.toTimeString().slice(0,5),world:l.world||"Unknown",timeSystem:l.timeSystem||"unknown",environments:l.environments||[],entities:l.entities||[],threatLevel:l.threatLevel||0,safetyOverride:l.safetyOverride||"unknown",exit:l.exit||"unknown",notes:r})){dn.success("! ",{description:`: ${l.world} | Threat: ${l.threatLevel}`}),s(""),c(null),d(!1),f(!1);const v=await ni();n(v.slice(0,5))}else dn.error("")}catch(y){console.error("Error saving:",y),dn.error("")}finally{i(!1)}}},g=()=>{d(!1),c(null),f(!1)},b=(y,w)=>{c(v=>v?{...v,[y]:w}:null)};return o.jsx(Yi,{delay:100,duration:450,children:o.jsxs("div",{className:"space-y-3",children:[o.jsx(Qs,{placeholder:"... ",value:r,onChange:y=>s(y.target.value),className:"min-h-[120px] resize-none",disabled:u}),u&&l&&o.jsx(pF,{suggestions:l,editing:h,analyzing:a,onToggleEdit:()=>f(!h),onConfirm:x,onCancel:g,onUpdate:b}),!u&&o.jsx(ce,{onClick:m,disabled:a||!r.trim(),className:"w-full gap-2",children:a?o.jsxs(o.Fragment,{children:[o.jsx(pl,{className:"w-4 h-4 animate-spin"}),"..."]}):o.jsxs(o.Fragment,{children:[o.jsx(fr,{className:"w-4 h-4"}),""]})})]})})}function yF(){const e=[{to:"/logs/new",icon:jg,label:" ()"},{to:"/library",icon:bg,label:""},{to:"/logs",icon:wg,label:""}];return o.jsx("div",{className:"grid grid-cols-1 gap-3",children:e.map((t,n)=>o.jsx(Yi,{delay:200+n*80,duration:400,children:o.jsx(ce,{asChild:!0,variant:"outline",className:"w-full justify-start gap-2 h-12",children:o.jsxs(nn,{to:t.to,children:[o.jsx(t.icon,{className:"w-5 h-5"}),o.jsx("span",{className:"flex-1 text-left",children:t.label})]})})},t.to))})}const Hb={0:{border:"border-l-4 border-l-muted-foreground/30",bg:"bg-card",badge:"bg-muted text-muted-foreground"},1:{border:"border-l-4 border-l-emerald-500",bg:"bg-gradient-to-r from-emerald-500/5 to-transparent",badge:"bg-emerald-500/20 text-emerald-700 dark:text-emerald-400"},2:{border:"border-l-4 border-l-yellow-500",bg:"bg-gradient-to-r from-yellow-500/5 to-transparent",badge:"bg-yellow-500/20 text-yellow-700 dark:text-yellow-400"},3:{border:"border-l-4 border-l-orange-500",bg:"bg-gradient-to-r from-orange-500/8 to-transparent",badge:"bg-orange-500/20 text-orange-700 dark:text-orange-400"},4:{border:"border-l-4 border-l-red-500",bg:"bg-gradient-to-r from-red-500/10 to-transparent",badge:"bg-red-500/20 text-red-700 dark:text-red-400"},5:{border:"border-l-4 border-l-rose-600",bg:"bg-gradient-to-r from-rose-600/15 to-transparent",badge:"bg-rose-600/25 text-rose-700 dark:text-rose-400 font-semibold"}},vF={0:"",1:"",2:"",3:"",4:"",5:""};function zk({dream:e,compact:t,showEdit:n=!1}){const r=new Date(e.date).toLocaleDateString("th-TH",{day:"numeric",month:"short",year:"numeric"}),s=Hb[e.threatLevel]||Hb[0];return o.jsxs("div",{className:"relative group",children:[o.jsxs(nn,{to:`/logs/${e.id}`,className:Y("block rounded-lg p-4 transition-all duration-200","border border-border hover:border-primary/30","hover:shadow-md hover:-translate-y-0.5",s.border,s.bg),children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:e.id}),o.jsxs("span",{className:Y("inline-flex items-center justify-center gap-1 px-2 py-0.5 text-xs rounded-full",s.badge),children:[o.jsx("span",{className:"text-[10px]",children:vF[e.threatLevel]}),e.threatLevel]})]}),o.jsx("p",{className:"font-medium truncate",children:e.world}),!t&&e.notes&&o.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2",children:e.notes})]}),o.jsxs("div",{className:"text-right shrink-0",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:r}),o.jsx("p",{className:"text-xs text-muted-foreground",children:e.wakeTime})]})]}),!t&&e.environments.length>0&&o.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.environments.slice(0,4).map(a=>o.jsx("span",{className:"tag",children:a},a)),e.environments.length>4&&o.jsxs("span",{className:"tag",children:["+",e.environments.length-4]})]})]}),n&&o.jsx(nn,{to:`/logs/${e.id}`,className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:a=>a.stopPropagation(),children:o.jsx(ce,{size:"icon",variant:"ghost",className:"h-7 w-7 bg-background/80 backdrop-blur-sm hover:bg-background",children:o.jsx(Sg,{className:"w-3 h-3"})})})]})}function xF({dreams:e}){return e.length===0?o.jsx(Yi,{delay:500,duration:400,children:o.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[o.jsx("p",{children:""}),o.jsx(ce,{asChild:!0,variant:"link",className:"mt-2",children:o.jsx(nn,{to:"/logs/new",children:""})})]})}):o.jsxs("div",{className:"space-y-3",children:[o.jsx(Yi,{delay:450,duration:400,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-lg font-medium",children:""}),o.jsx(nn,{to:"/logs",className:"text-sm text-primary hover:underline",children:""})]})}),o.jsx("div",{className:"space-y-2",children:e.map((t,n)=>o.jsx(Yi,{delay:500+n*80,duration:400,children:o.jsx(zk,{dream:t,compact:!0})},t.id))})]})}function bF(){const[e,t]=p.useState([]),[n,r]=p.useState([]),[s,a]=p.useState(!0),[i,l]=p.useState([]),[c,u]=p.useState([]),d=p.useCallback(async()=>{try{const[f,m,x]=await Promise.all([ni(),bc(),bh()]);t(f),r(f.slice(0,5)),l(m.map(g=>g.name)),u(x.map(g=>g.name))}catch(f){console.error("Error loading data:",f)}finally{a(!1)}},[]);p.useEffect(()=>{d()},[d]);const h=p.useCallback(async()=>{await d(),dn.success("")},[d]);return o.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[o.jsx(Fk,{}),o.jsx(Y6,{dreams:e}),o.jsx(Ik,{onRefresh:h,className:"flex-1",children:o.jsxs("div",{className:"space-y-8 py-4 pb-28 container-app",children:[o.jsx(hF,{}),o.jsx(gF,{existingWorlds:i,existingEntities:c,onDreamSaved:r}),o.jsx(yF,{}),s?o.jsx(X6,{}):o.jsx(xF,{dreams:n})]})}),o.jsx(yh,{})]})}function Up(e,[t,n]){return Math.min(n,Math.max(t,e))}var wF=p.createContext(void 0);function wc(e){const t=p.useContext(wF);return e||t||"ltr"}var Vf=0;function Bk(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Gb()),document.body.insertAdjacentElement("beforeend",e[1]??Gb()),Vf++,()=>{Vf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Vf--}},[])}function Gb(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Uf="focusScope.autoFocusOnMount",Wf="focusScope.autoFocusOnUnmount",Kb={bubbles:!1,cancelable:!0},SF="FocusScope",qg=p.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[l,c]=p.useState(null),u=wt(s),d=wt(a),h=p.useRef(null),f=je(t,g=>c(g)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let g=function(v){if(m.paused||!l)return;const S=v.target;l.contains(S)?h.current=S:ys(h.current,{select:!0})},b=function(v){if(m.paused||!l)return;const S=v.relatedTarget;S!==null&&(l.contains(S)||ys(h.current,{select:!0}))},y=function(v){if(document.activeElement===document.body)for(const j of v)j.removedNodes.length>0&&ys(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const w=new MutationObserver(y);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),w.disconnect()}}},[r,l,m.paused]),p.useEffect(()=>{if(l){Yb.add(m);const g=document.activeElement;if(!l.contains(g)){const y=new CustomEvent(Uf,Kb);l.addEventListener(Uf,u),l.dispatchEvent(y),y.defaultPrevented||(jF(TF(Vk(l)),{select:!0}),document.activeElement===g&&ys(l))}return()=>{l.removeEventListener(Uf,u),setTimeout(()=>{const y=new CustomEvent(Wf,Kb);l.addEventListener(Wf,d),l.dispatchEvent(y),y.defaultPrevented||ys(g??document.body,{select:!0}),l.removeEventListener(Wf,d),Yb.remove(m)},0)}}},[l,u,d,m]);const x=p.useCallback(g=>{if(!n&&!r||m.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(b&&y){const w=g.currentTarget,[v,S]=kF(w);v&&S?!g.shiftKey&&y===S?(g.preventDefault(),n&&ys(v,{select:!0})):g.shiftKey&&y===v&&(g.preventDefault(),n&&ys(S,{select:!0})):y===w&&g.preventDefault()}},[n,r,m.paused]);return o.jsx(se.div,{tabIndex:-1,...i,ref:f,onKeyDown:x})});qg.displayName=SF;function jF(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ys(r,{select:t}),document.activeElement!==n)return}function kF(e){const t=Vk(e),n=qb(t,e),r=qb(t.reverse(),e);return[n,r]}function Vk(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function qb(e,t){for(const n of e)if(!CF(n,{upTo:t}))return n}function CF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function NF(e){return e instanceof HTMLInputElement&&"select"in e}function ys(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&NF(e)&&t&&e.select()}}var Yb=EF();function EF(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Xb(e,t),e.unshift(t)},remove(t){var n;e=Xb(e,t),(n=e[0])==null||n.resume()}}}function Xb(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function TF(e){return e.filter(t=>t.tagName!=="A")}function Yg(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var MF=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},hi=new WeakMap,su=new WeakMap,au={},Hf=0,Uk=function(e){return e&&(e.host||Uk(e.parentNode))},PF=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Uk(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},_F=function(e,t,n,r){var s=PF(t,Array.isArray(e)?e:[e]);au[n]||(au[n]=new WeakMap);var a=au[n],i=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var m=f.getAttribute(r),x=m!==null&&m!=="false",g=(hi.get(f)||0)+1,b=(a.get(f)||0)+1;hi.set(f,g),a.set(f,b),i.push(f),g===1&&x&&su.set(f,!0),b===1&&f.setAttribute(n,"true"),x||f.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",f,y)}})};return d(t),l.clear(),Hf++,function(){i.forEach(function(h){var f=hi.get(h)-1,m=a.get(h)-1;hi.set(h,f),a.set(h,m),f||(su.has(h)||h.removeAttribute(r),su.delete(h)),m||h.removeAttribute(n)}),Hf--,Hf||(hi=new WeakMap,hi=new WeakMap,su=new WeakMap,au={})}},Wk=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=MF(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),_F(r,s,n,"aria-hidden")):function(){return null}},Ou="right-scroll-bar-position",Iu="width-before-scroll-bar",RF="with-scroll-bars-hidden",AF="--removed-body-scroll-bar-size";function Gf(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function DF(e,t){var n=p.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var OF=typeof window<"u"?p.useLayoutEffect:p.useEffect,Qb=new WeakMap;function IF(e,t){var n=DF(null,function(r){return e.forEach(function(s){return Gf(s,r)})});return OF(function(){var r=Qb.get(n);if(r){var s=new Set(r),a=new Set(e),i=n.current;s.forEach(function(l){a.has(l)||Gf(l,null)}),a.forEach(function(l){s.has(l)||Gf(l,i)})}Qb.set(n,e)},[e]),n}function $F(e){return e}function LF(e,t){t===void 0&&(t=$F);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(a),i=n}var c=function(){var d=i;i=[],d.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){i.push(d),u()},filter:function(d){return i=i.filter(d),n}}}};return s}function FF(e){e===void 0&&(e={});var t=LF(null);return t.options=Tr({async:!0,ssr:!1},e),t}var Hk=function(e){var t=e.sideCar,n=Mo(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,Tr({},n))};Hk.isSideCarExport=!0;function zF(e,t){return e.useMedium(t),Hk}var Gk=FF(),Kf=function(){},Sh=p.forwardRef(function(e,t){var n=p.useRef(null),r=p.useState({onScrollCapture:Kf,onWheelCapture:Kf,onTouchMoveCapture:Kf}),s=r[0],a=r[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,m=e.noRelative,x=e.noIsolation,g=e.inert,b=e.allowPinchZoom,y=e.as,w=y===void 0?"div":y,v=e.gapMode,S=Mo(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=f,k=IF([n,t]),N=Tr(Tr({},S),s);return p.createElement(p.Fragment,null,d&&p.createElement(j,{sideCar:Gk,removeScrollBar:u,shards:h,noRelative:m,noIsolation:x,inert:g,setCallbacks:a,allowPinchZoom:!!b,lockRef:n,gapMode:v}),i?p.cloneElement(p.Children.only(l),Tr(Tr({},N),{ref:k})):p.createElement(w,Tr({},N,{className:c,ref:k}),l))});Sh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Sh.classNames={fullWidth:Iu,zeroRight:Ou};var BF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function VF(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=BF();return t&&e.setAttribute("nonce",t),e}function UF(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function WF(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var HF=function(){var e=0,t=null;return{add:function(n){e==0&&(t=VF())&&(UF(t,n),WF(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},GF=function(){var e=HF();return function(t,n){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Kk=function(){var e=GF(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},KF={left:0,top:0,right:0,gap:0},qf=function(e){return parseInt(e||"",10)||0},qF=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[qf(n),qf(r),qf(s)]},YF=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return KF;var t=qF(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},XF=Kk(),Xi="data-scroll-locked",QF=function(e,t,n,r){var s=e.left,a=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(RF,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Xi,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ou,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Iu,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ou," .").concat(Ou,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Iu," .").concat(Iu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Xi,`] {
    `).concat(AF,": ").concat(l,`px;
  }
`)},Jb=function(){var e=parseInt(document.body.getAttribute(Xi)||"0",10);return isFinite(e)?e:0},JF=function(){p.useEffect(function(){return document.body.setAttribute(Xi,(Jb()+1).toString()),function(){var e=Jb()-1;e<=0?document.body.removeAttribute(Xi):document.body.setAttribute(Xi,e.toString())}},[])},ZF=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;JF();var a=p.useMemo(function(){return YF(s)},[s]);return p.createElement(XF,{styles:QF(a,!t,s,n?"":"!important")})},Wp=!1;if(typeof window<"u")try{var iu=Object.defineProperty({},"passive",{get:function(){return Wp=!0,!0}});window.addEventListener("test",iu,iu),window.removeEventListener("test",iu,iu)}catch{Wp=!1}var fi=Wp?{passive:!1}:!1,ez=function(e){return e.tagName==="TEXTAREA"},qk=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!ez(e)&&n[t]==="visible")},tz=function(e){return qk(e,"overflowY")},nz=function(e){return qk(e,"overflowX")},Zb=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Yk(e,r);if(s){var a=Xk(e,r),i=a[1],l=a[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},rz=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},sz=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Yk=function(e,t){return e==="v"?tz(t):nz(t)},Xk=function(e,t){return e==="v"?rz(t):sz(t)},az=function(e,t){return e==="h"&&t==="rtl"?-1:1},iz=function(e,t,n,r,s){var a=az(e,window.getComputedStyle(t).direction),i=a*r,l=n.target,c=t.contains(l),u=!1,d=i>0,h=0,f=0;do{if(!l)break;var m=Xk(e,l),x=m[0],g=m[1],b=m[2],y=g-b-a*x;(x||y)&&Yk(e,l)&&(h+=y,f+=x);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(h)<1||!d&&Math.abs(f)<1)&&(u=!0),u},ou=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ew=function(e){return[e.deltaX,e.deltaY]},tw=function(e){return e&&"current"in e?e.current:e},oz=function(e,t){return e[0]===t[0]&&e[1]===t[1]},lz=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},cz=0,mi=[];function uz(e){var t=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(cz++)[0],a=p.useState(Kk)[0],i=p.useRef(e);p.useEffect(function(){i.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var g=ZO([e.lockRef.current],(e.shards||[]).map(tw),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!i.current.allowPinchZoom;var y=ou(g),w=n.current,v="deltaX"in g?g.deltaX:w[0]-y[0],S="deltaY"in g?g.deltaY:w[1]-y[1],j,k=g.target,N=Math.abs(v)>Math.abs(S)?"h":"v";if("touches"in g&&N==="h"&&k.type==="range")return!1;var E=Zb(N,k);if(!E)return!0;if(E?j=N:(j=N==="v"?"h":"v",E=Zb(N,k)),!E)return!1;if(!r.current&&"changedTouches"in g&&(v||S)&&(r.current=j),!j)return!0;var C=r.current||j;return iz(C,b,g,C==="h"?v:S)},[]),c=p.useCallback(function(g){var b=g;if(!(!mi.length||mi[mi.length-1]!==a)){var y="deltaY"in b?ew(b):ou(b),w=t.current.filter(function(j){return j.name===b.type&&(j.target===b.target||b.target===j.shadowParent)&&oz(j.delta,y)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var v=(i.current.shards||[]).map(tw).filter(Boolean).filter(function(j){return j.contains(b.target)}),S=v.length>0?l(b,v[0]):!i.current.noIsolation;S&&b.cancelable&&b.preventDefault()}}},[]),u=p.useCallback(function(g,b,y,w){var v={name:g,delta:b,target:y,should:w,shadowParent:dz(y)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(S){return S!==v})},1)},[]),d=p.useCallback(function(g){n.current=ou(g),r.current=void 0},[]),h=p.useCallback(function(g){u(g.type,ew(g),g.target,l(g,e.lockRef.current))},[]),f=p.useCallback(function(g){u(g.type,ou(g),g.target,l(g,e.lockRef.current))},[]);p.useEffect(function(){return mi.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,fi),document.addEventListener("touchmove",c,fi),document.addEventListener("touchstart",d,fi),function(){mi=mi.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,fi),document.removeEventListener("touchmove",c,fi),document.removeEventListener("touchstart",d,fi)}},[]);var m=e.removeScrollBar,x=e.inert;return p.createElement(p.Fragment,null,x?p.createElement(a,{styles:lz(s)}):null,m?p.createElement(ZF,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function dz(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const hz=zF(Gk,uz);var Xg=p.forwardRef(function(e,t){return p.createElement(Sh,Tr({},e,{ref:t,sideCar:hz}))});Xg.classNames=Sh.classNames;var fz=[" ","Enter","ArrowUp","ArrowDown"],mz=[" ","Enter"],Ya="Select",[jh,kh,pz]=rh(Ya),[Po]=xn(Ya,[pz,dh]),Ch=dh(),[gz,oa]=Po(Ya),[yz,vz]=Po(Ya),Qk=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:a,value:i,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:x}=e,g=Ch(t),[b,y]=p.useState(null),[w,v]=p.useState(null),[S,j]=p.useState(!1),k=wc(u),[N,E]=pr({prop:r,defaultProp:s??!1,onChange:a,caller:Ya}),[C,T]=pr({prop:i,defaultProp:l,onChange:c,caller:Ya}),M=p.useRef(null),O=b?x||!!b.closest("form"):!0,[$,R]=p.useState(new Set),z=Array.from($).map(D=>D.props.value).join(";");return o.jsx(J4,{...g,children:o.jsxs(gz,{required:m,scope:t,trigger:b,onTriggerChange:y,valueNode:w,onValueNodeChange:v,valueNodeHasChildren:S,onValueNodeHasChildrenChange:j,contentId:Or(),value:C,onValueChange:T,open:N,onOpenChange:E,dir:k,triggerPointerDownPosRef:M,disabled:f,children:[o.jsx(jh.Provider,{scope:t,children:o.jsx(yz,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(D=>{R(V=>new Set(V).add(D))},[]),onNativeOptionRemove:p.useCallback(D=>{R(V=>{const P=new Set(V);return P.delete(D),P})},[]),children:n})}),O?o.jsxs(wC,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:C,onChange:D=>T(D.target.value),disabled:f,form:x,children:[C===void 0?o.jsx("option",{value:""}):null,Array.from($)]},z):null]})})};Qk.displayName=Ya;var Jk="SelectTrigger",Zk=p.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,a=Ch(n),i=oa(Jk,n),l=i.disabled||r,c=je(t,i.onTriggerChange),u=kh(n),d=p.useRef("touch"),[h,f,m]=jC(g=>{const b=u().filter(v=>!v.disabled),y=b.find(v=>v.value===i.value),w=kC(b,g,y);w!==void 0&&i.onValueChange(w.value)}),x=g=>{l||(i.onOpenChange(!0),m()),g&&(i.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return o.jsx(kj,{asChild:!0,...a,children:o.jsx(se.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":SC(i.value)?"":void 0,...s,ref:c,onClick:te(s.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&x(g)}),onPointerDown:te(s.onPointerDown,g=>{d.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(x(g),g.preventDefault())}),onKeyDown:te(s.onKeyDown,g=>{const b=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(b&&g.key===" ")&&fz.includes(g.key)&&(x(),g.preventDefault())})})})});Zk.displayName=Jk;var eC="SelectValue",tC=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:i="",...l}=e,c=oa(eC,n),{onValueNodeHasChildrenChange:u}=c,d=a!==void 0,h=je(t,c.onValueNodeChange);return jt(()=>{u(d)},[u,d]),o.jsx(se.span,{...l,ref:h,style:{pointerEvents:"none"},children:SC(c.value)?o.jsx(o.Fragment,{children:i}):a})});tC.displayName=eC;var xz="SelectIcon",nC=p.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return o.jsx(se.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});nC.displayName=xz;var bz="SelectPortal",rC=e=>o.jsx(sh,{asChild:!0,...e});rC.displayName=bz;var Xa="SelectContent",sC=p.forwardRef((e,t)=>{const n=oa(Xa,e.__scopeSelect),[r,s]=p.useState();if(jt(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?sa.createPortal(o.jsx(aC,{scope:e.__scopeSelect,children:o.jsx(jh.Slot,{scope:e.__scopeSelect,children:o.jsx("div",{children:e.children})})}),a):null}return o.jsx(iC,{...e,ref:t})});sC.displayName=Xa;var er=10,[aC,la]=Po(Xa),wz="SelectContentImpl",Sz=mo("SelectContent.RemoveScroll"),iC=p.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:x,hideWhenDetached:g,avoidCollisions:b,...y}=e,w=oa(Xa,n),[v,S]=p.useState(null),[j,k]=p.useState(null),N=je(t,A=>S(A)),[E,C]=p.useState(null),[T,M]=p.useState(null),O=kh(n),[$,R]=p.useState(!1),z=p.useRef(!1);p.useEffect(()=>{if(v)return Wk(v)},[v]),Bk();const D=p.useCallback(A=>{const[B,...ae]=O().map(ve=>ve.ref.current),[he]=ae.slice(-1),fe=document.activeElement;for(const ve of A)if(ve===fe||(ve==null||ve.scrollIntoView({block:"nearest"}),ve===B&&j&&(j.scrollTop=0),ve===he&&j&&(j.scrollTop=j.scrollHeight),ve==null||ve.focus(),document.activeElement!==fe))return},[O,j]),V=p.useCallback(()=>D([E,v]),[D,E,v]);p.useEffect(()=>{$&&V()},[$,V]);const{onOpenChange:P,triggerPointerDownPosRef:_}=w;p.useEffect(()=>{if(v){let A={x:0,y:0};const B=he=>{var fe,ve;A={x:Math.abs(Math.round(he.pageX)-(((fe=_.current)==null?void 0:fe.x)??0)),y:Math.abs(Math.round(he.pageY)-(((ve=_.current)==null?void 0:ve.y)??0))}},ae=he=>{A.x<=10&&A.y<=10?he.preventDefault():v.contains(he.target)||P(!1),document.removeEventListener("pointermove",B),_.current=null};return _.current!==null&&(document.addEventListener("pointermove",B),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",ae,{capture:!0})}}},[v,P,_]),p.useEffect(()=>{const A=()=>P(!1);return window.addEventListener("blur",A),window.addEventListener("resize",A),()=>{window.removeEventListener("blur",A),window.removeEventListener("resize",A)}},[P]);const[I,L]=jC(A=>{const B=O().filter(fe=>!fe.disabled),ae=B.find(fe=>fe.ref.current===document.activeElement),he=kC(B,A,ae);he&&setTimeout(()=>he.ref.current.focus())}),H=p.useCallback((A,B,ae)=>{const he=!z.current&&!ae;(w.value!==void 0&&w.value===B||he)&&(C(A),he&&(z.current=!0))},[w.value]),U=p.useCallback(()=>v==null?void 0:v.focus(),[v]),Z=p.useCallback((A,B,ae)=>{const he=!z.current&&!ae;(w.value!==void 0&&w.value===B||he)&&M(A)},[w.value]),q=r==="popper"?Hp:oC,ne=q===Hp?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:x,hideWhenDetached:g,avoidCollisions:b}:{};return o.jsx(aC,{scope:n,content:v,viewport:j,onViewportChange:k,itemRefCallback:H,selectedItem:E,onItemLeave:U,itemTextRefCallback:Z,focusSelectedItem:V,selectedItemText:T,position:r,isPositioned:$,searchRef:I,children:o.jsx(Xg,{as:Sz,allowPinchZoom:!0,children:o.jsx(qg,{asChild:!0,trapped:w.open,onMountAutoFocus:A=>{A.preventDefault()},onUnmountAutoFocus:te(s,A=>{var B;(B=w.trigger)==null||B.focus({preventScroll:!0}),A.preventDefault()}),children:o.jsx(dc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:A=>A.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(q,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:A=>A.preventDefault(),...y,...ne,onPlaced:()=>R(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:te(y.onKeyDown,A=>{const B=A.ctrlKey||A.altKey||A.metaKey;if(A.key==="Tab"&&A.preventDefault(),!B&&A.key.length===1&&L(A.key),["ArrowUp","ArrowDown","Home","End"].includes(A.key)){let he=O().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(A.key)&&(he=he.slice().reverse()),["ArrowUp","ArrowDown"].includes(A.key)){const fe=A.target,ve=he.indexOf(fe);he=he.slice(ve+1)}setTimeout(()=>D(he)),A.preventDefault()}})})})})})})});iC.displayName=wz;var jz="SelectItemAlignedPosition",oC=p.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,a=oa(Xa,n),i=la(Xa,n),[l,c]=p.useState(null),[u,d]=p.useState(null),h=je(t,N=>d(N)),f=kh(n),m=p.useRef(!1),x=p.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:y,focusSelectedItem:w}=i,v=p.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&g&&b&&y){const N=a.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),C=a.valueNode.getBoundingClientRect(),T=y.getBoundingClientRect();if(a.dir!=="rtl"){const fe=T.left-E.left,ve=C.left-fe,me=N.left-ve,ee=N.width+me,ge=Math.max(ee,E.width),Ne=window.innerWidth-er,yt=Up(ve,[er,Math.max(er,Ne-ge)]);l.style.minWidth=ee+"px",l.style.left=yt+"px"}else{const fe=E.right-T.right,ve=window.innerWidth-C.right-fe,me=window.innerWidth-N.right-ve,ee=N.width+me,ge=Math.max(ee,E.width),Ne=window.innerWidth-er,yt=Up(ve,[er,Math.max(er,Ne-ge)]);l.style.minWidth=ee+"px",l.style.right=yt+"px"}const M=f(),O=window.innerHeight-er*2,$=g.scrollHeight,R=window.getComputedStyle(u),z=parseInt(R.borderTopWidth,10),D=parseInt(R.paddingTop,10),V=parseInt(R.borderBottomWidth,10),P=parseInt(R.paddingBottom,10),_=z+D+$+P+V,I=Math.min(b.offsetHeight*5,_),L=window.getComputedStyle(g),H=parseInt(L.paddingTop,10),U=parseInt(L.paddingBottom,10),Z=N.top+N.height/2-er,q=O-Z,ne=b.offsetHeight/2,A=b.offsetTop+ne,B=z+D+A,ae=_-B;if(B<=Z){const fe=M.length>0&&b===M[M.length-1].ref.current;l.style.bottom="0px";const ve=u.clientHeight-g.offsetTop-g.offsetHeight,me=Math.max(q,ne+(fe?U:0)+ve+V),ee=B+me;l.style.height=ee+"px"}else{const fe=M.length>0&&b===M[0].ref.current;l.style.top="0px";const me=Math.max(Z,z+g.offsetTop+(fe?H:0)+ne)+ae;l.style.height=me+"px",g.scrollTop=B-Z+g.offsetTop}l.style.margin=`${er}px 0`,l.style.minHeight=I+"px",l.style.maxHeight=O+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,a.trigger,a.valueNode,l,u,g,b,y,a.dir,r]);jt(()=>v(),[v]);const[S,j]=p.useState();jt(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const k=p.useCallback(N=>{N&&x.current===!0&&(v(),w==null||w(),x.current=!1)},[v,w]);return o.jsx(Cz,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:k,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:o.jsx(se.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});oC.displayName=jz;var kz="SelectPopperPosition",Hp=p.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=er,...a}=e,i=Ch(n);return o.jsx(Cj,{...i,...a,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Hp.displayName=kz;var[Cz,Qg]=Po(Xa,{}),Gp="SelectViewport",lC=p.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,a=la(Gp,n),i=Qg(Gp,n),l=je(t,a.onViewportChange),c=p.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(jh.Slot,{scope:n,children:o.jsx(se.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:te(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=i;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const x=window.innerHeight-er*2,g=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),y=Math.max(g,b);if(y<x){const w=y+m,v=Math.min(x,w),S=w-v;h.style.height=v+"px",h.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});lC.displayName=Gp;var cC="SelectGroup",[Nz,Ez]=Po(cC),Tz=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Or();return o.jsx(Nz,{scope:n,id:s,children:o.jsx(se.div,{role:"group","aria-labelledby":s,...r,ref:t})})});Tz.displayName=cC;var uC="SelectLabel",dC=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Ez(uC,n);return o.jsx(se.div,{id:s.id,...r,ref:t})});dC.displayName=uC;var Cd="SelectItem",[Mz,hC]=Po(Cd),fC=p.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...i}=e,l=oa(Cd,n),c=la(Cd,n),u=l.value===r,[d,h]=p.useState(a??""),[f,m]=p.useState(!1),x=je(t,w=>{var v;return(v=c.itemRefCallback)==null?void 0:v.call(c,w,r,s)}),g=Or(),b=p.useRef("touch"),y=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(Mz,{scope:n,value:r,disabled:s,textId:g,isSelected:u,onItemTextChange:p.useCallback(w=>{h(v=>v||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(jh.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:o.jsx(se.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...i,ref:x,onFocus:te(i.onFocus,()=>m(!0)),onBlur:te(i.onBlur,()=>m(!1)),onClick:te(i.onClick,()=>{b.current!=="mouse"&&y()}),onPointerUp:te(i.onPointerUp,()=>{b.current==="mouse"&&y()}),onPointerDown:te(i.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:te(i.onPointerMove,w=>{var v;b.current=w.pointerType,s?(v=c.onItemLeave)==null||v.call(c):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:te(i.onPointerLeave,w=>{var v;w.currentTarget===document.activeElement&&((v=c.onItemLeave)==null||v.call(c))}),onKeyDown:te(i.onKeyDown,w=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&w.key===" "||(mz.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});fC.displayName=Cd;var el="SelectItemText",mC=p.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...a}=e,i=oa(el,n),l=la(el,n),c=hC(el,n),u=vz(el,n),[d,h]=p.useState(null),f=je(t,y=>h(y),c.onItemTextChange,y=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,y,c.value,c.disabled)}),m=d==null?void 0:d.textContent,x=p.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=u;return jt(()=>(g(x),()=>b(x)),[g,b,x]),o.jsxs(o.Fragment,{children:[o.jsx(se.span,{id:c.textId,...a,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?sa.createPortal(a.children,i.valueNode):null]})});mC.displayName=el;var pC="SelectItemIndicator",gC=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return hC(pC,n).isSelected?o.jsx(se.span,{"aria-hidden":!0,...r,ref:t}):null});gC.displayName=pC;var Kp="SelectScrollUpButton",yC=p.forwardRef((e,t)=>{const n=la(Kp,e.__scopeSelect),r=Qg(Kp,e.__scopeSelect),[s,a]=p.useState(!1),i=je(t,r.onScrollButtonChange);return jt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(xC,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});yC.displayName=Kp;var qp="SelectScrollDownButton",vC=p.forwardRef((e,t)=>{const n=la(qp,e.__scopeSelect),r=Qg(qp,e.__scopeSelect),[s,a]=p.useState(!1),i=je(t,r.onScrollButtonChange);return jt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(xC,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});vC.displayName=qp;var xC=p.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,a=la("SelectScrollButton",n),i=p.useRef(null),l=kh(n),c=p.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),jt(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),o.jsx(se.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:te(s.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:te(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:te(s.onPointerLeave,()=>{c()})})}),Pz="SelectSeparator",bC=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return o.jsx(se.div,{"aria-hidden":!0,...r,ref:t})});bC.displayName=Pz;var Yp="SelectArrow",_z=p.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Ch(n),a=oa(Yp,n),i=la(Yp,n);return a.open&&i.position==="popper"?o.jsx(Nj,{...s,...r,ref:t}):null});_z.displayName=Yp;var Rz="SelectBubbleInput",wC=p.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=p.useRef(null),a=je(r,s),i=Yg(t);return p.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[i,t]),o.jsx(se.select,{...n,style:{...m5,...n.style},ref:a,defaultValue:t})});wC.displayName=Rz;function SC(e){return e===""||e===void 0}function jC(e){const t=wt(e),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(i=>{const l=n.current+i;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function kC(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=Az(e,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Az(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Dz=Qk,CC=Zk,Oz=tC,Iz=nC,$z=rC,NC=sC,Lz=lC,EC=dC,TC=fC,Fz=mC,zz=gC,MC=yC,PC=vC,_C=bC;const mn=Dz,pn=Oz,Zt=p.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(CC,{ref:r,className:Y("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,o.jsx(Iz,{asChild:!0,children:o.jsx(gr,{className:"h-4 w-4 opacity-50"})})]}));Zt.displayName=CC.displayName;const RC=p.forwardRef(({className:e,...t},n)=>o.jsx(MC,{ref:n,className:Y("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(qs,{className:"h-4 w-4"})}));RC.displayName=MC.displayName;const AC=p.forwardRef(({className:e,...t},n)=>o.jsx(PC,{ref:n,className:Y("flex cursor-default items-center justify-center py-1",e),...t,children:o.jsx(gr,{className:"h-4 w-4"})}));AC.displayName=PC.displayName;const en=p.forwardRef(({className:e,children:t,position:n="popper",...r},s)=>o.jsx($z,{children:o.jsxs(NC,{ref:s,className:Y("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[o.jsx(RC,{}),o.jsx(Lz,{className:Y("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),o.jsx(AC,{})]})}));en.displayName=NC.displayName;const Bz=p.forwardRef(({className:e,...t},n)=>o.jsx(EC,{ref:n,className:Y("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Bz.displayName=EC.displayName;const bt=p.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(TC,{ref:r,className:Y("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(zz,{children:o.jsx(dd,{className:"h-4 w-4"})})}),o.jsx(Fz,{children:t})]}));bt.displayName=TC.displayName;const Vz=p.forwardRef(({className:e,...t},n)=>o.jsx(_C,{ref:n,className:Y("-mx-1 my-1 h-px bg-muted",e),...t}));Vz.displayName=_C.displayName;const Xp=["fog","sea","mountain","city","tunnel","rain","night","sunset"],Uz=["lucid","nightmare","recurring","prophetic"],Qa={lucid:"Lucid Dream",nightmare:"",recurring:"",prophetic:""},Jg=["inactive","activated","unknown"],Zg=["none","helper","separation","wake","unknown"],DC=["wake","separation","collapse","unknown"],Wz=["observer","protector","guide","intruder"];p.createContext({hasAnimated:!1,setHasAnimated:()=>{}});function Tn({children:e,delay:t=0,duration:n=400,className:r="",animation:s="fade-up"}){const[a,i]=p.useState(!1);p.useEffect(()=>{const c=setTimeout(()=>i(!0),t);return()=>clearTimeout(c)},[t]);const l=()=>{if(a)return"translateY(0) translateX(0) scale(1)";switch(s){case"fade":return"translateY(0) scale(1)";case"scale":return"scale(0.95)";case"slide-left":return"translateX(-20px)";case"slide-right":return"translateX(20px)";case"fade-up":default:return"translateY(16px)"}};return o.jsx("div",{className:`transition-all ${r}`,style:{opacity:a?1:0,transform:l(),transitionDuration:`${n}ms`,transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e})}function Hz({children:e,baseDelay:t=0,staggerDelay:n=60,duration:r=400,className:s="",animation:a="fade-up"}){return o.jsx("div",{className:s,children:e.map((i,l)=>o.jsx(Tn,{delay:t+l*n,duration:r,animation:a,children:i},l))})}function Gz(){const[e,t]=p.useState([]),[n,r]=p.useState([]),[s,a]=p.useState(!0),[i,l]=p.useState(!1),[c,u]=p.useState(""),[d,h]=p.useState("all"),[f,m]=p.useState("all"),[x,g]=p.useState("all"),[b,y]=p.useState("all"),w=p.useCallback(async()=>{try{const[j,k]=await Promise.all([ni(),bc()]);t(j),r(k)}catch(j){console.error("Error loading data:",j)}finally{a(!1)}},[]);p.useEffect(()=>{w()},[w]);const v=p.useCallback(async()=>{await w(),dn.success("")},[w]),S=e.filter(j=>{var k;if(c){const N=c.toLowerCase();if(!(j.world.toLowerCase().includes(N)||((k=j.notes)==null?void 0:k.toLowerCase().includes(N))||j.entities.some(C=>C.toLowerCase().includes(N))||j.environments.some(C=>C.toLowerCase().includes(N))))return!1}return!(d!=="all"&&j.world!==d||f!=="all"&&j.threatLevel!==Number(f)||x!=="all"&&j.timeSystem!==x||b!=="all"&&j.safetyOverride!==b)});return s?o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsx("h1",{children:"Dream Logs"})}),o.jsx("div",{className:"space-y-2",children:[...Array(5)].map((j,k)=>o.jsx(Ok,{},k))})]}):o.jsxs(Ik,{onRefresh:v,className:"h-full",children:[o.jsx(Fk,{}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsx(Tn,{delay:0,duration:400,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{children:"Dream Logs"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ce,{variant:"ghost",size:"icon",onClick:()=>l(!i),children:o.jsx(sA,{className:"w-4 h-4"})}),o.jsx(ce,{asChild:!0,size:"sm",children:o.jsxs(nn,{to:"/logs/new",children:[o.jsx(jg,{className:"w-4 h-4 mr-1"}),"New"]})})]})]})}),o.jsx(Tn,{delay:60,duration:400,children:o.jsxs("div",{className:"relative",children:[o.jsx(H5,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(Tt,{type:"text",placeholder:" dreams... (world, notes, entities, environments)",value:c,onChange:j=>u(j.target.value),className:"pl-9 pr-9"}),c&&o.jsx(ce,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7",onClick:()=>u(""),children:o.jsx(aa,{className:"w-3 h-3"})})]})}),i&&o.jsx(Tn,{delay:0,duration:300,animation:"fade",children:o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsx("p",{className:"text-sm font-medium",children:"Filters"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs(mn,{value:d,onValueChange:h,children:[o.jsx(Zt,{className:"text-sm",children:o.jsx(pn,{placeholder:"World"})}),o.jsxs(en,{children:[o.jsx(bt,{value:"all",children:"All Worlds"}),n.map(j=>o.jsx(bt,{value:j.name,children:j.name},j.id))]})]}),o.jsxs(mn,{value:f,onValueChange:m,children:[o.jsx(Zt,{className:"text-sm",children:o.jsx(pn,{placeholder:"Threat"})}),o.jsxs(en,{children:[o.jsx(bt,{value:"all",children:"All Threats"}),[0,1,2,3,4,5].map(j=>o.jsxs(bt,{value:String(j),children:["Level ",j]},j))]})]}),o.jsxs(mn,{value:x,onValueChange:g,children:[o.jsx(Zt,{className:"text-sm",children:o.jsx(pn,{placeholder:"Time System"})}),o.jsxs(en,{children:[o.jsx(bt,{value:"all",children:"All"}),Jg.map(j=>o.jsx(bt,{value:j,children:j},j))]})]}),o.jsxs(mn,{value:b,onValueChange:y,children:[o.jsx(Zt,{className:"text-sm",children:o.jsx(pn,{placeholder:"Safety"})}),o.jsxs(en,{children:[o.jsx(bt,{value:"all",children:"All"}),Zg.map(j=>o.jsx(bt,{value:j,children:j},j))]})]})]})]})}),o.jsx("div",{className:"space-y-2",children:S.length===0?o.jsx(Tn,{delay:120,duration:400,children:o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx("p",{children:""}),o.jsx(ce,{asChild:!0,variant:"link",className:"mt-2",children:o.jsx(nn,{to:"/logs/new",children:""})})]})}):o.jsx(Hz,{baseDelay:120,staggerDelay:50,duration:400,className:"space-y-2",children:S.map(j=>o.jsx(zk,{dream:j,showEdit:!0},j.id))})})]})]})}var Kz="Label",OC=p.forwardRef((e,t)=>o.jsx(se.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));OC.displayName=Kz;var IC=OC;const qz=fc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),qe=p.forwardRef(({className:e,...t},n)=>o.jsx(IC,{ref:n,className:Y(qz(),e),...t}));qe.displayName=IC.displayName;const $C="dream-entity-frequency";function LC(){try{const e=localStorage.getItem($C);if(e)return JSON.parse(e)}catch(e){console.warn("Failed to load entity frequency:",e)}return{}}function Yz(e){try{localStorage.setItem($C,JSON.stringify(e))}catch(t){console.warn("Failed to save entity frequency:",t)}}function Xz(e){const t=LC();e.forEach(n=>{n&&n.trim()&&(t[n]=(t[n]||0)+1)}),Yz(t)}function nw(e=9){const t=LC();return Object.entries(t).sort(([,r],[,s])=>s-r).slice(0,e).map(([r])=>r)}const Qz="dream-environment-frequency";function Jz(){try{const e=localStorage.getItem(Qz);if(e)return JSON.parse(e)}catch(e){console.warn("Failed to load environment frequency:",e)}return{}}function Zz(e=6){const t=Jz();return Object.entries(t).sort(([,r],[,s])=>s-r).slice(0,e).map(([r])=>r)}function eB({date:e,wakeTime:t,onDateChange:n,onWakeTimeChange:r}){return o.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"date",children:""}),o.jsx(Tt,{id:"date",type:"date",value:e,onChange:s=>n(s.target.value),required:!0})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"wakeTime",children:" ()"}),o.jsx(Tt,{id:"wakeTime",type:"time",value:t,onChange:s=>r(s.target.value)})]})]})}function tB({worlds:e,selectedWorld:t,newWorld:n,onWorldChange:r,onNewWorldChange:s}){return o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{children:""}),o.jsxs(mn,{value:t,onValueChange:r,children:[o.jsx(Zt,{children:o.jsx(pn,{placeholder:""})}),o.jsx(en,{children:e.map(a=>o.jsx(bt,{value:a.name,children:a.name},a.id))})]}),o.jsx(Tt,{placeholder:"...",value:n,onChange:a=>s(a.target.value)})]})}const nB=e=>Xp.includes(e),rw=[{label:" (++)",environments:["fog","sea","mountain"]},{label:"++",environments:["city","rain","night"]},{label:"+",environments:["tunnel","night"]}];function rB({selectedEnvironments:e,newEnvironment:t,commonEnvironments:n,onToggleEnvironment:r,onNewEnvironmentChange:s,onAddEnvironment:a}){const[i,l]=p.useState(!1),[c,u]=p.useState(0),[d,h]=p.useState(new Set),f=p.useRef(null),m=p.useRef(null),x=e.filter(C=>!nB(C)),g=C=>{h(T=>{const M=new Set(T);return M.has(C)?M.delete(C):M.add(C),M})},b=p.useMemo(()=>{const C=new Set;return n.forEach(T=>C.add(T)),Xp.forEach(T=>C.add(T)),e.forEach(T=>C.add(T)),Array.from(C)},[n,e]),y=p.useMemo(()=>{if(!t.trim())return[];const C=t.toLowerCase().trim();return b.filter(T=>T.toLowerCase().includes(C)&&!e.includes(T)).slice(0,5)},[t,b,e]);p.useEffect(()=>{const C=T=>{m.current&&!m.current.contains(T.target)&&f.current&&!f.current.contains(T.target)&&l(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),p.useEffect(()=>{l(y.length>0&&t.trim().length>0),u(0)},[y,t]);const w=C=>{var T;r(C),s(""),l(!1),(T=f.current)==null||T.focus()},[v,S]=p.useState(!1),j=C=>{if(i&&y.length>0)if(C.key==="ArrowDown")C.preventDefault(),S(!0),u(T=>T<y.length-1?T+1:T);else if(C.key==="ArrowUp")C.preventDefault(),S(!0),u(T=>T>0?T-1:0);else if(C.key==="Enter"){C.preventDefault(),v&&y[c]?(w(y[c]),S(!1)):(a(),l(!1),S(!1));return}else C.key==="Escape"&&(l(!1),S(!1));else C.key==="Enter"&&(C.preventDefault(),a())},k=C=>{C.forEach(T=>{e.includes(T)||r(T)})},N=C=>C.every(T=>e.includes(T)),E=()=>{e.forEach(C=>{r(C)})};return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(qe,{children:""}),e.length>0&&o.jsxs(ce,{type:"button",variant:"ghost",size:"sm",onClick:E,className:"h-auto py-0.5 px-2 text-xs text-muted-foreground hover:text-destructive",children:[o.jsx(aa,{className:"w-3 h-3 mr-1"})," (",e.length,")"]})]}),e.length>0&&o.jsxs("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded-md",children:[o.jsx("div",{className:"text-xs font-medium text-blue-900 mb-1.5",children:" :"}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.map(C=>o.jsxs("button",{type:"button",onClick:()=>r(C),className:"px-2.5 py-1 text-xs rounded-md border bg-blue-600 text-white border-blue-700 hover:bg-blue-700 transition-colors",children:[C," "]},C))})]}),n.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground font-medium",children:[o.jsx(Ha,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:" ():"})]}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:n.map(C=>o.jsx("button",{type:"button",onClick:()=>r(C),className:`px-2.5 py-1 text-xs rounded-md border transition-colors ${e.includes(C)?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-300 text-slate-700 hover:bg-slate-100"}`,children:C},C))})]}),rw.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:" ():"}),o.jsx("div",{className:"space-y-2",children:rw.map((C,T)=>{const M=N(C.environments),O=d.has(T);return o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex gap-1",children:[o.jsxs(ce,{type:"button",variant:"outline",size:"sm",onClick:()=>k(C.environments),className:`flex-1 text-xs h-auto py-1.5 px-2.5 transition-colors ${M?"bg-slate-900 text-white border-slate-900 hover:bg-slate-800 hover:text-white":"hover:bg-slate-100"}`,children:[o.jsx(cp,{className:"w-3 h-3 mr-1.5"}),C.label]}),o.jsx(ce,{type:"button",variant:"outline",size:"sm",onClick:()=>g(T),className:"h-auto py-1.5 px-2 hover:bg-slate-100",children:O?o.jsx(qs,{className:"w-3.5 h-3.5"}):o.jsx(gr,{className:"w-3.5 h-3.5"})})]}),O&&o.jsx("div",{className:"ml-4 flex flex-wrap gap-1.5 p-2 bg-slate-50 rounded border border-slate-200",children:C.environments.map($=>o.jsx("button",{type:"button",onClick:()=>r($),className:`px-2 py-0.5 text-xs rounded border transition-colors ${e.includes($)?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-300 text-slate-700 hover:bg-slate-100"}`,children:$},$))})]},T)})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:":"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Xp.map(C=>o.jsx("button",{type:"button",onClick:()=>r(C),className:`tag transition-colors ${e.includes(C)?"bg-slate-900 text-white":"hover:bg-slate-200"}`,children:C},C))})]}),o.jsxs("div",{className:"pt-2 relative",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(Tt,{ref:f,type:"text",placeholder:"...",value:t,onChange:C=>s(C.target.value),onKeyDown:j,onFocus:()=>{y.length>0&&l(!0)}}),i&&y.length>0&&o.jsxs("div",{ref:m,className:"absolute top-full left-0 right-0 mt-1 bg-white border border-slate-300 rounded-md shadow-lg z-50 max-h-[200px] overflow-y-auto",children:[o.jsx("div",{className:"text-xs text-muted-foreground px-3 py-1.5 bg-slate-50 border-b border-slate-200 font-medium",children:":"}),y.map((C,T)=>o.jsxs("button",{type:"button",onClick:()=>w(C),className:`w-full text-left px-3 py-2 text-sm transition-colors border-b border-slate-100 last:border-b-0 ${T===c?"bg-slate-100 text-slate-900 font-medium":"hover:bg-slate-50 text-slate-700"}`,children:[C,n.includes(C)&&o.jsx("span",{className:"ml-2 text-xs text-blue-600",children:" "})]},C))]})]}),o.jsx(ce,{type:"button",variant:"outline",size:"sm",disabled:!t,onClick:a,className:"border-slate-300 text-slate-700 hover:bg-slate-100",children:""})]}),t.trim()&&y.length===0&&o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:' Enter  "" '}),i&&y.length>0&&o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"  , Enter , Esc "})]}),x.length>0&&o.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[o.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:":"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(C=>o.jsx("button",{type:"button",onClick:()=>r(C),className:"tag bg-slate-900 text-white",children:C},C))})]})]})}var Nh="Checkbox",[sB]=xn(Nh),[aB,ey]=sB(Nh);function iB(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:a,form:i,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[f,m]=pr({prop:n,defaultProp:s??!1,onChange:c,caller:Nh}),[x,g]=p.useState(null),[b,y]=p.useState(null),w=p.useRef(!1),v=x?!!i||!!x.closest("form"):!0,S={checked:f,disabled:a,setChecked:m,control:x,setControl:g,name:l,form:i,value:d,hasConsumerStoppedPropagationRef:w,required:u,defaultChecked:Hs(s)?!1:s,isFormControl:v,bubbleInput:b,setBubbleInput:y};return o.jsx(aB,{scope:t,...S,children:oB(h)?h(S):r})}var FC="CheckboxTrigger",zC=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:a,value:i,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:x}=ey(FC,e),g=je(s,d),b=p.useRef(c);return p.useEffect(()=>{const y=a==null?void 0:a.form;if(y){const w=()=>h(b.current);return y.addEventListener("reset",w),()=>y.removeEventListener("reset",w)}},[a,h]),o.jsx(se.button,{type:"button",role:"checkbox","aria-checked":Hs(c)?"mixed":c,"aria-required":u,"data-state":HC(c),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:g,onKeyDown:te(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:te(n,y=>{h(w=>Hs(w)?!0:!w),x&&m&&(f.current=y.isPropagationStopped(),f.current||y.stopPropagation())})})});zC.displayName=FC;var ty=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:i,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return o.jsx(iB,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:i,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>o.jsxs(o.Fragment,{children:[o.jsx(zC,{...h,ref:t,__scopeCheckbox:n}),f&&o.jsx(WC,{__scopeCheckbox:n})]})})});ty.displayName=Nh;var BC="CheckboxIndicator",VC=p.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=ey(BC,n);return o.jsx($n,{present:r||Hs(a.checked)||a.checked===!0,children:o.jsx(se.span,{"data-state":HC(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});VC.displayName=BC;var UC="CheckboxBubbleInput",WC=p.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:i,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:m}=ey(UC,e),x=je(n,m),g=Yg(a),b=Ag(r);p.useEffect(()=>{const w=f;if(!w)return;const v=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(v,"checked").set,k=!s.current;if(g!==a&&j){const N=new Event("click",{bubbles:k});w.indeterminate=Hs(a),j.call(w,Hs(a)?!1:a),w.dispatchEvent(N)}},[f,g,a,s]);const y=p.useRef(Hs(a)?!1:a);return o.jsx(se.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??y.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:x,style:{...t.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});WC.displayName=UC;function oB(e){return typeof e=="function"}function Hs(e){return e==="indeterminate"}function HC(e){return Hs(e)?"indeterminate":e?"checked":"unchecked"}const GC=p.forwardRef(({className:e,...t},n)=>o.jsx(ty,{ref:n,className:Y("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:o.jsx(VC,{className:Y("flex items-center justify-center text-current"),children:o.jsx(dd,{className:"h-4 w-4"})})}));GC.displayName=ty.displayName;const lB=[{label:"+++",entities:["","","",""],icon:fn},{label:"++++",entities:["","","","",""],icon:fn},{label:"+++",entities:["","","",""],icon:fn},{label:"+",entities:["",""],icon:fn}];function cB({entities:e,selectedEntities:t,newEntity:n,commonEntities:r,onToggleEntity:s,onNewEntityChange:a,onAddEntity:i}){const[l,c]=p.useState(!1),[u,d]=p.useState(0),[h,f]=p.useState(new Set),m=p.useRef(null),x=p.useRef(null),g=C=>{f(T=>{const M=new Set(T);return M.has(C)?M.delete(C):M.add(C),M})},b=p.useMemo(()=>{const C=new Set;return r.forEach(T=>C.add(T)),e.forEach(T=>C.add(T.name)),t.forEach(T=>C.add(T)),Array.from(C)},[e,r,t]),y=p.useMemo(()=>{if(!n.trim())return[];const C=n.toLowerCase().trim();return b.filter(T=>T.toLowerCase().includes(C)&&!t.includes(T)).slice(0,5)},[n,b,t]);p.useEffect(()=>{const C=T=>{x.current&&!x.current.contains(T.target)&&m.current&&!m.current.contains(T.target)&&c(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),p.useEffect(()=>{c(y.length>0&&n.trim().length>0),d(0)},[y,n]);const w=C=>{var T;s(C),a(""),c(!1),(T=m.current)==null||T.focus()},[v,S]=p.useState(!1),j=C=>{if(l&&y.length>0)if(C.key==="ArrowDown")C.preventDefault(),S(!0),d(T=>T<y.length-1?T+1:T);else if(C.key==="ArrowUp")C.preventDefault(),S(!0),d(T=>T>0?T-1:0);else if(C.key==="Enter"){C.preventDefault(),v&&y[u]?(w(y[u]),S(!1)):(i(),c(!1),S(!1));return}else C.key==="Escape"&&(c(!1),S(!1));else C.key==="Enter"&&(C.preventDefault(),i())},k=C=>{C.forEach(T=>{t.includes(T)||s(T)})},N=C=>C.every(T=>t.includes(T)),E=()=>{t.forEach(C=>{s(C)})};return o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(qe,{children:"/"}),t.length>0&&o.jsxs(ce,{type:"button",variant:"ghost",size:"sm",onClick:E,className:"h-auto py-0.5 px-2 text-xs text-muted-foreground hover:text-destructive",children:[o.jsx(aa,{className:"w-3 h-3 mr-1"})," (",t.length,")"]})]}),t.length>0&&o.jsxs("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded-md",children:[o.jsx("div",{className:"text-xs font-medium text-blue-900 mb-1.5",children:" :"}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.map(C=>o.jsxs("button",{type:"button",onClick:()=>s(C),className:"px-2.5 py-1 text-xs rounded-md border bg-blue-600 text-white border-blue-700 hover:bg-blue-700 transition-colors",children:[C," "]},C))})]}),r.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground font-medium",children:[o.jsx(Ha,{className:"w-3.5 h-3.5"}),o.jsx("span",{children:" ():"})]}),o.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.map(C=>o.jsx("button",{type:"button",onClick:()=>s(C),className:`px-2.5 py-1 text-xs rounded-md border transition-colors ${t.includes(C)?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-300 text-slate-700 hover:bg-slate-100"}`,children:C},C))})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:" ():"}),o.jsx("div",{className:"space-y-2",children:lB.map((C,T)=>{const M=C.icon,O=N(C.entities),$=h.has(T);return o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex gap-1",children:[o.jsxs(ce,{type:"button",variant:"outline",size:"sm",onClick:()=>k(C.entities),className:`flex-1 text-xs h-auto py-1.5 px-2.5 transition-colors ${O?"bg-slate-900 text-white border-slate-900 hover:bg-slate-800 hover:text-white":"hover:bg-slate-100"}`,children:[o.jsx(M,{className:"w-3 h-3 mr-1.5"}),C.label]}),o.jsx(ce,{type:"button",variant:"outline",size:"sm",onClick:()=>g(T),className:"h-auto py-1.5 px-2 hover:bg-slate-100",children:$?o.jsx(qs,{className:"w-3.5 h-3.5"}):o.jsx(gr,{className:"w-3.5 h-3.5"})})]}),$&&o.jsx("div",{className:"ml-4 flex flex-wrap gap-1.5 p-2 bg-slate-50 rounded border border-slate-200",children:C.entities.map(R=>o.jsx("button",{type:"button",onClick:()=>s(R),className:`px-2 py-0.5 text-xs rounded border transition-colors ${t.includes(R)?"bg-slate-900 text-white border-slate-900":"bg-white border-slate-300 text-slate-700 hover:bg-slate-100"}`,children:R},R))})]},T)})})]}),o.jsxs("div",{className:"space-y-2 pt-2 border-t",children:[o.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:":"}),o.jsx("div",{className:"space-y-2 max-h-[240px] overflow-y-auto pr-2",children:e.map(C=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(GC,{id:C.id,checked:t.includes(C.name),onCheckedChange:()=>s(C.name),className:"border-slate-400 data-[state=checked]:bg-slate-900 data-[state=checked]:text-white data-[state=checked]:border-slate-900"}),o.jsx("label",{htmlFor:C.id,className:"text-sm cursor-pointer flex-1",children:C.name})]},C.id))})]}),o.jsxs("div",{className:"pt-2 relative",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(Tt,{ref:m,placeholder:"...",value:n,onChange:C=>a(C.target.value),onKeyDown:j,onFocus:()=>{y.length>0&&c(!0)}}),l&&y.length>0&&o.jsxs("div",{ref:x,className:"absolute top-full left-0 right-0 mt-1 bg-white border border-slate-300 rounded-md shadow-lg z-50 max-h-[200px] overflow-y-auto",children:[o.jsx("div",{className:"text-xs text-muted-foreground px-3 py-1.5 bg-slate-50 border-b border-slate-200 font-medium",children:" ():"}),y.map((C,T)=>o.jsxs("button",{type:"button",onClick:()=>w(C),className:`w-full text-left px-3 py-2 text-sm transition-colors border-b border-slate-100 last:border-b-0 ${T===u?"bg-slate-100 text-slate-900 font-medium":"hover:bg-slate-50 text-slate-700"}`,children:[C,r.includes(C)&&o.jsx("span",{className:"ml-2 text-xs text-blue-600",children:" "})]},C))]})]}),o.jsx(ce,{type:"button",variant:"outline",size:"sm",disabled:!n,onClick:i,className:"border-slate-300 text-slate-700 hover:bg-slate-100",children:""})]}),n.trim()&&y.length===0&&o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:' Enter  "" '}),l&&y.length>0&&o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"  , Enter , Esc "})]})]})}function uB({timeSystem:e,threatLevel:t,safetyOverride:n,exit:r,onTimeSystemChange:s,onThreatLevelChange:a,onSafetyOverrideChange:i,onExitChange:l}){return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{children:" (Time System)"}),o.jsxs(mn,{value:e,onValueChange:c=>s(c),children:[o.jsx(Zt,{children:o.jsx(pn,{})}),o.jsx(en,{children:Jg.map(c=>o.jsx(bt,{value:c,children:c},c))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs(qe,{children:[": ",t]}),o.jsx("input",{type:"range",min:"0",max:"5",value:t,onChange:c=>a(Number(c.target.value)),className:"w-full accent-amber-500"}),o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[o.jsx("span",{children:"0"}),o.jsx("span",{children:"5"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{children:""}),o.jsxs(mn,{value:n,onValueChange:c=>i(c),children:[o.jsx(Zt,{children:o.jsx(pn,{})}),o.jsx(en,{children:Zg.map(c=>o.jsx(bt,{value:c,children:c},c))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{children:""}),o.jsxs(mn,{value:r,onValueChange:c=>l(c),children:[o.jsx(Zt,{children:o.jsx(pn,{})}),o.jsx(en,{children:DC.map(c=>o.jsx(bt,{value:c,children:c},c))})]})]})]})}const dB={lucid:o.jsx(fr,{className:"w-4 h-4"}),nightmare:o.jsx(fA,{className:"w-4 h-4"}),recurring:o.jsx(U5,{className:"w-4 h-4"}),prophetic:o.jsx(xg,{className:"w-4 h-4"})},hB={lucid:{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-700",activeBg:"bg-purple-600",activeBorder:"border-purple-700",activeText:"text-white"},nightmare:{bg:"bg-red-50",border:"border-red-200",text:"text-red-700",activeBg:"bg-red-600",activeBorder:"border-red-700",activeText:"text-white"},recurring:{bg:"bg-amber-50",border:"border-amber-200",text:"text-amber-700",activeBg:"bg-amber-600",activeBorder:"border-amber-700",activeText:"text-white"},prophetic:{bg:"bg-cyan-50",border:"border-cyan-200",text:"text-cyan-700",activeBg:"bg-cyan-600",activeBorder:"border-cyan-700",activeText:"text-white"}};function ny({selectedTypes:e,onToggleType:t}){return o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{children:""}),o.jsx("p",{className:"text-xs text-muted-foreground",children:" ()"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Uz.map(n=>{const r=e.includes(n),s=hB[n];return o.jsxs("button",{type:"button",onClick:()=>t(n),className:`
                px-3 py-2 rounded-md border transition-all
                flex items-center gap-2 text-sm font-medium
                ${r?`${s.activeBg} ${s.activeBorder} ${s.activeText}`:`${s.bg} ${s.border} ${s.text} hover:opacity-80`}
              `,children:[dB[n],Qa[n]]},n)})})]})}function fB({form:e,onFormChange:t,onSave:n,onSwitchToFull:r,saving:s}){return o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(kg,{className:"w-5 h-5 text-amber-500"}),o.jsx("h1",{className:"text-xl font-bold",children:""})]}),o.jsxs(ce,{variant:"ghost",size:"sm",onClick:r,className:"text-xs",children:[o.jsx(V5,{className:"w-3.5 h-3.5 mr-1"}),""]})]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"!   Save "}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs(qe,{htmlFor:"quick-story",className:"text-base",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1 mb-2",children:"  - "}),o.jsx(Qs,{id:"quick-story",placeholder:":  ...",value:e.storySummary,onChange:a=>t({storySummary:a.target.value}),className:"min-h-[160px] text-base",autoFocus:!0})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx(qe,{htmlFor:"quick-date",className:"text-sm",children:""}),o.jsx(Tt,{id:"quick-date",type:"date",value:e.date,onChange:a=>t({date:a.target.value})})]}),o.jsxs("div",{children:[o.jsx(qe,{htmlFor:"quick-time",className:"text-sm",children:""}),o.jsx(Tt,{id:"quick-time",type:"time",value:e.wakeTime,onChange:a=>t({wakeTime:a.target.value})})]})]}),o.jsxs("div",{children:[o.jsx(qe,{htmlFor:"quick-world",className:"text-sm",children:" ()"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1 mb-2",children:" "}),o.jsx(Tt,{id:"quick-world",placeholder:": , ",value:e.world,onChange:a=>t({world:a.target.value})})]}),o.jsx(ny,{selectedTypes:e.dreamTypes,onToggleType:a=>{t({dreamTypes:e.dreamTypes.includes(a)?e.dreamTypes.filter(i=>i!==a):[...e.dreamTypes,a]})}})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx(ce,{onClick:n,disabled:s||!e.storySummary.trim(),className:"flex-1",size:"lg",children:s?"...":""}),o.jsx(ce,{variant:"outline",onClick:r,disabled:s,size:"lg",children:""})]}),o.jsx("p",{className:"text-xs text-center text-muted-foreground",children:" "})]})}var Eh="Collapsible",[mB,KC]=xn(Eh),[pB,ry]=mB(Eh),qC=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:a,onOpenChange:i,...l}=e,[c,u]=pr({prop:r,defaultProp:s??!1,onChange:i,caller:Eh});return o.jsx(pB,{scope:n,disabled:a,contentId:Or(),open:c,onOpenToggle:p.useCallback(()=>u(d=>!d),[u]),children:o.jsx(se.div,{"data-state":ay(c),"data-disabled":a?"":void 0,...l,ref:t})})});qC.displayName=Eh;var YC="CollapsibleTrigger",XC=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,s=ry(YC,n);return o.jsx(se.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":ay(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:t,onClick:te(e.onClick,s.onOpenToggle)})});XC.displayName=YC;var sy="CollapsibleContent",QC=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=ry(sy,e.__scopeCollapsible);return o.jsx($n,{present:n||s.open,children:({present:a})=>o.jsx(gB,{...r,ref:t,present:a})})});QC.displayName=sy;var gB=p.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:s,...a}=e,i=ry(sy,n),[l,c]=p.useState(r),u=p.useRef(null),d=je(t,u),h=p.useRef(0),f=h.current,m=p.useRef(0),x=m.current,g=i.open||l,b=p.useRef(g),y=p.useRef(void 0);return p.useEffect(()=>{const w=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(w)},[]),jt(()=>{const w=u.current;if(w){y.current=y.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const v=w.getBoundingClientRect();h.current=v.height,m.current=v.width,b.current||(w.style.transitionDuration=y.current.transitionDuration,w.style.animationName=y.current.animationName),c(r)}},[i.open,r]),o.jsx(se.div,{"data-state":ay(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!g,...a,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...e.style},children:g&&s})});function ay(e){return e?"open":"closed"}var yB=qC,vB=XC,xB=QC,xr="Accordion",bB=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[iy,wB,SB]=rh(xr),[Th]=xn(xr,[SB,KC]),oy=KC(),JC=G.forwardRef((e,t)=>{const{type:n,...r}=e,s=r,a=r;return o.jsx(iy.Provider,{scope:e.__scopeAccordion,children:n==="multiple"?o.jsx(NB,{...a,ref:t}):o.jsx(CB,{...s,ref:t})})});JC.displayName=xr;var[ZC,jB]=Th(xr),[eN,kB]=Th(xr,{collapsible:!1}),CB=G.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:a=!1,...i}=e,[l,c]=pr({prop:n,defaultProp:r??"",onChange:s,caller:xr});return o.jsx(ZC,{scope:e.__scopeAccordion,value:G.useMemo(()=>l?[l]:[],[l]),onItemOpen:c,onItemClose:G.useCallback(()=>a&&c(""),[a,c]),children:o.jsx(eN,{scope:e.__scopeAccordion,collapsible:a,children:o.jsx(tN,{...i,ref:t})})})}),NB=G.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=e,[i,l]=pr({prop:n,defaultProp:r??[],onChange:s,caller:xr}),c=G.useCallback(d=>l((h=[])=>[...h,d]),[l]),u=G.useCallback(d=>l((h=[])=>h.filter(f=>f!==d)),[l]);return o.jsx(ZC,{scope:e.__scopeAccordion,value:i,onItemOpen:c,onItemClose:u,children:o.jsx(eN,{scope:e.__scopeAccordion,collapsible:!0,children:o.jsx(tN,{...a,ref:t})})})}),[EB,Mh]=Th(xr),tN=G.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:a="vertical",...i}=e,l=G.useRef(null),c=je(l,t),u=wB(n),h=wc(s)==="ltr",f=te(e.onKeyDown,m=>{var E;if(!bB.includes(m.key))return;const x=m.target,g=u().filter(C=>{var T;return!((T=C.ref.current)!=null&&T.disabled)}),b=g.findIndex(C=>C.ref.current===x),y=g.length;if(b===-1)return;m.preventDefault();let w=b;const v=0,S=y-1,j=()=>{w=b+1,w>S&&(w=v)},k=()=>{w=b-1,w<v&&(w=S)};switch(m.key){case"Home":w=v;break;case"End":w=S;break;case"ArrowRight":a==="horizontal"&&(h?j():k());break;case"ArrowDown":a==="vertical"&&j();break;case"ArrowLeft":a==="horizontal"&&(h?k():j());break;case"ArrowUp":a==="vertical"&&k();break}const N=w%y;(E=g[N].ref.current)==null||E.focus()});return o.jsx(EB,{scope:n,disabled:r,direction:s,orientation:a,children:o.jsx(iy.Slot,{scope:n,children:o.jsx(se.div,{...i,"data-orientation":a,ref:c,onKeyDown:r?void 0:f})})})}),Nd="AccordionItem",[TB,ly]=Th(Nd),nN=G.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...s}=e,a=Mh(Nd,n),i=jB(Nd,n),l=oy(n),c=Or(),u=r&&i.value.includes(r)||!1,d=a.disabled||e.disabled;return o.jsx(TB,{scope:n,open:u,disabled:d,triggerId:c,children:o.jsx(yB,{"data-orientation":a.orientation,"data-state":lN(u),...l,...s,ref:t,disabled:d,open:u,onOpenChange:h=>{h?i.onItemOpen(r):i.onItemClose(r)}})})});nN.displayName=Nd;var rN="AccordionHeader",sN=G.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,s=Mh(xr,n),a=ly(rN,n);return o.jsx(se.h3,{"data-orientation":s.orientation,"data-state":lN(a.open),"data-disabled":a.disabled?"":void 0,...r,ref:t})});sN.displayName=rN;var Qp="AccordionTrigger",aN=G.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,s=Mh(xr,n),a=ly(Qp,n),i=kB(Qp,n),l=oy(n);return o.jsx(iy.ItemSlot,{scope:n,children:o.jsx(vB,{"aria-disabled":a.open&&!i.collapsible||void 0,"data-orientation":s.orientation,id:a.triggerId,...l,...r,ref:t})})});aN.displayName=Qp;var iN="AccordionContent",oN=G.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,s=Mh(xr,n),a=ly(iN,n),i=oy(n);return o.jsx(xB,{role:"region","aria-labelledby":a.triggerId,"data-orientation":s.orientation,...i,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});oN.displayName=iN;function lN(e){return e?"open":"closed"}var MB=JC,PB=nN,_B=sN,cN=aN,uN=oN;const RB=MB,dN=p.forwardRef(({className:e,...t},n)=>o.jsx(PB,{ref:n,className:Y("border-b",e),...t}));dN.displayName="AccordionItem";const hN=p.forwardRef(({className:e,children:t,...n},r)=>o.jsx(_B,{className:"flex",children:o.jsxs(cN,{ref:r,className:Y("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,o.jsx(gr,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));hN.displayName=cN.displayName;const fN=p.forwardRef(({className:e,children:t,...n},r)=>o.jsx(uN,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:o.jsx("div",{className:Y("pb-4 pt-0",e),children:t})}));fN.displayName=uN.displayName;const cy="dream-log-drafts-v3",Ed="dream-log-active-draft-id",sw="dream-log-draft-v2";function AB(){return`draft_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}function DB(e){if(e.storySummary&&e.storySummary.trim().length>0){const r=e.storySummary.trim();return r.length>40?r.substring(0,40)+"...":r}const t=e.date||new Date().toISOString().split("T")[0],n=e.wakeTime||"";return` ${t} (${n})`}function OB(e){if(e.storySummary&&e.storySummary.trim().length>0){const n=e.storySummary.trim();return n.length>100?n.substring(0,100)+"...":n}const t=[];return e.world&&t.push(`: ${e.world}`),e.environments.length>0&&t.push(`${e.environments.length} `),e.selectedEntities.length>0&&t.push(`${e.selectedEntities.length} `),t.length>0?t.join("  "):""}function La(){try{const e=localStorage.getItem(cy);return e?JSON.parse(e):{drafts:{},lastModified:new Date().toISOString()}}catch(e){return console.warn("Failed to load drafts:",e),{drafts:{},lastModified:new Date().toISOString()}}}function Jp(e,t){try{const n=La(),r=n.drafts[e],s={id:e,version:1,savedAt:new Date().toISOString(),createdAt:(r==null?void 0:r.createdAt)||new Date().toISOString(),title:DB(t),previewText:OB(t),form:t};n.drafts[e]=s,n.lastModified=new Date().toISOString(),localStorage.setItem(cy,JSON.stringify(n))}catch(n){throw console.error("Failed to save draft:",n),n}}function aw(e){try{return La().drafts[e]||null}catch(t){return console.warn("Failed to load draft:",t),null}}function IB(e){try{const t=La();delete t.drafts[e],t.lastModified=new Date().toISOString(),localStorage.setItem(cy,JSON.stringify(t)),e0()===e&&localStorage.removeItem(Ed)}catch(t){throw console.error("Failed to delete draft:",t),t}}function Zp(e){const t=AB();return Jp(t,e),t}function e0(){try{return localStorage.getItem(Ed)}catch{return null}}function $u(e){try{e?localStorage.setItem(Ed,e):localStorage.removeItem(Ed)}catch(t){console.error("Failed to set active draft:",t)}}function $B(){try{const e=localStorage.getItem(sw);if(!e)return!1;const t=JSON.parse(e);if(!t.form)return!1;const n=Zp(t.form);return $u(n),localStorage.removeItem(sw),console.log("Successfully migrated legacy draft to:",n),!0}catch(e){return console.warn("Failed to migrate legacy draft:",e),!1}}function LB(e=10){const t=La();return Object.values(t.drafts).sort((r,s)=>new Date(s.savedAt).getTime()-new Date(r.savedAt).getTime()).slice(0,e)}var Ph="Dialog",[mN]=xn(Ph),[FB,br]=mN(Ph),pN=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,d]=pr({prop:r,defaultProp:s??!1,onChange:a,caller:Ph});return o.jsx(FB,{scope:t,triggerRef:l,contentRef:c,contentId:Or(),titleId:Or(),descriptionId:Or(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:i,children:n})};pN.displayName=Ph;var gN="DialogTrigger",zB=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=br(gN,n),a=je(t,s.triggerRef);return o.jsx(se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":hy(s.open),...r,ref:a,onClick:te(e.onClick,s.onOpenToggle)})});zB.displayName=gN;var uy="DialogPortal",[BB,yN]=mN(uy,{forceMount:void 0}),vN=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=br(uy,t);return o.jsx(BB,{scope:t,forceMount:n,children:p.Children.map(r,i=>o.jsx($n,{present:n||a.open,children:o.jsx(sh,{asChild:!0,container:s,children:i})}))})};vN.displayName=uy;var Td="DialogOverlay",xN=p.forwardRef((e,t)=>{const n=yN(Td,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=br(Td,e.__scopeDialog);return a.modal?o.jsx($n,{present:r||a.open,children:o.jsx(UB,{...s,ref:t})}):null});xN.displayName=Td;var VB=mo("DialogOverlay.RemoveScroll"),UB=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=br(Td,n);return o.jsx(Xg,{as:VB,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(se.div,{"data-state":hy(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ja="DialogContent",bN=p.forwardRef((e,t)=>{const n=yN(Ja,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=br(Ja,e.__scopeDialog);return o.jsx($n,{present:r||a.open,children:a.modal?o.jsx(WB,{...s,ref:t}):o.jsx(HB,{...s,ref:t})})});bN.displayName=Ja;var WB=p.forwardRef((e,t)=>{const n=br(Ja,e.__scopeDialog),r=p.useRef(null),s=je(t,n.contentRef,r);return p.useEffect(()=>{const a=r.current;if(a)return Wk(a)},[]),o.jsx(wN,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:te(e.onCloseAutoFocus,a=>{var i;a.preventDefault(),(i=n.triggerRef.current)==null||i.focus()}),onPointerDownOutside:te(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:te(e.onFocusOutside,a=>a.preventDefault())})}),HB=p.forwardRef((e,t)=>{const n=br(Ja,e.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return o.jsx(wN,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(i))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),wN=p.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,l=br(Ja,n),c=p.useRef(null),u=je(t,c);return Bk(),o.jsxs(o.Fragment,{children:[o.jsx(qg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(dc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":hy(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(GB,{titleId:l.titleId}),o.jsx(qB,{contentRef:c,descriptionId:l.descriptionId})]})]})}),dy="DialogTitle",SN=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=br(dy,n);return o.jsx(se.h2,{id:s.titleId,...r,ref:t})});SN.displayName=dy;var jN="DialogDescription",kN=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=br(jN,n);return o.jsx(se.p,{id:s.descriptionId,...r,ref:t})});kN.displayName=jN;var CN="DialogClose",NN=p.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=br(CN,n);return o.jsx(se.button,{type:"button",...r,ref:t,onClick:te(e.onClick,()=>s.onOpenChange(!1))})});NN.displayName=CN;function hy(e){return e?"open":"closed"}var EN="DialogTitleWarning",[Kq,TN]=Z_(EN,{contentName:Ja,titleName:dy,docsSlug:"dialog"}),GB=({titleId:e})=>{const t=TN(EN),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},KB="DialogDescriptionWarning",qB=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${TN(KB).contentName}}.`;return p.useEffect(()=>{var a;const s=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},YB=pN,XB=vN,MN=xN,PN=bN,_N=SN,RN=kN,QB=NN;const JB=YB,ZB=XB,AN=p.forwardRef(({className:e,...t},n)=>o.jsx(MN,{className:Y("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));AN.displayName=MN.displayName;const e9=fc("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),DN=p.forwardRef(({side:e="right",className:t,children:n,...r},s)=>o.jsxs(ZB,{children:[o.jsx(AN,{}),o.jsxs(PN,{ref:s,className:Y(e9({side:e}),t),...r,children:[n,o.jsxs(QB,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[o.jsx(aa,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));DN.displayName=PN.displayName;const ON=({className:e,...t})=>o.jsx("div",{className:Y("flex flex-col space-y-2 text-center sm:text-left",e),...t});ON.displayName="SheetHeader";const IN=p.forwardRef(({className:e,...t},n)=>o.jsx(_N,{ref:n,className:Y("text-lg font-semibold text-foreground",e),...t}));IN.displayName=_N.displayName;const $N=p.forwardRef(({className:e,...t},n)=>o.jsx(RN,{ref:n,className:Y("text-sm text-muted-foreground",e),...t}));$N.displayName=RN.displayName;function t9({open:e,onOpenChange:t,drafts:n,activeDraftId:r,onSelectDraft:s,onDeleteDraft:a,onNewDraft:i}){const l=c=>new Date(c).toLocaleDateString("th-TH",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return o.jsx(JB,{open:e,onOpenChange:t,children:o.jsxs(DN,{side:"bottom",className:"h-[80vh] overflow-y-auto",children:[o.jsx(ON,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx(IN,{children:""}),o.jsx($N,{children:" "})]}),o.jsxs(ce,{onClick:i,size:"sm",className:"shrink-0",children:[o.jsx(jg,{className:"w-4 h-4 mr-2"}),""]})]})}),o.jsx("div",{className:"mt-6 space-y-3",children:n.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(rA,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{className:"text-sm",children:""}),o.jsx("p",{className:"text-xs mt-1",children:""})]}):n.map(c=>o.jsx("div",{className:`
                  card-minimal p-3 sm:p-4 cursor-pointer transition-all
                  hover:border-primary/40 hover:shadow-sm
                  ${r===c.id?"border-primary bg-primary/5":""}
                `,onClick:()=>{s(c.id),t(!1)},children:o.jsxs("div",{className:"flex items-start justify-between gap-3",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h3",{className:"font-medium text-sm truncate",children:c.title}),r===c.id&&o.jsx("span",{className:"text-xs px-2 py-0.5 bg-primary text-primary-foreground rounded-full shrink-0",children:""})]}),o.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:c.previewText}),o.jsxs("div",{className:"flex items-center gap-1 mt-2 text-xs text-muted-foreground",children:[o.jsx(Dr,{className:"w-3 h-3"}),o.jsxs("span",{children:[" ",l(c.savedAt)]})]})]}),o.jsx(ce,{variant:"ghost",size:"icon",className:"shrink-0 h-8 w-8 hover:bg-destructive/10 hover:text-destructive",onClick:u=>{u.stopPropagation(),confirm("?")&&a(c.id)},children:o.jsx(G5,{className:"w-4 h-4"})})]})},c.id))})]})})}const Wo=()=>({date:new Date().toISOString().split("T")[0],wakeTime:"",world:"",newWorld:"",timeSystem:"unknown",environments:[],newEnvironment:"",selectedEntities:[],newEntity:"",dreamTypes:[],threatLevel:0,safetyOverride:"none",exit:"unknown",notes:"",storySummary:""}),n9=e=>e.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"});function r9(){const e=Bg(),[t,n]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState([]),[l,c]=p.useState([]),[u,d]=p.useState(!1),[h,f]=p.useState("idle"),[m,x]=p.useState(null),[g,b]=p.useState(!1),[y,w]=p.useState(null),[v,S]=p.useState({}),[j,k]=p.useState(!1),N=p.useRef(Wo()),[E,C]=p.useState(N.current),T=p.useRef(!0),[M,O]=p.useState(!1),$=p.useRef(E),R=p.useCallback(A=>{const B=N.current.date;return A.date===B&&!A.wakeTime&&!A.world&&!A.newWorld&&A.environments.length===0&&!A.newEnvironment&&A.selectedEntities.length===0&&!A.newEntity&&A.threatLevel===0&&A.timeSystem==="unknown"&&A.safetyOverride==="none"&&A.exit==="unknown"&&!A.notes&&!A.storySummary},[]);p.useEffect(()=>{$.current=E},[E]),p.useEffect(()=>(T.current=!0,()=>{T.current=!1}),[]),p.useEffect(()=>{(async()=>{const[B,ae]=await Promise.all([bc(),bh()]);n(B.map(he=>({id:he.id,name:he.name}))),s(ae.map(he=>({id:he.id,name:he.name}))),i(nw(9)),c(Zz(6))})()},[]),p.useEffect(()=>{let A=!1;try{const B=$B(),ae=e0();if(ae){const fe=aw(ae);if(fe){if(C({...Wo(),...fe.form}),w(ae),fe.savedAt){const ve=new Date(fe.savedAt);Number.isNaN(ve.getTime())||x(ve)}f("restored"),A=!0}}const he=La();S(he.drafts),B&&A?lt({title:"",description:""}):A&&lt({title:"",description:""})}catch(B){console.warn("Failed to restore draft:",B)}b(!0)},[]);const z=p.useCallback((A,B=!1)=>{try{if(R(A))return;let ae=y;ae?Jp(ae,A):(ae=Zp(A),w(ae),$u(ae));const he=La();S(he.drafts),!B&&T.current&&(f("saved"),x(new Date))}catch(ae){!B&&T.current&&f("error"),console.warn("Failed to persist draft:",ae)}},[R,y]);p.useEffect(()=>{if(!g||R(E))return;f("saving");const A=setTimeout(()=>z(E),700);return()=>clearTimeout(A)},[E,g,z,R]),p.useEffect(()=>{const A=()=>{if(!R($.current))try{const B=e0();B?Jp(B,$.current):Zp($.current)}catch(B){console.warn("Failed to save draft on unload:",B)}};return window.addEventListener("beforeunload",A),()=>window.removeEventListener("beforeunload",A)},[R]);const D=p.useCallback(async()=>{if(!u){if(!E.storySummary.trim()&&!E.notes.trim()){lt({title:"",description:" Notes  1 ",variant:"destructive"});return}d(!0);try{const A=E.newWorld||E.world,B=[...E.selectedEntities];E.newEntity&&B.push(E.newEntity);const ae=[...E.environments];E.newEnvironment&&ae.push(E.newEnvironment);const he=[E.storySummary,E.notes].filter(Boolean).join(`

---

`),fe=E.wakeTime||new Date().toTimeString().slice(0,5);if(await yk({date:E.date,wakeTime:fe,world:A,timeSystem:E.timeSystem,environments:ae,entities:B,dreamTypes:E.dreamTypes.length>0?E.dreamTypes:void 0,threatLevel:E.threatLevel,safetyOverride:E.safetyOverride,exit:E.exit,notes:he||void 0})){Xz(B),i(nw(9)),lt({title:""});const me=Wo();N.current=me,z(me),e("/logs")}else lt({title:"",variant:"destructive"})}catch(A){console.error("Error saving dream:",A),lt({title:"",variant:"destructive"})}finally{T.current&&d(!1)}}},[E,u,e,z]);p.useEffect(()=>{const A=B=>{(B.ctrlKey||B.metaKey)&&B.key.toLowerCase()==="s"&&(B.preventDefault(),D())};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[D]);const V=A=>{A.preventDefault(),D()},P=A=>{C(B=>({...B,environments:B.environments.includes(A)?B.environments.filter(ae=>ae!==A):[...B.environments,A]}))},_=A=>{C(B=>({...B,selectedEntities:B.selectedEntities.includes(A)?B.selectedEntities.filter(ae=>ae!==A):[...B.selectedEntities,A]}))},I=()=>{E.newEnvironment&&!E.environments.includes(E.newEnvironment)&&C(A=>({...A,environments:[...A.environments,A.newEnvironment],newEnvironment:""}))},L=()=>{E.newEntity&&!E.selectedEntities.includes(E.newEntity)&&C(A=>({...A,selectedEntities:[...A.selectedEntities,A.newEntity],newEntity:""}))},H=A=>{const B=aw(A);B&&(C({...Wo(),...B.form}),w(A),$u(A),k(!1),lt({title:"",description:B.title}))},U=()=>{const A=Wo();C(A),w(null),$u(null),k(!1),lt({title:""})},Z=A=>{IB(A);const B=La();S(B.drafts),y===A&&U(),lt({title:""})},q=p.useMemo(()=>h==="saving"?{label:"...",className:"bg-muted border-border text-muted-foreground",icon:eA}:h==="saved"&&m?{label:` ${n9(m)}`,className:"bg-muted border-border text-foreground",icon:ZR}:h==="restored"?{label:"",className:"bg-primary/10 border-primary/20 text-primary",icon:Sx}:h==="error"?{label:"",className:"bg-destructive/10 border-destructive/20 text-destructive",icon:Ga}:{label:"",className:"bg-muted border-border text-muted-foreground",icon:hA},[h,m]),ne=q.icon;return o.jsxs("div",{className:"space-y-6 pb-8",children:[o.jsx("div",{className:"bg-card border-b border-border sticky top-0 z-20 backdrop-blur-sm bg-card/95",children:o.jsxs("div",{className:"container-app py-3 sm:py-4",children:[o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[o.jsx(ce,{variant:"ghost",size:"icon",onClick:()=>e(-1),children:o.jsx($5,{className:"w-4 h-4"})}),o.jsx("h1",{className:"text-xl sm:text-2xl font-semibold truncate",children:""})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ce,{variant:"outline",size:"icon",onClick:()=>O(!M),title:M?"":"",children:M?o.jsx(V5,{className:"w-4 h-4"}):o.jsx(kg,{className:"w-4 h-4"})}),o.jsxs(ce,{onClick:D,disabled:u,children:[o.jsx(W5,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline ml-2",children:u?"...":""})]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[o.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 text-xs border rounded-md ${q.className}`,children:[o.jsx(ne,{className:"w-3 h-3"}),q.label]}),o.jsxs("button",{type:"button",onClick:()=>k(!0),className:"inline-flex items-center gap-1.5 px-2.5 py-1 text-xs border border-border bg-muted text-muted-foreground rounded-md hover:text-foreground transition",children:[o.jsx(aA,{className:"w-3 h-3"})," (",Object.keys(v).length,")"]}),o.jsx("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 text-xs border border-border bg-muted text-muted-foreground rounded-md",children:" Ctrl/Cmd+S "}),o.jsxs("button",{type:"button",onClick:U,className:"inline-flex items-center gap-1.5 px-2.5 py-1 text-xs border border-border bg-muted text-muted-foreground rounded-md hover:text-foreground transition",children:[o.jsx(Sx,{className:"w-3 h-3"}),""]})]})]})}),o.jsx(t9,{open:j,onOpenChange:k,drafts:LB(),activeDraftId:y,onSelectDraft:H,onDeleteDraft:Z,onNewDraft:U}),o.jsx("form",{onSubmit:V,className:"container-app space-y-4 sm:space-y-6 pb-32",children:M?o.jsx(fB,{form:{date:E.date,wakeTime:E.wakeTime,world:E.world,storySummary:E.storySummary,dreamTypes:E.dreamTypes},onFormChange:A=>C(B=>({...B,...A})),onSave:D,onSwitchToFull:()=>O(!1),saving:u}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:grid-cols-2",children:[o.jsx("div",{className:"lg:row-span-2",children:o.jsxs("div",{className:"card-minimal p-3 sm:p-4 h-full",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx(qe,{htmlFor:"storySummary",className:"text-base font-medium",children:""}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),o.jsx(Qs,{id:"storySummary",placeholder:"...",value:E.storySummary,onChange:A=>C(B=>({...B,storySummary:A.target.value})),className:"min-h-[200px] sm:min-h-[240px] lg:min-h-[320px]"})]})}),o.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[o.jsxs("div",{className:"card-minimal p-3 sm:p-4",children:[o.jsx("div",{className:"mb-3",children:o.jsx("h2",{className:"text-base font-medium",children:""})}),o.jsx(eB,{date:E.date,wakeTime:E.wakeTime,onDateChange:A=>C(B=>({...B,date:A})),onWakeTimeChange:A=>C(B=>({...B,wakeTime:A}))})]}),o.jsxs("div",{className:"card-minimal p-3 sm:p-4",children:[o.jsx("div",{className:"mb-3",children:o.jsx("h2",{className:"text-base font-medium",children:""})}),o.jsx(tB,{worlds:t,selectedWorld:E.world,newWorld:E.newWorld,onWorldChange:A=>C(B=>({...B,world:A})),onNewWorldChange:A=>C(B=>({...B,newWorld:A}))})]}),o.jsx("div",{className:"card-minimal p-3 sm:p-4",children:o.jsx(RB,{type:"single",collapsible:!0,children:o.jsxs(dN,{value:"details",className:"border-none",children:[o.jsx(hN,{className:"px-0 py-0 text-base font-medium hover:no-underline",children:""}),o.jsxs(fN,{className:"pt-4 space-y-4 sm:space-y-6",children:[o.jsx(uB,{timeSystem:E.timeSystem,threatLevel:E.threatLevel,safetyOverride:E.safetyOverride,exit:E.exit,onTimeSystemChange:A=>C(B=>({...B,timeSystem:A})),onThreatLevelChange:A=>C(B=>({...B,threatLevel:A})),onSafetyOverrideChange:A=>C(B=>({...B,safetyOverride:A})),onExitChange:A=>C(B=>({...B,exit:A}))}),o.jsx(rB,{selectedEnvironments:E.environments,newEnvironment:E.newEnvironment,commonEnvironments:l,onToggleEnvironment:P,onNewEnvironmentChange:A=>C(B=>({...B,newEnvironment:A})),onAddEnvironment:I}),o.jsx(cB,{entities:r,selectedEntities:E.selectedEntities,newEntity:E.newEntity,commonEntities:a,onToggleEntity:_,onNewEntityChange:A=>C(B=>({...B,newEntity:A})),onAddEntity:L}),o.jsx(ny,{selectedTypes:E.dreamTypes,onToggleType:A=>{C(B=>({...B,dreamTypes:B.dreamTypes.includes(A)?B.dreamTypes.filter(ae=>ae!==A):[...B.dreamTypes,A]}))}})]})]})})})]})]}),o.jsxs("div",{className:"card-minimal p-3 sm:p-4",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx(qe,{htmlFor:"notes",className:"text-base font-medium",children:"Notes "}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:""})]}),o.jsx(Qs,{id:"notes",placeholder:"...",value:E.notes,onChange:A=>C(B=>({...B,notes:A.target.value})),className:"min-h-[120px]"})]})]})})]})}function s9(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1}function a9(e){var r,s,a;const t=(r=e.dreamTypes)==null?void 0:r.map(i=>Qa[i]).join(", "),n=`
    <!DOCTYPE html>
    <html lang="th">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Dream Log - ${e.date}</title>
      <style>
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        
        body {
          font-family: 'Sarabun', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          line-height: 1.6;
          padding: 40px;
          max-width: 800px;
          margin: 0 auto;
          color: #1a1a1a;
        }
        
        h1 {
          font-size: 28px;
          color: #2563eb;
          margin-bottom: 20px;
          padding-bottom: 10px;
          border-bottom: 3px solid #2563eb;
        }
        
        .metadata {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 15px;
          margin-bottom: 30px;
          padding: 20px;
          background: #f8fafc;
          border-radius: 8px;
        }
        
        .metadata-item {
          display: flex;
          flex-direction: column;
        }
        
        .metadata-label {
          font-size: 12px;
          text-transform: uppercase;
          color: #64748b;
          font-weight: 600;
          margin-bottom: 4px;
        }
        
        .metadata-value {
          font-size: 16px;
          color: #1e293b;
          font-weight: 500;
        }
        
        .section {
          margin-bottom: 25px;
          page-break-inside: avoid;
        }
        
        .section-title {
          font-size: 18px;
          font-weight: 600;
          color: #334155;
          margin-bottom: 10px;
          padding-bottom: 5px;
          border-bottom: 2px solid #e2e8f0;
        }
        
        .content {
          padding: 15px;
          background: white;
          border-left: 4px solid #2563eb;
          white-space: pre-wrap;
        }
        
        .tags {
          display: flex;
          flex-wrap: wrap;
          gap: 8px;
          margin-top: 8px;
        }
        
        .tag {
          display: inline-block;
          padding: 4px 12px;
          background: #e0e7ff;
          color: #3730a3;
          border-radius: 12px;
          font-size: 14px;
          font-weight: 500;
        }
        
        .tag-dream-type {
          background: #fef3c7;
          color: #92400e;
        }
        
        .footer {
          margin-top: 40px;
          padding-top: 20px;
          border-top: 1px solid #e2e8f0;
          text-align: center;
          color: #94a3b8;
          font-size: 12px;
        }
        
        @media print {
          body {
            padding: 20px;
          }
          
          .no-print {
            display: none;
          }
        }
        
        @page {
          margin: 2cm;
        }
      </style>
    </head>
    <body>
      <h1> Dream Log</h1>
      
      <div class="metadata">
        <div class="metadata-item">
          <span class="metadata-label"></span>
          <span class="metadata-value">${new Date(e.date).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"})}</span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label"></span>
          <span class="metadata-value">${e.wakeTime}</span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label"></span>
          <span class="metadata-value">${e.world}</span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label"></span>
          <span class="metadata-value">${e.timeSystem==="activated"?"":e.timeSystem==="inactive"?"":""}</span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label"></span>
          <span class="metadata-value">Level ${e.threatLevel}</span>
        </div>
        <div class="metadata-item">
          <span class="metadata-label"></span>
          <span class="metadata-value">${e.exit==="wake"?"":e.exit==="separation"?"":e.exit==="collapse"?"":""}</span>
        </div>
      </div>
      
      ${t?`
      <div class="section">
        <div class="section-title"></div>
        <div class="tags">
          ${(s=e.dreamTypes)==null?void 0:s.map(i=>`<span class="tag tag-dream-type">${Qa[i]}</span>`).join("")}
        </div>
      </div>
      `:""}
      
      ${e.environments.length>0?`
      <div class="section">
        <div class="section-title"></div>
        <div class="tags">
          ${e.environments.map(i=>`<span class="tag">${i}</span>`).join("")}
        </div>
      </div>
      `:""}
      
      ${e.entities.length>0?`
      <div class="section">
        <div class="section-title">/</div>
        <div class="tags">
          ${e.entities.map(i=>`<span class="tag">${i}</span>`).join("")}
        </div>
      </div>
      `:""}
      
      ${e.notes?`
      <div class="section">
        <div class="section-title">Notes & </div>
        <div class="content">${e.notes}</div>
      </div>
      `:""}
      
      <div class="footer">
         ${new Date(e.createdAt).toLocaleString("th-TH")}
      </div>
      
      <script>
        // Auto-print  desktop, iOS 
        if (!/iPad|iPhone|iPod/.test(navigator.userAgent)) {
          window.onload = function() {
            window.print();
          };
        }
      <\/script>
    </body>
    </html>
  `;if(s9()){const i=document.getElementById("dream-print-frame");i&&i.remove();const l=document.createElement("iframe");l.id="dream-print-frame",l.style.position="fixed",l.style.right="0",l.style.bottom="0",l.style.width="0",l.style.height="0",l.style.border="none",document.body.appendChild(l);const c=(a=l.contentWindow)==null?void 0:a.document;c&&(c.open(),c.write(n),c.close(),setTimeout(()=>{var u;(u=l.contentWindow)==null||u.print(),setTimeout(()=>{l.remove()},1e3)},500))}else{const i=window.open("","_blank");if(!i){alert("");return}i.document.write(n),i.document.close()}}function i9({dreamId:e,isEditing:t,saving:n,onBack:r,onEdit:s,onCancel:a,onSave:i,onDelete:l,onExport:c}){return o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ce,{variant:"ghost",size:"icon",onClick:r,children:o.jsx($5,{className:"w-4 h-4"})}),o.jsx("span",{className:"text-sm font-mono text-muted-foreground",children:e})]}),o.jsx("div",{className:"flex gap-1",children:t?o.jsxs(o.Fragment,{children:[o.jsx(ce,{variant:"ghost",size:"icon",onClick:a,disabled:n,children:o.jsx(aa,{className:"w-4 h-4"})}),o.jsx(ce,{size:"icon",onClick:i,disabled:n,children:o.jsx(W5,{className:"w-4 h-4"})})]}):o.jsxs(o.Fragment,{children:[c&&o.jsx(ce,{variant:"ghost",size:"icon",onClick:c,title:"Export  PDF",children:o.jsx(nA,{className:"w-4 h-4"})}),o.jsx(ce,{variant:"ghost",size:"icon",onClick:s,children:o.jsx(Sg,{className:"w-4 h-4"})}),o.jsx(ce,{variant:"ghost",size:"icon",onClick:l,children:o.jsx(G5,{className:"w-4 h-4"})})]})})]})}function o9({editForm:e,onFormChange:t}){return o.jsx(Tt,{value:e.world,onChange:n=>t({world:n.target.value}),className:"text-xl font-semibold mb-2",placeholder:""})}function l9({editForm:e,onFormChange:t}){return o.jsxs(mn,{value:String(e.threatLevel),onValueChange:n=>t({threatLevel:Number(n)}),children:[o.jsx(Zt,{className:"h-8",children:o.jsx(pn,{})}),o.jsx(en,{children:[0,1,2,3,4,5].map(n=>o.jsxs(bt,{value:String(n),children:["Level ",n]},n))})]})}function c9({editForm:e,onFormChange:t}){return o.jsxs(mn,{value:e.timeSystem,onValueChange:n=>t({timeSystem:n}),children:[o.jsx(Zt,{className:"h-8",children:o.jsx(pn,{})}),o.jsx(en,{children:Jg.map(n=>o.jsx(bt,{value:n,children:n},n))})]})}function u9({editForm:e,onFormChange:t}){return o.jsxs(mn,{value:e.safetyOverride,onValueChange:n=>t({safetyOverride:n}),children:[o.jsx(Zt,{className:"h-8",children:o.jsx(pn,{})}),o.jsx(en,{children:Zg.map(n=>o.jsx(bt,{value:n,children:n},n))})]})}function d9({editForm:e,onFormChange:t}){return o.jsxs(mn,{value:e.exit,onValueChange:n=>t({exit:n}),children:[o.jsx(Zt,{className:"h-8",children:o.jsx(pn,{})}),o.jsx(en,{children:DC.map(n=>o.jsx(bt,{value:n,children:n},n))})]})}function h9({editForm:e,onFormChange:t}){return o.jsx(Tt,{value:e.environments.join(", "),onChange:n=>t({environments:n.target.value.split(",").map(r=>r.trim()).filter(Boolean)}),placeholder:"fog, sea, mountain ()"})}function f9({editForm:e,onFormChange:t}){return o.jsx(Tt,{value:e.entities.join(", "),onChange:n=>t({entities:n.target.value.split(",").map(r=>r.trim()).filter(Boolean)}),placeholder:"Entity1, Entity2 ()"})}function m9({editForm:e,onFormChange:t}){return o.jsx(Qs,{value:e.notes,onChange:n=>t({notes:n.target.value}),className:"min-h-[120px]",placeholder:"..."})}const p9={0:"bg-muted text-muted-foreground",1:"bg-yellow-100 text-yellow-800",2:"bg-orange-100 text-orange-800",3:"bg-orange-200 text-orange-900",4:"bg-red-100 text-red-800",5:"bg-red-200 text-red-900"};function g9({dream:e,isEditing:t,editForm:n,onFormChange:r}){return o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"card-minimal",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Threat Level"}),t?o.jsx(l9,{editForm:n,onFormChange:r}):o.jsx("span",{className:`threat-badge text-lg ${p9[e.threatLevel]}`,children:e.threatLevel})]}),o.jsxs("div",{className:"card-minimal",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Time System"}),t?o.jsx(c9,{editForm:n,onFormChange:r}):o.jsx("p",{className:"font-medium",children:e.timeSystem})]}),o.jsxs("div",{className:"card-minimal",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Safety Override"}),t?o.jsx(u9,{editForm:n,onFormChange:r}):o.jsx("p",{className:"font-medium",children:e.safetyOverride})]}),o.jsxs("div",{className:"card-minimal",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Exit"}),t?o.jsx(d9,{editForm:n,onFormChange:r}):o.jsx("p",{className:"font-medium",children:e.exit})]})]})}function fa({children:e,delay:t=0,duration:n=400}){const[r,s]=p.useState(!1);return p.useEffect(()=>{const a=setTimeout(()=>s(!0),t);return()=>clearTimeout(a)},[t]),o.jsx("div",{className:"transition-all",style:{opacity:r?1:0,transform:r?"translateY(0)":"translateY(16px)",transitionDuration:`${n}ms`,transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e})}function y9(){const{id:e}=vO(),t=Bg(),[n,r]=p.useState(null),[s,a]=p.useState(!0),[i,l]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState({world:"",threatLevel:0,timeSystem:"unknown",safetyOverride:"unknown",exit:"unknown",environments:[],entities:[],dreamTypes:[],notes:""});p.useEffect(()=>{(async()=>{try{const j=(await ni()).find(k=>k.id===e);r(j||null),j&&h({world:j.world,threatLevel:j.threatLevel,timeSystem:j.timeSystem,safetyOverride:j.safetyOverride,exit:j.exit,environments:j.environments,entities:j.entities,dreamTypes:j.dreamTypes||[],notes:j.notes||""})}catch(S){console.error("Error loading dream:",S)}finally{a(!1)}})()},[e]);const f=v=>{h(S=>({...S,...v}))},m=()=>l(!0),x=()=>{n&&h({world:n.world,threatLevel:n.threatLevel,timeSystem:n.timeSystem,safetyOverride:n.safetyOverride,exit:n.exit,environments:n.environments,entities:n.entities,dreamTypes:n.dreamTypes||[],notes:n.notes||""}),l(!1)},g=async()=>{if(n){u(!0);try{const v=await A$(n.id,d);v?(r(v),l(!1),dn.success("")):dn.error("")}catch(v){console.error("Error saving:",v),dn.error("")}finally{u(!1)}}},b=async()=>{n&&confirm("?")&&(await D$(n.id)?(dn.success(""),t("/logs")):dn.error(""))},y=()=>{n&&a9(n)};if(s)return o.jsx("div",{className:"py-8 text-center text-muted-foreground",children:"..."});if(!n)return o.jsxs("div",{className:"py-4",children:[o.jsx("p",{className:"text-muted-foreground",children:""}),o.jsx(ce,{asChild:!0,variant:"link",className:"mt-2 p-0",children:o.jsx(nn,{to:"/logs",children:""})})]});const w=new Date(n.date).toLocaleDateString("th-TH",{weekday:"long",day:"numeric",month:"long",year:"numeric"});return o.jsxs("div",{className:"py-4 space-y-6",children:[o.jsx(fa,{delay:0,duration:400,children:o.jsx(i9,{dreamId:n.id,isEditing:i,saving:c,onBack:()=>t(-1),onEdit:m,onCancel:x,onSave:g,onDelete:b,onExport:y})}),o.jsx(fa,{delay:80,duration:400,children:o.jsxs("div",{children:[i?o.jsx(o9,{editForm:d,onFormChange:f}):o.jsx("h1",{className:"text-xl mb-1",children:n.world}),o.jsxs("p",{className:"text-muted-foreground",children:[w,"  ",n.wakeTime]})]})}),(i||n.dreamTypes&&n.dreamTypes.length>0)&&o.jsx(fa,{delay:120,duration:400,children:o.jsx("div",{children:i?o.jsx(ny,{selectedTypes:d.dreamTypes,onToggleType:v=>{f({dreamTypes:d.dreamTypes.includes(v)?d.dreamTypes.filter(S=>S!==v):[...d.dreamTypes,v]})}}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:""}),o.jsx("div",{className:"flex flex-wrap gap-2",children:n.dreamTypes.map(v=>o.jsx("span",{className:"px-3 py-1 text-sm rounded-full bg-amber-100 text-amber-800 border border-amber-200",children:Qa[v]},v))})]})})}),o.jsx(fa,{delay:160,duration:400,children:o.jsx(g9,{dream:n,isEditing:i,editForm:d,onFormChange:f})}),o.jsx(fa,{delay:240,duration:400,children:o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Environments"}),i?o.jsx(h9,{editForm:d,onFormChange:f}):n.environments.length>0?o.jsx("div",{className:"flex flex-wrap gap-2",children:n.environments.map(v=>o.jsx("span",{className:"tag",children:v},v))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"-"})]})}),o.jsx(fa,{delay:320,duration:400,children:o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Entities"}),i?o.jsx(f9,{editForm:d,onFormChange:f}):n.entities.length>0?o.jsx("div",{className:"flex flex-wrap gap-2",children:n.entities.map(v=>o.jsx("span",{className:"tag-accent",children:v},v))}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"-"})]})}),o.jsx(fa,{delay:400,duration:400,children:o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Notes"}),i?o.jsx(m9,{editForm:d,onFormChange:f}):n.notes?o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:n.notes}):o.jsx("p",{className:"text-sm text-muted-foreground",children:"-"})]})})]})}function et(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function os(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function LN(e,t){const n=et(e);return isNaN(t)?os(e,NaN):(t&&n.setDate(n.getDate()+t),n)}const FN=6048e5,v9=864e5,zN=6e4,BN=36e5;let x9={};function _h(){return x9}function ur(e,t){var l,c,u,d;const n=_h(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=et(e),a=s.getDay(),i=(a<r?7:0)+a-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Md(e){return ur(e,{weekStartsOn:1})}function VN(e){const t=et(e),n=t.getFullYear(),r=os(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=Md(r),a=os(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const i=Md(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function Pd(e){const t=et(e);return t.setHours(0,0,0,0),t}function iw(e){const t=et(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function b9(e,t){const n=Pd(e),r=Pd(t),s=+n-iw(n),a=+r-iw(r);return Math.round((s-a)/v9)}function w9(e){const t=VN(e),n=os(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Md(n)}function S9(e,t){const n=t*7;return LN(e,n)}function fy(e){return os(e,Date.now())}function j9(e,t){const n=Pd(e),r=Pd(t);return+n==+r}function k9(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function tl(e){if(!k9(e)&&typeof e!="number")return!1;const t=et(e);return!isNaN(Number(t))}function C9(e,t){const n=et(e.start),r=et(e.end);let s=+n>+r;const a=s?+n:+r,i=s?r:n;i.setHours(0,0,0,0);let l=1;const c=[];for(;+i<=a;)c.push(et(i)),i.setDate(i.getDate()+l),i.setHours(0,0,0,0);return s?c.reverse():c}function N9(e,t){const n=et(e.start),r=et(e.end);let s=+n>+r;const a=s?+n:+r,i=s?r:n;i.setHours(0,0,0,0),i.setDate(1);let l=1;const c=[];for(;+i<=a;)c.push(et(i)),i.setMonth(i.getMonth()+l);return s?c.reverse():c}function E9(e,t){const n=et(e.start),r=et(e.end);let s=+n>+r;const a=ur(s?r:n,t),i=ur(s?n:r,t);a.setHours(15),i.setHours(15);const l=+i.getTime();let c=a,u=(t==null?void 0:t.step)??1;if(!u)return[];u<0&&(u=-u,s=!s);const d=[];for(;+c<=l;)c.setHours(0),d.push(et(c)),c=S9(c,u),c.setHours(15);return s?d.reverse():d}function T9(e){const t=et(e),n=os(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const M9={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},P9=(e,t,n)=>{let r;const s=M9[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Qi(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const _9={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},R9={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},A9={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},D9={date:Qi({formats:_9,defaultWidth:"full"}),time:Qi({formats:R9,defaultWidth:"full"}),dateTime:Qi({formats:A9,defaultWidth:"full"})},O9={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},I9=(e,t,n,r)=>O9[e];function Mr(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):i;s=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[i]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const $9={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},L9={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},F9={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},z9={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},B9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},V9={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},U9=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},W9={ordinalNumber:U9,era:Mr({values:$9,defaultWidth:"wide"}),quarter:Mr({values:L9,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Mr({values:F9,defaultWidth:"wide"}),day:Mr({values:z9,defaultWidth:"wide"}),dayPeriod:Mr({values:B9,defaultWidth:"wide",formattingValues:V9,defaultFormattingWidth:"wide"})};function Pr(e){return(t,n={})=>{const r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const i=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?G9(l,h=>h.test(i)):H9(l,h=>h.test(i));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(i.length);return{value:u,rest:d}}}function H9(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function G9(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function UN(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const s=r[0],a=t.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=n.valueCallback?n.valueCallback(i):i;const l=t.slice(s.length);return{value:i,rest:l}}}const K9=/^(\d+)(th|st|nd|rd)?/i,q9=/\d+/i,Y9={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},X9={any:[/^b/i,/^(a|c)/i]},Q9={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},J9={any:[/1/i,/2/i,/3/i,/4/i]},Z9={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},eV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},tV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},aV={ordinalNumber:UN({matchPattern:K9,parsePattern:q9,valueCallback:e=>parseInt(e,10)}),era:Pr({matchPatterns:Y9,defaultMatchWidth:"wide",parsePatterns:X9,defaultParseWidth:"any"}),quarter:Pr({matchPatterns:Q9,defaultMatchWidth:"wide",parsePatterns:J9,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Pr({matchPatterns:Z9,defaultMatchWidth:"wide",parsePatterns:eV,defaultParseWidth:"any"}),day:Pr({matchPatterns:tV,defaultMatchWidth:"wide",parsePatterns:nV,defaultParseWidth:"any"}),dayPeriod:Pr({matchPatterns:rV,defaultMatchWidth:"any",parsePatterns:sV,defaultParseWidth:"any"})},iV={code:"en-US",formatDistance:P9,formatLong:D9,formatRelative:I9,localize:W9,match:aV,options:{weekStartsOn:0,firstWeekContainsDate:1}};function oV(e){const t=et(e);return b9(t,T9(t))+1}function lV(e){const t=et(e),n=+Md(t)-+w9(t);return Math.round(n/FN)+1}function WN(e,t){var d,h,f,m;const n=et(e),r=n.getFullYear(),s=_h(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,i=os(e,0);i.setFullYear(r+1,0,a),i.setHours(0,0,0,0);const l=ur(i,t),c=os(e,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const u=ur(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function cV(e,t){var l,c,u,d;const n=_h(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=WN(e,t),a=os(e,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),ur(a,t)}function uV(e,t){const n=et(e),r=+ur(n,t)-+cV(n,t);return Math.round(r/FN)+1}function _e(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const ps={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return _e(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):_e(n+1,2)},d(e,t){return _e(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return _e(e.getHours()%12||12,t.length)},H(e,t){return _e(e.getHours(),t.length)},m(e,t){return _e(e.getMinutes(),t.length)},s(e,t){return _e(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return _e(s,t.length)}},pi={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ow={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return ps.y(e,t)},Y:function(e,t,n,r){const s=WN(e,r),a=s>0?s:1-s;if(t==="YY"){const i=a%100;return _e(i,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):_e(a,t.length)},R:function(e,t){const n=VN(e);return _e(n,t.length)},u:function(e,t){const n=e.getFullYear();return _e(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return _e(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return _e(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return ps.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return _e(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const s=uV(e,r);return t==="wo"?n.ordinalNumber(s,{unit:"week"}):_e(s,t.length)},I:function(e,t,n){const r=lV(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):_e(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ps.d(e,t)},D:function(e,t,n){const r=oV(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):_e(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return _e(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return _e(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return _e(s,t.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let s;switch(r===12?s=pi.noon:r===0?s=pi.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let s;switch(r>=17?s=pi.evening:r>=12?s=pi.afternoon:r>=4?s=pi.morning:s=pi.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ps.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ps.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):_e(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):_e(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ps.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ps.s(e,t)},S:function(e,t){return ps.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return cw(r);case"XXXX":case"XX":return va(r);case"XXXXX":case"XXX":default:return va(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return cw(r);case"xxxx":case"xx":return va(r);case"xxxxx":case"xxx":default:return va(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+lw(r,":");case"OOOO":default:return"GMT"+va(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+lw(r,":");case"zzzz":default:return"GMT"+va(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return _e(r,t.length)},T:function(e,t,n){const r=e.getTime();return _e(r,t.length)}};function lw(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return a===0?n+String(s):n+String(s)+t+_e(a,2)}function cw(e,t){return e%60===0?(e>0?"-":"+")+_e(Math.abs(e)/60,2):va(e,t)}function va(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),s=_e(Math.trunc(r/60),2),a=_e(r%60,2);return n+s+t+a}const uw=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},HN=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},dV=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return uw(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",uw(r,t)).replace("{{time}}",HN(s,t))},hV={p:HN,P:dV},fV=/^D+$/,mV=/^Y+$/,pV=["D","DD","YY","YYYY"];function gV(e){return fV.test(e)}function yV(e){return mV.test(e)}function vV(e,t,n){const r=xV(e,t,n);if(console.warn(r),pV.includes(e))throw new RangeError(r)}function xV(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const bV=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wV=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,SV=/^'([^]*?)'?$/,jV=/''/g,kV=/[a-zA-Z]/;function Ut(e,t,n){var d,h,f,m,x,g,b,y;const r=_h(),s=(n==null?void 0:n.locale)??r.locale??iV,a=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,i=(n==null?void 0:n.weekStartsOn)??((g=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((y=(b=r.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??0,l=et(e);if(!tl(l))throw new RangeError("Invalid time value");let c=t.match(wV).map(w=>{const v=w[0];if(v==="p"||v==="P"){const S=hV[v];return S(w,s.formatLong)}return w}).join("").match(bV).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const v=w[0];if(v==="'")return{isToken:!1,value:CV(w)};if(ow[v])return{isToken:!0,value:w};if(v.match(kV))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:w}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return c.map(w=>{if(!w.isToken)return w.value;const v=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&yV(v)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&gV(v))&&vV(v,t,String(e));const S=ow[v[0]];return S(l,v,s.localize,u)}).join("")}function CV(e){const t=e.match(SV);return t?t[1].replace(jV,"'"):e}function NV(e,t,n){const r=ur(e,n),s=ur(t,n);return+r==+s}function EV(e,t){const n=et(e),r=et(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function TV(e){return EV(e,fy(e))}function MV(e,t){return NV(e,fy(e),t)}function PV(e){return j9(e,fy(e))}function _V(e,t){return LN(e,-t)}function RV(e,t){const r=IV(e);let s;if(r.date){const c=$V(r.date,2);s=LV(c.restDateString,c.year)}if(!s||isNaN(s.getTime()))return new Date(NaN);const a=s.getTime();let i=0,l;if(r.time&&(i=FV(r.time),isNaN(i)))return new Date(NaN);if(r.timezone){if(l=zV(r.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(a+i),u=new Date(0);return u.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),u.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),u}return new Date(a+i+l)}const lu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},AV=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,DV=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,OV=/^([+-])(\d{2})(?::?(\d{2}))?$/;function IV(e){const t={},n=e.split(lu.dateTimeDelimiter);let r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],lu.timeZoneDelimiter.test(t.date)&&(t.date=e.split(lu.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){const s=lu.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function $V(e,t){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};const s=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?s:a*100,restDateString:e.slice((r[1]||r[2]).length)}}function LV(e,t){if(t===null)return new Date(NaN);const n=e.match(AV);if(!n)return new Date(NaN);const r=!!n[4],s=Ho(n[1]),a=Ho(n[2])-1,i=Ho(n[3]),l=Ho(n[4]),c=Ho(n[5])-1;if(r)return HV(t,l,c)?BV(t,l,c):new Date(NaN);{const u=new Date(0);return!UV(t,a,i)||!WV(t,s)?new Date(NaN):(u.setUTCFullYear(t,a,Math.max(s,i)),u)}}function Ho(e){return e?parseInt(e):1}function FV(e){const t=e.match(DV);if(!t)return NaN;const n=Yf(t[1]),r=Yf(t[2]),s=Yf(t[3]);return GV(n,r,s)?n*BN+r*zN+s*1e3:NaN}function Yf(e){return e&&parseFloat(e.replace(",","."))||0}function zV(e){if(e==="Z")return 0;const t=e.match(OV);if(!t)return 0;const n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return KV(r,s)?n*(r*BN+s*zN):NaN}function BV(e,t,n){const r=new Date(0);r.setUTCFullYear(e,0,4);const s=r.getUTCDay()||7,a=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}const VV=[31,null,31,30,31,30,31,31,30,31,30,31];function GN(e){return e%400===0||e%4===0&&e%100!==0}function UV(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(VV[t]||(GN(e)?29:28))}function WV(e,t){return t>=1&&t<=(GN(e)?366:365)}function HV(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function GV(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function KV(e,t){return t>=0&&t<=59}function qV(){return o.jsx("div",{className:"aspect-[3/4] rounded-lg overflow-hidden",children:o.jsx(we,{className:"w-full h-full"})})}function YV(){return o.jsxs("div",{className:"bg-card rounded-lg border",children:[o.jsxs("div",{className:"flex items-center justify-between p-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(we,{className:"w-1 h-8 rounded-full"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx(we,{className:"h-4 w-20"}),o.jsx(we,{className:"h-3 w-16"})]})]}),o.jsx(we,{className:"w-5 h-5 rounded"})]}),o.jsx("div",{className:"p-4 pt-0",children:o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:[...Array(4)].map((e,t)=>o.jsx(qV,{},t))})})]})}function XV(){return o.jsx("div",{className:"space-y-4 p-4",children:[...Array(3)].map((e,t)=>o.jsx(YV,{},t))})}const QV={lessThanXSeconds:{one:" 1 ",other:" {{count}} "},xSeconds:{one:"1 ",other:"{{count}} "},halfAMinute:"",lessThanXMinutes:{one:" 1 ",other:" {{count}} "},xMinutes:{one:"1 ",other:"{{count}} "},aboutXHours:{one:" 1 ",other:" {{count}} "},xHours:{one:"1 ",other:"{{count}} "},xDays:{one:"1 ",other:"{{count}} "},aboutXWeeks:{one:" 1 ",other:" {{count}} "},xWeeks:{one:"1 ",other:"{{count}} "},aboutXMonths:{one:" 1 ",other:" {{count}} "},xMonths:{one:"1 ",other:"{{count}} "},aboutXYears:{one:" 1 ",other:" {{count}} "},xYears:{one:"1 ",other:"{{count}} "},overXYears:{one:" 1 ",other:" {{count}} "},almostXYears:{one:" 1 ",other:" {{count}} "}},JV=(e,t,n)=>{let r;const s=QV[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?e==="halfAMinute"?""+r:" "+r:r+"":r},ZV={full:"EEEE do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},e7={full:"H:mm:ss . zzzz",long:"H:mm:ss . z",medium:"H:mm:ss .",short:"H:mm ."},t7={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},n7={date:Qi({formats:ZV,defaultWidth:"full"}),time:Qi({formats:e7,defaultWidth:"medium"}),dateTime:Qi({formats:t7,defaultWidth:"full"})},r7={lastWeek:"eeee'' p",yesterday:"'' p",today:"'' p",tomorrow:"'' p",nextWeek:"eeee '' p",other:"P"},s7=(e,t,n,r)=>r7[e],a7={narrow:["B",""],abbreviated:["BC",".."],wide:["",""]},i7={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["","","",""]},o7={narrow:[".",".",".",".",".",".","."],short:[".",".",".",".",".",".","."],abbreviated:[".",".",".",".",".",".","."],wide:["","","","","","",""]},l7={narrow:["..","..","..","..","..","..","..","..","..","..","..",".."],abbreviated:["..","..","..","..","..","..","..","..","..","..","..",".."],wide:["","","","","","","","","","","",""]},c7={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},u7={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},d7=(e,t)=>String(e),h7={ordinalNumber:d7,era:Mr({values:a7,defaultWidth:"wide"}),quarter:Mr({values:i7,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Mr({values:l7,defaultWidth:"wide"}),day:Mr({values:o7,defaultWidth:"wide"}),dayPeriod:Mr({values:c7,defaultWidth:"wide",formattingValues:u7,defaultFormattingWidth:"wide"})},f7=/^\d+/i,m7=/\d+/i,p7={narrow:/^([bB]|[aA]|)/i,abbreviated:/^([bB]\.?\s?[cC]\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?|\.?\.?)/i,wide:/^(||)/i},g7={any:[/^[bB]/i,/^(^[aA]|\.?\.?|||)/i]},y7={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^()? ?[1234]/i},v7={any:[/(1||)/i,/(2|)/i,/(3|)/i,/(4|)/i]},x7={narrow:/^(\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?)/i,abbreviated:/^(\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?|\.?\.?')/i,wide:/^(|||||||||||)/i},b7={wide:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i,/^\.?\.?/i]},w7={narrow:/^(\.?|\.?|\.?|\.?|\.?|\.?|\.?)/i,short:/^(\.?|\.?|\.?|\.?|\.?|\.?|\.?)/i,abbreviated:/^(\.?|\.?|\.?|\.?|\.?|\.?|\.?)/i,wide:/^(||||||)/i},S7={wide:[/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],any:[/^/i,/^/i,/^/i,/^(?!)/i,/^/i,/^/i,/^/i]},j7={any:/^(||||(.*?)?.*(||||))/i},k7={any:{am:/^/i,pm:/^/i,midnight:/^/i,noon:/^/i,morning://i,afternoon://i,evening://i,night://i}},C7={ordinalNumber:UN({matchPattern:f7,parsePattern:m7,valueCallback:e=>parseInt(e,10)}),era:Pr({matchPatterns:p7,defaultMatchWidth:"wide",parsePatterns:g7,defaultParseWidth:"any"}),quarter:Pr({matchPatterns:y7,defaultMatchWidth:"wide",parsePatterns:v7,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Pr({matchPatterns:x7,defaultMatchWidth:"wide",parsePatterns:b7,defaultParseWidth:"any"}),day:Pr({matchPatterns:w7,defaultMatchWidth:"wide",parsePatterns:S7,defaultParseWidth:"any"}),dayPeriod:Pr({matchPatterns:j7,defaultMatchWidth:"any",parsePatterns:k7,defaultParseWidth:"any"})},Js={code:"th",formatDistance:JV,formatLong:n7,formatRelative:s7,localize:h7,match:C7,options:{weekStartsOn:0,firstWeekContainsDate:1}};function N7(e){const[t,n]=p.useState(null),[r,s]=p.useState(!1);return p.useEffect(()=>{n(null),s(!1)},[e.id,e.notes,e.world,e.environments,e.threatLevel,e.entities]),{style:t,loading:r}}const Ai=new Map;let KN=0;const E7=250;function qN(){Ai.forEach((e,t)=>{if(!e.el){Ai.delete(t);return}const n=e.el.getBoundingClientRect();e.rect=n,e.center={x:n.left+n.width/2,y:n.top+n.height/2}}),KN=typeof performance<"u"?performance.now():Date.now()}function T7(e){e-KN>E7&&qN()}const M7={fog:{hue:200,saturation:20},sea:{hue:200,saturation:70},mountain:{hue:30,saturation:40},city:{hue:45,saturation:60},tunnel:{hue:280,saturation:30},rain:{hue:220,saturation:50},night:{hue:260,saturation:80},sunset:{hue:15,saturation:90}},cu={inactive:{brightness:.7,animSpeed:.3},activated:{brightness:1.2,animSpeed:.8},unknown:{brightness:.9,animSpeed:.5}},dw={none:"diagonal",helper:"circular",separation:"grid",wake:"radial",unknown:"noise"},uu={wake:{glow:"#60a5fa",symbol:""},separation:{glow:"#a78bfa",symbol:""},collapse:{glow:"#f87171",symbol:""},unknown:{glow:"#9ca3af",symbol:""}},hw={0:{base:"#064e3b",accent:"#34d399"},1:{base:"#1e3a5f",accent:"#60a5fa"},2:{base:"#312e81",accent:"#818cf8"},3:{base:"#581c87",accent:"#c084fc"},4:{base:"#7c2d12",accent:"#fb923c"},5:{base:"#7f1d1d",accent:"#f87171"}};function Xf(e){return e.split("").reduce((t,n,r)=>t+n.charCodeAt(0)*(r+1),0)}function Qf(e,t,n){return Math.min(n,Math.max(t,e))}function du(e){const t=e%360;return t<0?t+360:t}function P7(e){if(e==null)return null;if(e instanceof Date)return tl(e)?e:null;if(typeof e=="string"){const t=RV(e);if(tl(t))return t;const n=new Date(e);return tl(n)?n:null}if(typeof e=="number"){const t=new Date(e);return tl(t)?t:null}return null}function hu(e,t){const n=Math.min(1,Math.max(0,t));if(e.startsWith("hsla("))return e.replace(/hsla\(([^,]+),([^,]+),([^,]+),[^)]+\)/,`hsla($1,$2,$3,${n})`);if(e.startsWith("hsl("))return e.replace("hsl(","hsla(").replace(")",`, ${n})`);if(e.startsWith("rgba("))return e.replace(/rgba\(([^,]+),([^,]+),([^,]+),[^)]+\)/,`rgba($1,$2,$3,${n})`);if(e.startsWith("rgb("))return e.replace("rgb(","rgba(").replace(")",`, ${n})`);if(e.startsWith("#")){let r=e.slice(1);if(r.length===3&&(r=r.split("").map(s=>s+s).join("")),r.length>=6){const s=Math.round(n*255).toString(16).padStart(2,"0");return`#${r.slice(0,6)}${s}`}}return e}function _7(e,t){if(t){const S={dim:.6,normal:1,bright:1.2,glowing:1.5}[t.brightness]||1,j=Qf(t.saturation,0,100),k=Qf(t.saturation-10,0,100),N=Qf(j+20,0,90),E=du(t.primaryHue),C=du(t.secondaryHue),T=du(t.accentHue),M={waves:"diagonal",circles:"circular",stars:"radial",lines:"diagonal",dots:"grid",crystals:"radial",smoke:"noise",spiral:"circular"},O=`hsl(${E}, ${j}%, 25%)`,$=`hsl(${C}, ${k}%, 35%)`,R=`hsl(${T}, ${N}%, 60%)`;return{primary:O,secondary:$,accent:R,gradientAngle:du(t.gradientAngle),particleCount:20+e.threatLevel*4,patternType:M[t.pattern]||"grid",patternSeed:Xf(t.mood+t.symbolType),timeEffect:cu[e.timeSystem]||cu.unknown,exitStyle:uu[e.exit]||uu.unknown,brightness:S,animSpeed:t.particleStyle==="pulsing"?.8:t.particleStyle==="orbiting"?.6:.4,aiEnhanced:!0,aiMood:t.mood,aiSymbolType:t.symbolType,aiSymbolComplexity:t.symbolComplexity,aiSymbolRotation:t.symbolRotation,aiKeywords:t.keywords,particleStyle:t.particleStyle}}let n=240,r=50;if(e.environments&&e.environments.length>0){const v=e.environments.map(S=>M7[S]||{hue:200,saturation:50});n=v.reduce((S,j)=>S+j.hue,0)/v.length,r=v.reduce((S,j)=>S+j.saturation,0)/v.length}const s=hw[e.threatLevel]||hw[2],a=cu[e.timeSystem]||cu.unknown,i=dw[e.safetyOverride]||dw.unknown,l=uu[e.exit]||uu.unknown,c=e.entityCount,u=10+c*3+e.threatLevel*4,d=Xf(e.world||"unknown"),h=Xf(e.id),f=(d+h)%360,m=(n+e.threatLevel*15)%360,x=(m+30+c*10)%360,g=`hsl(${m}, ${Math.min(90,r+20)}%, ${25+e.threatLevel*3}%)`,b=`hsl(${x}, ${Math.min(85,r+10)}%, ${35+e.threatLevel*2}%)`,y=s.accent,w=d*h+e.threatLevel*100+c*50;return{primary:g,secondary:b,accent:y,gradientAngle:f,particleCount:u,patternType:i,patternSeed:w,timeEffect:a,exitStyle:l,brightness:a.brightness,animSpeed:a.animSpeed*(1+e.threatLevel*.15),aiEnhanced:!1,aiMood:null,aiSymbolType:null,aiSymbolComplexity:3,aiSymbolRotation:"slow",aiKeywords:[],particleStyle:"floating"}}function R7(e,t,n){const r=["dot"];return(e.includes("night")||e.includes("sunset"))&&r.push("star"),(e.includes("fog")||e.includes("sea"))&&r.push("ring"),t>=3&&r.push("triangle"),t>=4&&r.push("diamond"),n>0&&r.push("star","ring"),r}function YN({dream:e}){var fe,ve;const t=p.useRef(null),n=p.useRef(null),r=p.useRef(null),s=p.useRef([]),a=p.useRef([]),i=p.useRef(),l=p.useRef(0),c=p.useRef(0),u=p.useRef({width:0,height:0,fieldWidth:0,fieldHeight:0}),d=p.useRef(!0),h=e.id,f=e.world,m=e.threatLevel,x=e.timeSystem,g=e.safetyOverride,b=e.exit,y=(e.environments??[]).join("|"),w=((fe=e.entities)==null?void 0:fe.length)??0,v=p.useMemo(()=>P7(e.date),[e.date]),S=p.useMemo(()=>`dream-${h}`,[h]),{style:j}=N7(e),k=j!=null,N=j==null?void 0:j.primaryHue,E=j==null?void 0:j.secondaryHue,C=j==null?void 0:j.accentHue,T=j==null?void 0:j.saturation,M=j==null?void 0:j.brightness,O=j==null?void 0:j.pattern,$=j==null?void 0:j.particleStyle,R=j==null?void 0:j.gradientAngle,z=j==null?void 0:j.mood,D=j==null?void 0:j.symbolType,V=j==null?void 0:j.symbolComplexity,P=j==null?void 0:j.symbolRotation,_=((ve=j==null?void 0:j.keywords)==null?void 0:ve.join(""))??"",I=p.useMemo(()=>k?{mood:z??"",primaryHue:N??0,secondaryHue:E??0,accentHue:C??0,saturation:T??0,brightness:M??"normal",pattern:O??"dots",particleStyle:$??"floating",gradientAngle:R??0,symbolType:D??"moon",symbolComplexity:V??1,symbolRotation:P??"none",keywords:_?_.split(""):[]}:null,[k,z,N,E,C,T,M,O,$,R,D,V,P,_]),L=p.useMemo(()=>y?y.split("|"):[],[y]),H=p.useMemo(()=>({id:h,world:f,threatLevel:m,timeSystem:x,safetyOverride:g,exit:b,environments:L,entityCount:w}),[h,f,m,x,g,b,L,w]),U=p.useMemo(()=>_7(H,I),[H,I]),Z=p.useMemo(()=>R7(L,m,w),[L,m,w]),[q,ne]=p.useState(()=>({particleScale:.75,maxDpr:1.5,fps:30,spill:14,speedScale:1,enableSpill:!0,enablePattern:!0,enableMagnetic:!0,magneticStrength:.0026,magneticRadiusScale:1.1,enableFog:!0,fogLayerCount:4,fogSpeedScale:1,fogOpacity:1}));p.useEffect(()=>{var yt;if(typeof window>"u")return;const me=((yt=window.matchMedia)==null?void 0:yt.call(window,"(prefers-reduced-motion: reduce)").matches)??!1,ge=(navigator.hardwareConcurrency||8)<=4,Ne={particleScale:me?.35:ge?.55:.75,maxDpr:me?1:ge?1.25:1.5,fps:me?18:ge?24:30,spill:me?10:14,speedScale:me?.6:ge?.8:1,enableSpill:!me,enablePattern:!me,enableMagnetic:!me,magneticStrength:ge?.0018:.0026,magneticRadiusScale:ge?.9:1.1,enableFog:!me,fogLayerCount:ge?3:4,fogSpeedScale:ge?.8:1,fogOpacity:ge?.8:1};ne(Ot=>Object.keys(Ne).every(bn=>Ot[bn]===Ne[bn])?Ot:Ne)},[]);const A=q.spill,B=hu(U.accent,.45);p.useEffect(()=>{const me=r.current;if(me)return Ai.set(S,{el:me,rect:me.getBoundingClientRect(),center:{x:0,y:0}}),qN(),()=>{Ai.delete(S)}},[S]),p.useEffect(()=>{const me=t.current;if(!me)return;const ee=me.getContext("2d");if(!ee)return;const ge=n.current,Ne=q.enableSpill&&ge?ge.getContext("2d"):null,yt=()=>{if(!q.enableFog){a.current=[];return}const{width:W,height:Se}=u.current;if(!W||!Se){a.current=[];return}const X=[];for(let ue=0;ue<q.fogLayerCount;ue++){const ye=W*(.35+Math.random()*.35),Ce=Se*(.72+Math.random()*.18),Ee=Math.random()*W,nt=(Math.random()*.12+.04)*(Math.random()<.5?-1:1)*q.fogSpeedScale,We=(.06+Math.random()*.06)*q.fogOpacity,ds=hu(U.secondary,We);X.push({x:Ee,y:Ce,radius:ye,speed:nt,opacity:We,color:ds})}a.current=X},Ot=()=>{const W=me.getBoundingClientRect(),Se=Math.min(window.devicePixelRatio||1,q.maxDpr),X=W.width+A*2,ue=W.height+A*2;u.current={width:W.width,height:W.height,fieldWidth:X,fieldHeight:ue},me.width=W.width*Se,me.height=W.height*Se,ee.setTransform(1,0,0,1,0,0),ee.scale(Se,Se),ge&&Ne&&(ge.width=X*Se,ge.height=ue*Se,Ne.setTransform(1,0,0,1,0,0),Ne.scale(Se,Se)),yt()};Ot(),(()=>{const W=[],Se=Math.max(8,Math.round(U.particleCount*q.particleScale)),X=q.speedScale;for(let ue=0;ue<Se;ue++){const ye=(ue+U.patternSeed)%Z.length;W.push({x:Math.random()*u.current.fieldWidth,y:Math.random()*u.current.fieldHeight,vx:(Math.random()-.5)*U.animSpeed*X,vy:(Math.random()-.5)*U.animSpeed*X,size:Math.random()*2.8+.8+e.threatLevel*.25,opacity:Math.random()*.45+.25+(U.brightness-1)*.25,type:Z[ye],color:ue%3===0?U.accent:ue%3===1?U.secondary:"#ffffff"})}s.current=W})();const bn=(W,Se,X,ue)=>{W.save(),W.globalAlpha=.12*U.brightness,W.strokeStyle=U.accent,W.fillStyle=U.accent,W.lineWidth=.6;const ye=U.patternSeed;switch(U.patternType){case"diagonal":for(let Ce=0;Ce<12;Ce++){const Ee=(ye+Ce*20)%100-50+Math.sin(ue*.001+Ce)*5;W.beginPath(),W.moveTo(Ee,0),W.lineTo(Ee+Se,X),W.stroke()}break;case"circular":for(let Ce=1;Ce<=5;Ce++){const Ee=(Ce*30+Math.sin(ue*.002+Ce)*10)*(ye%3+1)/2;W.beginPath(),W.arc(Se/2,X/2,Ee,0,Math.PI*2),W.stroke()}break;case"grid":{const Ce=20+ye%20;for(let Ee=0;Ee<Se;Ee+=Ce)for(let nt=0;nt<X;nt+=Ce){const We=Math.sin(ue*.002+Ee*.01+nt*.01+ye*.01)*3;W.beginPath(),W.arc(Ee+We,nt+We,1.8,0,Math.PI*2),W.fill()}break}case"radial":{const Ce=8+ye%8;for(let Ee=0;Ee<Ce;Ee++){const nt=Ee/Ce*Math.PI*2+ue*.001,We=80+Math.sin(ue*.003+Ee)*20;W.beginPath(),W.moveTo(Se/2,X/2),W.lineTo(Se/2+Math.cos(nt)*We,X/2+Math.sin(nt)*We),W.stroke()}break}case"noise":for(let Ce=0;Ce<40;Ce++){const Ee=ye*Ce*7%Se,nt=ye*Ce*11%X+Math.sin(ue*.003+Ce)*2,We=(ye+Ce)%3+1;W.globalAlpha=(.05+(ye+Ce)%10*.01)*U.brightness,W.beginPath(),W.arc(Ee,nt,We,0,Math.PI*2),W.fill()}break}W.restore()},Ae=(W,Se,X)=>{const ue=(X==null?void 0:X.alpha)??1,ye=(X==null?void 0:X.blur)??1,Ce=(X==null?void 0:X.offsetX)??0,Ee=(X==null?void 0:X.offsetY)??0,nt=(X==null?void 0:X.color)??Se.color;W.save(),W.globalAlpha=Se.opacity*ue,W.fillStyle=nt,W.strokeStyle=nt,W.shadowBlur=Se.size*6*ye,W.shadowColor=nt;const{size:We,type:ds}=Se,rt=Se.x+Ce,He=Se.y+Ee;switch(ds){case"dot":W.beginPath(),W.arc(rt,He,We,0,Math.PI*2),W.fill();break;case"star":{const De=We*1.8;W.beginPath(),W.moveTo(rt,He-De),W.lineTo(rt+De*.3,He),W.lineTo(rt,He+De),W.lineTo(rt-De*.3,He),W.closePath(),W.fill(),W.beginPath(),W.moveTo(rt-De,He),W.lineTo(rt+De,He),W.moveTo(rt,He-De),W.lineTo(rt,He+De),W.lineWidth=.3,W.stroke();break}case"ring":W.beginPath(),W.arc(rt,He,We*1.5,0,Math.PI*2),W.lineWidth=.8,W.stroke();break;case"triangle":{const De=We*2;W.beginPath(),W.moveTo(rt,He-De),W.lineTo(rt+De*.866,He+De*.5),W.lineTo(rt-De*.866,He+De*.5),W.closePath(),W.fill();break}case"diamond":{const De=We*1.5;W.beginPath(),W.moveTo(rt,He-De),W.lineTo(rt+De,He),W.lineTo(rt,He+De),W.lineTo(rt-De,He),W.closePath(),W.fill();break}}W.restore()},kt=(W,Se,X,ue)=>{!q.enableFog||a.current.length===0||(W.save(),W.globalCompositeOperation="screen",a.current.forEach((ye,Ce)=>{ye.x+=ye.speed*ue,ye.x<-ye.radius&&(ye.x=Se+ye.radius),ye.x>Se+ye.radius&&(ye.x=-ye.radius);const Ee=Math.sin(l.current*4e-4+Ce)*X*.015,nt=ye.y+Ee,We=W.createRadialGradient(ye.x,nt,0,ye.x,nt,ye.radius);We.addColorStop(0,ye.color),We.addColorStop(1,"transparent"),W.fillStyle=We,W.fillRect(0,X*.6,Se,X*.4)}),W.restore())},dt=1e3/q.fps,an=W=>{if(document.hidden||!d.current){i.current=void 0;return}const Se=W-c.current;if(Se<dt){i.current=requestAnimationFrame(an);return}T7(W),c.current=W,l.current+=Se;const{width:X,height:ue,fieldWidth:ye,fieldHeight:Ce}=u.current;if(!X||!ue){i.current=requestAnimationFrame(an);return}ee.clearRect(0,0,X,ue),Ne&&Ne.clearRect(0,0,ye,Ce);const Ee=U.gradientAngle*Math.PI/180,nt=X/2-Math.cos(Ee)*X,We=ue/2-Math.sin(Ee)*ue,ds=X/2+Math.cos(Ee)*X,rt=ue/2+Math.sin(Ee)*ue,He=ee.createLinearGradient(nt,We,ds,rt);He.addColorStop(0,U.primary),He.addColorStop(.5,U.secondary),He.addColorStop(1,U.primary),ee.fillStyle=He,ee.fillRect(0,0,X,ue);const De=ee.createRadialGradient(X*.5,ue*.35,X*.05,X*.5,ue*.35,X*.95);De.addColorStop(0,hu(U.accent,.22)),De.addColorStop(.5,hu(U.secondary,.12)),De.addColorStop(1,"transparent"),ee.save(),ee.globalCompositeOperation="screen",ee.fillStyle=De,ee.fillRect(0,0,X,ue),ee.restore();const wn=ee.createLinearGradient(0,0,X,ue);wn.addColorStop(0,"rgba(255,255,255,0.18)"),wn.addColorStop(.35,"rgba(255,255,255,0.04)"),wn.addColorStop(.7,"rgba(255,255,255,0)"),ee.save(),ee.globalCompositeOperation="soft-light",ee.fillStyle=wn,ee.fillRect(0,0,X,ue),ee.restore();const ua=Se/16;q.enablePattern&&bn(ee,X,ue,l.current),kt(ee,X,ue,ua);let de=null,Pe=q.magneticStrength;if(q.enableMagnetic){const xe=Ai.get(S);if(xe){const on=Math.max(X,ue)*q.magneticRadiusScale;let qt=Number.POSITIVE_INFINITY,ft=null;Ai.forEach((Yt,Ec)=>{if(Ec===S)return;const rv=Yt.center.x-xe.center.x,sv=Yt.center.y-xe.center.y,Vh=Math.sqrt(rv*rv+sv*sv);Vh<qt&&Vh<on&&(qt=Vh,ft=Yt.center)}),ft&&(de={x:ft.x-xe.rect.left+A,y:ft.y-xe.rect.top+A},Pe*=1-qt/on)}}s.current.forEach(xe=>{if(de){const qt=de.x-xe.x,ft=de.y-xe.y,Yt=Math.max(1,Math.sqrt(qt*qt+ft*ft)),Ec=Pe*ua;xe.vx+=qt/Yt*Ec,xe.vy+=ft/Yt*Ec}const on=1-.002*ua;xe.vx*=on,xe.vy*=on,xe.x+=xe.vx*ua,xe.y+=xe.vy*ua,xe.x<0&&(xe.x=ye),xe.x>ye&&(xe.x=0),xe.y<0&&(xe.y=Ce),xe.y>Ce&&(xe.y=0),Ae(ee,xe,{offsetX:-A,offsetY:-A})}),Ne&&(Ne.save(),Ne.globalCompositeOperation="source-over",s.current.forEach(xe=>{Ae(Ne,xe,{alpha:.35,blur:.7})}),Ne.globalCompositeOperation="lighter",s.current.forEach(xe=>{Ae(Ne,xe,{alpha:.22,blur:1.6})}),Ne.restore());const Oe=ee.createRadialGradient(X/2,ue,0,X/2,ue,X*.6);Oe.addColorStop(0,U.exitStyle.glow+"20"),Oe.addColorStop(1,"transparent"),ee.fillStyle=Oe,ee.fillRect(0,0,X,ue);const $t=ee.createRadialGradient(X*.5,ue*.5,X*.2,X*.5,ue*.5,X*.85);$t.addColorStop(0,"rgba(0,0,0,0)"),$t.addColorStop(.6,"rgba(0,0,0,0.1)"),$t.addColorStop(1,"rgba(0,0,0,0.45)"),ee.fillStyle=$t,ee.fillRect(0,0,X,ue),i.current=requestAnimationFrame(an)},wr=()=>{i.current==null&&(c.current=performance.now(),i.current=requestAnimationFrame(an))},ht=()=>{i.current!=null&&(cancelAnimationFrame(i.current),i.current=void 0)};let It=null;typeof ResizeObserver<"u"?(It=new ResizeObserver(()=>{Ot()}),It.observe(me)):window.addEventListener("resize",Ot);let Vr=null;typeof IntersectionObserver<"u"&&(Vr=new IntersectionObserver(([W])=>{d.current=W.isIntersecting,W.isIntersecting&&!document.hidden?wr():ht()},{threshold:.2}),Vr.observe(me));const si=()=>{document.hidden?ht():d.current&&wr()};return document.addEventListener("visibilitychange",si),wr(),()=>{ht(),document.removeEventListener("visibilitychange",si),Vr==null||Vr.disconnect(),It==null||It.disconnect(),window.removeEventListener("resize",Ot)}},[U,Z,e.threatLevel,q,A,S]);const ae=e.environments&&e.environments.length>0,he=e.entities&&e.entities.length>0;return o.jsx(nn,{to:`/logs/${e.id}`,className:"group block",children:o.jsxs("div",{className:"relative",children:[o.jsx("canvas",{ref:n,className:"absolute z-30 pointer-events-none opacity-20 group-hover:opacity-45 transition-opacity duration-300",style:{top:-A,left:-A,width:`calc(100% + ${A*2}px)`,height:`calc(100% + ${A*2}px)`,display:q.enableSpill?"block":"none",mixBlendMode:"normal"}}),o.jsxs("div",{className:"aspect-[2/3] rounded-2xl overflow-hidden relative z-10 isolate transition-shadow duration-300 border border-white/10",style:{boxShadow:"0 6px 16px rgba(2, 6, 23, 0.18), 0 0 0 1px rgba(255, 255, 255, 0.06)"},ref:r,children:[o.jsx("canvas",{ref:t,className:"absolute inset-0 w-full h-full rounded-[inherit]",style:{width:"100%",height:"100%"}}),o.jsx("div",{className:"absolute inset-0 rounded-[inherit] bg-gradient-to-t from-black/80 via-black/30 to-black/10"}),o.jsx("div",{className:"absolute inset-0 rounded-[inherit] bg-gradient-to-br from-white/25 via-white/5 to-transparent opacity-70 mix-blend-screen pointer-events-none"}),o.jsx("div",{className:"absolute inset-0 rounded-[inherit] pointer-events-none shadow-[inset_0_0_0_1px_rgba(255,255,255,0.18),inset_0_-18px_32px_rgba(0,0,0,0.35)]"}),o.jsxs("div",{className:"absolute top-0 left-0 right-0 p-2 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-[8px] text-white/50 font-mono bg-black/30 px-1.5 py-0.5 rounded backdrop-blur-sm",children:e.id}),U.aiEnhanced&&o.jsxs("span",{className:"flex items-center gap-0.5 text-[8px] px-1.5 py-0.5 rounded backdrop-blur-sm bg-primary/30 text-primary-foreground",children:[o.jsx(fr,{className:"w-2 h-2"}),"AI"]})]}),o.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded-full backdrop-blur-sm",style:{backgroundColor:`${U.accent}30`},children:[o.jsx("span",{className:"text-[10px]",style:{color:U.accent},children:U.exitStyle.symbol}),o.jsxs("span",{className:"text-[9px] text-white/80 font-medium",children:["Lv.",e.threatLevel]})]})]}),e.timeSystem!=="unknown"&&o.jsx("div",{className:"absolute top-9 right-2",children:o.jsxs("div",{className:"flex items-center gap-0.5 px-1 py-0.5 rounded backdrop-blur-sm text-[8px]",style:{backgroundColor:e.timeSystem==="activated"?"rgba(96, 165, 250, 0.3)":"rgba(156, 163, 175, 0.2)",color:e.timeSystem==="activated"?"#60a5fa":"#9ca3af"},children:[o.jsx(Dr,{className:"w-2 h-2"}),e.timeSystem==="activated"?"ON":"OFF"]})}),o.jsxs("div",{className:"absolute inset-0 flex flex-col justify-end p-3",children:[o.jsx("h3",{className:"font-bold text-base sm:text-lg text-center leading-snug text-white drop-shadow-lg line-clamp-2 mb-2",children:e.world||"Unknown"}),o.jsxs("div",{className:"flex flex-wrap gap-1 justify-center mb-2",children:[ae&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] px-1.5 py-0.5 rounded-full backdrop-blur-sm",style:{backgroundColor:`${U.accent}20`,color:U.accent},children:[o.jsx(ss,{className:"w-2 h-2"}),e.environments.length]}),he&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] px-1.5 py-0.5 rounded-full backdrop-blur-sm",style:{backgroundColor:`${U.accent}20`,color:U.accent},children:[o.jsx(fn,{className:"w-2 h-2"}),e.entities.length]}),e.safetyOverride!=="none"&&e.safetyOverride!=="unknown"&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] px-1.5 py-0.5 rounded-full backdrop-blur-sm",style:{backgroundColor:"rgba(167, 139, 250, 0.2)",color:"#a78bfa"},children:[o.jsx(mc,{className:"w-2 h-2"}),e.safetyOverride]}),e.exit!=="unknown"&&o.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] px-1.5 py-0.5 rounded-full backdrop-blur-sm",style:{backgroundColor:`${U.exitStyle.glow}20`,color:U.exitStyle.glow},children:[o.jsx(cA,{className:"w-2 h-2"}),e.exit]})]}),o.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-1.5",children:[o.jsx("div",{className:"h-px w-4 bg-gradient-to-r from-transparent to-white/40"}),o.jsx("div",{className:"w-1 h-1 rounded-full",style:{backgroundColor:U.accent}}),o.jsx("div",{className:"h-px w-4 bg-gradient-to-l from-transparent to-white/40"})]}),o.jsxs("div",{className:"text-center space-y-0.5",children:[o.jsx("p",{className:"text-[10px] text-white/60 font-light tracking-wider",children:v?Ut(v,"d MMM yyyy",{locale:Js}):"-"}),e.wakeTime&&o.jsx("p",{className:"text-[9px] text-white/40",children:e.wakeTime})]})]}),o.jsx("div",{className:"absolute inset-0 rounded-[inherit] bg-gradient-to-tr from-transparent via-white/0 to-transparent group-hover:via-white/20 transition-all duration-700 transform translate-x-full group-hover:translate-x-0"}),o.jsx("div",{className:"absolute inset-0 rounded-[inherit] opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",style:{boxShadow:`inset 0 0 40px ${B}`}})]})]})})}function XN({children:e,className:t="",staggerDelay:n=80,animationDuration:r=400}){const[s,a]=p.useState(new Set),[i,l]=p.useState(!1);return p.useEffect(()=>{if(i){a(new Set(e.map((u,d)=>d)));return}a(new Set);const c=[];return e.forEach((u,d)=>{const h=setTimeout(()=>{a(f=>new Set([...f,d])),d===e.length-1&&setTimeout(()=>l(!0),r)},d*n);c.push(h)}),()=>{c.forEach(clearTimeout)}},[e,n,r,i]),o.jsx("div",{className:`grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 ${t}`,children:e.map((c,u)=>o.jsx("div",{className:"transition-all",style:{opacity:s.has(u)?1:0,marginTop:s.has(u)?"0px":"12px",transitionProperty:"opacity, margin-top",transitionDuration:`${r}ms`,transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:c},u))})}function fu({title:e,dreams:t,colorClass:n,isExpanded:r,onToggle:s}){return t.length===0?null:o.jsxs("section",{className:"bg-card rounded-lg border",children:[o.jsxs("button",{onClick:s,className:"w-full flex items-center justify-between p-4 hover:bg-accent/50 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-1 h-8 ${n} rounded-full`}),o.jsxs("div",{className:"text-left",children:[o.jsx("h2",{className:"text-sm font-semibold",children:e}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.length," "]})]})]}),r?o.jsx(qs,{className:"w-5 h-5 text-muted-foreground"}):o.jsx(gr,{className:"w-5 h-5 text-muted-foreground"})]}),r&&o.jsx("div",{className:"p-4 pt-0 relative overflow-hidden isolate",children:o.jsx(XN,{staggerDelay:60,animationDuration:350,children:t.map(a=>o.jsx(YN,{dream:a},a.id))})})]})}function A7({worldName:e,dreams:t,isExpanded:n,onToggle:r}){return o.jsxs("section",{className:"bg-card rounded-lg border",children:[o.jsxs("button",{onClick:r,className:"w-full flex items-center justify-between p-4 hover:bg-accent/50 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(z5,{className:"w-5 h-5 text-primary"}),o.jsxs("div",{className:"text-left",children:[o.jsx("h2",{className:"text-sm font-semibold",children:e}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.length," "]})]})]}),n?o.jsx(qs,{className:"w-5 h-5 text-muted-foreground"}):o.jsx(gr,{className:"w-5 h-5 text-muted-foreground"})]}),n&&o.jsx("div",{className:"p-4 pt-0 relative overflow-hidden isolate",children:o.jsx(XN,{staggerDelay:60,animationDuration:350,children:t.map(s=>o.jsx(YN,{dream:s},s.id))})})]})}function D7({searchQuery:e,onSearchChange:t,groupBy:n,onGroupByChange:r,totalDreams:s,currentPhenomenon:a,showDreamFilters:i=!0}){return o.jsx("header",{className:"sticky top-0 z-10 bg-background border-b",children:o.jsxs("div",{className:"px-4 py-3",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Dream Library"}),a&&o.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5 flex items-center gap-2",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:a.uiAccent}}),a.name]}),o.jsxs("span",{className:"opacity-60",children:["(",a.rarity,")"]})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs("div",{className:"text-sm text-muted-foreground",children:[s," "]})})]}),i&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative mb-3",children:[o.jsx(H5,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),o.jsx(Tt,{placeholder:"...",value:e,onChange:l=>t(l.target.value),className:"pl-10"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>r("date"),className:Y("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",n==="date"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:text-foreground"),children:[o.jsx(L5,{className:"w-4 h-4"}),""]}),o.jsxs("button",{onClick:()=>r("world"),className:Y("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",n==="world"?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:text-foreground"),children:[o.jsx(z5,{className:"w-4 h-4"}),""]})]})]})]})})}const my=p.createContext({});function py(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const Rh=p.createContext(null),gy=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class O7 extends p.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function I7({children:e,isPresent:t}){const n=p.useId(),r=p.useRef(null),s=p.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=p.useContext(gy);return p.useInsertionEffect(()=>{const{width:i,height:l,top:c,left:u}=s.current;if(t||!r.current||!i||!l)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return a&&(d.nonce=a),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),o.jsx(O7,{isPresent:t,childRef:r,sizeRef:s,children:p.cloneElement(e,{ref:r})})}const $7=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:i})=>{const l=py(L7),c=p.useId(),u=p.useCallback(h=>{l.set(h,!0);for(const f of l.values())if(!f)return;r&&r()},[l,r]),d=p.useMemo(()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:u,register:h=>(l.set(h,!1),()=>l.delete(h))}),a?[Math.random(),u]:[n,u]);return p.useMemo(()=>{l.forEach((h,f)=>l.set(f,!1))},[n]),p.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),i==="popLayout"&&(e=o.jsx(I7,{isPresent:n,children:e})),o.jsx(Rh.Provider,{value:d,children:e})};function L7(){return new Map}function QN(e=!0){const t=p.useContext(Rh);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=p.useId();p.useEffect(()=>{e&&s(a)},[e]);const i=p.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,i]:[!0]}const mu=e=>e.key||"";function fw(e){const t=[];return p.Children.forEach(e,n=>{p.isValidElement(n)&&t.push(n)}),t}const yy=typeof window<"u",JN=yy?p.useLayoutEffect:p.useEffect,mw=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1})=>{const[l,c]=QN(i),u=p.useMemo(()=>fw(e),[e]),d=i&&!l?[]:u.map(mu),h=p.useRef(!0),f=p.useRef(u),m=py(()=>new Map),[x,g]=p.useState(u),[b,y]=p.useState(u);JN(()=>{h.current=!1,f.current=u;for(let S=0;S<b.length;S++){const j=mu(b[S]);d.includes(j)?m.delete(j):m.get(j)!==!0&&m.set(j,!1)}},[b,d.length,d.join("-")]);const w=[];if(u!==x){let S=[...u];for(let j=0;j<b.length;j++){const k=b[j],N=mu(k);d.includes(N)||(S.splice(j,0,k),w.push(k))}a==="wait"&&w.length&&(S=w),y(fw(S)),g(u);return}const{forceRender:v}=p.useContext(my);return o.jsx(o.Fragment,{children:b.map(S=>{const j=mu(S),k=i&&!l?!1:u===b||d.includes(j),N=()=>{if(m.has(j))m.set(j,!0);else return;let E=!0;m.forEach(C=>{C||(E=!1)}),E&&(v==null||v(),y(f.current),i&&(c==null||c()),r&&r())};return o.jsx($7,{isPresent:k,initial:!h.current||n?void 0:!1,custom:k?void 0:t,presenceAffectsLayout:s,mode:a,onExitComplete:k?void 0:N,children:S},j)})})},Rn=e=>e;let ZN=Rn;function vy(e){let t;return()=>(t===void 0&&(t=e()),t)}const vo=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Jr=e=>e*1e3,Zr=e=>e/1e3,F7={useManualTiming:!1};function z7(e){let t=new Set,n=new Set,r=!1,s=!1;const a=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function l(u){a.has(u)&&(c.schedule(u),e()),u(i)}const c={schedule:(u,d=!1,h=!1)=>{const m=h&&r?t:n;return d&&a.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(i=u,r){s=!0;return}r=!0,[t,n]=[n,t],t.forEach(l),t.clear(),r=!1,s&&(s=!1,c.process(u))}};return c}const pu=["read","resolveKeyframes","update","preRender","render","postRender"],B7=40;function eE(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=pu.reduce((y,w)=>(y[w]=z7(a),y),{}),{read:l,resolveKeyframes:c,update:u,preRender:d,render:h,postRender:f}=i,m=()=>{const y=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(y-s.timestamp,B7),1),s.timestamp=y,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(m))},x=()=>{n=!0,r=!0,s.isProcessing||e(m)};return{schedule:pu.reduce((y,w)=>{const v=i[w];return y[w]=(S,j=!1,k=!1)=>(n||x(),v.schedule(S,j,k)),y},{}),cancel:y=>{for(let w=0;w<pu.length;w++)i[pu[w]].cancel(y)},state:s,steps:i}}const{schedule:Ue,cancel:Zs,state:Rt,steps:Jf}=eE(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rn,!0),tE=p.createContext({strict:!1}),pw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xo={};for(const e in pw)xo[e]={isEnabled:t=>pw[e].some(n=>!!t[n])};function V7(e){for(const t in e)xo[t]={...xo[t],...e[t]}}const U7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _d(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||U7.has(e)}let nE=e=>!_d(e);function W7(e){e&&(nE=t=>t.startsWith("on")?!_d(t):e(t))}try{W7(require("@emotion/is-prop-valid").default)}catch{}function H7(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(nE(s)||n===!0&&_d(s)||!t&&!_d(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function G7(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const Ah=p.createContext({});function Zl(e){return typeof e=="string"||Array.isArray(e)}function Dh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const xy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],by=["initial",...xy];function Oh(e){return Dh(e.animate)||by.some(t=>Zl(e[t]))}function rE(e){return!!(Oh(e)||e.variants)}function K7(e,t){if(Oh(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Zl(n)?n:void 0,animate:Zl(r)?r:void 0}}return e.inherit!==!1?t:{}}function q7(e){const{initial:t,animate:n}=K7(e,p.useContext(Ah));return p.useMemo(()=>({initial:t,animate:n}),[gw(t),gw(n)])}function gw(e){return Array.isArray(e)?e.join(" "):e}const Y7=Symbol.for("motionComponentSymbol");function Di(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function X7(e,t,n){return p.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Di(n)&&(n.current=r))},[t])}const wy=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Q7="framerAppearId",sE="data-"+wy(Q7),{schedule:Sy}=eE(queueMicrotask,!1),aE=p.createContext({});function J7(e,t,n,r,s){var a,i;const{visualElement:l}=p.useContext(Ah),c=p.useContext(tE),u=p.useContext(Rh),d=p.useContext(gy).reducedMotion,h=p.useRef(null);r=r||c.renderer,!h.current&&r&&(h.current=r(e,{visualState:t,parent:l,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const f=h.current,m=p.useContext(aE);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&Z7(h.current,n,s,m);const x=p.useRef(!1);p.useInsertionEffect(()=>{f&&x.current&&f.update(n,u)});const g=n[sE],b=p.useRef(!!g&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,g))&&((i=window.MotionHasOptimisedAnimation)===null||i===void 0?void 0:i.call(window,g)));return JN(()=>{f&&(x.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Sy.render(f.render),b.current&&f.animationState&&f.animationState.animateChanges())}),p.useEffect(()=>{f&&(!b.current&&f.animationState&&f.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,g)}),b.current=!1))}),f}function Z7(e,t,n,r){const{layoutId:s,layout:a,drag:i,dragConstraints:l,layoutScroll:c,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:iE(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||l&&Di(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:u})}function iE(e){if(e)return e.options.allowProjection!==!1?e.projection:iE(e.parent)}function eU({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){var a,i;e&&V7(e);function l(u,d){let h;const f={...p.useContext(gy),...u,layoutId:tU(u)},{isStatic:m}=f,x=q7(u),g=r(u,m);if(!m&&yy){nU();const b=rU(f);h=b.MeasureLayout,x.visualElement=J7(s,g,f,t,b.ProjectionNode)}return o.jsxs(Ah.Provider,{value:x,children:[h&&x.visualElement?o.jsx(h,{visualElement:x.visualElement,...f}):null,n(s,u,X7(g,x.visualElement,d),g,m,x.visualElement)]})}l.displayName=`motion.${typeof s=="string"?s:`create(${(i=(a=s.displayName)!==null&&a!==void 0?a:s.name)!==null&&i!==void 0?i:""})`}`;const c=p.forwardRef(l);return c[Y7]=s,c}function tU({layoutId:e}){const t=p.useContext(my).id;return t&&e!==void 0?t+"-"+e:e}function nU(e,t){p.useContext(tE).strict}function rU(e){const{drag:t,layout:n}=xo;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const sU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jy(e){return typeof e!="string"||e.includes("-")?!1:!!(sU.indexOf(e)>-1||/[A-Z]/u.test(e))}function yw(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function ky(e,t,n,r){if(typeof t=="function"){const[s,a]=yw(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=yw(r);t=t(n!==void 0?n:e.custom,s,a)}return t}const t0=e=>Array.isArray(e),aU=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),iU=e=>t0(e)?e[e.length-1]||0:e,Gt=e=>!!(e&&e.getVelocity);function Lu(e){const t=Gt(e)?e.get():e;return aU(t)?t.toValue():t}function oU({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,s,a){const i={latestValues:lU(r,s,a,e),renderState:t()};return n&&(i.onMount=l=>n({props:r,current:l,...i}),i.onUpdate=l=>n(l)),i}const oE=e=>(t,n)=>{const r=p.useContext(Ah),s=p.useContext(Rh),a=()=>oU(e,t,r,s);return n?a():py(a)};function lU(e,t,n,r){const s={},a=r(e,{});for(const f in a)s[f]=Lu(a[f]);let{initial:i,animate:l}=e;const c=Oh(e),u=rE(e);t&&u&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const h=d?l:i;if(h&&typeof h!="boolean"&&!Dh(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const x=ky(e,f[m]);if(x){const{transitionEnd:g,transition:b,...y}=x;for(const w in y){let v=y[w];if(Array.isArray(v)){const S=d?v.length-1:0;v=v[S]}v!==null&&(s[w]=v)}for(const w in g)s[w]=g[w]}}}return s}const _o=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ri=new Set(_o),lE=e=>t=>typeof t=="string"&&t.startsWith(e),cE=lE("--"),cU=lE("var(--"),Cy=e=>cU(e)?uU.test(e.split("/*")[0].trim()):!1,uU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uE=(e,t)=>t&&typeof e=="number"?t.transform(e):e,ls=(e,t,n)=>n>t?t:n<e?e:n,Ro={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ec={...Ro,transform:e=>ls(0,1,e)},gu={...Ro,default:1},Sc=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),vs=Sc("deg"),$r=Sc("%"),oe=Sc("px"),dU=Sc("vh"),hU=Sc("vw"),vw={...$r,parse:e=>$r.parse(e)/100,transform:e=>$r.transform(e*100)},fU={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,backgroundPositionX:oe,backgroundPositionY:oe},mU={rotate:vs,rotateX:vs,rotateY:vs,rotateZ:vs,scale:gu,scaleX:gu,scaleY:gu,scaleZ:gu,skew:vs,skewX:vs,skewY:vs,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:ec,originX:vw,originY:vw,originZ:oe},xw={...Ro,transform:Math.round},Ny={...fU,...mU,zIndex:xw,size:oe,fillOpacity:ec,strokeOpacity:ec,numOctaves:xw},pU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},gU=_o.length;function yU(e,t,n){let r="",s=!0;for(let a=0;a<gU;a++){const i=_o[a],l=e[i];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(i.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=uE(l,Ny[i]);if(!c){s=!1;const d=pU[i]||i;r+=`${d}(${u}) `}n&&(t[i]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function Ey(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let i=!1,l=!1;for(const c in t){const u=t[c];if(ri.has(c)){i=!0;continue}else if(cE(c)){s[c]=u;continue}else{const d=uE(u,Ny[c]);c.startsWith("origin")?(l=!0,a[c]=d):r[c]=d}}if(t.transform||(i||n?r.transform=yU(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${u} ${d}`}}const vU={offset:"stroke-dashoffset",array:"stroke-dasharray"},xU={offset:"strokeDashoffset",array:"strokeDasharray"};function bU(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?vU:xU;e[a.offset]=oe.transform(-r);const i=oe.transform(t),l=oe.transform(n);e[a.array]=`${i} ${l}`}function bw(e,t,n){return typeof e=="string"?e:oe.transform(t+n*e)}function wU(e,t,n){const r=bw(t,e.x,e.width),s=bw(n,e.y,e.height);return`${r} ${s}`}function Ty(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:a,pathLength:i,pathSpacing:l=1,pathOffset:c=0,...u},d,h){if(Ey(e,u,h),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:m,dimensions:x}=e;f.transform&&(x&&(m.transform=f.transform),delete f.transform),x&&(s!==void 0||a!==void 0||m.transform)&&(m.transformOrigin=wU(x,s!==void 0?s:.5,a!==void 0?a:.5)),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&bU(f,i,l,c,!1)}const My=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),dE=()=>({...My(),attrs:{}}),Py=e=>typeof e=="string"&&e.toLowerCase()==="svg";function hE(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const fE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mE(e,t,n,r){hE(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(fE.has(s)?s:wy(s),t.attrs[s])}const Rd={};function SU(e){Object.assign(Rd,e)}function pE(e,{layout:t,layoutId:n}){return ri.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Rd[e]||e==="opacity")}function _y(e,t,n){var r;const{style:s}=e,a={};for(const i in s)(Gt(s[i])||t.style&&Gt(t.style[i])||pE(i,e)||((r=n==null?void 0:n.getValue(i))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[i]=s[i]);return a}function gE(e,t,n){const r=_y(e,t,n);for(const s in e)if(Gt(e[s])||Gt(t[s])){const a=_o.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}function jU(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const ww=["x","y","width","height","cx","cy","r"],kU={useVisualState:oE({scrapeMotionValuesFromProps:gE,createRenderState:dE,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:s})=>{if(!n)return;let a=!!e.drag;if(!a){for(const l in s)if(ri.has(l)){a=!0;break}}if(!a)return;let i=!t;if(t)for(let l=0;l<ww.length;l++){const c=ww[l];e[c]!==t[c]&&(i=!0)}i&&Ue.read(()=>{jU(n,r),Ue.render(()=>{Ty(r,s,Py(n.tagName),e.transformTemplate),mE(n,r)})})}})},CU={useVisualState:oE({scrapeMotionValuesFromProps:_y,createRenderState:My})};function yE(e,t,n){for(const r in t)!Gt(t[r])&&!pE(r,n)&&(e[r]=t[r])}function NU({transformTemplate:e},t){return p.useMemo(()=>{const n=My();return Ey(n,t,e),Object.assign({},n.vars,n.style)},[t])}function EU(e,t){const n=e.style||{},r={};return yE(r,n,e),Object.assign(r,NU(e,t)),r}function TU(e,t){const n={},r=EU(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function MU(e,t,n,r){const s=p.useMemo(()=>{const a=dE();return Ty(a,t,Py(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};yE(a,e.style,e),s.style={...a,...s.style}}return s}function PU(e=!1){return(n,r,s,{latestValues:a},i)=>{const c=(jy(n)?MU:TU)(r,a,i,n),u=H7(r,typeof n=="string",e),d=n!==p.Fragment?{...u,...c,ref:s}:{},{children:h}=r,f=p.useMemo(()=>Gt(h)?h.get():h,[h]);return p.createElement(n,{...d,children:f})}}function _U(e,t){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const i={...jy(r)?kU:CU,preloadedFeatures:e,useRender:PU(s),createVisualElement:t,Component:r};return eU(i)}}function vE(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Ih(e,t,n){const r=e.getProps();return ky(r,t,n!==void 0?n:r.custom,e)}const RU=vy(()=>window.ScrollTimeline!==void 0);class AU{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(s=>{if(RU()&&s.attachTimeline)return s.attachTimeline(t);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,a)=>{s&&s(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class DU extends AU{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function Ry(e,t){return e?e[t]||e.default||e:void 0}const n0=2e4;function xE(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<n0;)t+=n,r=e.next(t);return t>=n0?1/0:t}function Ay(e){return typeof e=="function"}function Sw(e,t){e.timeline=t,e.onfinish=null}const Dy=e=>Array.isArray(e)&&typeof e[0]=="number",OU={linearEasing:void 0};function IU(e,t){const n=vy(e);return()=>{var r;return(r=OU[t])!==null&&r!==void 0?r:n()}}const Ad=IU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),bE=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=e(vo(0,s-1,a))+", ";return`linear(${r.substring(0,r.length-2)})`};function wE(e){return!!(typeof e=="function"&&Ad()||!e||typeof e=="string"&&(e in r0||Ad())||Dy(e)||Array.isArray(e)&&e.every(wE))}const nl=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,r0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nl([0,.65,.55,1]),circOut:nl([.55,0,1,.45]),backIn:nl([.31,.01,.66,-.59]),backOut:nl([.33,1.53,.69,.99])};function SE(e,t){if(e)return typeof e=="function"&&Ad()?bE(e,t):Dy(e)?nl(e):Array.isArray(e)?e.map(n=>SE(n,t)||r0.easeOut):r0[e]}const tr={x:!1,y:!1};function jE(){return tr.x||tr.y}function $U(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let s=document;const a=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function kE(e,t){const n=$U(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function jw(e){return t=>{t.pointerType==="touch"||jE()||e(t)}}function LU(e,t,n={}){const[r,s,a]=kE(e,n),i=jw(l=>{const{target:c}=l,u=t(l);if(typeof u!="function"||!c)return;const d=jw(h=>{u(h),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,s)});return r.forEach(l=>{l.addEventListener("pointerenter",i,s)}),a}const CE=(e,t)=>t?e===t?!0:CE(e,t.parentElement):!1,Oy=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,FU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zU(e){return FU.has(e.tagName)||e.tabIndex!==-1}const rl=new WeakSet;function kw(e){return t=>{t.key==="Enter"&&e(t)}}function Zf(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const BU=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=kw(()=>{if(rl.has(n))return;Zf(n,"down");const s=kw(()=>{Zf(n,"up")}),a=()=>Zf(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function Cw(e){return Oy(e)&&!jE()}function VU(e,t,n={}){const[r,s,a]=kE(e,n),i=l=>{const c=l.currentTarget;if(!Cw(l)||rl.has(c))return;rl.add(c);const u=t(l),d=(m,x)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),!(!Cw(m)||!rl.has(c))&&(rl.delete(c),typeof u=="function"&&u(m,{success:x}))},h=m=>{d(m,n.useGlobalTarget||CE(c,m.target))},f=m=>{d(m,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return r.forEach(l=>{!zU(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(n.useGlobalTarget?window:l).addEventListener("pointerdown",i,s),l.addEventListener("focus",u=>BU(u,s),s)}),a}function UU(e){return e==="x"||e==="y"?tr[e]?null:(tr[e]=!0,()=>{tr[e]=!1}):tr.x||tr.y?null:(tr.x=tr.y=!0,()=>{tr.x=tr.y=!1})}const NE=new Set(["width","height","top","left","right","bottom",..._o]);let Fu;function WU(){Fu=void 0}const Lr={now:()=>(Fu===void 0&&Lr.set(Rt.isProcessing||F7.useManualTiming?Rt.timestamp:performance.now()),Fu),set:e=>{Fu=e,queueMicrotask(WU)}};function Iy(e,t){e.indexOf(t)===-1&&e.push(t)}function $y(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Ly{constructor(){this.subscriptions=[]}add(t){return Iy(this.subscriptions,t),()=>$y(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function EE(e,t){return t?e*(1e3/t):0}const Nw=30,HU=e=>!isNaN(parseFloat(e));class GU{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const a=Lr.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Lr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=HU(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Ly);const r=this.events[t].add(n);return t==="change"?()=>{r(),Ue.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Lr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Nw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Nw);return EE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tc(e,t){return new GU(e,t)}function KU(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,tc(n))}function qU(e,t){const n=Ih(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const i in a){const l=iU(a[i]);KU(e,i,l)}}function YU(e){return!!(Gt(e)&&e.add)}function s0(e,t){const n=e.getValue("willChange");if(YU(n))return n.add(t)}function TE(e){return e.props[sE]}const ME=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,XU=1e-7,QU=12;function JU(e,t,n,r,s){let a,i,l=0;do i=t+(n-t)/2,a=ME(i,r,s)-e,a>0?n=i:t=i;while(Math.abs(a)>XU&&++l<QU);return i}function jc(e,t,n,r){if(e===t&&n===r)return Rn;const s=a=>JU(a,0,1,e,n);return a=>a===0||a===1?a:ME(s(a),t,r)}const PE=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,_E=e=>t=>1-e(1-t),RE=jc(.33,1.53,.69,.99),Fy=_E(RE),AE=PE(Fy),DE=e=>(e*=2)<1?.5*Fy(e):.5*(2-Math.pow(2,-10*(e-1))),zy=e=>1-Math.sin(Math.acos(e)),OE=_E(zy),IE=PE(zy),$E=e=>/^0[^.\s]+$/u.test(e);function ZU(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||$E(e):!0}const xl=e=>Math.round(e*1e5)/1e5,By=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function eW(e){return e==null}const tW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Vy=(e,t)=>n=>!!(typeof n=="string"&&tW.test(n)&&n.startsWith(e)||t&&!eW(n)&&Object.prototype.hasOwnProperty.call(n,t)),LE=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,a,i,l]=r.match(By);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(i),alpha:l!==void 0?parseFloat(l):1}},nW=e=>ls(0,255,e),em={...Ro,transform:e=>Math.round(nW(e))},Ta={test:Vy("rgb","red"),parse:LE("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+em.transform(e)+", "+em.transform(t)+", "+em.transform(n)+", "+xl(ec.transform(r))+")"};function rW(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const a0={test:Vy("#"),parse:rW,transform:Ta.transform},Oi={test:Vy("hsl","hue"),parse:LE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+$r.transform(xl(t))+", "+$r.transform(xl(n))+", "+xl(ec.transform(r))+")"},Vt={test:e=>Ta.test(e)||a0.test(e)||Oi.test(e),parse:e=>Ta.test(e)?Ta.parse(e):Oi.test(e)?Oi.parse(e):a0.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ta.transform(e):Oi.transform(e)},sW=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function aW(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(By))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(sW))===null||n===void 0?void 0:n.length)||0)>0}const FE="number",zE="color",iW="var",oW="var(",Ew="${}",lW=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function nc(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const l=t.replace(lW,c=>(Vt.test(c)?(r.color.push(a),s.push(zE),n.push(Vt.parse(c))):c.startsWith(oW)?(r.var.push(a),s.push(iW),n.push(c)):(r.number.push(a),s.push(FE),n.push(parseFloat(c))),++a,Ew)).split(Ew);return{values:n,split:l,indexes:r,types:s}}function BE(e){return nc(e).values}function VE(e){const{split:t,types:n}=nc(e),r=t.length;return s=>{let a="";for(let i=0;i<r;i++)if(a+=t[i],s[i]!==void 0){const l=n[i];l===FE?a+=xl(s[i]):l===zE?a+=Vt.transform(s[i]):a+=s[i]}return a}}const cW=e=>typeof e=="number"?0:e;function uW(e){const t=BE(e);return VE(e)(t.map(cW))}const ea={test:aW,parse:BE,createTransformer:VE,getAnimatableNone:uW},dW=new Set(["brightness","contrast","saturate","opacity"]);function hW(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(By)||[];if(!r)return e;const s=n.replace(r,"");let a=dW.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const fW=/\b([a-z-]*)\(.*?\)/gu,i0={...ea,getAnimatableNone:e=>{const t=e.match(fW);return t?t.map(hW).join(" "):e}},mW={...Ny,color:Vt,backgroundColor:Vt,outlineColor:Vt,fill:Vt,stroke:Vt,borderColor:Vt,borderTopColor:Vt,borderRightColor:Vt,borderBottomColor:Vt,borderLeftColor:Vt,filter:i0,WebkitFilter:i0},Uy=e=>mW[e];function UE(e,t){let n=Uy(e);return n!==i0&&(n=ea),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const pW=new Set(["auto","none","0"]);function gW(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!pW.has(a)&&nc(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=UE(n,s)}const Tw=e=>e===Ro||e===oe,Mw=(e,t)=>parseFloat(e.split(", ")[t]),Pw=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return Mw(s[1],t);{const a=r.match(/^matrix\((.+)\)$/u);return a?Mw(a[1],e):0}},yW=new Set(["x","y","z"]),vW=_o.filter(e=>!yW.has(e));function xW(e){const t=[];return vW.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const bo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Pw(4,13),y:Pw(5,14)};bo.translateX=bo.x;bo.translateY=bo.y;const Fa=new Set;let o0=!1,l0=!1;function WE(){if(l0){const e=Array.from(Fa).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=xW(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,i])=>{var l;(l=r.getValue(a))===null||l===void 0||l.set(i)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}l0=!1,o0=!1,Fa.forEach(e=>e.complete()),Fa.clear()}function HE(){Fa.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(l0=!0)})}function bW(){HE(),WE()}class Wy{constructor(t,n,r,s,a,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Fa.add(this),o0||(o0=!0,Ue.read(HE),Ue.resolveKeyframes(WE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const i=s==null?void 0:s.get(),l=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const c=r.readValue(n,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),s&&i===void 0&&s.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Fa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Fa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const GE=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),wW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function SW(e){const t=wW.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function KE(e,t,n=1){const[r,s]=SW(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const i=a.trim();return GE(i)?parseFloat(i):i}return Cy(s)?KE(s,t,n+1):s}const qE=e=>t=>t.test(e),jW={test:e=>e==="auto",parse:e=>e},YE=[Ro,oe,$r,vs,hU,dU,jW],_w=e=>YE.find(qE(e));class XE extends Wy{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),Cy(u))){const d=KE(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!NE.has(r)||t.length!==2)return;const[s,a]=t,i=_w(s),l=_w(a);if(i!==l)if(Tw(i)&&Tw(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)ZU(t[s])&&r.push(s);r.length&&gW(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const i=s.length-1,l=s[i];s[i]=bo[r](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,u])=>{n.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const Rw=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ea.test(e)||e==="0")&&!e.startsWith("url("));function kW(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function CW(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=Rw(s,t),l=Rw(a,t);return!i||!l?!1:kW(e)||(n==="spring"||Ay(n))&&r}const NW=e=>e!==null;function $h(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(NW),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const EW=40;class QE{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Lr.now(),this.options={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:i,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>EW?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&bW(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Lr.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:a,delay:i,onComplete:l,onUpdate:c,isGenerator:u}=this.options;if(!u&&!CW(t,r,s,a))if(i)this.options.duration=0;else{c&&c($h(t,this.options,n)),l&&l(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,n);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Je=(e,t,n)=>e+(t-e)*n;function tm(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function TW({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,i=0;if(!t)s=a=i=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=tm(c,l,e+1/3),a=tm(c,l,e),i=tm(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:r}}function Dd(e,t){return n=>n>0?t:e}const nm=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},MW=[a0,Ta,Oi],PW=e=>MW.find(t=>t.test(e));function Aw(e){const t=PW(e);if(!t)return!1;let n=t.parse(e);return t===Oi&&(n=TW(n)),n}const Dw=(e,t)=>{const n=Aw(e),r=Aw(t);if(!n||!r)return Dd(e,t);const s={...n};return a=>(s.red=nm(n.red,r.red,a),s.green=nm(n.green,r.green,a),s.blue=nm(n.blue,r.blue,a),s.alpha=Je(n.alpha,r.alpha,a),Ta.transform(s))},_W=(e,t)=>n=>t(e(n)),kc=(...e)=>e.reduce(_W),c0=new Set(["none","hidden"]);function RW(e,t){return c0.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function AW(e,t){return n=>Je(e,t,n)}function Hy(e){return typeof e=="number"?AW:typeof e=="string"?Cy(e)?Dd:Vt.test(e)?Dw:IW:Array.isArray(e)?JE:typeof e=="object"?Vt.test(e)?Dw:DW:Dd}function JE(e,t){const n=[...e],r=n.length,s=e.map((a,i)=>Hy(a)(a,t[i]));return a=>{for(let i=0;i<r;i++)n[i]=s[i](a);return n}}function DW(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Hy(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function OW(e,t){var n;const r=[],s={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],l=e.indexes[i][s[i]],c=(n=e.values[l])!==null&&n!==void 0?n:0;r[a]=c,s[i]++}return r}const IW=(e,t)=>{const n=ea.createTransformer(t),r=nc(e),s=nc(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?c0.has(e)&&!s.values.length||c0.has(t)&&!r.values.length?RW(e,t):kc(JE(OW(r,s),s.values),n):Dd(e,t)};function ZE(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Je(e,t,n):Hy(e)(e,t)}const $W=5;function eT(e,t,n){const r=Math.max(t-$W,0);return EE(n-e(r),t-r)}const it={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},rm=.001;function LW({duration:e=it.duration,bounce:t=it.bounce,velocity:n=it.velocity,mass:r=it.mass}){let s,a,i=1-t;i=ls(it.minDamping,it.maxDamping,i),e=ls(it.minDuration,it.maxDuration,Zr(e)),i<1?(s=u=>{const d=u*i,h=d*e,f=d-n,m=u0(u,i),x=Math.exp(-h);return rm-f/m*x},a=u=>{const h=u*i*e,f=h*n+n,m=Math.pow(i,2)*Math.pow(u,2)*e,x=Math.exp(-h),g=u0(Math.pow(u,2),i);return(-s(u)+rm>0?-1:1)*((f-m)*x)/g}):(s=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-rm+d*h},a=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=zW(s,a,l);if(e=Jr(e),isNaN(c))return{stiffness:it.stiffness,damping:it.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:i*2*Math.sqrt(r*u),duration:e}}}const FW=12;function zW(e,t,n){let r=n;for(let s=1;s<FW;s++)r=r-e(r)/t(r);return r}function u0(e,t){return e*Math.sqrt(1-t*t)}const BW=["duration","bounce"],VW=["stiffness","damping","mass"];function Ow(e,t){return t.some(n=>e[n]!==void 0)}function UW(e){let t={velocity:it.velocity,stiffness:it.stiffness,damping:it.damping,mass:it.mass,isResolvedFromDuration:!1,...e};if(!Ow(e,VW)&&Ow(e,BW))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*ls(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:it.mass,stiffness:s,damping:a}}else{const n=LW(e);t={...t,...n,mass:it.mass},t.isResolvedFromDuration=!0}return t}function tT(e=it.visualDuration,t=it.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=UW({...n,velocity:-Zr(n.velocity||0)}),x=f||0,g=u/(2*Math.sqrt(c*d)),b=i-a,y=Zr(Math.sqrt(c/d)),w=Math.abs(b)<5;r||(r=w?it.restSpeed.granular:it.restSpeed.default),s||(s=w?it.restDelta.granular:it.restDelta.default);let v;if(g<1){const j=u0(y,g);v=k=>{const N=Math.exp(-g*y*k);return i-N*((x+g*y*b)/j*Math.sin(j*k)+b*Math.cos(j*k))}}else if(g===1)v=j=>i-Math.exp(-y*j)*(b+(x+y*b)*j);else{const j=y*Math.sqrt(g*g-1);v=k=>{const N=Math.exp(-g*y*k),E=Math.min(j*k,300);return i-N*((x+g*y*b)*Math.sinh(E)+j*b*Math.cosh(E))/j}}const S={calculatedDuration:m&&h||null,next:j=>{const k=v(j);if(m)l.done=j>=h;else{let N=0;g<1&&(N=j===0?Jr(x):eT(v,j,k));const E=Math.abs(N)<=r,C=Math.abs(i-k)<=s;l.done=E&&C}return l.value=l.done?i:k,l},toString:()=>{const j=Math.min(xE(S),n0),k=bE(N=>S.next(j*N).value,j,30);return j+"ms "+k}};return S}function Iw({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},m=E=>l!==void 0&&E<l||c!==void 0&&E>c,x=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let g=n*t;const b=h+g,y=i===void 0?b:i(b);y!==b&&(g=y-h);const w=E=>-g*Math.exp(-E/r),v=E=>y+w(E),S=E=>{const C=w(E),T=v(E);f.done=Math.abs(C)<=u,f.value=f.done?y:T};let j,k;const N=E=>{m(f.value)&&(j=E,k=tT({keyframes:[f.value,x(f.value)],velocity:eT(v,E,f.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:E=>{let C=!1;return!k&&j===void 0&&(C=!0,S(E),N(E)),j!==void 0&&E>=j?k.next(E-j):(!C&&S(E),f)}}}const WW=jc(.42,0,1,1),HW=jc(0,0,.58,1),nT=jc(.42,0,.58,1),GW=e=>Array.isArray(e)&&typeof e[0]!="number",KW={linear:Rn,easeIn:WW,easeInOut:nT,easeOut:HW,circIn:zy,circInOut:IE,circOut:OE,backIn:Fy,backInOut:AE,backOut:RE,anticipate:DE},$w=e=>{if(Dy(e)){ZN(e.length===4);const[t,n,r,s]=e;return jc(t,n,r,s)}else if(typeof e=="string")return KW[e];return e};function qW(e,t,n){const r=[],s=n||ZE,a=e.length-1;for(let i=0;i<a;i++){let l=s(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||Rn:t;l=kc(c,l)}r.push(l)}return r}function YW(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(ZN(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=qW(t,r,s),c=l.length,u=d=>{if(i&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=vo(e[h],e[h+1],d);return l[h](f)};return n?d=>u(ls(e[0],e[a-1],d)):u}function XW(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=vo(0,t,r);e.push(Je(n,1,s))}}function QW(e){const t=[0];return XW(t,e.length-1),t}function JW(e,t){return e.map(n=>n*t)}function ZW(e,t){return e.map(()=>t||nT).splice(0,e.length-1)}function Od({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=GW(r)?r.map($w):$w(r),a={done:!1,value:t[0]},i=JW(n&&n.length===t.length?n:QW(t),e),l=YW(i,t,{ease:Array.isArray(s)?s:ZW(t,s)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}const eH=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Ue.update(t,!0),stop:()=>Zs(t),now:()=>Rt.isProcessing?Rt.timestamp:Lr.now()}},tH={decay:Iw,inertia:Iw,tween:Od,keyframes:Od,spring:tT},nH=e=>e/100;class Gy extends QE{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:s,keyframes:a}=this.options,i=(s==null?void 0:s.KeyframeResolver)||Wy,l=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new i(a,l,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=this.options,l=Ay(n)?n:tH[n]||Od;let c,u;l!==Od&&typeof t[0]!="number"&&(c=kc(nH,ZE(t[0],t[1])),t=[0,100]);const d=l({...this.options,keyframes:t});a==="mirror"&&(u=l({...this.options,keyframes:[...t].reverse(),velocity:-i})),d.calculatedDuration===null&&(d.calculatedDuration=xE(d));const{calculatedDuration:h}=d,f=h+s,m=f*(r+1)-s;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:s,generator:a,mirroredGenerator:i,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:h}=r;if(this.startTime===null)return a.next(0);const{delay:f,repeat:m,repeatType:x,repeatDelay:g,onUpdate:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const y=this.currentTime-f*(this.speed>=0?1:-1),w=this.speed>=0?y<0:y>d;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let v=this.currentTime,S=a;if(m){const E=Math.min(this.currentTime,d)/h;let C=Math.floor(E),T=E%1;!T&&E>=1&&(T=1),T===1&&C--,C=Math.min(C,m+1),!!(C%2)&&(x==="reverse"?(T=1-T,g&&(T-=g/h)):x==="mirror"&&(S=i)),v=ls(0,1,T)*h}const j=w?{done:!1,value:c[0]}:S.next(v);l&&(j.value=l(j.value));let{done:k}=j;!w&&u!==null&&(k=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return N&&s!==void 0&&(j.value=$h(c,this.options,s)),b&&b(j.value),N&&this.finish(),j}get duration(){const{resolved:t}=this;return t?Zr(t.calculatedDuration):0}get time(){return Zr(this.currentTime)}set time(t){t=Jr(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Zr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=eH,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const rH=new Set(["opacity","clipPath","filter","transform"]);function sH(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:l="easeInOut",times:c}={}){const u={[t]:n};c&&(u.offset=c);const d=SE(l,s);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"})}const aH=vy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Id=10,iH=2e4;function oH(e){return Ay(e.type)||e.type==="spring"||!wE(e.ease)}function lH(e,t){const n=new Gy({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const s=[];let a=0;for(;!r.done&&a<iH;)r=n.sample(a),s.push(r.value),a+=Id;return{times:void 0,keyframes:s,duration:a-Id,ease:"linear"}}const rT={anticipate:DE,backInOut:AE,circInOut:IE};function cH(e){return e in rT}class Lw extends QE{constructor(t){super(t);const{name:n,motionValue:r,element:s,keyframes:a}=this.options;this.resolver=new XE(a,(i,l)=>this.onKeyframesResolved(i,l),n,r,s),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:s,ease:a,type:i,motionValue:l,name:c,startTime:u}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof a=="string"&&Ad()&&cH(a)&&(a=rT[a]),oH(this.options)){const{onComplete:h,onUpdate:f,motionValue:m,element:x,...g}=this.options,b=lH(t,g);t=b.keyframes,t.length===1&&(t[1]=t[0]),r=b.duration,s=b.times,a=b.ease,i="keyframes"}const d=sH(l.owner.current,c,t,{...this.options,duration:r,times:s,ease:a});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(Sw(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;l.set($h(t,this.options,n)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:s,type:i,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Zr(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Zr(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Jr(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Rn;const{animation:r}=n;Sw(r,t)}return Rn}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:s,type:a,ease:i,times:l}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:h,element:f,...m}=this.options,x=new Gy({...m,keyframes:r,duration:s,type:a,ease:i,times:l,isGenerator:!0}),g=Jr(this.time);u.setWithVelocity(x.sample(g-Id).value,x.sample(g).value,Id)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:s,repeatType:a,damping:i,type:l}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=n.owner.getProps();return aH()&&r&&rH.has(r)&&!c&&!u&&!s&&a!=="mirror"&&i!==0&&l!=="inertia"}}const uH={type:"spring",stiffness:500,damping:25,restSpeed:10},dH=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),hH={type:"keyframes",duration:.8},fH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mH=(e,{keyframes:t})=>t.length>2?hH:ri.has(e)?e.startsWith("scale")?dH(t[1]):uH:fH;function pH({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Ky=(e,t,n,r={},s,a)=>i=>{const l=Ry(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Jr(c);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{i(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:s};pH(l)||(d={...d,...mH(e,d)}),d.duration&&(d.duration=Jr(d.duration)),d.repeatDelay&&(d.repeatDelay=Jr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!a&&t.get()!==void 0){const f=$h(d.keyframes,l);if(f!==void 0)return Ue.update(()=>{d.onUpdate(f),d.onComplete()}),new DU([])}return!a&&Lw.supports(d)?new Lw(d):new Gy(d)};function gH({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function sT(e,t,{delay:n=0,transitionOverride:r,type:s}={}){var a;let{transition:i=e.getDefaultTransition(),transitionEnd:l,...c}=t;r&&(i=r);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const h in c){const f=e.getValue(h,(a=e.latestValues[h])!==null&&a!==void 0?a:null),m=c[h];if(m===void 0||d&&gH(d,h))continue;const x={delay:n,...Ry(i||{},h)};let g=!1;if(window.MotionHandoffAnimation){const y=TE(e);if(y){const w=window.MotionHandoffAnimation(y,h,Ue);w!==null&&(x.startTime=w,g=!0)}}s0(e,h),f.start(Ky(h,f,m,e.shouldReduceMotion&&NE.has(h)?{type:!1}:x,e,g));const b=f.animation;b&&u.push(b)}return l&&Promise.all(u).then(()=>{Ue.update(()=>{l&&qU(e,l)})}),u}function d0(e,t,n={}){var r;const s=Ih(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const i=s?()=>Promise.all(sT(e,s,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=a;return yH(e,t,d+u,h,f,n)}:()=>Promise.resolve(),{when:c}=a;if(c){const[u,d]=c==="beforeChildren"?[i,l]:[l,i];return u().then(()=>d())}else return Promise.all([i(),l(n.delay)])}function yH(e,t,n=0,r=0,s=1,a){const i=[],l=(e.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>l-u*r;return Array.from(e.variantChildren).sort(vH).forEach((u,d)=>{u.notify("AnimationStart",t),i.push(d0(u,t,{...a,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(i)}function vH(e,t){return e.sortNodePosition(t)}function xH(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>d0(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=d0(e,t,n);else{const s=typeof t=="function"?Ih(e,t,n.custom):t;r=Promise.all(sT(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const bH=by.length;function aT(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?aT(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<bH;n++){const r=by[n],s=e.props[r];(Zl(s)||s===!1)&&(t[r]=s)}return t}const wH=[...xy].reverse(),SH=xy.length;function jH(e){return t=>Promise.all(t.map(({animation:n,options:r})=>xH(e,n,r)))}function kH(e){let t=jH(e),n=Fw(),r=!0;const s=c=>(u,d)=>{var h;const f=Ih(e,d,c==="exit"?(h=e.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:m,transitionEnd:x,...g}=f;u={...u,...g,...x}}return u};function a(c){t=c(e)}function i(c){const{props:u}=e,d=aT(e.parent)||{},h=[],f=new Set;let m={},x=1/0;for(let b=0;b<SH;b++){const y=wH[b],w=n[y],v=u[y]!==void 0?u[y]:d[y],S=Zl(v),j=y===c?w.isActive:null;j===!1&&(x=b);let k=v===d[y]&&v!==u[y]&&S;if(k&&r&&e.manuallyAnimateOnMount&&(k=!1),w.protectedKeys={...m},!w.isActive&&j===null||!v&&!w.prevProp||Dh(v)||typeof v=="boolean")continue;const N=CH(w.prevProp,v);let E=N||y===c&&w.isActive&&!k&&S||b>x&&S,C=!1;const T=Array.isArray(v)?v:[v];let M=T.reduce(s(y),{});j===!1&&(M={});const{prevResolvedValues:O={}}=w,$={...O,...M},R=V=>{E=!0,f.has(V)&&(C=!0,f.delete(V)),w.needsAnimating[V]=!0;const P=e.getValue(V);P&&(P.liveStyle=!1)};for(const V in $){const P=M[V],_=O[V];if(m.hasOwnProperty(V))continue;let I=!1;t0(P)&&t0(_)?I=!vE(P,_):I=P!==_,I?P!=null?R(V):f.add(V):P!==void 0&&f.has(V)?R(V):w.protectedKeys[V]=!0}w.prevProp=v,w.prevResolvedValues=M,w.isActive&&(m={...m,...M}),r&&e.blockInitialAnimation&&(E=!1),E&&(!(k&&N)||C)&&h.push(...T.map(V=>({animation:V,options:{type:y}})))}if(f.size){const b={};f.forEach(y=>{const w=e.getBaseTarget(y),v=e.getValue(y);v&&(v.liveStyle=!0),b[y]=w??null}),h.push({animation:b})}let g=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(g=!1),r=!1,g?t(h):Promise.resolve()}function l(c,u){var d;if(n[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(c,u)}),n[c].isActive=u;const h=i(c);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:i,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Fw(),r=!0}}}function CH(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!vE(t,e):!1}function ma(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Fw(){return{animate:ma(!0),whileInView:ma(),whileHover:ma(),whileTap:ma(),whileDrag:ma(),whileFocus:ma(),exit:ma()}}class ca{constructor(t){this.isMounted=!1,this.node=t}update(){}}class NH extends ca{constructor(t){super(t),t.animationState||(t.animationState=kH(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Dh(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let EH=0;class TH extends ca{constructor(){super(...arguments),this.id=EH++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const MH={animation:{Feature:NH},exit:{Feature:TH}};function rc(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Cc(e){return{point:{x:e.pageX,y:e.pageY}}}const PH=e=>t=>Oy(t)&&e(t,Cc(t));function bl(e,t,n,r){return rc(e,t,PH(n),r)}const zw=(e,t)=>Math.abs(e-t);function _H(e,t){const n=zw(e.x,t.x),r=zw(e.y,t.y);return Math.sqrt(n**2+r**2)}class iT{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=am(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=_H(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:x}=h,{timestamp:g}=Rt;this.history.push({...x,timestamp:g});const{onStart:b,onMove:y}=this.handlers;f||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=sm(f,this.transformPagePoint),Ue.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:x,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=am(h.type==="pointercancel"?this.lastMoveEventInfo:sm(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,b),x&&x(h,b)},!Oy(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const i=Cc(t),l=sm(i,this.transformPagePoint),{point:c}=l,{timestamp:u}=Rt;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,am(l,this.history)),this.removeListeners=kc(bl(this.contextWindow,"pointermove",this.handlePointerMove),bl(this.contextWindow,"pointerup",this.handlePointerUp),bl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Zs(this.updatePoint)}}function sm(e,t){return t?{point:t(e.point)}:e}function Bw(e,t){return{x:e.x-t.x,y:e.y-t.y}}function am({point:e},t){return{point:e,delta:Bw(e,oT(t)),offset:Bw(e,RH(t)),velocity:AH(t,.1)}}function RH(e){return e[0]}function oT(e){return e[e.length-1]}function AH(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=oT(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Jr(t)));)n--;if(!r)return{x:0,y:0};const a=Zr(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}const lT=1e-4,DH=1-lT,OH=1+lT,cT=.01,IH=0-cT,$H=0+cT;function Dn(e){return e.max-e.min}function LH(e,t,n){return Math.abs(e-t)<=n}function Vw(e,t,n,r=.5){e.origin=r,e.originPoint=Je(t.min,t.max,e.origin),e.scale=Dn(n)/Dn(t),e.translate=Je(n.min,n.max,e.origin)-e.originPoint,(e.scale>=DH&&e.scale<=OH||isNaN(e.scale))&&(e.scale=1),(e.translate>=IH&&e.translate<=$H||isNaN(e.translate))&&(e.translate=0)}function wl(e,t,n,r){Vw(e.x,t.x,n.x,r?r.originX:void 0),Vw(e.y,t.y,n.y,r?r.originY:void 0)}function Uw(e,t,n){e.min=n.min+t.min,e.max=e.min+Dn(t)}function FH(e,t,n){Uw(e.x,t.x,n.x),Uw(e.y,t.y,n.y)}function Ww(e,t,n){e.min=t.min-n.min,e.max=e.min+Dn(t)}function Sl(e,t,n){Ww(e.x,t.x,n.x),Ww(e.y,t.y,n.y)}function zH(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Je(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Je(n,e,r.max):Math.min(e,n)),e}function Hw(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function BH(e,{top:t,left:n,bottom:r,right:s}){return{x:Hw(e.x,n,s),y:Hw(e.y,t,r)}}function Gw(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function VH(e,t){return{x:Gw(e.x,t.x),y:Gw(e.y,t.y)}}function UH(e,t){let n=.5;const r=Dn(e),s=Dn(t);return s>r?n=vo(t.min,t.max-r,e.min):r>s&&(n=vo(e.min,e.max-s,t.min)),ls(0,1,n)}function WH(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const h0=.35;function HH(e=h0){return e===!1?e=0:e===!0&&(e=h0),{x:Kw(e,"left","right"),y:Kw(e,"top","bottom")}}function Kw(e,t,n){return{min:qw(e,t),max:qw(e,n)}}function qw(e,t){return typeof e=="number"?e:e[t]||0}const Yw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ii=()=>({x:Yw(),y:Yw()}),Xw=()=>({min:0,max:0}),ct=()=>({x:Xw(),y:Xw()});function zn(e){return[e("x"),e("y")]}function uT({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function GH({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function KH(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function im(e){return e===void 0||e===1}function f0({scale:e,scaleX:t,scaleY:n}){return!im(e)||!im(t)||!im(n)}function xa(e){return f0(e)||dT(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function dT(e){return Qw(e.x)||Qw(e.y)}function Qw(e){return e&&e!=="0%"}function $d(e,t,n){const r=e-n,s=t*r;return n+s}function Jw(e,t,n,r,s){return s!==void 0&&(e=$d(e,s,r)),$d(e,n,r)+t}function m0(e,t=0,n=1,r,s){e.min=Jw(e.min,t,n,r,s),e.max=Jw(e.max,t,n,r,s)}function hT(e,{x:t,y:n}){m0(e.x,t.translate,t.scale,t.originPoint),m0(e.y,n.translate,n.scale,n.originPoint)}const Zw=.999999999999,e1=1.0000000000001;function qH(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,i;for(let l=0;l<s;l++){a=n[l],i=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Li(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,hT(e,i)),r&&xa(a.latestValues)&&Li(e,a.latestValues))}t.x<e1&&t.x>Zw&&(t.x=1),t.y<e1&&t.y>Zw&&(t.y=1)}function $i(e,t){e.min=e.min+t,e.max=e.max+t}function t1(e,t,n,r,s=.5){const a=Je(e.min,e.max,s);m0(e,t,n,a,r)}function Li(e,t){t1(e.x,t.x,t.scaleX,t.scale,t.originX),t1(e.y,t.y,t.scaleY,t.scale,t.originY)}function fT(e,t){return uT(KH(e.getBoundingClientRect(),t))}function YH(e,t,n){const r=fT(e,n),{scroll:s}=t;return s&&($i(r.x,s.offset.x),$i(r.y,s.offset.y)),r}const mT=({current:e})=>e?e.ownerDocument.defaultView:null,XH=new WeakMap;class QH{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ct(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Cc(d).point)},a=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:x}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=UU(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zn(b=>{let y=this.getAxisMotionValue(b).get()||0;if($r.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const v=w.layout.layoutBox[b];v&&(y=Dn(v)*(parseFloat(y)/100))}}this.originPoint[b]=y}),x&&Ue.postRender(()=>x(d,h)),s0(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},i=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:x,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:b}=h;if(m&&this.currentDirection===null){this.currentDirection=JH(b),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),g&&g(d,h)},l=(d,h)=>this.stop(d,h),c=()=>zn(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new iT(t,{onSessionStart:s,onStart:a,onMove:i,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:mT(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&Ue.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!yu(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=zH(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&Di(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=BH(s.layoutBox,n):this.constraints=!1,this.elastic=HH(r),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&zn(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=WH(s.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Di(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=YH(r,s.root,this.visualElement.getTransformPagePoint());let i=VH(s.layout.layoutBox,a);if(n){const l=n(GH(i));this.hasMutatedConstraints=!!l,l&&(i=uT(l))}return i}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=zn(d=>{if(!yu(d,n,this.currentDirection))return;let h=c&&c[d]||{};i&&(h={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,x={type:"inertia",velocity:r?t[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return s0(this.visualElement,t),r.start(Ky(t,r,0,n,this.visualElement,!1))}stopAnimation(){zn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){zn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){zn(n=>{const{drag:r}=this.getProps();if(!yu(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:i,max:l}=s.layout.layoutBox[n];a.set(t[n]-Je(i,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Di(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};zn(i=>{const l=this.getAxisMotionValue(i);if(l&&this.constraints!==!1){const c=l.get();s[i]=UH({min:c,max:c},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zn(i=>{if(!yu(i,t,null))return;const l=this.getAxisMotionValue(i),{min:c,max:u}=this.constraints[i];l.set(Je(c,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;XH.set(this.visualElement,this);const t=this.visualElement.current,n=bl(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Di(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ue.read(r);const i=rc(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(zn(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{i(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=h0,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:l}}}function yu(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function JH(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class ZH extends ca{constructor(t){super(t),this.removeGroupControls=Rn,this.removeListeners=Rn,this.controls=new QH(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rn}unmount(){this.removeGroupControls(),this.removeListeners()}}const n1=e=>(t,n)=>{e&&Ue.postRender(()=>e(t,n))};class eG extends ca{constructor(){super(...arguments),this.removePointerDownListener=Rn}onPointerDown(t){this.session=new iT(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mT(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:n1(t),onStart:n1(n),onMove:r,onEnd:(a,i)=>{delete this.session,s&&Ue.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=bl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const zu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function r1(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Go={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(oe.test(e))e=parseFloat(e);else return e;const n=r1(e,t.target.x),r=r1(e,t.target.y);return`${n}% ${r}%`}},tG={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=ea.parse(e);if(s.length>5)return r;const a=ea.createTransformer(e),i=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+i]/=l,s[1+i]/=c;const u=Je(l,c,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};class nG extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;SU(rG),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),zu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,i=r.projection;return i&&(i.isPresent=a,s||t.layoutDependency!==n||n===void 0?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||Ue.postRender(()=>{const l=i.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Sy.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function pT(e){const[t,n]=QN(),r=p.useContext(my);return o.jsx(nG,{...e,layoutGroup:r,switchLayoutGroup:p.useContext(aE),isPresent:t,safeToRemove:n})}const rG={borderRadius:{...Go,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Go,borderTopRightRadius:Go,borderBottomLeftRadius:Go,borderBottomRightRadius:Go,boxShadow:tG};function sG(e,t,n){const r=Gt(e)?e:tc(e);return r.start(Ky("",r,t,n)),r.animation}function aG(e){return e instanceof SVGElement&&e.tagName!=="svg"}const iG=(e,t)=>e.depth-t.depth;class oG{constructor(){this.children=[],this.isDirty=!1}add(t){Iy(this.children,t),this.isDirty=!0}remove(t){$y(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(iG),this.isDirty=!1,this.children.forEach(t)}}function lG(e,t){const n=Lr.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(Zs(r),e(a-t))};return Ue.read(r,!0),()=>Zs(r)}const gT=["TopLeft","TopRight","BottomLeft","BottomRight"],cG=gT.length,s1=e=>typeof e=="string"?parseFloat(e):e,a1=e=>typeof e=="number"||oe.test(e);function uG(e,t,n,r,s,a){s?(e.opacity=Je(0,n.opacity!==void 0?n.opacity:1,dG(r)),e.opacityExit=Je(t.opacity!==void 0?t.opacity:1,0,hG(r))):a&&(e.opacity=Je(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let i=0;i<cG;i++){const l=`border${gT[i]}Radius`;let c=i1(t,l),u=i1(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||a1(c)===a1(u)?(e[l]=Math.max(Je(s1(c),s1(u),r),0),($r.test(u)||$r.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=Je(t.rotate||0,n.rotate||0,r))}function i1(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const dG=yT(0,.5,OE),hG=yT(.5,.95,Rn);function yT(e,t,n){return r=>r<e?0:r>t?1:n(vo(e,t,r))}function o1(e,t){e.min=t.min,e.max=t.max}function Fn(e,t){o1(e.x,t.x),o1(e.y,t.y)}function l1(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function c1(e,t,n,r,s){return e-=t,e=$d(e,1/n,r),s!==void 0&&(e=$d(e,1/s,r)),e}function fG(e,t=0,n=1,r=.5,s,a=e,i=e){if($r.test(t)&&(t=parseFloat(t),t=Je(i.min,i.max,t/100)-i.min),typeof t!="number")return;let l=Je(a.min,a.max,r);e===a&&(l-=t),e.min=c1(e.min,t,n,l,s),e.max=c1(e.max,t,n,l,s)}function u1(e,t,[n,r,s],a,i){fG(e,t[n],t[r],t[s],t.scale,a,i)}const mG=["x","scaleX","originX"],pG=["y","scaleY","originY"];function d1(e,t,n,r){u1(e.x,t,mG,n?n.x:void 0,r?r.x:void 0),u1(e.y,t,pG,n?n.y:void 0,r?r.y:void 0)}function h1(e){return e.translate===0&&e.scale===1}function vT(e){return h1(e.x)&&h1(e.y)}function f1(e,t){return e.min===t.min&&e.max===t.max}function gG(e,t){return f1(e.x,t.x)&&f1(e.y,t.y)}function m1(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function xT(e,t){return m1(e.x,t.x)&&m1(e.y,t.y)}function p1(e){return Dn(e.x)/Dn(e.y)}function g1(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class yG{constructor(){this.members=[]}add(t){Iy(this.members,t),t.scheduleRender()}remove(t){if($y(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vG(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=(n==null?void 0:n.z)||0;if((s||a||i)&&(r=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:x}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),f&&(r+=`rotateY(${f}deg) `),m&&(r+=`skewX(${m}deg) `),x&&(r+=`skewY(${x}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const ba={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},sl=typeof window<"u"&&window.MotionDebug!==void 0,om=["","X","Y","Z"],xG={visibility:"hidden"},y1=1e3;let bG=0;function lm(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function bT(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=TE(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ue,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&bT(r)}function wT({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(i={},l=t==null?void 0:t()){this.id=bG++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,sl&&(ba.totalNodes=ba.resolvedTargetDeltas=ba.recalculatedProjection=0),this.nodes.forEach(jG),this.nodes.forEach(TG),this.nodes.forEach(MG),this.nodes.forEach(kG),sl&&window.MotionDebug.record(ba)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new oG)}addEventListener(i,l){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new Ly),this.eventHandlers.get(i).add(l)}notifyListeners(i,...l){const c=this.eventHandlers.get(i);c&&c.notify(...l)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=aG(i),this.instance=i;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(i,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=lG(f,250),zu.hasAnimatedSinceResize&&(zu.hasAnimatedSinceResize=!1,this.nodes.forEach(x1))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||DG,{onLayoutAnimationStart:b,onLayoutAnimationComplete:y}=d.getProps(),w=!this.targetLayout||!xT(this.targetLayout,x)||m,v=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,v);const S={...Ry(g,"layout"),onPlay:b,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||x1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Zs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PG),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&bT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(v1);return}this.isUpdating||this.nodes.forEach(NG),this.isUpdating=!1,this.nodes.forEach(EG),this.nodes.forEach(wG),this.nodes.forEach(SG),this.clearAllSnapshots();const l=Lr.now();Rt.delta=ls(0,1e3/60,l-Rt.timestamp),Rt.timestamp=l,Rt.isProcessing=!0,Jf.update.process(Rt),Jf.preRender.process(Rt),Jf.render.process(Rt),Rt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Sy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(CG),this.sharedNodes.forEach(_G)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ue.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ue.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ct(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(l=!1),l){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!vT(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&(l||xa(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return i&&(c=this.removeTransform(c)),OG(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:l}=this.options;if(!l)return ct();const c=l.measureViewportBox();if(!(((i=this.scroll)===null||i===void 0?void 0:i.wasRoot)||this.path.some(IG))){const{scroll:d}=this.root;d&&($i(c.x,d.offset.x),$i(c.y,d.offset.y))}return c}removeElementScroll(i){var l;const c=ct();if(Fn(c,i),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Fn(c,i),$i(c.x,h.offset.x),$i(c.y,h.offset.y))}return c}applyTransform(i,l=!1){const c=ct();Fn(c,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Li(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),xa(d.latestValues)&&Li(c,d.latestValues)}return xa(this.latestValues)&&Li(c,this.latestValues),c}removeTransform(i){const l=ct();Fn(l,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!xa(u.latestValues))continue;f0(u.latestValues)&&u.updateSnapshot();const d=ct(),h=u.measurePageBox();Fn(d,h),d1(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return xa(this.latestValues)&&d1(l,this.latestValues),l}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Rt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(i||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Rt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),Sl(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ct(),this.targetWithTransforms=ct()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),FH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fn(this.target,this.layout.layoutBox),hT(this.target,this.targetDelta)):Fn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ct(),this.relativeTargetOrigin=ct(),Sl(this.relativeTargetOrigin,this.target,m.target),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}sl&&ba.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||f0(this.parent.latestValues)||dT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Rt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Fn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;qH(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ct());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(l1(this.prevProjectionDelta.x,this.projectionDelta.x),l1(this.prevProjectionDelta.y,this.projectionDelta.y)),wl(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!g1(this.projectionDelta.x,this.prevProjectionDelta.x)||!g1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),sl&&ba.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),i){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ii(),this.projectionDelta=Ii(),this.projectionDeltaWithTransform=Ii()}setAnimationOrigin(i,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Ii();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=ct(),m=c?c.source:void 0,x=this.layout?this.layout.source:void 0,g=m!==x,b=this.getStack(),y=!b||b.members.length<=1,w=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(AG));this.animationProgress=0;let v;this.mixTargetDelta=S=>{const j=S/1e3;b1(h.x,i.x,j),b1(h.y,i.y,j),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Sl(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),RG(this.relativeTarget,this.relativeTargetOrigin,f,j),v&&gG(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=ct()),Fn(v,this.relativeTarget)),g&&(this.animationValues=d,uG(d,u,this.latestValues,j,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Zs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ue.update(()=>{zu.hasAnimatedSinceResize=!0,this.currentAnimation=sG(0,y1,{...i,onUpdate:l=>{this.mixTargetDelta(l),i.onUpdate&&i.onUpdate(l)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(y1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=i;if(!(!l||!c||!u)){if(this!==i&&this.layout&&u&&ST(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ct();const h=Dn(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+h;const f=Dn(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+f}Fn(l,c),Li(l,d),wl(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(i,l){this.sharedNodes.has(i)||this.sharedNodes.set(i,new yG),this.sharedNodes.get(i).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:l}=this.options;return l?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:l}=this.options;return l?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let l=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&lm("z",i,u,this.animationValues);for(let d=0;d<om.length;d++)lm(`rotate${om[d]}`,i,u,this.animationValues),lm(`skew${om[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}getProjectionStyles(i){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return xG;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Lu(i==null?void 0:i.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Lu(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!xa(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=vG(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y:x}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${x.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Rd){if(f[g]===void 0)continue;const{correct:b,applyTo:y}=Rd[g],w=u.transform==="none"?f[g]:b(f[g],h);if(y){const v=y.length;for(let S=0;S<v;S++)u[y[S]]=w}else u[g]=w}return this.options.layoutId&&(u.pointerEvents=h===this?Lu(i==null?void 0:i.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var l;return(l=i.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(v1),this.root.sharedNodes.clear()}}}function wG(e){e.updateLayout()}function SG(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:a}=e.options,i=n.source!==e.layout.source;a==="size"?zn(h=>{const f=i?n.measuredBox[h]:n.layoutBox[h],m=Dn(f);f.min=r[h].min,f.max=f.min+m}):ST(a,n.layoutBox,r)&&zn(h=>{const f=i?n.measuredBox[h]:n.layoutBox[h],m=Dn(r[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=Ii();wl(l,r,n.layoutBox);const c=Ii();i?wl(c,e.applyTransform(s,!0),n.measuredBox):wl(c,r,n.layoutBox);const u=!vT(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const x=ct();Sl(x,n.layoutBox,f.layoutBox);const g=ct();Sl(g,r,m.layoutBox),xT(x,g)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=x,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function jG(e){sl&&ba.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function kG(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function CG(e){e.clearSnapshot()}function v1(e){e.clearMeasurements()}function NG(e){e.isLayoutDirty=!1}function EG(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function x1(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function TG(e){e.resolveTargetDelta()}function MG(e){e.calcProjection()}function PG(e){e.resetSkewAndRotation()}function _G(e){e.removeLeadSnapshot()}function b1(e,t,n){e.translate=Je(t.translate,0,n),e.scale=Je(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function w1(e,t,n,r){e.min=Je(t.min,n.min,r),e.max=Je(t.max,n.max,r)}function RG(e,t,n,r){w1(e.x,t.x,n.x,r),w1(e.y,t.y,n.y,r)}function AG(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const DG={duration:.45,ease:[.4,0,.1,1]},S1=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),j1=S1("applewebkit/")&&!S1("chrome/")?Math.round:Rn;function k1(e){e.min=j1(e.min),e.max=j1(e.max)}function OG(e){k1(e.x),k1(e.y)}function ST(e,t,n){return e==="position"||e==="preserve-aspect"&&!LH(p1(t),p1(n),.2)}function IG(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const $G=wT({attachResizeListener:(e,t)=>rc(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),cm={current:void 0},jT=wT({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!cm.current){const e=new $G({});e.mount(window),e.setOptions({layoutScroll:!0}),cm.current=e}return cm.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),LG={pan:{Feature:eG},drag:{Feature:ZH,ProjectionNode:jT,MeasureLayout:pT}};function C1(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&Ue.postRender(()=>a(t,Cc(t)))}class FG extends ca{mount(){const{current:t}=this.node;t&&(this.unmount=LU(t,n=>(C1(this.node,n,"Start"),r=>C1(this.node,r,"End"))))}unmount(){}}class zG extends ca{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=kc(rc(this.node.current,"focus",()=>this.onFocus()),rc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function N1(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&Ue.postRender(()=>a(t,Cc(t)))}class BG extends ca{mount(){const{current:t}=this.node;t&&(this.unmount=VU(t,n=>(N1(this.node,n,"Start"),(r,{success:s})=>N1(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const p0=new WeakMap,um=new WeakMap,VG=e=>{const t=p0.get(e.target);t&&t(e)},UG=e=>{e.forEach(VG)};function WG({root:e,...t}){const n=e||document;um.has(n)||um.set(n,{});const r=um.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(UG,{root:e,...t})),r[s]}function HG(e,t,n){const r=WG(t);return p0.set(e,n),r.observe(e),()=>{p0.delete(e),r.unobserve(e)}}const GG={some:0,all:1};class KG extends ca{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:GG[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return HG(this.node.current,i,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(qG(t,n))&&this.startObserver()}unmount(){}}function qG({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const YG={inView:{Feature:KG},tap:{Feature:BG},focus:{Feature:zG},hover:{Feature:FG}},XG={layout:{ProjectionNode:jT,MeasureLayout:pT}},g0={current:null},kT={current:!1};function QG(){if(kT.current=!0,!!yy)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>g0.current=e.matches;e.addListener(t),t()}else g0.current=!1}const JG=[...YE,Vt,ea],ZG=e=>JG.find(qE(e)),E1=new WeakMap;function eK(e,t,n){for(const r in t){const s=t[r],a=n[r];if(Gt(s))e.addValue(r,s);else if(Gt(a))e.addValue(r,tc(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const i=e.getValue(r);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(r);e.addValue(r,tc(i!==void 0?i:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const T1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class tK{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Wy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Lr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ue.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:d}=i;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=Oh(n),this.isVariantNode=rE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const x=f[m];c[m]!==void 0&&Gt(x)&&x.set(c[m],!1)}}mount(t){this.current=t,E1.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),kT.current||QG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:g0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){E1.delete(this.current),this.projection&&this.projection.unmount(),Zs(this.notifyUpdate),Zs(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=ri.has(t),s=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Ue.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in xo){const n=xo[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ct()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<T1.length;r++){const s=T1[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=eK(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=tc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(GE(s)||$E(s))?s=parseFloat(s):!ZG(s)&&ea.test(n)&&(s=UE(t,n)),this.setBaseTarget(t,Gt(s)?s.get():s)),Gt(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const i=ky(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);i&&(s=i[t])}if(r&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Gt(a)?a:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Ly),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class CT extends tK{constructor(){super(...arguments),this.KeyframeResolver=XE}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Gt(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function nK(e){return window.getComputedStyle(e)}class rK extends CT{constructor(){super(...arguments),this.type="html",this.renderInstance=hE}readValueFromInstance(t,n){if(ri.has(n)){const r=Uy(n);return r&&r.default||0}else{const r=nK(t),s=(cE(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return fT(t,n)}build(t,n,r){Ey(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return _y(t,n,r)}}class sK extends CT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ct}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ri.has(n)){const r=Uy(n);return r&&r.default||0}return n=fE.has(n)?n:wy(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return gE(t,n,r)}build(t,n,r){Ty(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,s){mE(t,n,r,s)}mount(t){this.isSVGTag=Py(t.tagName),super.mount(t)}}const aK=(e,t)=>jy(e)?new sK(t):new rK(t,{allowProjection:e!==p.Fragment}),iK=_U({...MH,...YG,...LG,...XG},aK),Ct=G7(iK),M1={stars:{gradient:"linear-gradient(90deg, #1e3a5f, #3b82f6, #60a5fa, #93c5fd)",glowColor:"#3b82f6",innerPattern:"radial-gradient(circle at 20% 50%, rgba(255,255,255,0.3) 1px, transparent 1px), radial-gradient(circle at 60% 30%, rgba(255,255,255,0.2) 1px, transparent 1px), radial-gradient(circle at 80% 70%, rgba(255,255,255,0.25) 1px, transparent 1px)"},fire:{gradient:"linear-gradient(90deg, #7f1d1d, #dc2626, #f97316, #fbbf24)",glowColor:"#f97316",innerPattern:"repeating-linear-gradient(90deg, transparent, transparent 4px, rgba(255,200,100,0.1) 4px, rgba(255,200,100,0.1) 8px)"},snow:{gradient:"linear-gradient(90deg, #e0f2fe, #bae6fd, #7dd3fc, #38bdf8)",glowColor:"#38bdf8",innerPattern:"radial-gradient(circle at 30% 40%, rgba(255,255,255,0.5) 1px, transparent 1px), radial-gradient(circle at 70% 60%, rgba(255,255,255,0.4) 1px, transparent 1px)"},crystals:{gradient:"linear-gradient(90deg, #312e81, #4f46e5, #818cf8, #c4b5fd)",glowColor:"#818cf8",innerPattern:"linear-gradient(45deg, transparent 40%, rgba(255,255,255,0.1) 45%, rgba(255,255,255,0.1) 55%, transparent 60%)"},void:{gradient:"linear-gradient(90deg, #0f0f0f, #1f1f3a, #2d1b4e, #4c1d95)",glowColor:"#7c3aed",innerPattern:"radial-gradient(ellipse at 50% 50%, rgba(139,92,246,0.2) 0%, transparent 70%)"},blood:{gradient:"linear-gradient(90deg, #450a0a, #7f1d1d, #b91c1c, #dc2626)",glowColor:"#dc2626",innerPattern:"repeating-linear-gradient(180deg, transparent, transparent 2px, rgba(0,0,0,0.2) 2px, rgba(0,0,0,0.2) 4px)"},aurora:{gradient:"linear-gradient(90deg, #22c55e, #14b8a6, #06b6d4, #8b5cf6, #ec4899)",glowColor:"#14b8a6",innerPattern:"linear-gradient(180deg, rgba(255,255,255,0.1) 0%, transparent 50%, rgba(255,255,255,0.05) 100%)"},lightning:{gradient:"linear-gradient(90deg, #0c4a6e, #0284c7, #38bdf8, #fef08a)",glowColor:"#fef08a",innerPattern:"linear-gradient(135deg, transparent 40%, rgba(254,240,138,0.3) 45%, transparent 50%)"},pixels:{gradient:"linear-gradient(90deg, #2b1152, #5c2a8a, #ff9ad5, #ffcf9b)",glowColor:"#ff9ad5",borderStyle:"2px solid rgba(255,190,140,0.5)",innerPattern:"repeating-linear-gradient(90deg, rgba(255,255,255,0.15) 0 2px, rgba(255,255,255,0) 2px 6px)"},mythic:{gradient:"linear-gradient(90deg, #581c87, #9333ea, #c026d3, #f472b6)",glowColor:"#c026d3",borderStyle:"2px solid rgba(192,38,211,0.5)",innerPattern:"repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(255,255,255,0.05) 5px, rgba(255,255,255,0.05) 10px)"},legendary:{gradient:"linear-gradient(90deg, #78350f, #d97706, #f59e0b, #fcd34d)",glowColor:"#f59e0b",borderStyle:"2px solid rgba(245,158,11,0.5)",innerPattern:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.2) 50%, transparent 100%)"},very_rare:{gradient:"linear-gradient(90deg, #1e3a8a, #3b82f6, #60a5fa, #a78bfa)",glowColor:"#60a5fa",borderStyle:"1px solid rgba(96,165,250,0.4)",innerPattern:"radial-gradient(circle at 80% 50%, rgba(167,139,250,0.3) 0%, transparent 50%)"},rare:{gradient:"linear-gradient(90deg, #065f46, #059669, #10b981, #6ee7b7)",glowColor:"#10b981",borderStyle:"1px solid rgba(16,185,129,0.4)"},normal:{gradient:"linear-gradient(90deg, #374151, #4b5563, #6b7280, #9ca3af)",glowColor:"#6b7280"}},P1={stars:{shimmerDuration:3,sparkleAnimation:!0},fire:{shimmerDuration:.8,waveAnimation:!0},snow:{shimmerDuration:4,sparkleAnimation:!0},crystals:{shimmerDuration:2.5,pulseAnimation:!0},void:{shimmerDuration:5,pulseAnimation:!0},blood:{shimmerDuration:1.5,waveAnimation:!0},aurora:{shimmerDuration:6,waveAnimation:!0},lightning:{shimmerDuration:.3,sparkleAnimation:!0},pixels:{shimmerDuration:2.2,sparkleAnimation:!0},mythic:{shimmerDuration:2,pulseAnimation:!0,sparkleAnimation:!0},legendary:{shimmerDuration:1.5,waveAnimation:!0,sparkleAnimation:!0},very_rare:{shimmerDuration:2.5,sparkleAnimation:!0},rare:{shimmerDuration:3},normal:{shimmerDuration:4}};function NT({value:e,max:t=100,particleConfig:n,className:r,height:s=12,showGlow:a=!0,animated:i=!0,label:l,variant:c}){const u=vc(),d=u?.25:1,h=i&&!u,f=p.useMemo(()=>n?{...n,density:n.density*d}:null,[n,d]),m=p.useRef(null),x=p.useRef([]),g=p.useRef(),b=Math.min(100,Math.max(0,e/t*100)),y=c||(f==null?void 0:f.type)||"normal",w=y==="pixels",v=M1[y]||M1.normal,S=P1[y]||P1.normal,j=p.useMemo(()=>f?(T,M,O,$)=>{const R=f,D=Math.random()>.6&&R.secondaryColor?R.secondaryColor:R.color;let V=0,P=0,_=2,I=0,L=0;switch(R.type){case"stars":V=(Math.random()-.5)*R.speed*.5,P=(Math.random()-.3)*R.speed*.3,_=Math.random()*3+1,I=Math.random()*Math.PI*2,L=(Math.random()-.5)*.1;break;case"fire":V=(Math.random()-.5)*R.speed*.3,P=-Math.random()*R.speed*2,_=Math.random()*4+2;break;case"snow":V=(Math.random()-.5)*R.speed*.2,P=Math.random()*R.speed*.5,_=Math.random()*3+1,I=Math.random()*Math.PI*2,L=(Math.random()-.5)*.05;break;case"crystals":V=(Math.random()-.5)*R.speed*.4,P=(Math.random()-.5)*R.speed*.4,_=Math.random()*4+2,I=Math.random()*Math.PI*2,L=(Math.random()-.5)*.08;break;case"void":V=(Math.random()-.5)*R.speed*2,P=(Math.random()-.5)*R.speed*2,_=Math.random()*2+1;break;case"blood":V=(Math.random()-.5)*R.speed*.3,P=Math.random()*R.speed*.8,_=Math.random()*3+2;break;case"aurora":V=R.speed*.5,P=Math.sin(T*.1)*R.speed*.3,_=Math.random()*5+3;break;case"lightning":V=(Math.random()-.5)*R.speed*4,P=(Math.random()-.5)*R.speed*4,_=Math.random()*2+1;break;case"pixels":V=(Math.random()-.5)*R.speed*.6,P=(Math.random()-.7)*R.speed*.6,_=Math.random()*3+2;break}return{x:T+O*b/100,y:M+$/2+(Math.random()-.5)*$*.8,vx:V,vy:P,size:_,opacity:Math.random()*.8+.2,color:D,life:0,maxLife:30+Math.random()*30,rotation:I,rotationSpeed:L}}:null,[f,b]);p.useEffect(()=>{if(!h||!m.current||!f)return;const T=m.current,M=T.getContext("2d");if(!M)return;f.type==="pixels"&&(M.imageSmoothingEnabled=!1);const O=T.getBoundingClientRect();T.width=O.width*window.devicePixelRatio,T.height=O.height*window.devicePixelRatio,M.scale(window.devicePixelRatio,window.devicePixelRatio);const $=O.width,R=O.height,z=()=>{M.clearRect(0,0,$,R),j&&Math.random()<f.density*.3&&x.current.push(j(0,0,$,R)),x.current=x.current.filter(D=>{D.x+=D.vx,D.y+=D.vy,D.life++,D.rotation!==void 0&&D.rotationSpeed!==void 0&&(D.rotation+=D.rotationSpeed);const V=D.life/D.maxLife,P=D.opacity*(1-V);if(P<=0)return!1;switch(M.save(),M.translate(D.x,D.y),D.rotation!==void 0&&M.rotate(D.rotation),f.glow&&(M.shadowColor=D.color,M.shadowBlur=D.size*3),M.fillStyle=D.color,M.globalAlpha=P,f.type){case"crystals":M.beginPath(),M.moveTo(0,-D.size),M.lineTo(D.size*.7,0),M.lineTo(0,D.size),M.lineTo(-D.size*.7,0),M.closePath(),M.fill(),M.fillStyle="rgba(255,255,255,0.5)",M.beginPath(),M.moveTo(0,-D.size*.5),M.lineTo(D.size*.3,0),M.lineTo(0,D.size*.3),M.closePath(),M.fill();break;case"stars":oK(M,0,0,5,D.size,D.size*.4);break;case"lightning":M.beginPath(),M.moveTo(0,0),M.lineTo(D.vx*3,D.vy*3),M.strokeStyle=D.color,M.lineWidth=D.size*.5,M.lineCap="round",M.stroke(),Math.random()>.7&&(M.beginPath(),M.moveTo(D.vx*1.5,D.vy*1.5),M.lineTo(D.vx*2+(Math.random()-.5)*4,D.vy*2+(Math.random()-.5)*4),M.lineWidth=D.size*.3,M.stroke());break;case"pixels":M.imageSmoothingEnabled=!1,M.fillRect(-D.size/2,-D.size/2,D.size,D.size),M.fillStyle="rgba(255,255,255,0.5)",M.fillRect(-D.size/2+1,-D.size/2+1,Math.max(1,D.size*.4),Math.max(1,D.size*.4));break;case"fire":M.beginPath(),M.moveTo(0,-D.size),M.bezierCurveTo(D.size,-D.size*.5,D.size,D.size*.5,0,D.size),M.bezierCurveTo(-D.size,D.size*.5,-D.size,-D.size*.5,0,-D.size),M.fill();break;case"snow":for(let _=0;_<6;_++)M.save(),M.rotate(Math.PI/3*_),M.beginPath(),M.moveTo(0,0),M.lineTo(0,-D.size),M.strokeStyle=D.color,M.lineWidth=D.size*.2,M.stroke(),M.restore();break;case"void":M.beginPath(),M.arc(0,0,D.size,0,Math.PI*2),M.fill(),M.beginPath(),M.arc(0,0,D.size*.5,0,Math.PI*2),M.fillStyle="rgba(0,0,0,0.5)",M.fill();break;case"aurora":M.beginPath(),M.ellipse(0,0,D.size*2,D.size*.5,0,0,Math.PI*2),M.fill();break;case"blood":M.beginPath(),M.arc(0,0,D.size,0,Math.PI*2),M.fill(),M.beginPath(),M.arc(D.size*.3,-D.size*.3,D.size*.3,0,Math.PI*2),M.fillStyle="rgba(255,100,100,0.5)",M.fill();break;default:M.beginPath(),M.arc(0,0,D.size,0,Math.PI*2),M.fill()}return M.restore(),!0}),x.current.length>60&&(x.current=x.current.slice(-60)),g.current=requestAnimationFrame(z)};return z(),()=>{g.current&&cancelAnimationFrame(g.current)}},[h,f,j]);const k=f?v.gradient:"hsl(var(--primary))",N=w?"rounded-md":"rounded-full",E=w?"pixel-bar":"",C=w?"repeating-linear-gradient(90deg, rgba(255,255,255,0.08) 0 2px, rgba(255,255,255,0) 2px 6px)":"repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255,255,255,0.03) 2px, rgba(255,255,255,0.03) 4px)";return o.jsxs("div",{className:Y("relative w-full",r),children:[l&&o.jsxs("div",{className:"flex justify-between items-center mb-1.5 text-xs",children:[o.jsx("span",{className:"text-muted-foreground font-medium",children:l}),o.jsxs("span",{className:"text-foreground font-semibold",children:[Math.round(b),"%"]})]}),o.jsxs("div",{className:Y("relative overflow-hidden bg-secondary/50 backdrop-blur-sm",N,E),style:{height:s,border:v.borderStyle,boxShadow:"inset 0 1px 3px rgba(0,0,0,0.2)"},children:[o.jsx("div",{className:"absolute inset-0 opacity-30",style:{background:C}}),o.jsxs(Ct.div,{className:Y("h-full relative overflow-hidden",N),initial:{width:0},animate:{width:`${b}%`},transition:{duration:.8,ease:"easeOut"},style:{background:k,boxShadow:a&&(f!=null&&f.glow)?`0 0 12px ${v.glowColor}, 0 0 24px ${v.glowColor}50, inset 0 1px 0 rgba(255,255,255,0.3)`:"inset 0 1px 0 rgba(255,255,255,0.3)"},children:[v.innerPattern&&o.jsx("div",{className:"absolute inset-0",style:{background:v.innerPattern}}),h&&S.pulseAnimation&&b>0&&o.jsx(Ct.div,{className:"absolute inset-0 rounded-full",animate:{opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{background:`radial-gradient(ellipse at 70% 50%, ${v.glowColor}40, transparent 70%)`}}),h&&S.waveAnimation&&b>0&&o.jsx(Ct.div,{className:"absolute inset-0",animate:{x:["-100%","100%"]},transition:{duration:S.shimmerDuration||2,repeat:1/0,ease:"linear"},style:{background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent)",width:"50%"}}),h&&S.sparkleAnimation&&b>0&&o.jsxs(o.Fragment,{children:[o.jsx(Ct.div,{className:"absolute w-1 h-1 rounded-full bg-white",animate:{opacity:[0,1,0],scale:[.5,1.2,.5]},transition:{duration:1.5,repeat:1/0,delay:0},style:{left:"20%",top:"30%"}}),o.jsx(Ct.div,{className:"absolute w-0.5 h-0.5 rounded-full bg-white",animate:{opacity:[0,.8,0],scale:[.5,1,.5]},transition:{duration:2,repeat:1/0,delay:.5},style:{left:"50%",top:"60%"}}),o.jsx(Ct.div,{className:"absolute w-1 h-1 rounded-full bg-white",animate:{opacity:[0,1,0],scale:[.5,1.5,.5]},transition:{duration:1.8,repeat:1/0,delay:1},style:{left:"75%",top:"40%"}})]}),h&&b>0&&o.jsx(Ct.div,{className:"absolute inset-0",animate:{x:["-200%","200%"]},transition:{duration:S.shimmerDuration||2,repeat:1/0,ease:"linear"},style:{background:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.15) 25%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0.15) 75%, transparent 100%)",width:"100%"}}),a&&b>5&&o.jsx(Ct.div,{className:"absolute right-0 top-0 bottom-0 w-4",animate:{opacity:[.5,1,.5]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},style:{background:`linear-gradient(90deg, transparent, ${v.glowColor})`}})]}),h&&f&&o.jsx("canvas",{ref:m,className:"absolute inset-0 w-full h-full pointer-events-none",style:{height:s*4,top:-s*1.5}}),b>0&&b<100&&o.jsx(Ct.div,{className:"absolute top-0 bottom-0 w-0.5",initial:{opacity:0},animate:{opacity:[.5,1,.5],left:`${b}%`},transition:{opacity:{duration:1,repeat:1/0},left:{duration:.8,ease:"easeOut"}},style:{background:"rgba(255,255,255,0.8)",boxShadow:`0 0 4px ${v.glowColor}`}})]})]})}function oK(e,t,n,r,s,a){let i=Math.PI/2*3;const l=Math.PI/r;e.beginPath(),e.moveTo(t,n-s);for(let c=0;c<r;c++){let u=t+Math.cos(i)*s,d=n+Math.sin(i)*s;e.lineTo(u,d),i+=l,u=t+Math.cos(i)*a,d=n+Math.sin(i)*a,e.lineTo(u,d),i+=l}e.lineTo(t,n-s),e.closePath(),e.fill()}var qy="Progress",Yy=100,[lK]=xn(qy),[cK,uK]=lK(qy),ET=p.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=dK,...i}=e;(s||s===0)&&!_1(s)&&console.error(hK(`${s}`,"Progress"));const l=_1(s)?s:Yy;r!==null&&!R1(r,l)&&console.error(fK(`${r}`,"Progress"));const c=R1(r,l)?r:null,u=Ld(c)?a(c,l):void 0;return o.jsx(cK,{scope:n,value:c,max:l,children:o.jsx(se.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Ld(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":PT(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});ET.displayName=qy;var TT="ProgressIndicator",MT=p.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=uK(TT,n);return o.jsx(se.div,{"data-state":PT(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});MT.displayName=TT;function dK(e,t){return`${Math.round(e/t*100)}%`}function PT(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Ld(e){return typeof e=="number"}function _1(e){return Ld(e)&&!isNaN(e)&&e>0}function R1(e,t){return Ld(e)&&!isNaN(e)&&e<=t&&e>=0}function hK(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Yy}\`.`}function fK(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Yy} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var _T=ET,mK=MT;const RT=p.forwardRef(({className:e,value:t,...n},r)=>o.jsx(_T,{ref:r,className:Y("progress-root relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:o.jsx(mK,{className:"progress-indicator h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));RT.displayName=_T.displayName;const dm={mythic:"from-purple-500 via-pink-500 to-rose-500",legendary:"from-amber-400 via-orange-500 to-red-500",very_rare:"from-blue-400 via-indigo-500 to-purple-500",rare:"from-cyan-400 via-teal-500 to-emerald-500",normal:"from-slate-400 via-gray-500 to-zinc-500"},pK={mythic:"Mythic",legendary:"Legendary",very_rare:"Very Rare",rare:"Rare",normal:"Normal"},gK=[{type:"stars",label:"Starfall",color:"#3b82f6",secondary:"#93c5fd",value:75},{type:"fire",label:"Inferno",color:"#f97316",secondary:"#fbbf24",value:85},{type:"snow",label:"Frostbite",color:"#38bdf8",secondary:"#e0f2fe",value:70},{type:"crystals",label:"Crystal",color:"#818cf8",secondary:"#c4b5fd",value:80},{type:"void",label:"Void",color:"#7c3aed",secondary:"#4c1d95",value:65},{type:"aurora",label:"Aurora",color:"#14b8a6",secondary:"#ec4899",value:90},{type:"lightning",label:"Thunder",color:"#fef08a",secondary:"#38bdf8",value:78},{type:"blood",label:"Crimson",color:"#dc2626",secondary:"#b91c1c",value:72},{type:"pixels",label:"Pixel Dream",color:"#ffbfa3",secondary:"#ff8fd6",value:88}],yK={"--codex-ink":"9, 11, 23","--codex-aurora":"90, 209, 255","--codex-ember":"255, 183, 110","--codex-orchid":"194, 132, 255"},vK={fontFamily:'"DM Serif Display", "Space Grotesk", serif'},A1={fontFamily:'"Space Grotesk", "Inter", sans-serif'},D1={hidden:{},show:{transition:{staggerChildren:.08}}},Ko={hidden:{opacity:0,y:16},show:{opacity:1,y:0,transition:{duration:.5,ease:[.22,1,.36,1]}}},xK=G.memo(function({moon:t,entry:n,isExpanded:r,onToggleExpand:s,onToggleFavorite:a,onToggleLock:i,onAddBoost:l,particles:c,isUnlocked:u}){const d=u||((n==null?void 0:n.encounterCount)??0)>=5;return o.jsxs("div",{className:Y("rounded-2xl border overflow-hidden","bg-white/5 backdrop-blur-sm","shadow-[0_12px_40px_rgba(6,8,20,0.45)]"),style:{borderColor:(c==null?void 0:c.color)+"40",boxShadow:c!=null&&c.glow?`0 0 20px ${c.color}20`:void 0},children:[o.jsxs("button",{onClick:s,className:"w-full p-4 flex items-center gap-3 hover:bg-white/10 transition-colors",children:[o.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{background:c?`linear-gradient(135deg, ${c.color}, ${c.secondaryColor||c.color})`:"hsl(var(--primary))",boxShadow:c!=null&&c.glow?`0 0 14px ${c.color}55`:"0 0 12px rgba(255,255,255,0.15)"},children:o.jsx("span",{className:"text-lg",children:""})}),o.jsxs("div",{className:"flex-1 text-left min-w-0",children:[o.jsx("div",{className:"font-semibold text-white truncate",children:t.name}),o.jsx("div",{className:"text-xs text-white/60 truncate",children:t.nameEn})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.jsxs(Ie,{variant:"secondary",className:"bg-gradient-to-r from-cyan-400/20 to-amber-300/20 text-white",children:["",(n==null?void 0:n.encounterCount)||0]}),r?o.jsx(qs,{className:"h-4 w-4 text-amber-300"}):o.jsx(gr,{className:"h-4 w-4 text-amber-300"})]})]}),r&&o.jsx("div",{className:"border-t animate-fade-in",children:o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("p",{className:"text-sm italic text-muted-foreground",children:['"',t.subtitle,'"']}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(xg,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),o.jsx("span",{className:"truncate",children:"First seen:"}),o.jsx("span",{className:"text-muted-foreground truncate",children:n!=null&&n.firstEncountered?new Date(n.firstEncountered).toLocaleDateString("th-TH"):"-"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Dr,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),o.jsx("span",{className:"truncate",children:"Last seen:"}),o.jsx("span",{className:"text-muted-foreground truncate",children:n!=null&&n.lastEncountered?new Date(n.lastEncountered).toLocaleDateString("th-TH"):"-"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{children:"Theme Duration Boost"}),o.jsxs("span",{className:"text-muted-foreground",children:["+",bK((n==null?void 0:n.themeDurationBoost)||0)," (max 1 day)"]})]}),o.jsx(NT,{value:(n==null?void 0:n.themeDurationBoost)||0,max:86400,particleConfig:c,height:10,animated:!1}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(ce,{size:"sm",variant:"outline",onClick:()=>l(3600),disabled:!d||((n==null?void 0:n.themeDurationBoost)||0)>=86400,title:d?void 0:` ${5-((n==null?void 0:n.encounterCount)??0)} `,className:"flex-1",children:[o.jsx(Dr,{className:"h-3 w-3 mr-1"}),"+1h"]}),o.jsxs(ce,{size:"sm",variant:"outline",onClick:()=>l(21600),disabled:!d||((n==null?void 0:n.themeDurationBoost)||0)>=86400,title:d?void 0:` ${5-((n==null?void 0:n.encounterCount)??0)} `,className:"flex-1",children:[o.jsx(Dr,{className:"h-3 w-3 mr-1"}),"+6h"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(ce,{size:"sm",variant:n!=null&&n.isLocked?"default":"outline",onClick:i,disabled:!d&&!(n!=null&&n.isLocked),className:Y("flex-1",(n==null?void 0:n.isLocked)&&"bg-amber-500 hover:bg-amber-600 text-white"),title:!d&&!(n!=null&&n.isLocked)?` ${5-((n==null?void 0:n.encounterCount)??0)} `:void 0,children:n!=null&&n.isLocked?o.jsxs(o.Fragment,{children:[o.jsx(gl,{className:"h-4 w-4 mr-2"}),"Unlock Theme"]}):o.jsxs(o.Fragment,{children:[o.jsx(up,{className:"h-4 w-4 mr-2"}),d?"Lock Theme":`Lock (${(n==null?void 0:n.encounterCount)??0}/5)`]})}),o.jsxs(ce,{size:"sm",variant:n!=null&&n.isFavorite?"default":"outline",onClick:a,className:"flex-1",children:[o.jsx(oA,{className:Y("h-4 w-4 mr-2",(n==null?void 0:n.isFavorite)&&"fill-current")}),n!=null&&n.isFavorite?"Unfavorite":"Favorite"]})]}),(n==null?void 0:n.isLocked)&&o.jsxs("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/30 text-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400",children:[o.jsx(gl,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:"Theme Locked"})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"This moon will always be your theme. No random re-rolling."})]})]})})]})});function bK(e){return e<60?`${e}s`:e<3600?`${Math.floor(e/60)}m`:e<86400?`${Math.floor(e/3600)}h ${Math.floor(e%3600/60)}m`:`${Math.floor(e/86400)}d ${Math.floor(e%86400/3600)}h`}function wK({className:e,compact:t=!1}){const n=qa(),{collection:r,getMythicMoons:s,getStats:a,toggleFavorite:i,toggleLock:l,addDurationBoost:c,getParticleConfig:u}=Dk(),[d,h]=p.useState(null),[f,m]=p.useState(!1),[x,g]=p.useState(!1),b=p.useMemo(()=>s(),[s]),y=p.useMemo(()=>a(),[a]),w=p.useMemo(()=>b.filter(j=>j.discovered),[b]),v=p.useMemo(()=>b.filter(j=>!j.discovered),[b]),S=p.useMemo(()=>({mythic:{count:y.mythicCount,max:b.length},legendary:{count:y.legendaryCount,max:Object.values(Ht).filter(j=>j.rarity==="legendary").length},very_rare:{count:y.veryRareCount,max:Object.values(Ht).filter(j=>j.rarity==="very_rare").length},rare:{count:y.rareCount,max:Object.values(Ht).filter(j=>j.rarity==="rare").length},normal:{count:y.normalCount,max:Object.values(Ht).filter(j=>j.rarity==="normal").length}}),[y,b.length]);return t?o.jsxs("div",{className:Y("space-y-3",e),style:A1,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fr,{className:"h-4 w-4 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Mythic Collection"})]}),o.jsxs(Ie,{variant:"secondary",children:[y.mythicCount," / ",b.length]})]}),o.jsx(RT,{value:y.mythicCount/b.length*100,className:"h-2"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.slice(0,6).map(j=>o.jsx("div",{className:Y("w-8 h-8 rounded-full flex items-center justify-center text-xs",j.discovered?"bg-gradient-to-br "+dm.mythic:"bg-muted"),title:j.discovered?j.name:"???",children:j.discovered?o.jsx("span",{className:"text-white",children:""}):o.jsx(gl,{className:"h-3 w-3 text-muted-foreground"})},j.id)),b.length>6&&o.jsxs("div",{className:"w-8 h-8 rounded-full bg-muted flex items-center justify-center text-xs text-muted-foreground",children:["+",b.length-6]})]})]}):o.jsxs("section",{className:Y("relative overflow-hidden rounded-[28px] border border-white/10 p-5 sm:p-8 text-white",e),style:yK,children:[o.jsx("div",{className:"absolute inset-0",style:{background:"radial-gradient(900px 480px at 10% -10%, rgba(var(--codex-aurora), 0.35), transparent 60%), radial-gradient(700px 420px at 90% 5%, rgba(var(--codex-orchid), 0.28), transparent 55%), linear-gradient(160deg, rgba(var(--codex-ink), 1) 0%, rgba(11, 10, 26, 1) 100%)"}}),o.jsx("div",{className:"absolute inset-0 opacity-30 mix-blend-screen",style:{backgroundImage:"linear-gradient(rgba(255,255,255,0.08) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.06) 1px, transparent 1px)",backgroundSize:"48px 48px"}}),o.jsx("div",{className:"absolute inset-0 opacity-60 mix-blend-screen animate-[auroraShift_18s_linear_infinite]",style:{backgroundImage:"linear-gradient(120deg, rgba(var(--codex-aurora),0.25), rgba(var(--codex-ember),0.18), rgba(var(--codex-orchid),0.22))",backgroundSize:"200% 200%"}}),o.jsx("div",{className:"absolute -top-24 -right-20 h-56 w-56 rounded-full bg-cyan-400/20 blur-3xl"}),o.jsx("div",{className:"absolute -bottom-32 -left-24 h-72 w-72 rounded-full bg-amber-300/10 blur-[90px]"}),o.jsxs("div",{className:"relative z-10 space-y-10",style:A1,children:[o.jsxs(Ct.div,{className:"grid gap-6 lg:grid-cols-[1.2fr_0.8fr]",variants:D1,initial:"hidden",animate:"show",children:[o.jsxs(Ct.div,{variants:Ko,className:"relative overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-8 backdrop-blur-md",children:[o.jsxs("div",{className:"flex flex-col gap-5 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-14 w-14 rounded-2xl border border-white/20 bg-gradient-to-br from-cyan-300/30 via-white/10 to-amber-200/20 flex items-center justify-center shadow-[0_0_20px_rgba(90,209,255,0.25)]",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("div",{className:"absolute -bottom-2 -right-2 h-6 w-6 rounded-full border border-white/30 bg-white/10 backdrop-blur"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/50",children:"Mythic Archive"}),o.jsx("h3",{className:"text-3xl sm:text-4xl text-white",style:vK,children:"Mythic Codex"}),o.jsx("p",{className:"text-sm text-white/70 max-w-md",children:"A living ledger of lunar anomalies. Each encounter reshapes your mythic signature."})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"rounded-full border border-white/15 bg-white/10 px-3 py-1 text-xs text-white/80",children:["Rank ",y.completionPercent,"%"]}),o.jsxs("span",{className:"rounded-full border border-white/15 bg-white/10 px-3 py-1 text-xs text-white/80",children:[y.totalEncounters," Encounters"]})]})]}),o.jsx("div",{className:"mt-6 grid grid-cols-2 gap-3 sm:grid-cols-4",children:[{label:"Total Encounters",value:y.totalEncounters,hint:"dream logs",tint:"rgba(var(--codex-ember),0.18)"},{label:"Completion",value:`${y.completionPercent}%`,hint:"overall",tint:"rgba(var(--codex-aurora),0.18)"},{label:"Discovered",value:y.totalDiscovered,hint:`of ${Object.keys(Ht).length}`,tint:"rgba(var(--codex-orchid),0.18)"},{label:"Mythic",value:y.mythicCount,hint:`${b.length} total`,tint:"rgba(var(--codex-ember),0.12)"}].map(j=>o.jsxs("div",{className:"rounded-2xl border border-white/10 px-3 py-3",style:{background:`linear-gradient(135deg, ${j.tint} 0%, rgba(255,255,255,0.03) 65%)`},children:[o.jsx("div",{className:"text-[10px] uppercase tracking-[0.2em] text-white/50",children:j.label}),o.jsx("div",{className:"mt-2 text-xl font-semibold text-white",children:j.value}),o.jsx("div",{className:"text-[11px] text-white/55",children:j.hint})]},j.label))})]}),o.jsxs(Ct.div,{variants:Ko,className:"relative overflow-hidden rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-8 backdrop-blur-md",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-white/50",children:"Collection Status"}),o.jsx("h4",{className:"text-lg font-semibold text-white",children:"Lunar Registry"})]}),o.jsxs(Ie,{className:"bg-white/10 text-white border border-white/15",children:[y.completionPercent,"% Complete"]})]}),o.jsxs("div",{className:"mt-5 space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-xs text-white/70",children:[o.jsx("span",{children:"Collection Progress"}),o.jsxs("span",{children:[y.totalDiscovered," / ",Object.keys(Ht).length]})]}),o.jsx("div",{className:"h-2.5 rounded-full bg-white/10 overflow-hidden",children:o.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-cyan-300 via-indigo-300 to-amber-200 transition-all duration-500",style:{width:`${y.completionPercent}%`}})})]}),o.jsx("div",{className:"mt-6 space-y-3",children:["mythic","legendary","very_rare","rare","normal"].map(j=>{const{count:k,max:N}=S[j],E=N>0?k/N*100:0;return o.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/30 px-3 py-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs text-white/70",children:[o.jsx("span",{className:Y("font-medium px-2 py-0.5 rounded-full bg-gradient-to-r text-white",dm[j]),children:pK[j]}),o.jsxs("span",{children:[k," / ",N]})]}),o.jsx("div",{className:"mt-2 h-2 rounded-full bg-white/10 overflow-hidden",children:o.jsx("div",{className:Y("h-full rounded-full bg-gradient-to-r transition-all duration-500",dm[j]),style:{width:`${E}%`}})})]},j)})})]})]}),o.jsxs(Ct.div,{variants:D1,initial:"hidden",animate:"show",className:"space-y-8",children:[o.jsxs(Ct.div,{variants:Ko,className:"rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-8 backdrop-blur-md",children:[o.jsxs("button",{onClick:()=>g(!x),className:"w-full flex items-center justify-between text-xs font-medium text-white/70 hover:text-white transition-colors",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(fr,{className:"h-3 w-3"}),"Particle Effect Showcase"]}),x?o.jsx(qs,{className:"h-4 w-4"}):o.jsx(gr,{className:"h-4 w-4"})]}),o.jsx(mw,{initial:!1,children:x&&o.jsx(Ct.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.35,ease:"easeOut"},className:"overflow-hidden",children:o.jsx("div",{className:"grid gap-3 mt-4",children:gK.map(j=>o.jsxs("div",{className:"space-y-1",children:[o.jsx("span",{className:"text-[10px] text-white/50 uppercase tracking-wider",children:j.label}),o.jsx(NT,{value:j.value,max:100,variant:j.type,height:14,showGlow:!0,animated:!0,particleConfig:{type:j.type,color:j.color,secondaryColor:j.secondary,density:.6,speed:1.2,glow:!0}})]},j.type))})})})]}),o.jsxs(Ct.div,{variants:Ko,className:"rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-8 backdrop-blur-md",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[o.jsx(fp,{className:"h-4 w-4 text-amber-300"}),"Discovered Mythic Moons (",w.length,")"]}),o.jsx("span",{className:"text-xs text-white/60",children:"Tap a moon to reveal its archive"})]}),o.jsx("div",{className:"mt-4 space-y-3",children:w.map(j=>{const k=r[j.id],N=d===j.id,E=u(j.id);return o.jsx(xK,{moon:j,entry:k,isExpanded:N,onToggleExpand:()=>h(N?null:j.id),onToggleFavorite:()=>i(j.id),onToggleLock:()=>l(j.id),onAddBoost:C=>c(j.id,C),particles:E,isUnlocked:n},j.id)})}),w.length===0&&o.jsxs("div",{className:"text-center py-10 text-white/60",children:[o.jsx(fr,{className:"h-8 w-8 mx-auto mb-2 opacity-70"}),o.jsx("p",{children:"No Mythic moons discovered yet"}),o.jsx("p",{className:"text-xs mt-1",children:"Keep exploring to find rare moon phenomena!"})]})]}),o.jsxs(Ct.div,{variants:Ko,className:"rounded-3xl border border-white/10 bg-white/5 p-6 sm:p-8 backdrop-blur-md",children:[o.jsxs("button",{onClick:()=>m(!f),className:"w-full flex items-center justify-between text-sm font-medium text-white",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx(gl,{className:"h-4 w-4 text-white/70"}),"Undiscovered (",v.length,")"]}),f?o.jsx(qs,{className:"h-4 w-4"}):o.jsx(gr,{className:"h-4 w-4"})]}),o.jsx(mw,{initial:!1,children:f&&o.jsx(Ct.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.35,ease:"easeOut"},className:"overflow-hidden",children:o.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:v.map(j=>o.jsxs("div",{className:"p-3 rounded-2xl bg-black/30 border border-dashed border-white/15 flex items-center gap-2",children:[o.jsx(gl,{className:"h-4 w-4 text-white/50 flex-shrink-0"}),o.jsx("span",{className:"text-sm text-white/60 truncate",children:"???"})]},j.id))})})})]})]})]})]})}var hm="rovingFocusGroup.onEntryFocus",SK={bubbles:!1,cancelable:!0},Nc="RovingFocusGroup",[y0,AT,jK]=rh(Nc),[kK,DT]=xn(Nc,[jK]),[CK,NK]=kK(Nc),OT=p.forwardRef((e,t)=>o.jsx(y0.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(y0.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(EK,{...e,ref:t})})}));OT.displayName=Nc;var EK=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,f=p.useRef(null),m=je(t,f),x=wc(a),[g,b]=pr({prop:i,defaultProp:l??null,onChange:c,caller:Nc}),[y,w]=p.useState(!1),v=wt(u),S=AT(n),j=p.useRef(!1),[k,N]=p.useState(0);return p.useEffect(()=>{const E=f.current;if(E)return E.addEventListener(hm,v),()=>E.removeEventListener(hm,v)},[v]),o.jsx(CK,{scope:n,orientation:r,dir:x,loop:s,currentTabStopId:g,onItemFocus:p.useCallback(E=>b(E),[b]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>N(E=>E+1),[]),onFocusableItemRemove:p.useCallback(()=>N(E=>E-1),[]),children:o.jsx(se.div,{tabIndex:y||k===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:te(e.onMouseDown,()=>{j.current=!0}),onFocus:te(e.onFocus,E=>{const C=!j.current;if(E.target===E.currentTarget&&C&&!y){const T=new CustomEvent(hm,SK);if(E.currentTarget.dispatchEvent(T),!T.defaultPrevented){const M=S().filter(D=>D.focusable),O=M.find(D=>D.active),$=M.find(D=>D.id===g),z=[O,$,...M].filter(Boolean).map(D=>D.ref.current);LT(z,d)}}j.current=!1}),onBlur:te(e.onBlur,()=>w(!1))})})}),IT="RovingFocusGroupItem",$T=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...l}=e,c=Or(),u=a||c,d=NK(IT,n),h=d.currentTabStopId===u,f=AT(n),{onFocusableItemAdd:m,onFocusableItemRemove:x,currentTabStopId:g}=d;return p.useEffect(()=>{if(r)return m(),()=>x()},[r,m,x]),o.jsx(y0.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:o.jsx(se.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:te(e.onMouseDown,b=>{r?d.onItemFocus(u):b.preventDefault()}),onFocus:te(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:te(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const y=PK(b,d.orientation,d.dir);if(y!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let v=f().filter(S=>S.focusable).map(S=>S.ref.current);if(y==="last")v.reverse();else if(y==="prev"||y==="next"){y==="prev"&&v.reverse();const S=v.indexOf(b.currentTarget);v=d.loop?_K(v,S+1):v.slice(S+1)}setTimeout(()=>LT(v))}}),children:typeof i=="function"?i({isCurrentTabStop:h,hasTabStop:g!=null}):i})})});$T.displayName=IT;var TK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function MK(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function PK(e,t,n){const r=MK(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return TK[r]}function LT(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function _K(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var RK=OT,AK=$T,Lh="Tabs",[DK]=xn(Lh,[DT]),FT=DT(),[OK,Xy]=DK(Lh),zT=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:i="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=wc(l),[h,f]=pr({prop:r,onChange:s,defaultProp:a??"",caller:Lh});return o.jsx(OK,{scope:n,baseId:Or(),value:h,onValueChange:f,orientation:i,dir:d,activationMode:c,children:o.jsx(se.div,{dir:d,"data-orientation":i,...u,ref:t})})});zT.displayName=Lh;var BT="TabsList",VT=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,a=Xy(BT,n),i=FT(n);return o.jsx(RK,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:o.jsx(se.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});VT.displayName=BT;var UT="TabsTrigger",WT=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=e,i=Xy(UT,n),l=FT(n),c=KT(i.baseId,r),u=qT(i.baseId,r),d=r===i.value;return o.jsx(AK,{asChild:!0,...l,focusable:!s,active:d,children:o.jsx(se.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:t,onMouseDown:te(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?i.onValueChange(r):h.preventDefault()}),onKeyDown:te(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&i.onValueChange(r)}),onFocus:te(e.onFocus,()=>{const h=i.activationMode!=="manual";!d&&!s&&h&&i.onValueChange(r)})})})});WT.displayName=UT;var HT="TabsContent",GT=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...i}=e,l=Xy(HT,n),c=KT(l.baseId,r),u=qT(l.baseId,r),d=r===l.value,h=p.useRef(d);return p.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),o.jsx($n,{present:s||d,children:({present:f})=>o.jsx(se.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&a})})});GT.displayName=HT;function KT(e,t){return`${e}-trigger-${t}`}function qT(e,t){return`${e}-content-${t}`}var IK=zT,YT=VT,XT=WT,QT=GT;const JT=IK,Qy=p.forwardRef(({className:e,...t},n)=>o.jsx(YT,{ref:n,className:Y("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Qy.displayName=YT.displayName;const Cs=p.forwardRef(({className:e,...t},n)=>o.jsx(XT,{ref:n,className:Y("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));Cs.displayName=XT.displayName;const Ns=p.forwardRef(({className:e,...t},n)=>o.jsx(QT,{ref:n,className:Y("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ns.displayName=QT.displayName;function $K(e,t){return p.useReducer((n,r)=>t[n][r]??n,e)}var Jy="ScrollArea",[ZT]=xn(Jy),[LK,qn]=ZT(Jy),eM=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...i}=e,[l,c]=p.useState(null),[u,d]=p.useState(null),[h,f]=p.useState(null),[m,x]=p.useState(null),[g,b]=p.useState(null),[y,w]=p.useState(0),[v,S]=p.useState(0),[j,k]=p.useState(!1),[N,E]=p.useState(!1),C=je(t,M=>c(M)),T=wc(s);return o.jsx(LK,{scope:n,type:r,dir:T,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:x,scrollbarXEnabled:j,onScrollbarXEnabledChange:k,scrollbarY:g,onScrollbarYChange:b,scrollbarYEnabled:N,onScrollbarYEnabledChange:E,onCornerWidthChange:w,onCornerHeightChange:S,children:o.jsx(se.div,{dir:T,...i,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":v+"px",...e.style}})})});eM.displayName=Jy;var tM="ScrollAreaViewport",nM=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=e,i=qn(tM,n),l=p.useRef(null),c=je(t,l,i.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(se.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});nM.displayName=tM;var Br="ScrollAreaScrollbar",Zy=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=qn(Br,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,l=e.orientation==="horizontal";return p.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),s.type==="hover"?o.jsx(FK,{...r,ref:t,forceMount:n}):s.type==="scroll"?o.jsx(zK,{...r,ref:t,forceMount:n}):s.type==="auto"?o.jsx(rM,{...r,ref:t,forceMount:n}):s.type==="always"?o.jsx(ev,{...r,ref:t}):null});Zy.displayName=Br;var FK=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=qn(Br,e.__scopeScrollArea),[a,i]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},d=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx($n,{present:n||a,children:o.jsx(rM,{"data-state":a?"visible":"hidden",...r,ref:t})})}),zK=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=qn(Br,e.__scopeScrollArea),a=e.orientation==="horizontal",i=zh(()=>c("SCROLL_END"),100),[l,c]=$K("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),p.useEffect(()=>{const u=s.viewport,d=a?"scrollLeft":"scrollTop";if(u){let h=u[d];const f=()=>{const m=u[d];h!==m&&(c("SCROLL"),i()),h=m};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[s.viewport,a,c,i]),o.jsx($n,{present:n||l!=="hidden",children:o.jsx(ev,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:te(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:te(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),rM=p.forwardRef((e,t)=>{const n=qn(Br,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,i]=p.useState(!1),l=e.orientation==="horizontal",c=zh(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?u:d)}},10);return wo(n.viewport,c),wo(n.content,c),o.jsx($n,{present:r||a,children:o.jsx(ev,{"data-state":a?"visible":"hidden",...s,ref:t})})}),ev=p.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=qn(Br,e.__scopeScrollArea),a=p.useRef(null),i=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=lM(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:f=>i.current=f};function h(f,m){return GK(f,i.current,l,m)}return n==="horizontal"?o.jsx(BK,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const f=s.viewport.scrollLeft,m=O1(f,l,s.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,s.dir))}}):n==="vertical"?o.jsx(VK,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const f=s.viewport.scrollTop,m=O1(f,l);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),BK=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=qn(Br,e.__scopeScrollArea),[i,l]=p.useState(),c=p.useRef(null),u=je(t,c,a.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(aM,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Fh(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollLeft+d.deltaX;e.onWheelScroll(f),uM(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:zd(i.paddingLeft),paddingEnd:zd(i.paddingRight)}})}})}),VK=p.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=qn(Br,e.__scopeScrollArea),[i,l]=p.useState(),c=p.useRef(null),u=je(t,c,a.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(aM,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Fh(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(a.viewport){const f=a.viewport.scrollTop+d.deltaY;e.onWheelScroll(f),uM(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:zd(i.paddingTop),paddingEnd:zd(i.paddingBottom)}})}})}),[UK,sM]=ZT(Br),aM=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...f}=e,m=qn(Br,n),[x,g]=p.useState(null),b=je(t,C=>g(C)),y=p.useRef(null),w=p.useRef(""),v=m.viewport,S=r.content-r.viewport,j=wt(d),k=wt(c),N=zh(h,10);function E(C){if(y.current){const T=C.clientX-y.current.left,M=C.clientY-y.current.top;u({x:T,y:M})}}return p.useEffect(()=>{const C=T=>{const M=T.target;(x==null?void 0:x.contains(M))&&j(T,S)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,x,S,j]),p.useEffect(k,[r,k]),wo(x,N),wo(m.content,N),o.jsx(UK,{scope:n,scrollbar:x,hasThumb:s,onThumbChange:wt(a),onThumbPointerUp:wt(i),onThumbPositionChange:k,onThumbPointerDown:wt(l),children:o.jsx(se.div,{...f,ref:b,style:{position:"absolute",...f.style},onPointerDown:te(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),y.current=x.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),E(C))}),onPointerMove:te(e.onPointerMove,E),onPointerUp:te(e.onPointerUp,C=>{const T=C.target;T.hasPointerCapture(C.pointerId)&&T.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=w.current,m.viewport&&(m.viewport.style.scrollBehavior=""),y.current=null})})})}),Fd="ScrollAreaThumb",iM=p.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=sM(Fd,e.__scopeScrollArea);return o.jsx($n,{present:n||s.hasThumb,children:o.jsx(WK,{ref:t,...r})})}),WK=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=qn(Fd,n),i=sM(Fd,n),{onThumbPositionChange:l}=i,c=je(t,h=>i.onThumbChange(h)),u=p.useRef(void 0),d=zh(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const h=a.viewport;if(h){const f=()=>{if(d(),!u.current){const m=KK(h,l);u.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[a.viewport,d,l]),o.jsx(se.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:te(e.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),x=h.clientX-m.left,g=h.clientY-m.top;i.onThumbPointerDown({x,y:g})}),onPointerUp:te(e.onPointerUp,i.onThumbPointerUp)})});iM.displayName=Fd;var tv="ScrollAreaCorner",oM=p.forwardRef((e,t)=>{const n=qn(tv,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(HK,{...e,ref:t}):null});oM.displayName=tv;var HK=p.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=qn(tv,n),[a,i]=p.useState(0),[l,c]=p.useState(0),u=!!(a&&l);return wo(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),wo(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),i(d)}),u?o.jsx(se.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function zd(e){return e?parseInt(e,10):0}function lM(e,t){const n=e/t;return isNaN(n)?0:n}function Fh(e){const t=lM(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function GK(e,t,n,r="ltr"){const s=Fh(n),a=s/2,i=t||a,l=s-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return cM([c,u],h)(e)}function O1(e,t,n="ltr"){const r=Fh(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,i=t.content-t.viewport,l=a-r,c=n==="ltr"?[0,i]:[i*-1,0],u=Up(e,c);return cM([0,i],[0,l])(u)}function cM(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function uM(e,t){return e>0&&e<t}var KK=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,l=n.top!==a.top;(i||l)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function zh(e,t){const n=wt(e),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function wo(e,t){const n=wt(t);jt(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var dM=eM,qK=nM,YK=oM;const v0=p.forwardRef(({className:e,children:t,...n},r)=>o.jsxs(dM,{ref:r,className:Y("relative overflow-hidden",e),...n,children:[o.jsx(qK,{className:"h-full w-full rounded-[inherit]",children:t}),o.jsx(hM,{}),o.jsx(YK,{})]}));v0.displayName=dM.displayName;const hM=p.forwardRef(({className:e,orientation:t="vertical",...n},r)=>o.jsx(Zy,{ref:r,orientation:t,className:Y("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:o.jsx(iM,{className:"relative flex-1 rounded-full bg-border"})}));hM.displayName=Zy.displayName;var Bh="Switch",[XK]=xn(Bh),[QK,JK]=XK(Bh),fM=p.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[f,m]=p.useState(null),x=je(t,v=>m(v)),g=p.useRef(!1),b=f?d||!!f.closest("form"):!0,[y,w]=pr({prop:s,defaultProp:a??!1,onChange:u,caller:Bh});return o.jsxs(QK,{scope:n,checked:y,disabled:l,children:[o.jsx(se.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":yM(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onClick:te(e.onClick,v=>{w(S=>!S),b&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})}),b&&o.jsx(gM,{control:f,bubbles:!g.current,name:r,value:c,checked:y,required:i,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});fM.displayName=Bh;var mM="SwitchThumb",pM=p.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=JK(mM,n);return o.jsx(se.span,{"data-state":yM(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});pM.displayName=mM;var ZK="SwitchBubbleInput",gM=p.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const i=p.useRef(null),l=je(i,a),c=Yg(n),u=Ag(t);return p.useEffect(()=>{const d=i.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&m){const x=new Event("click",{bubbles:r});m.call(d,n),d.dispatchEvent(x)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});gM.displayName=ZK;function yM(e){return e?"checked":"unchecked"}var vM=fM,eq=pM;const xM=p.forwardRef(({className:e,...t},n)=>o.jsx(vM,{className:Y("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:n,children:o.jsx(eq,{className:Y("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));xM.displayName=vM.displayName;function tq(){const[e,t]=p.useState(""),[n,r]=p.useState("date"),[s,a]=p.useState("dreams"),[i,l]=p.useState([]),[c,u]=p.useState(!0),[d,h]=p.useState({today:!0,thisWeek:!0,thisMonth:!0,older:!1}),[f,m]=p.useState(null),[x,g]=p.useState(!1),[b,y]=p.useState(!1),[w,v]=p.useState(!1),S="superBlueBloodMoon",j="pixelDreamMoon",k="mythic-locked-moon";p.useEffect(()=>{const{phenomenon:R}=Ea();m(R),g(localStorage.getItem(k)===S),y(localStorage.getItem(k)===j),v(Sk())},[]);const N=()=>{Of();const{phenomenon:R}=Ea();m(R),qi(R)},E=R=>{if(Nb(R),v(R),R){Of();const{phenomenon:z}=Ea();m(z),qi(z)}},C=()=>{w||(Nb(!0),v(!0)),Of();const{phenomenon:R}=Ea();m(R),qi(R)};p.useEffect(()=>{(async()=>{try{const z=await ni();l(z)}catch(z){console.error("Error loading data:",z)}finally{u(!1)}})()},[]);const T=p.useMemo(()=>e?i.filter(R=>{var z;return R.world.toLowerCase().includes(e.toLowerCase())||R.entities.some(D=>D.toLowerCase().includes(e.toLowerCase()))||((z=R.notes)==null?void 0:z.toLowerCase().includes(e.toLowerCase()))}):i,[i,e]),M=p.useMemo(()=>{const R=[],z=[],D=[],V=[];return T.forEach(P=>{const _=new Date(P.date);PV(_)?R.push(P):MV(_,{weekStartsOn:1})?z.push(P):TV(_)?D.push(P):V.push(P)}),{today:R,thisWeek:z,thisMonth:D,older:V}},[T]),O=p.useMemo(()=>{const R={};return T.forEach(z=>{const D=z.world||"Unknown World";R[D]||(R[D]=[]),R[D].push(z)}),Object.entries(R).sort((z,D)=>D[1].length-z[1].length)},[T]),$=R=>{h(z=>({...z,[R]:!z[R]}))};return o.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[o.jsx(D7,{searchQuery:e,onSearchChange:t,groupBy:n,onGroupByChange:r,totalDreams:T.length,currentPhenomenon:f,onChangePhenomenon:N,showDreamFilters:s==="dreams"}),!1,o.jsxs(JT,{value:s,onValueChange:R=>a(R),className:"flex-1 flex flex-col",children:[o.jsx("div",{className:"px-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:o.jsxs(Qy,{className:"w-full h-12 bg-transparent gap-2",children:[o.jsxs(Cs,{value:"dreams",className:"flex-1 gap-2 data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:[o.jsx(yg,{className:"h-4 w-4"}),o.jsx("span",{children:"Dream Logs"})]}),o.jsxs(Cs,{value:"codex",className:"flex-1 gap-2 data-[state=active]:bg-primary/10 data-[state=active]:text-primary",children:[o.jsx(wg,{className:"h-4 w-4"}),o.jsx("span",{children:"Mythic Codex"})]})]})}),o.jsx(Ns,{value:"dreams",className:"flex-1 mt-0 overflow-hidden",children:o.jsx(v0,{className:"h-full pb-28 relative z-0",children:c?o.jsx(XV,{}):T.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground px-4",children:[o.jsx(bg,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:""})]}):n==="date"?o.jsxs("div",{className:"space-y-4 p-4",children:[o.jsx(fu,{title:"",dreams:M.today,colorClass:"bg-primary",isExpanded:d.today,onToggle:()=>$("today")}),o.jsx(fu,{title:"",dreams:M.thisWeek,colorClass:"bg-blue-500",isExpanded:d.thisWeek,onToggle:()=>$("thisWeek")}),o.jsx(fu,{title:"",dreams:M.thisMonth,colorClass:"bg-emerald-500",isExpanded:d.thisMonth,onToggle:()=>$("thisMonth")}),o.jsx(fu,{title:"",dreams:M.older,colorClass:"bg-muted-foreground/50",isExpanded:d.older,onToggle:()=>$("older")})]}):o.jsx("div",{className:"space-y-4 p-4",children:O.map(([R,z])=>o.jsx(A7,{worldName:R,dreams:z,isExpanded:d[R]??!0,onToggle:()=>$(R)},R))})})}),o.jsx(Ns,{value:"codex",className:"flex-1 mt-0 overflow-hidden",children:o.jsx(v0,{className:"h-full pb-28 relative z-0",children:o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"card-minimal mb-4 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between gap-3",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[o.jsx(jx,{className:"h-4 w-4 text-primary"}),"Mythic Shuffle"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:" Mythic "})]}),o.jsx(xM,{checked:w,onCheckedChange:E})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(ce,{variant:"outline",size:"sm",onClick:C,className:"h-8",children:[o.jsx(jx,{className:"h-4 w-4 mr-1"}),""]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:w?"":""})]})]}),o.jsx(wK,{})]})})})]}),o.jsx(yh,{})]})}function nq(e,t=""){const n=[...e].sort((a,i)=>!a.date||!i.date?0:new Date(i.date).getTime()-new Date(a.date).getTime()),r=a=>new Date(a).toLocaleDateString("th-TH",{weekday:"long",day:"numeric",month:"long",year:"numeric"});return`<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${t}</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: "Sukhumvit Set", "Sarabun", "Noto Sans Thai", sans-serif;
      line-height: 1.6;
      color: #1a1a1a;
      background: #ffffff;
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
    }
    h1 {
      font-size: 2rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #0a0a0a;
      border-bottom: 3px solid #3b82f6;
      padding-bottom: 0.5rem;
    }
    .meta {
      color: #6b7280;
      font-size: 0.875rem;
      margin-bottom: 2rem;
    }
    .toc {
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }
    .toc h2 {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      color: #111827;
    }
    .toc ul {
      list-style: none;
      padding-left: 0;
    }
    .toc li {
      margin-bottom: 0.5rem;
    }
    .toc a {
      color: #3b82f6;
      text-decoration: none;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem;
      border-radius: 4px;
      transition: background-color 0.2s;
    }
    .toc a:hover {
      background: #dbeafe;
    }
    .dream {
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 2rem;
      margin-bottom: 2rem;
      page-break-inside: avoid;
      background: #ffffff;
    }
    .dream-title {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: #111827;
    }
    .dream-meta {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      margin-bottom: 1.5rem;
      font-size: 0.875rem;
    }
    .dream-meta-item {
      padding: 0.75rem;
      background: #f9fafb;
      border-radius: 6px;
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }
    .dream-meta-label {
      font-weight: 600;
      color: #6b7280;
      font-size: 0.75rem;
      text-transform: uppercase;
    }
    .dream-meta-value {
      color: #111827;
    }
    .dream-types {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }
    .dream-type-badge {
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 500;
      background: #dbeafe;
      color: #1e40af;
    }
    .dream-type-lucid {
      background: #e9d5ff;
      color: #6b21a8;
    }
    .dream-type-nightmare {
      background: #fee2e2;
      color: #991b1b;
    }
    .dream-type-recurring {
      background: #fef3c7;
      color: #92400e;
    }
    .dream-type-prophetic {
      background: #cffafe;
      color: #155e75;
    }
    .dream-section {
      margin-bottom: 1.5rem;
    }
    .dream-section-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: #374151;
    }
    .dream-content {
      color: #1f2937;
      white-space: pre-wrap;
      line-height: 1.8;
    }
    .tag-list {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    .tag {
      padding: 0.25rem 0.75rem;
      background: #f3f4f6;
      border-radius: 999px;
      font-size: 0.875rem;
      color: #374151;
    }
    .footer {
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid #e5e7eb;
      text-align: center;
      color: #6b7280;
      font-size: 0.875rem;
    }
    @media print {
      body {
        padding: 0;
      }
      .dream {
        page-break-inside: avoid;
      }
    }
  </style>
</head>
<body>
  <h1>${t}</h1>
  <div class="meta">
     ${new Date().toLocaleDateString("th-TH",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}  ${n.length} 
  </div>

  <div class="toc">
    <h2></h2>
    <ul>
      ${n.map((a,i)=>`
        <li>
          <a href="#dream-${i}">
            <span>${a.world||""}</span>
            <span style="color: #9ca3af; font-size: 0.75rem;">
              ${a.date?r(a.date):""}
            </span>
          </a>
        </li>
      `).join("")}
    </ul>
  </div>

  ${n.map((a,i)=>`
    <div class="dream" id="dream-${i}">
      <div class="dream-title">${a.world||""}</div>
      
      ${a.dreamTypes&&a.dreamTypes.length>0?`
        <div class="dream-types">
          ${a.dreamTypes.map(l=>`
            <span class="dream-type-badge dream-type-${l}">
              ${Qa[l]||l}
            </span>
          `).join("")}
        </div>
      `:""}

      <div class="dream-meta">
        <div class="dream-meta-item">
          <div class="dream-meta-label"></div>
          <div class="dream-meta-value">
            ${a.date?r(a.date):""}
          </div>
        </div>
        <div class="dream-meta-item">
          <div class="dream-meta-label"></div>
          <div class="dream-meta-value">${a.wakeTime||""}</div>
        </div>
        <div class="dream-meta-item">
          <div class="dream-meta-label"></div>
          <div class="dream-meta-value">Level ${a.threatLevel}</div>
        </div>
        <div class="dream-meta-item">
          <div class="dream-meta-label"></div>
          <div class="dream-meta-value">
            ${a.timeSystem==="activated"?"":a.timeSystem==="inactive"?"":""}
          </div>
        </div>
      </div>

      ${a.environments&&a.environments.length>0?`
        <div class="dream-section">
          <div class="dream-section-title"></div>
          <div class="tag-list">
            ${a.environments.map(l=>`<span class="tag">${l}</span>`).join("")}
          </div>
        </div>
      `:""}

      ${a.entities&&a.entities.length>0?`
        <div class="dream-section">
          <div class="dream-section-title"></div>
          <div class="tag-list">
            ${a.entities.map(l=>`<span class="tag">${l}</span>`).join("")}
          </div>
        </div>
      `:""}

      ${a.notes&&a.notes.trim()?`
        <div class="dream-section">
          <div class="dream-section-title"></div>
          <div class="dream-content">${a.notes}</div>
        </div>
      `:""}
    </div>
  `).join("")}

  <div class="footer">
    <p>   Dream Weaver Log</p>
    <p> ${new Date().getFullYear()}  </p>
  </div>
</body>
</html>`}function rq(e,t="dream-logs"){const n=nq(e),r=new Blob([n],{type:"text/html;charset=utf-8"}),s=URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=`${t}.html`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)}function I1({dreams:e,mode:t}){const n=p.useMemo(()=>{if(e.length===0)return[];const s=[...e].sort((l,c)=>new Date(l.date).getTime()-new Date(c.date).getTime()),a=new Date(s[0].date),i=new Date(s[s.length-1].date);return t==="week"?E9({start:a,end:i},{weekStartsOn:1}).map(c=>{const u=new Date(c);u.setDate(u.getDate()+6);const d=e.filter(h=>{const f=new Date(h.date);return f>=c&&f<=u}).length;return{label:Ut(c,"d MMM",{locale:Js}),count:d,period:c}}).slice(-12):N9({start:a,end:i}).map(c=>{const u=new Date(c);u.setMonth(u.getMonth()+1),u.setDate(0);const d=e.filter(h=>{const f=new Date(h.date);return f>=c&&f<=u}).length;return{label:Ut(c,"MMM yy",{locale:Js}),count:d,period:c}}).slice(-12)},[e,t]),r=Math.max(...n.map(s=>s.count),1);return o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(vg,{className:"w-4 h-4 text-primary"}),o.jsxs("h2",{className:"text-sm font-semibold",children:[" (",t==="week"?"":"",")"]})]}),o.jsxs("div",{className:"space-y-2",children:[n.map((s,a)=>o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsx("span",{className:"text-muted-foreground",children:s.label}),o.jsxs("span",{className:"font-semibold",children:[s.count," "]})]}),o.jsx("div",{className:"h-2 bg-secondary rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-300",style:{width:`${s.count/r*100}%`}})})]},a)),n.length===0&&o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:""})]})]})}function sq({dreams:e}){const{words:t,totalMentions:n,uniqueCount:r,topWord:s}=p.useMemo(()=>{var k;const i=new Set(["","","","","","","","","","","","","","","","","","","","","the","a","an","and","or","but","in","on","at","to","for","of","with","by","from","up","about","into","is","was","were","be","been","are","as"]),l=new Map,c=N=>/[\u0E00-\u0E7F]/.test(N),u=N=>N.normalize("NFC").replace(/^[^\p{L}\p{N}]+|[^\p{L}\p{N}]+$/gu,"").trim(),d=(N,E)=>{const C=u(N);if(!C)return;const T=c(C),M=T?C:C.toLowerCase();if(M.length<(T?2:3)||i.has(M))return;const O=l.get(M);O?(O.count+=1,O.weight+=E):l.set(M,{count:1,weight:E,display:C})},h=(N,E)=>{N&&N.split(/[\s,.:;!?()[\]{}"'\-_/]+/).filter(Boolean).forEach(C=>d(C,E))},f=(N,E)=>{N.forEach(C=>d(C,E))};e.forEach(N=>{h(N.notes||"",1),f(N.environments||[],1.2),f(N.entities||[],1.4),h(N.world||"",1.6)});const m=Array.from(l.entries()).map(([,N])=>({word:N.display,count:N.count,weight:N.weight})).sort((N,E)=>E.weight-N.weight||E.count-N.count).slice(0,36);if(m.length===0)return{words:[],totalMentions:0,uniqueCount:0,topWord:null};const x=m.map(N=>N.weight),g=Math.max(...x),b=Math.min(...x),y=g-b||1,w=13,v=38,S=N=>N.split("").reduce((E,C,T)=>E+C.charCodeAt(0)*(T+3),0);return{words:m.map((N,E)=>{const C=(N.weight-b)/y,T=Math.pow(C,.72),M=Math.max(.76,1-Math.max(0,N.word.length-12)*.02),O=w+T*(v-w)*M,$=S(N.word),R=E<4?"hero":E<12?"core":"soft";return{word:N.word,count:N.count,weight:N.weight,size:O,tier:R,colorIndex:$%5,rotate:R==="hero"?0:R==="soft"?($%7-3)*1.5:($%5-2)*.8}}),totalMentions:m.reduce((N,E)=>N+E.count,0),uniqueCount:m.length,topWord:((k=m[0])==null?void 0:k.word)??null}},[e]),a=[{text:"text-sky-700 dark:text-sky-300",bg:"bg-sky-100/70 dark:bg-sky-900/30",ring:"ring-sky-200/70 dark:ring-sky-800/50",gradient:"linear-gradient(120deg, #38bdf8, #6366f1)"},{text:"text-violet-700 dark:text-violet-300",bg:"bg-violet-100/70 dark:bg-violet-900/30",ring:"ring-violet-200/70 dark:ring-violet-800/50",gradient:"linear-gradient(120deg, #a855f7, #6366f1)"},{text:"text-emerald-700 dark:text-emerald-300",bg:"bg-emerald-100/70 dark:bg-emerald-900/30",ring:"ring-emerald-200/70 dark:ring-emerald-800/50",gradient:"linear-gradient(120deg, #34d399, #38bdf8)"},{text:"text-amber-700 dark:text-amber-300",bg:"bg-amber-100/70 dark:bg-amber-900/30",ring:"ring-amber-200/70 dark:ring-amber-800/50",gradient:"linear-gradient(120deg, #f59e0b, #fb7185)"},{text:"text-rose-700 dark:text-rose-300",bg:"bg-rose-100/70 dark:bg-rose-900/30",ring:"ring-rose-200/70 dark:ring-rose-800/50",gradient:"linear-gradient(120deg, #fb7185, #a855f7)"}];return t.length===0?o.jsxs("div",{className:"card-minimal relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-70",style:{backgroundImage:"radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.12), transparent 55%), radial-gradient(circle at 80% 0%, rgba(168, 85, 247, 0.12), transparent 45%)"}}),o.jsxs("div",{className:"relative flex items-center gap-2 mb-3",children:[o.jsx(cp,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"text-sm font-semibold",children:"Word Cloud"})]}),o.jsx("div",{className:"relative text-sm text-muted-foreground text-center py-8",children:""})]}):o.jsxs("div",{className:"card-minimal relative overflow-hidden space-y-4",children:[o.jsx("div",{className:"absolute inset-0 opacity-70",style:{backgroundImage:"radial-gradient(circle at 15% 20%, rgba(99, 102, 241, 0.12), transparent 55%), radial-gradient(circle at 80% 0%, rgba(56, 189, 248, 0.12), transparent 45%)"}}),o.jsxs("div",{className:"relative flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(cp,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"text-sm font-semibold",children:"Word Cloud"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-[11px] text-muted-foreground",children:[o.jsx(fr,{className:"w-3 h-3"}),""]})]}),o.jsxs("div",{className:"relative flex flex-wrap gap-2 text-[11px] text-muted-foreground",children:[o.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-secondary/70",children:[" ",r]}),o.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-secondary/70",children:[" ",n," "]}),s&&o.jsxs("span",{className:"px-2 py-0.5 rounded-full bg-primary/10 text-primary",children:[": ",s]})]}),o.jsx("div",{className:"relative flex flex-wrap gap-2 justify-center items-center py-4 min-h-[220px]",children:t.map(({word:i,count:l,size:c,tier:u,colorIndex:d,rotate:h})=>{const f=a[d],m=u==="hero",x=u==="core";return o.jsx("span",{className:Y("cursor-default select-none transition-all duration-200 ease-out",m?"px-1 font-semibold tracking-tight text-transparent bg-clip-text drop-shadow-sm":"px-2.5 py-1 rounded-full ring-1",!m&&f.bg,!m&&f.ring,!m&&f.text),style:{fontSize:`${c}px`,fontWeight:m?600:x?500:400,opacity:m?.95:x?.85:.7,transform:`rotate(${h}deg)`,backgroundImage:m?f.gradient:void 0},title:`${l} `,children:i},i)})})]})}function aq({dreams:e}){const t=p.useMemo(()=>{const n=new Map;return e.forEach(r=>{[...r.environments,...r.entities,r.world,r.timeSystem,r.safetyOverride].forEach(a=>{a&&a!=="unknown"&&a!=="none"&&n.set(a,(n.get(a)||0)+1)})}),Array.from(n.entries()).map(([r,s])=>({tag:r,count:s})).sort((r,s)=>s.count-r.count).slice(0,20)},[e]);return o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(mA,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"text-sm font-semibold",children:""})]}),t.length>0?o.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(({tag:n,count:r})=>o.jsxs(Ie,{variant:"secondary",className:"text-xs px-3 py-1 gap-2",children:[o.jsx("span",{children:n}),o.jsx("span",{className:"text-primary font-semibold",children:r})]},n))}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:""})]})}function iq({dreams:e}){const t=p.useMemo(()=>{const r=[...e].sort((c,u)=>new Date(u.date).getTime()-new Date(c.date).getTime()),s=Array.from({length:14},(c,u)=>{const d=_V(new Date,u),h=r.filter(m=>Ut(new Date(m.date),"yyyy-MM-dd")===Ut(d,"yyyy-MM-dd")),f=h.length>0?h.reduce((m,x)=>m+x.threatLevel,0)/h.length:0;return{date:d,label:Ut(d,"d MMM",{locale:Js}),avgThreat:f,count:h.length}}).reverse(),a=s.slice(-7).filter(c=>c.count>0).reduce((c,u,d,h)=>c+u.avgThreat/h.length,0),i=s.slice(0,7).filter(c=>c.count>0).reduce((c,u,d,h)=>c+u.avgThreat/h.length,0),l=a-i;return{data:s,trend:l,recentAvg:a,previousAvg:i}},[e]),n=Math.max(...t.data.map(r=>r.avgThreat),5);return o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ha,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"text-sm font-semibold",children:"Threat Level Trends"})]}),t.trend!==0&&o.jsxs("div",{className:`flex items-center gap-1 text-xs ${t.trend>0?"text-red-500":t.trend<0?"text-green-500":"text-muted-foreground"}`,children:[t.trend>0?o.jsx(Ha,{className:"w-3 h-3"}):t.trend<0?o.jsx(pA,{className:"w-3 h-3"}):o.jsx(uA,{className:"w-3 h-3"}),o.jsx("span",{children:Math.abs(t.trend).toFixed(2)})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3 p-3 bg-secondary/50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"7 "}),o.jsx("p",{className:"text-lg font-bold",children:t.recentAvg.toFixed(2)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"7 "}),o.jsx("p",{className:"text-lg font-bold",children:t.previousAvg.toFixed(2)})]})]}),o.jsx("div",{className:"space-y-2",children:t.data.map((r,s)=>o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsx("span",{className:"text-muted-foreground",children:r.label}),o.jsx("span",{className:`font-semibold ${r.avgThreat>=4?"text-red-500":r.avgThreat>=3?"text-orange-500":"text-foreground"}`,children:r.count>0?r.avgThreat.toFixed(1):"-"})]}),r.count>0&&o.jsx("div",{className:"h-1.5 bg-secondary rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all ${r.avgThreat>=4?"bg-red-500":r.avgThreat>=3?"bg-orange-500":"bg-primary"}`,style:{width:`${r.avgThreat/n*100}%`}})})]},s))})]})}function oq({dreams:e}){const t=p.useMemo(()=>{const r=new Map;e.forEach(i=>{i.environments.forEach(l=>{r.set(l,(r.get(l)||0)+1)})});const s=new Map;e.forEach(i=>{if(i.entities.length>=2){const l=i.entities.sort().join(" + ");s.set(l,(s.get(l)||0)+1)}});const a=new Map;for(let i=0;i<e.length-1;i++){const l=`${e[i].world}  ${e[i+1].world}`;a.set(l,(a.get(l)||0)+1)}return{recurringEnvs:Array.from(r.entries()).filter(([,i])=>i>=3).map(([i,l])=>({env:i,count:l})).sort((i,l)=>l.count-i.count).slice(0,5),recurringCombos:Array.from(s.entries()).filter(([,i])=>i>=2).map(([i,l])=>({combo:i,count:l})).sort((i,l)=>l.count-i.count).slice(0,3),worldPatterns:Array.from(a.entries()).filter(([,i])=>i>=2).map(([i,l])=>({seq:i,count:l})).sort((i,l)=>l.count-i.count).slice(0,3)}},[e]),n=t.recurringEnvs.length>0||t.recurringCombos.length>0||t.worldPatterns.length>0;return o.jsxs("div",{className:"card-minimal space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(U5,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"text-sm font-semibold",children:"Recurring Patterns"})]}),n?o.jsxs("div",{className:"space-y-4",children:[t.recurringEnvs.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:""}),o.jsx("div",{className:"space-y-1",children:t.recurringEnvs.map(({env:r,count:s})=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{children:r}),o.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[s," "]})]},r))})]}),t.recurringCombos.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:""}),o.jsx("div",{className:"space-y-1",children:t.recurringCombos.map(({combo:r,count:s})=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-xs",children:r}),o.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[s," "]})]},r))})]}),t.worldPatterns.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-xs font-medium text-muted-foreground",children:""}),o.jsx("div",{className:"space-y-1",children:t.worldPatterns.map(({seq:r,count:s})=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-xs",children:r}),o.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[s," "]})]},r))})]})]}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:""})]})}function lq({dreams:e,entities:t}){const n=p.useMemo(()=>{const s=new Map;return t.forEach(a=>{const i=a.dreamIds.length;if(i>=2){const l=e.filter(c=>a.dreamIds.includes(c.id)).sort((c,u)=>new Date(u.date).getTime()-new Date(c.date).getTime())[0];s.set(a.name,{count:i,role:a.role,lastSeen:(l==null?void 0:l.date)||""})}}),Array.from(s.entries()).map(([a,i])=>({name:a,...i})).sort((a,i)=>i.count-a.count).slice(0,10)},[e,t]),r=p.useMemo(()=>n.filter(s=>s.count>=3).map(s=>` "${s.name}"  ${s.count} !`),[n]);return o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fn,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"text-sm font-semibold",children:"Entities "})]}),r.length>0&&o.jsx("div",{className:"space-y-2",children:r.map((s,a)=>o.jsxs("div",{className:"flex items-start gap-2 p-2 bg-blue-50/50 dark:bg-blue-950/20 border border-blue-500/50 rounded-lg",children:[o.jsx(JR,{className:"w-4 h-4 text-blue-500 mt-0.5 flex-shrink-0"}),o.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:s})]},a))}),n.length>0?o.jsx("div",{className:"space-y-2",children:n.map(({name:s,count:a,role:i})=>o.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-secondary/50 transition-colors",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:s}),o.jsx("p",{className:"text-xs text-muted-foreground",children:i})]}),o.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[a," "]})]},s))}):o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:" entities "})]})}function cq({dreams:e}){const t=p.useMemo(()=>{if(e.length===0)return{currentStreak:0,longestStreak:0,totalDays:0,streakDays:[]};const r=[...e].sort((x,g)=>new Date(g.date).getTime()-new Date(x.date).getTime()),s=new Set(r.map(x=>Ut(new Date(x.date),"yyyy-MM-dd")));let a=0,i=new Date;for(i.setHours(0,0,0,0);s.has(Ut(i,"yyyy-MM-dd"));)a++,i.setDate(i.getDate()-1);if(a===0&&(i=new Date,i.setDate(i.getDate()-1),i.setHours(0,0,0,0),s.has(Ut(i,"yyyy-MM-dd"))))for(a=1,i.setDate(i.getDate()-1);s.has(Ut(i,"yyyy-MM-dd"));)a++,i.setDate(i.getDate()-1);const l=new Date(r[r.length-1].date),c=new Date(r[0].date),u=C9({start:l,end:c});let d=0,h=0;u.forEach(x=>{s.has(Ut(x,"yyyy-MM-dd"))?(h++,d=Math.max(d,h)):h=0});const f=[],m=new Date;m.setHours(0,0,0,0);for(let x=0;x<a&&x<7;x++)f.push(new Date(m)),m.setDate(m.getDate()-1);return{currentStreak:a,longestStreak:d,totalDays:s.size,streakDays:f.reverse()}},[e]),n=r=>r>=30?"":r>=14?"":r>=7?"":r>=3?"":"";return o.jsxs("div",{className:"card-minimal space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(bf,{className:"w-4 h-4 text-orange-500"}),o.jsx("h2",{className:"text-sm font-semibold",children:"Dream Streak"})]}),o.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-red-50 dark:from-orange-950/20 dark:to-red-950/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[o.jsx("div",{className:"text-4xl mb-2",children:n(t.currentStreak)}),o.jsx("div",{className:"text-3xl font-bold text-orange-600 dark:text-orange-400 mb-1",children:t.currentStreak}),o.jsx("p",{className:"text-sm text-muted-foreground",children:""})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"text-center p-3 bg-secondary/50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[o.jsx(qR,{className:"w-3 h-3 text-primary"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),o.jsx("p",{className:"text-xl font-bold",children:t.longestStreak}),o.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),o.jsxs("div",{className:"text-center p-3 bg-secondary/50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[o.jsx(bf,{className:"w-3 h-3 text-primary"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:""})]}),o.jsx("p",{className:"text-xl font-bold",children:t.totalDays}),o.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),t.streakDays.length>0&&o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:":"}),o.jsx("div",{className:"flex gap-1 justify-center",children:t.streakDays.map((r,s)=>o.jsxs("div",{className:"flex flex-col items-center",title:Ut(r,"d MMM yyyy",{locale:Js}),children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-500/20 flex items-center justify-center",children:o.jsx(bf,{className:"w-4 h-4 text-orange-500"})}),o.jsx("span",{className:"text-xs text-muted-foreground mt-1",children:Ut(r,"d")})]},s))})]}),t.currentStreak===0&&o.jsx("div",{className:"text-center p-3 bg-muted rounded-lg",children:o.jsx("p",{className:"text-sm text-muted-foreground",children:" streak ! "})}),t.currentStreak>=7&&o.jsx("div",{className:"text-center p-3 bg-green-50 dark:bg-green-950/20 rounded-lg border border-green-200 dark:border-green-800",children:o.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["!  ",t.currentStreak," ","! "]})})]})}function uq(){return o.jsxs("div",{className:"card-minimal space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(we,{className:"w-4 h-4 rounded"}),o.jsx(we,{className:"h-3 w-20"})]}),o.jsx(we,{className:"h-8 w-12"})]})}function dq(){return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(we,{className:"w-5 h-5 rounded"}),o.jsx(we,{className:"h-6 w-40"})]}),o.jsx(we,{className:"h-8 w-8 rounded"})]}),o.jsx(we,{className:"h-10 w-full rounded-lg"}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[...Array(4)].map((e,t)=>o.jsx(uq,{},t))}),o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(we,{className:"w-4 h-4 rounded"}),o.jsx(we,{className:"h-4 w-32"})]}),o.jsx("div",{className:"space-y-2",children:[...Array(6)].map((e,t)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(we,{className:"w-16 h-3"}),o.jsx(we,{className:"flex-1 h-2 rounded-full"}),o.jsx(we,{className:"w-8 h-3"})]},t))})]}),o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(we,{className:"w-4 h-4 rounded"}),o.jsx(we,{className:"h-4 w-24"})]}),o.jsx("div",{className:"space-y-2",children:[...Array(5)].map((e,t)=>o.jsxs("div",{className:"flex items-center justify-between py-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(we,{className:"w-8 h-8 rounded-full"}),o.jsx(we,{className:"h-4 w-24"})]}),o.jsx(we,{className:"h-5 w-12 rounded-full"})]},t))})]})]})}function hq({totalDreams:e,worldsCount:t,entitiesCount:n,threatsCount:r}){const s={dreams:e*3,worlds:t*.5,entities:n*.5,threats:r*.3,relations:e*.5},i=Object.values(s).reduce((h,f)=>h+f,0)/1024,l=500,c=i/l*100,u=l-i,d=Math.floor(u/(i/e||3))+e;return o.jsxs("div",{className:"card-minimal w-full max-w-full space-y-3 sm:space-y-4 p-3 sm:p-4 text-sm",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[o.jsxs("div",{className:"min-w-0 flex items-center gap-2",children:[o.jsx(tA,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"truncate text-sm font-semibold",children:"Database Usage"})]}),o.jsxs(Ie,{variant:"outline",className:"shrink-0 text-xs",children:[o.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full mr-1 animate-pulse"}),"Live"]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Storage Used"}),o.jsxs("span",{className:"font-semibold break-all",children:[i.toFixed(2)," MB / ",l," MB"]})]}),o.jsx("div",{className:"h-2.5 sm:h-3 bg-secondary rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full transition-all rounded-full ${c>80?"bg-red-500":c>60?"bg-orange-500":c>40?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(c,100)}%`}})}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.toFixed(2),"%    ",u.toFixed(2)," MB"]})]}),o.jsxs("div",{className:"grid grid-cols-1 gap-2 pt-2 border-t sm:grid-cols-2",children:[o.jsxs("div",{className:"min-w-0 space-y-1",children:[o.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[o.jsx(iA,{className:"w-3 h-3"}),"Dream Logs"]}),o.jsxs("p",{className:"break-words text-base font-semibold",children:[s.dreams.toFixed(1)," KB"]})]}),o.jsxs("div",{className:"min-w-0 space-y-1",children:[o.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[o.jsx(ss,{className:"w-3 h-3"}),"Worlds"]}),o.jsxs("p",{className:"break-words text-base font-semibold",children:[s.worlds.toFixed(1)," KB"]})]}),o.jsxs("div",{className:"min-w-0 space-y-1",children:[o.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[o.jsx(fn,{className:"w-3 h-3"}),"Entities"]}),o.jsxs("p",{className:"break-words text-base font-semibold",children:[s.entities.toFixed(1)," KB"]})]}),o.jsxs("div",{className:"min-w-0 space-y-1",children:[o.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[o.jsx(Ga,{className:"w-3 h-3"}),"Threats"]}),o.jsxs("p",{className:"break-words text-base font-semibold",children:[s.threats.toFixed(1)," KB"]})]})]}),o.jsxs("div",{className:"pt-2 border-t space-y-1.5",children:[o.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:""}),o.jsxs("span",{className:"font-semibold text-primary break-all",children:["~",d.toLocaleString()," logs"]})]}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:[" ",(d-e).toLocaleString()," logs"]})]})]})}function fq({totalDreams:e,avgThreatLevel:t,threatTrend:n,worldsCount:r,entitiesCount:s}){return o.jsxs("div",{className:"grid w-full max-w-full grid-cols-2 gap-3 sm:gap-4 md:grid-cols-4",children:[o.jsxs("div",{className:"card-minimal min-w-0 p-3 sm:p-4",children:[o.jsxs("div",{className:"mb-1 flex min-w-0 items-center gap-2",children:[o.jsx(L5,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("p",{className:"truncate text-xs text-muted-foreground",children:"Total Dreams"})]}),o.jsx("p",{className:"break-words text-xl sm:text-2xl font-bold",children:e})]}),o.jsxs("div",{className:"card-minimal min-w-0 p-3 sm:p-4",children:[o.jsxs("div",{className:"mb-1 flex min-w-0 items-center gap-2",children:[o.jsx(Ha,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("p",{className:"truncate text-xs text-muted-foreground",children:"Avg Threat"})]}),o.jsxs("div",{className:"flex flex-wrap items-baseline gap-2",children:[o.jsx("p",{className:"break-words text-xl sm:text-2xl font-bold",children:t}),n!==0&&e>7&&o.jsxs(Ie,{variant:n>0?"destructive":"secondary",className:"text-xs",children:[n>0?"":""," ",Math.abs(n).toFixed(1)]})]})]}),o.jsxs("div",{className:"card-minimal min-w-0 p-3 sm:p-4",children:[o.jsxs("div",{className:"mb-1 flex min-w-0 items-center gap-2",children:[o.jsx(ss,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("p",{className:"truncate text-xs text-muted-foreground",children:"Worlds"})]}),o.jsx("p",{className:"break-words text-xl sm:text-2xl font-bold",children:r})]}),o.jsxs("div",{className:"card-minimal min-w-0 p-3 sm:p-4",children:[o.jsxs("div",{className:"mb-1 flex min-w-0 items-center gap-2",children:[o.jsx(fn,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("p",{className:"truncate text-xs text-muted-foreground",children:"Entities"})]}),o.jsx("p",{className:"break-words text-xl sm:text-2xl font-bold",children:s})]})]})}function mq({dreams:e,worldCounts:t,timeSystemCounts:n}){const r=e.length,s=e.slice(0,7),a=e.slice(7,14),i=s.length>0?s.reduce((f,m)=>f+m.threatLevel,0)/s.length:0,l=a.length>0?a.reduce((f,m)=>f+m.threatLevel,0)/a.length:0,c=i-l,u=[];c>.5?u.push({type:"warning",text:` ${c.toFixed(1)} `,icon:Ga}):c<-.5&&u.push({type:"success",text:` ${Math.abs(c).toFixed(1)} `,icon:mc}),n.activated>n.inactive&&u.push({type:"info",text:"Time System ",icon:Dr});const d=s.filter(f=>f.threatLevel>=4).length;d>=3&&u.push({type:"danger",text:` ${d} `,icon:Ga});const h=t[0];return h&&h.count>r*.3&&u.push({type:"info",text:` "${h.name}"  (${h.count} )`,icon:ss}),u.length===0?null:o.jsx("div",{className:"space-y-2",children:u.map((f,m)=>o.jsxs("div",{className:`card-minimal flex min-w-0 items-start gap-3 p-3 sm:p-4 ${f.type==="danger"?"border-red-500/50 bg-red-50/50 dark:bg-red-950/20":f.type==="warning"?"border-orange-500/50 bg-orange-50/50 dark:bg-orange-950/20":f.type==="success"?"border-green-500/50 bg-green-50/50 dark:bg-green-950/20":"border-blue-500/50 bg-blue-50/50 dark:bg-blue-950/20"}`,children:[o.jsx(f.icon,{className:`w-4 h-4 mt-0.5 ${f.type==="danger"?"text-red-500":f.type==="warning"?"text-orange-500":f.type==="success"?"text-green-500":"text-blue-500"}`}),o.jsx("p",{className:"text-sm flex-1 break-words",children:f.text})]},m))})}function pq({dreams:e}){const t=e.length,n=[0,1,2,3,4,5].map(r=>({level:r,count:e.filter(s=>s.threatLevel===r).length}));return o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ha,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"text-sm font-semibold",children:"Threat Level Distribution"})]}),o.jsx("div",{className:"space-y-2",children:n.map(({level:r,count:s})=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-xs w-16",children:["Level ",r]}),o.jsx("div",{className:"flex-1 bg-secondary rounded-full h-2 overflow-hidden",children:o.jsx("div",{className:`h-full transition-all ${r>=4?"bg-red-500":r>=3?"bg-orange-500":"bg-primary"}`,style:{width:`${t>0?s/t*100:0}%`}})}),o.jsx("span",{className:"text-xs text-muted-foreground w-12 text-right",children:s})]},r))})]})}function Ye({children:e,delay:t=0,duration:n=400,className:r=""}){const[s,a]=p.useState(!1);return p.useEffect(()=>{const i=setTimeout(()=>{a(!0)},t);return()=>clearTimeout(i)},[t]),o.jsx("div",{className:`transition-all ${r}`,style:{opacity:s?1:0,transform:s?"translateY(0) scale(1)":"translateY(16px) scale(0.98)",transitionDuration:`${n}ms`,transitionTimingFunction:"cubic-bezier(0.34, 1.56, 0.64, 1)"},children:e})}function gq({dreams:e}){const[t,n]=p.useState(new Date),r=t.getFullYear(),s=t.getMonth(),a=new Date(r,s,1),l=new Date(r,s+1,0).getDate(),c=a.getDay(),u=p.useMemo(()=>{const v=[];for(let S=0;S<c;S++)v.push(null);for(let S=1;S<=l;S++)v.push(new Date(r,s,S));return v},[r,s,l,c]),d=p.useMemo(()=>{const v=new Map;return e.forEach(S=>{if(S.date){const j=S.date.split("T")[0];v.has(j)||v.set(j,[]),v.get(j).push(S)}}),v},[e]),h=v=>{const S=v.getFullYear(),j=String(v.getMonth()+1).padStart(2,"0"),k=String(v.getDate()).padStart(2,"0");return`${S}-${j}-${k}`},f=v=>{const S=h(v),j=d.get(S)||[],k=new Set;return j.forEach(N=>{var E;(E=N.dreamTypes)==null||E.forEach(C=>k.add(C))}),Array.from(k)},m=v=>{switch(v){case"lucid":return"bg-purple-500";case"nightmare":return"bg-red-500";case"recurring":return"bg-amber-500";case"prophetic":return"bg-cyan-500";default:return"bg-primary"}},x=()=>{n(new Date(r,s-1))},g=()=>{n(new Date(r,s+1))},b=()=>{n(new Date)},y=new Intl.DateTimeFormat("th-TH",{month:"long",year:"numeric"}).format(t),w=["","","","","","",""];return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-semibold",children:y}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ce,{variant:"outline",size:"sm",onClick:b,children:""}),o.jsx(ce,{variant:"outline",size:"icon",onClick:x,children:o.jsx(XR,{className:"w-4 h-4"})}),o.jsx(ce,{variant:"outline",size:"icon",onClick:g,children:o.jsx(QR,{className:"w-4 h-4"})})]})]}),o.jsx("div",{className:"card-minimal p-3 sm:p-4",children:o.jsxs("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:[w.map(v=>o.jsx("div",{className:"text-center text-xs sm:text-sm font-medium text-muted-foreground py-2",children:v},v)),u.map((v,S)=>{if(!v)return o.jsx("div",{className:"aspect-square"},`empty-${S}`);const j=h(v),k=d.get(j)||[],N=f(v),E=v.toDateString()===new Date().toDateString();return o.jsxs("div",{className:`aspect-square border rounded-md p-1 sm:p-2 relative ${E?"border-primary bg-primary/5":"border-border hover:bg-accent/50"} transition-colors`,children:[o.jsx("div",{className:"text-xs sm:text-sm font-medium",children:v.getDate()}),k.length>0&&o.jsxs("div",{className:"absolute bottom-1 left-1 right-1 flex gap-0.5 justify-center items-center flex-wrap",children:[N.length>0?N.slice(0,3).map(C=>o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${m(C)}`,title:Qa[C]},C)):o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary"}),k.length>1&&o.jsx("span",{className:"text-[8px] sm:text-[10px] text-muted-foreground ml-0.5",children:k.length})]})]},j)})]})}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[o.jsxs("div",{className:"card-minimal p-3 text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary",children:e.filter(v=>{const S=v.date?new Date(v.date):null;return S&&S.getMonth()===s&&S.getFullYear()===r}).length}),o.jsx("div",{className:"text-xs text-muted-foreground",children:""})]}),["lucid","nightmare","recurring","prophetic"].map(v=>{const S=e.filter(j=>{var N;const k=j.date?new Date(j.date):null;return k&&k.getMonth()===s&&k.getFullYear()===r&&((N=j.dreamTypes)==null?void 0:N.includes(v))}).length;return S===0?null:o.jsxs("div",{className:"card-minimal p-3 text-center",children:[o.jsx("div",{className:`text-2xl font-bold ${m(v).replace("bg-","text-")}`,children:S}),o.jsx("div",{className:"text-xs text-muted-foreground",children:Qa[v]})]},v)})]})]})}function yq({dreams:e}){const[t,n]=p.useState(null),r=p.useMemo(()=>{const u=new Map;e.forEach(x=>{const g=x.world||"Unknown";u.has(g)||u.set(g,{id:g,name:g,count:0,avgThreat:0,dreams:[],x:0,y:0});const b=u.get(g);b.count++,b.avgThreat+=x.threatLevel,b.dreams.push(x)}),u.forEach(x=>{x.avgThreat=x.avgThreat/x.count});const d=Array.from(u.values()),h=300,f=250,m=180;return d.forEach((x,g)=>{const b=g/d.length*2*Math.PI-Math.PI/2;x.x=h+m*Math.cos(b),x.y=f+m*Math.sin(b)}),d},[e]),s=p.useMemo(()=>{const u=new Map,d=[...e].sort((h,f)=>!h.date||!f.date?0:new Date(h.date).getTime()-new Date(f.date).getTime());for(let h=0;h<d.length-1;h++){const f=d[h].world||"Unknown",m=d[h+1].world||"Unknown";if(f===m)continue;const x=`${f}->${m}`;u.has(x)||u.set(x,{from:f,to:m,count:0}),u.get(x).count++}return Array.from(u.values())},[e]),a=u=>u<=1?"#22c55e":u<=2?"#eab308":u<=3?"#f97316":u<=4?"#ef4444":"#dc2626",i=(u,d)=>20+u/d*30,l=Math.max(...r.map(u=>u.count),1),c=r.find(u=>u.id===t);return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-semibold",children:""}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.length,"   ",s.length," "]})]}),o.jsx("div",{className:"card-minimal p-4 sm:p-6",children:o.jsxs("svg",{viewBox:"0 0 600 500",className:"w-full h-auto",style:{minHeight:"400px"},children:[o.jsx("g",{className:"connections",children:s.map((u,d)=>{const h=r.find(m=>m.id===u.from),f=r.find(m=>m.id===u.to);return!h||!f?null:o.jsx("line",{x1:h.x,y1:h.y,x2:f.x,y2:f.y,stroke:"currentColor",strokeWidth:Math.min(u.count*.5+1,4),strokeOpacity:.2,className:"text-muted-foreground"},d)})}),o.jsx("g",{className:"nodes",children:r.map(u=>{const d=i(u.count,l),h=a(u.avgThreat),f=t===u.id;return o.jsxs("g",{onClick:()=>n(u.id),style:{cursor:"pointer"},className:"transition-all",children:[o.jsx("circle",{cx:u.x,cy:u.y,r:d/2,fill:h,opacity:f?1:.8,stroke:"currentColor",strokeWidth:f?3:1,className:f?"text-foreground":"text-border"}),o.jsx("text",{x:u.x,y:u.y+d/2+16,textAnchor:"middle",fontSize:"12",fill:"currentColor",className:f?"font-semibold text-foreground":"text-muted-foreground",children:u.name.length>12?u.name.slice(0,12)+"...":u.name}),o.jsx("text",{x:u.x,y:u.y+5,textAnchor:"middle",fontSize:"14",fill:"white",fontWeight:"bold",children:u.count})]},u.id)})})]})}),o.jsxs("div",{className:"card-minimal p-3 sm:p-4",children:[o.jsx("div",{className:"text-sm font-medium mb-2",children:""}),o.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),o.jsx("span",{className:"text-muted-foreground",children:" (0-1)"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),o.jsx("span",{className:"text-muted-foreground",children:" (2)"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),o.jsx("span",{className:"text-muted-foreground",children:" (3)"})]}),o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),o.jsx("span",{className:"text-muted-foreground",children:" (4-5)"})]})]})]}),c&&o.jsxs("div",{className:"card-minimal p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold",children:c.name}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.count,"   :"," ",c.avgThreat.toFixed(1)]})]}),o.jsx("button",{onClick:()=>n(null),className:"text-muted-foreground hover:text-foreground",children:""})]}),o.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[c.dreams.slice(0,5).map(u=>o.jsxs(nn,{to:`/dream/${u.id}`,className:"block text-sm border border-border rounded p-2 hover:bg-accent transition-colors",children:[o.jsx("div",{className:"font-medium line-clamp-1",children:u.notes||""}),o.jsx("div",{className:"text-xs text-muted-foreground",children:u.date?new Date(u.date).toLocaleDateString("th-TH"):""})]},u.id)),c.count>5&&o.jsxs("div",{className:"text-xs text-muted-foreground text-center py-1",children:["+",c.count-5," "]})]})]})]})}function vq({worlds:e}){const t=e.map(n=>({name:n.name,count:n.dreamIds.length,stability:n.stability})).sort((n,r)=>r.count-n.count).slice(0,5);return o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ss,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"text-sm font-semibold",children:"Top 5 Worlds"})]}),o.jsxs("div",{className:"space-y-2",children:[t.map((n,r)=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"min-w-0 flex items-center gap-2",children:[o.jsxs("span",{className:"text-muted-foreground",children:["#",r+1]}),o.jsx("span",{className:"truncate",children:n.name}),o.jsxs("span",{className:"shrink-0 text-xs text-muted-foreground",children:["(stability ",n.stability,"/5)"]})]}),o.jsxs("span",{className:"shrink-0 text-xs text-muted-foreground",children:[n.count," dreams"]})]},n.name)),t.length===0&&o.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]})}function xq({entities:e}){const t=e.map(n=>({name:n.name,role:n.role,count:n.dreamIds.length})).sort((n,r)=>r.count-n.count).slice(0,5);return o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fn,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"text-sm font-semibold",children:"Top 5 Entities"})]}),o.jsxs("div",{className:"space-y-2",children:[t.map((n,r)=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"min-w-0 flex items-center gap-2",children:[o.jsxs("span",{className:"text-muted-foreground",children:["#",r+1]}),o.jsx("span",{className:"truncate",children:n.name}),o.jsxs("span",{className:"shrink-0 text-xs text-muted-foreground",children:["(",n.role,")"]})]}),o.jsxs("span",{className:"shrink-0 text-xs text-muted-foreground",children:[n.count," dreams"]})]},n.name)),t.length===0&&o.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]})}function bq({threats:e}){const t=e.filter(r=>r.level>=4),n=e.map(r=>({name:r.name,level:r.level,count:r.dreamIds.length,response:r.response})).sort((r,s)=>s.count-r.count).slice(0,5);return o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ga,{className:"w-4 h-4 text-red-500"}),o.jsx("h2",{className:"text-sm font-semibold",children:"Threat Analysis"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{children:"High Threats (Level 4-5)"}),o.jsx("span",{className:"font-semibold text-red-500",children:t.length})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Most Common Threats:"}),n.map((r,s)=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsxs("div",{className:"min-w-0 space-y-0.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"text-muted-foreground",children:["#",s+1]}),o.jsx("span",{className:"truncate",children:r.name}),o.jsxs("span",{className:`shrink-0 text-xs ${r.level>=4?"text-red-500":"text-muted-foreground"}`,children:["(level ",r.level,")"]})]}),r.response&&o.jsxs("p",{className:"pl-6 text-xs text-muted-foreground truncate",children:[": ",r.response]})]}),o.jsxs("span",{className:"shrink-0 text-xs text-muted-foreground",children:[r.count," times"]})]},r.name)),n.length===0&&o.jsx("p",{className:"text-sm text-muted-foreground",children:""})]})]})]})}function wq({dreams:e}){const t=e.length,n={inactive:e.filter(r=>r.timeSystem==="inactive").length,activated:e.filter(r=>r.timeSystem==="activated").length,unknown:e.filter(r=>r.timeSystem==="unknown").length};return o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Dr,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"text-sm font-semibold",children:"Time System Usage"})]}),o.jsx("div",{className:"space-y-2",children:[{label:"Inactive",value:n.inactive,color:"bg-slate-500"},{label:"Activated",value:n.activated,color:"bg-blue-500"},{label:"Unknown",value:n.unknown,color:"bg-muted-foreground"}].map(({label:r,value:s,color:a})=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{children:r}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-24 bg-secondary rounded-full h-2",children:o.jsx("div",{className:`h-full ${a} rounded-full transition-all`,style:{width:`${t>0?s/t*100:0}%`}})}),o.jsx("span",{className:"text-muted-foreground w-12 text-right",children:s})]})]},r))})]})}function Sq({dreams:e}){const t={};e.forEach(r=>{r.environments.forEach(s=>{t[s]=(t[s]||0)+1})});const n=Object.entries(t).sort((r,s)=>s[1]-r[1]).slice(0,10);return n.length===0?null:o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(kg,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"text-sm font-semibold",children:"Top Environments"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(([r,s])=>o.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 bg-secondary rounded-full",children:[o.jsx("span",{className:"text-sm",children:r}),o.jsx(Ie,{variant:"outline",className:"text-xs ml-1",children:s})]},r))})]})}function jq({dreams:e}){const t={none:e.filter(n=>n.safetyOverride==="none").length,helper:e.filter(n=>n.safetyOverride==="helper").length,separation:e.filter(n=>n.safetyOverride==="separation").length,wake:e.filter(n=>n.safetyOverride==="wake").length};return o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(mc,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"text-sm font-semibold",children:"Safety Override Usage"})]}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:Object.entries(t).map(([n,r])=>o.jsxs("div",{className:"text-center p-3 bg-secondary/50 rounded-lg",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1 capitalize",children:n}),o.jsx("p",{className:"text-xl font-bold",children:r})]},n))})]})}function kq(){const[e,t]=p.useState([]),[n,r]=p.useState([]),[s,a]=p.useState([]),[i,l]=p.useState([]),[c,u]=p.useState(!0),[d,h]=p.useState(!1),[f,m]=p.useState(new Date),[x,g]=p.useState(!1),[b,y]=p.useState(!1),[w,v]=p.useState({name:"",role:"observer",description:""}),[S,j]=p.useState({name:"",level:"3",response:""}),k=p.useCallback(async(P=!1)=>{P?h(!0):u(!0);try{const[_,I,L,H]=await Promise.all([ni(),bc(),bh(),I$()]);t(_),r(I),a(L),l(H),m(new Date)}catch(_){console.error("Error loading data:",_)}finally{u(!1),h(!1)}},[]);p.useEffect(()=>{k()},[k]);const N=async()=>{const P=w.name.trim();if(!P){lt({title:"",variant:"destructive"});return}if(s.some(I=>I.name.trim().toLowerCase()===P.toLowerCase())){lt({title:"",variant:"destructive"});return}g(!0);try{if(!await O$({name:P,role:w.role,description:w.description.trim()||void 0})){lt({title:"",variant:"destructive"});return}lt({title:""}),v({name:"",role:"observer",description:""}),await k(!0)}finally{g(!1)}},E=async()=>{const P=S.name.trim();if(!P){lt({title:" threat",variant:"destructive"});return}if(i.some(I=>I.name.trim().toLowerCase()===P.toLowerCase())){lt({title:" threat ",variant:"destructive"});return}y(!0);try{if(!await L$({name:P,level:Number(S.level),response:S.response.trim()||void 0})){lt({title:" threat ",variant:"destructive"});return}lt({title:" threat "}),j({name:"",level:"3",response:""}),await k(!0)}finally{y(!1)}},C=e.length,T=e.length>0?(e.reduce((P,_)=>P+_.threatLevel,0)/e.length).toFixed(1):"0",M=e.slice(0,7),O=e.slice(7,14),$=M.length>0?M.reduce((P,_)=>P+_.threatLevel,0)/M.length:0,R=O.length>0?O.reduce((P,_)=>P+_.threatLevel,0)/O.length:0,z=$-R,D=n.map(P=>({name:P.name,count:P.dreamIds.length})).sort((P,_)=>_.count-P.count),V={inactive:e.filter(P=>P.timeSystem==="inactive").length,activated:e.filter(P=>P.timeSystem==="activated").length,unknown:e.filter(P=>P.timeSystem==="unknown").length};return c?o.jsx("div",{className:"py-4",children:o.jsx(dq,{})}):o.jsxs("div",{className:"container-app space-y-4 sm:space-y-6 overflow-x-hidden pb-20 sm:pb-24 min-h-screen",children:[o.jsx(Ye,{delay:0,duration:400,children:o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{className:"min-w-0 flex items-center gap-2",children:[o.jsx(vg,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary flex-shrink-0"}),o.jsx("h1",{className:"text-lg sm:text-2xl font-semibold truncate",children:"Statistics & Insights"})]}),o.jsxs("div",{className:"flex items-center gap-2 self-start sm:self-auto",children:[o.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:f.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})}),o.jsx(ce,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9",onClick:()=>{rq(e,`dream-logs-${new Date().toISOString().split("T")[0]}`),lt({title:" HTML..."})},title:"Export  HTML",children:o.jsx(F5,{className:"w-4 h-4"})}),o.jsx(ce,{variant:"ghost",size:"icon",className:"h-8 w-8 sm:h-9 sm:w-9",onClick:()=>k(!0),disabled:d,children:o.jsx(oh,{className:`w-4 h-4 ${d?"animate-spin":""}`})})]})]})}),o.jsx(Ye,{delay:80,duration:400,children:o.jsxs(JT,{defaultValue:"overview",className:"space-y-3 sm:space-y-4 max-w-full",children:[o.jsxs(Qy,{className:"grid h-auto w-full grid-cols-5 gap-1 rounded-lg border bg-muted/60 p-1",children:[o.jsx(Cs,{value:"overview",className:"px-1.5 py-2 text-xs sm:px-3 sm:text-sm",children:"Overview"}),o.jsx(Cs,{value:"analytics",className:"px-1.5 py-2 text-xs sm:px-3 sm:text-sm",children:"Analytics"}),o.jsx(Cs,{value:"patterns",className:"px-1.5 py-2 text-xs sm:px-3 sm:text-sm",children:"Patterns"}),o.jsx(Cs,{value:"calendar",className:"px-1.5 py-2 text-xs sm:px-3 sm:text-sm",children:""}),o.jsx(Cs,{value:"map",className:"px-1.5 py-2 text-xs sm:px-3 sm:text-sm",children:""})]}),o.jsxs(Ns,{value:"overview",className:"space-y-4 sm:space-y-6 max-w-full",children:[o.jsx(Ye,{delay:160,duration:400,children:o.jsx(mq,{dreams:e,worldCounts:D,timeSystemCounts:V})}),o.jsx(Ye,{delay:240,duration:400,children:o.jsx(hq,{totalDreams:C,worldsCount:n.length,entitiesCount:s.length,threatsCount:i.length})}),o.jsx(Ye,{delay:320,duration:400,children:o.jsx(fq,{totalDreams:C,avgThreatLevel:T,threatTrend:z,worldsCount:n.length,entitiesCount:s.length})}),o.jsx(Ye,{delay:400,duration:400,children:o.jsxs("div",{className:"card-minimal space-y-3 sm:space-y-4 border border-amber-200/60 bg-gradient-to-br from-[#fffaf0] via-white to-[#f7fcff] p-3 sm:p-4",children:[o.jsxs("div",{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[o.jsx("h2",{className:"text-sm font-semibold",children:"Character & Threat Builder"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:""})]}),o.jsxs("div",{className:"grid gap-3 sm:gap-4 lg:grid-cols-2",children:[o.jsxs("form",{className:"space-y-3 rounded-xl border border-slate-200/70 bg-white/80 p-3 sm:p-4",onSubmit:P=>{P.preventDefault(),N()},children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium",children:""}),o.jsx("p",{className:"text-xs text-muted-foreground",children:" Character Encyclopedia  Top Entities"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"entityName",children:""}),o.jsx(Tt,{id:"entityName",value:w.name,onChange:P=>v(_=>({..._,name:P.target.value})),placeholder:" "})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{children:""}),o.jsxs(mn,{value:w.role,onValueChange:P=>v(_=>({..._,role:P})),children:[o.jsx(Zt,{children:o.jsx(pn,{})}),o.jsx(en,{children:Wz.map(P=>o.jsx(bt,{value:P,children:P},P))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"entityDesc",children:" (optional)"}),o.jsx(Qs,{id:"entityDesc",value:w.description,onChange:P=>v(_=>({..._,description:P.target.value})),placeholder:" / ",className:"min-h-[84px]"})]}),o.jsx(ce,{type:"submit",disabled:x||d,children:x?"...":""})]}),o.jsxs("form",{className:"space-y-3 rounded-xl border border-slate-200/70 bg-white/80 p-3 sm:p-4",onSubmit:P=>{P.preventDefault(),E()},children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium",children:" Threat + "}),o.jsx("p",{className:"text-xs text-muted-foreground",children:" Threat Analysis "})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"threatName",children:" threat"}),o.jsx(Tt,{id:"threatName",value:S.name,onChange:P=>j(_=>({..._,name:P.target.value})),placeholder:" "})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{children:" threat"}),o.jsxs(mn,{value:S.level,onValueChange:P=>j(_=>({..._,level:P})),children:[o.jsx(Zt,{children:o.jsx(pn,{})}),o.jsx(en,{children:[0,1,2,3,4,5].map(P=>o.jsxs(bt,{value:String(P),children:["Level ",P]},P))})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"threatAbility",children:" /  (optional)"}),o.jsx(Qs,{id:"threatAbility",value:S.response,onChange:P=>j(_=>({..._,response:P.target.value})),placeholder:" , ",className:"min-h-[84px]"})]}),o.jsx(ce,{type:"submit",disabled:b||d,children:b?"...":" threat"})]})]})]})}),o.jsx(Ye,{delay:480,duration:400,children:o.jsx(pq,{dreams:e})}),o.jsx(Ye,{delay:560,duration:400,children:o.jsx(vq,{worlds:n})}),o.jsx(Ye,{delay:640,duration:400,children:o.jsx(xq,{entities:s})}),o.jsx(Ye,{delay:720,duration:400,children:o.jsx(bq,{threats:i})}),o.jsx(Ye,{delay:800,duration:400,children:o.jsx(wq,{dreams:e})}),o.jsx(Ye,{delay:880,duration:400,children:o.jsx(Sq,{dreams:e})}),o.jsx(Ye,{delay:960,duration:400,children:o.jsx(jq,{dreams:e})})]}),o.jsxs(Ns,{value:"analytics",className:"space-y-6",children:[o.jsx(Ye,{delay:100,duration:400,children:o.jsx(I1,{dreams:e,mode:"week"})}),o.jsx(Ye,{delay:180,duration:400,children:o.jsx(I1,{dreams:e,mode:"month"})}),o.jsx(Ye,{delay:260,duration:400,children:o.jsx(iq,{dreams:e})}),o.jsx(Ye,{delay:340,duration:400,children:o.jsx(sq,{dreams:e})}),o.jsx(Ye,{delay:420,duration:400,children:o.jsx(aq,{dreams:e})}),o.jsx(Ye,{delay:500,duration:400,children:o.jsx(cq,{dreams:e})})]}),o.jsxs(Ns,{value:"patterns",className:"space-y-6",children:[o.jsx(Ye,{delay:100,duration:400,children:o.jsx(oq,{dreams:e})}),o.jsx(Ye,{delay:180,duration:400,children:o.jsx(lq,{dreams:e,entities:s})})]}),o.jsx(Ns,{value:"calendar",className:"space-y-6",children:o.jsx(Ye,{delay:100,duration:400,children:o.jsx(gq,{dreams:e})})}),o.jsx(Ns,{value:"map",className:"space-y-6",children:o.jsx(Ye,{delay:100,duration:400,children:o.jsx(yq,{dreams:e})})})]})})]})}function Cq({dreams:e}){const t=p.useMemo(()=>[...e].sort((r,s)=>new Date(s.date).getTime()-new Date(r.date).getTime()),[e]),n=r=>r>=4?"text-red-500 bg-red-100 dark:bg-red-950":r>=3?"text-orange-500 bg-orange-100 dark:bg-orange-950":"text-primary bg-primary/10";return e.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(Dr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:""})]}):o.jsx("div",{className:"space-y-4 max-w-3xl mx-auto",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-border"}),t.map(r=>o.jsxs("div",{className:"relative pl-16 pb-8 last:pb-0",children:[o.jsx("div",{className:Y("absolute left-6 w-5 h-5 rounded-full border-4 border-background",n(r.threatLevel))}),o.jsx(nn,{to:`/logs/${r.id}`,children:o.jsxs("div",{className:"card-minimal hover:shadow-md transition-shadow cursor-pointer",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Dr,{className:"w-4 h-4 text-muted-foreground"}),o.jsx("span",{className:"text-sm font-medium",children:Ut(new Date(r.date),"d MMMM yyyy",{locale:Js})})]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:r.wakeTime})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(ss,{className:"w-4 h-4 text-primary"}),o.jsx("span",{className:"text-lg font-semibold",children:r.world})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ga,{className:"w-3 h-3 text-muted-foreground"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Threat Level:"}),o.jsx(Ie,{variant:"outline",className:n(r.threatLevel),children:r.threatLevel})]}),r.entities.length>0&&o.jsxs("div",{className:"flex items-start gap-2",children:[o.jsx(fn,{className:"w-3 h-3 text-muted-foreground mt-0.5"}),o.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:r.entities.map(s=>o.jsx(Ie,{variant:"secondary",className:"text-xs",children:s},s))})]}),r.environments.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:r.environments.map(s=>o.jsx(Ie,{variant:"outline",className:"text-xs",children:s},s))}),r.notes&&o.jsx("p",{className:"text-sm text-muted-foreground mt-2 line-clamp-2",children:r.notes}),r.safetyOverride!=="none"&&o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx(mc,{className:"w-3 h-3 text-orange-500"}),o.jsxs("span",{className:"text-xs text-orange-600 dark:text-orange-400",children:["Safety Override: ",r.safetyOverride]})]})]})]})})]},r.id))]})})}function Os(e){return e?e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^\p{L}\p{N}]+/gu," ").replace(/\s+/g," ").trim():""}function Nq(e,t){const n=e.length,r=t.length;if(n===0)return r;if(r===0)return n;const s=new Array(r+1).fill(0).map((a,i)=>i);for(let a=1;a<=n;a++){let i=s[0];s[0]=a;for(let l=1;l<=r;l++){const c=s[l],u=e[a-1]===t[l-1]?0:1;s[l]=Math.min(s[l]+1,s[l-1]+1,i+u),i=c}}return s[r]}function Eq(e,t){const n=e.split(" ").filter(i=>i.length>1),r=t.split(" ").filter(i=>i.length>1);if(n.length===0||r.length===0)return 0;const s=new Set(r);return n.filter(i=>s.has(i)).length/Math.max(n.length,r.length)}function nv(e,t){const n=Os(e),r=Os(t);if(!n||!r)return!1;if(n===r)return!0;const s=Math.max(n.length,r.length);if(s<=4)return!1;if(Eq(n,r)>=.7)return!0;const l=1-Nq(n,r)/s,c=s<=7?.88:.84;return l>=c}function $1(e,t){const n=t.map(a=>({raw:a,norm:Os(a)})).filter(a=>a.norm.length>0),r=new Set,s=[];for(const a of e){const i=Os(a);if(!i||r.has(i))continue;n.some(c=>c.norm===i?!0:nv(a,c.raw))&&(s.push(a),r.add(i))}return s}function Tq({dreams:e}){const t=p.useMemo(()=>{const n=[],r={world:3,entity:2,environment:1,threat:1,timeSystem:.75,safety:.75,exit:.75},s=3;for(let a=0;a<e.length;a++)for(let i=a+1;i<e.length;i++){const l=e[a],c=e[i],u=[];let d=0;const h=nv(l.world,c.world);if(h){const g=l.world||c.world||"Unknown";u.push(`: ${g}`),d+=r.world}const f=$1(l.entities||[],c.entities||[]);f.length>0&&(u.push(`: ${f.join(", ")}`),d+=Math.min(f.length,3)*r.entity);const m=$1(l.environments||[],c.environments||[]);m.length>0&&(u.push(`: ${m.join(", ")}`),d+=Math.min(m.length,3)*r.environment),Math.abs(l.threatLevel-c.threatLevel)<=1&&(u.push(` (${l.threatLevel}-${c.threatLevel})`),d+=r.threat),l.timeSystem===c.timeSystem&&l.timeSystem!=="unknown"&&(u.push(`Time System: ${l.timeSystem}`),d+=r.timeSystem),l.safetyOverride===c.safetyOverride&&l.safetyOverride!=="unknown"&&l.safetyOverride!=="none"&&(u.push(`Safety Override: ${l.safetyOverride}`),d+=r.safety),l.exit===c.exit&&l.exit!=="unknown"&&(u.push(`Exit: ${l.exit}`),d+=r.exit),(h||f.length>0||m.length>0)&&d>=s&&n.push({dream1:l,dream2:c,connections:u,score:d})}return n.sort((a,i)=>i.score-a.score).slice(0,15)},[e]);return t.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(hp,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:""}),o.jsx("p",{className:"text-sm mt-2",children:""})]}):o.jsxs("div",{className:"space-y-4 max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(hp,{className:"w-5 h-5 text-primary"}),o.jsxs("h2",{className:"text-lg font-semibold",children:[" ",t.length," "]})]}),t.map((n,r)=>o.jsxs("div",{className:"card-minimal",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[": ",n.score.toFixed(1)]})}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsx(nn,{to:`/logs/${n.dream1.id}`,children:o.jsxs("div",{className:"p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ss,{className:"w-3 h-3 text-primary"}),o.jsx("span",{className:"text-sm font-semibold",children:n.dream1.world})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(n.dream1.date).toLocaleDateString("th-TH")}),n.dream1.entities.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:n.dream1.entities.slice(0,3).map(s=>o.jsx(Ie,{variant:"outline",className:"text-xs",children:s},s))})]})}),o.jsx(nn,{to:`/logs/${n.dream2.id}`,children:o.jsxs("div",{className:"p-3 bg-secondary/50 rounded-lg hover:bg-secondary transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(ss,{className:"w-3 h-3 text-primary"}),o.jsx("span",{className:"text-sm font-semibold",children:n.dream2.world})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(n.dream2.date).toLocaleDateString("th-TH")}),n.dream2.entities.length>0&&o.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:n.dream2.entities.slice(0,3).map(s=>o.jsx(Ie,{variant:"outline",className:"text-xs",children:s},s))})]})})]}),o.jsx("div",{className:"mt-3 pt-3 border-t space-y-1",children:n.connections.map((s,a)=>o.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1.5",children:[o.jsx("span",{className:"w-1 h-1 rounded-full bg-primary"}),s]},a))})]},r))]})}function Mq({dreams:e,worlds:t}){const n=p.useMemo(()=>{const s=new Map;t.forEach(f=>{const m=Os(f.name);m&&s.set(m,f)});const a=f=>{const m=Os(f);if(!m)return"";if(s.has(m))return m;for(const x of t)if(nv(x.name,f))return Os(x.name);return m},i=new Map,l=e.map(f=>{const m=a(f.world);if(m){const x=i.get(m)??[];x.push(f),i.set(m,x)}return{dream:f,key:m}}),c=(f,m)=>({id:`virtual-${f}`,name:(m==null?void 0:m.world)||"Unknown",type:"transient",stability:3,dreamIds:[]}),u={};new Set([...s.keys(),...i.keys()]).forEach(f=>{const m=s.get(f),x=i.get(f)??[],g=x.length>0?x.reduce((v,S)=>v+S.threatLevel,0)/x.length:0,b={};x.forEach(v=>{v.entities.forEach(S=>{const j=Os(S);j&&(b[j]||(b[j]={label:S,count:0}),b[j].count+=1)})});const y=Object.values(b).filter(v=>v.count>=2).sort((v,S)=>S.count-v.count).map(v=>v.label).slice(0,5),w=m||c(f,x[0]);u[f]={key:f,world:w,dreamCount:x.length,connections:{},avgThreat:g,commonEntities:y}});const h=[...l].sort((f,m)=>new Date(f.dream.date).getTime()-new Date(m.dream.date).getTime());for(let f=0;f<h.length-1;f++){const m=h[f].key,x=h[f+1].key;if(!m||!x||m===x)continue;const g=u[m];g&&(g.connections[x]=(g.connections[x]||0)+1)}return Object.values(u).sort((f,m)=>m.dreamCount-f.dreamCount)},[e,t]),r=p.useMemo(()=>{const s=new Map;return n.forEach(a=>{s.set(a.key,a.world.name)}),s},[n]);return n.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(dp,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:""})]}):o.jsxs("div",{className:"space-y-4 max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(dp,{className:"w-5 h-5 text-primary"}),o.jsxs("h2",{className:"text-lg font-semibold",children:[" (",n.length," )"]})]}),o.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:n.map(s=>o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx(ss,{className:"w-4 h-4 text-primary"}),o.jsx("h3",{className:"text-lg font-semibold",children:s.world.name})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx(Ie,{variant:"outline",className:"text-xs",children:s.world.type}),o.jsxs(Ie,{variant:"secondary",className:"text-xs",children:["Stability: ",s.world.stability,"/5"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-2xl font-bold text-primary",children:s.dreamCount}),o.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 p-2 bg-secondary/50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Threat"}),o.jsx("p",{className:`text-sm font-semibold ${s.avgThreat>=4?"text-red-500":s.avgThreat>=3?"text-orange-500":"text-foreground"}`,children:s.avgThreat.toFixed(1)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Connections"}),o.jsx("p",{className:"text-sm font-semibold",children:Object.keys(s.connections).length})]})]}),s.commonEntities.length>0&&o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:":"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:s.commonEntities.map(a=>o.jsx(Ie,{variant:"secondary",className:"text-xs",children:a},a))})]}),Object.keys(s.connections).length>0&&o.jsxs("div",{className:"space-y-1 pt-2 border-t",children:[o.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[o.jsx(Ha,{className:"w-3 h-3 text-muted-foreground"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:":"})]}),o.jsx("div",{className:"space-y-1",children:Object.entries(s.connections).sort((a,i)=>i[1]-a[1]).slice(0,3).map(([a,i])=>o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsxs("span",{className:"text-muted-foreground",children:[" ",r.get(a)||a]}),o.jsxs(Ie,{variant:"outline",className:"text-xs",children:[i,"x"]})]},a))})]}),s.world.description&&o.jsx("p",{className:"text-xs text-muted-foreground pt-2 border-t",children:s.world.description})]},s.world.id))})]})}function Pq({dreams:e,entities:t}){const n=p.useMemo(()=>{const a=[];return t.forEach(i=>{const l=e.filter(f=>i.dreamIds.includes(f.id));if(l.length===0)return;const c=new Set(l.map(f=>f.world)),u=l.reduce((f,m)=>f+m.threatLevel,0)/l.length,d=[...l].sort((f,m)=>new Date(f.date).getTime()-new Date(m.date).getTime()),h=new Map;l.forEach(f=>{f.entities.filter(m=>m!==i.name).forEach(m=>{h.set(m,(h.get(m)||0)+1)})}),a.push({entity:i,appearances:l.length,worlds:c,avgThreat:u,firstSeen:d[0].date,lastSeen:d[d.length-1].date,coAppearances:h})}),a.sort((i,l)=>l.appearances-i.appearances)},[e,t]),r=a=>{switch(a){case"observer":return xg;case"protector":return mc;case"guide":return dA;case"intruder":return Ga;default:return fn}},s=a=>{switch(a){case"observer":return"text-blue-500 bg-blue-100 dark:bg-blue-950";case"protector":return"text-green-500 bg-green-100 dark:bg-green-950";case"guide":return"text-purple-500 bg-purple-100 dark:bg-purple-950";case"intruder":return"text-red-500 bg-red-100 dark:bg-red-950";default:return"text-muted-foreground bg-secondary"}};return n.length===0?o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx(fn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:""})]}):o.jsxs("div",{className:"space-y-4 max-w-4xl mx-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(fn,{className:"w-5 h-5 text-primary"}),o.jsxs("h2",{className:"text-lg font-semibold",children:[" (",n.length," )"]})]}),o.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:n.map(a=>{const i=r(a.entity.role);return o.jsxs("div",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:a.entity.name}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(Ie,{className:s(a.entity.role),children:[o.jsx(i,{className:"w-3 h-3 mr-1"}),a.entity.role]})})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-2xl font-bold text-primary",children:a.appearances}),o.jsx("p",{className:"text-xs text-muted-foreground",children:""})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 p-3 bg-secondary/50 rounded-lg",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Worlds"}),o.jsx("p",{className:"text-sm font-semibold",children:a.worlds.size})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Avg Threat"}),o.jsx("p",{className:`text-sm font-semibold ${a.avgThreat>=4?"text-red-500":a.avgThreat>=3?"text-orange-500":"text-foreground"}`,children:a.avgThreat.toFixed(1)})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Co-appear"}),o.jsx("p",{className:"text-sm font-semibold",children:a.coAppearances.size})]})]}),o.jsxs("div",{className:"space-y-1 text-xs",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:":"}),o.jsx("span",{className:"font-medium",children:Ut(new Date(a.firstSeen),"d MMM yyyy",{locale:Js})})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-muted-foreground",children:":"}),o.jsx("span",{className:"font-medium",children:Ut(new Date(a.lastSeen),"d MMM yyyy",{locale:Js})})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:":"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:Array.from(a.worlds).map(l=>o.jsx(Ie,{variant:"outline",className:"text-xs",children:l},l))})]}),a.coAppearances.size>0&&o.jsxs("div",{className:"space-y-1 pt-2 border-t",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:":"}),o.jsx("div",{className:"space-y-1",children:Array.from(a.coAppearances.entries()).sort((l,c)=>c[1]-l[1]).slice(0,3).map(([l,c])=>o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsx("span",{className:"text-muted-foreground",children:l}),o.jsxs(Ie,{variant:"secondary",className:"text-xs",children:[c,"x"]})]},l))})]}),a.entity.description&&o.jsx("p",{className:"text-xs text-muted-foreground pt-2 border-t",children:a.entity.description})]},a.entity.id)})})]})}function _q({dreams:e,worlds:t,entities:n}){const[r,s]=p.useState("timeline"),a=[{id:"timeline",label:"Timeline",icon:Dr},{id:"connected",label:"Connected Dreams",icon:hp},{id:"map",label:"Universe Map",icon:dp},{id:"characters",label:"Characters",icon:fn}];return o.jsxs("div",{className:"flex flex-col h-screen bg-background",children:[o.jsx("header",{className:"sticky top-0 z-10 bg-background border-b",children:o.jsxs("div",{className:"px-4 py-3",children:[o.jsx(Tn,{delay:0,duration:400,children:o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(yg,{className:"w-5 h-5 text-primary"}),o.jsx("h1",{className:"text-xl font-semibold",children:"Story Mode"})]}),o.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.length," "]})]})}),o.jsx(Tn,{delay:80,duration:400,children:o.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:a.map(i=>o.jsxs("button",{onClick:()=>s(i.id),className:Y("flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-colors whitespace-nowrap",r===i.id?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground hover:text-foreground"),children:[o.jsx(i.icon,{className:"w-4 h-4"}),i.label]},i.id))})})]})}),o.jsx("main",{className:"flex-1 overflow-y-auto pb-24",children:o.jsx("div",{className:"p-4",children:o.jsxs(Tn,{delay:160,duration:400,children:[r==="timeline"&&o.jsx(Cq,{dreams:e}),r==="connected"&&o.jsx(Tq,{dreams:e}),r==="map"&&o.jsx(Mq,{dreams:e,worlds:t}),r==="characters"&&o.jsx(Pq,{dreams:e,entities:n})]})})}),o.jsx(yh,{})]})}function Rq(){const[e,t]=p.useState([]),[n,r]=p.useState([]),[s,a]=p.useState([]),[i,l]=p.useState(!0),c=p.useRef(null),u=p.useRef(!0),d=p.useCallback(async(h=!1)=>{h&&l(!0);try{const[f,m,x]=await Promise.all([ni(),bc(),bh()]);if(!u.current)return;t(f),r(m),a(x)}catch(f){console.error("Error loading data:",f)}finally{h&&u.current&&l(!1)}},[]);return p.useEffect(()=>{u.current=!0;const h=()=>{c.current!==null&&window.clearTimeout(c.current),c.current=window.setTimeout(()=>{d(!1)},300)},f=()=>{d(!1)},m=()=>{document.visibilityState==="visible"&&d(!1)};d(!0);const x=window.setInterval(()=>{d(!1)},15e3),g=Ge.channel("story-mode-live-data").on("postgres_changes",{event:"*",schema:"public",table:"dream_logs"},h).on("postgres_changes",{event:"*",schema:"public",table:"dream_log_entities"},h).on("postgres_changes",{event:"*",schema:"public",table:"worlds"},h).on("postgres_changes",{event:"*",schema:"public",table:"entities"},h).subscribe();return window.addEventListener("focus",f),document.addEventListener("visibilitychange",m),()=>{u.current=!1,window.clearInterval(x),window.removeEventListener("focus",f),document.removeEventListener("visibilitychange",m),c.current!==null&&window.clearTimeout(c.current),Ge.removeChannel(g)}},[d]),i?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx("div",{className:"text-center text-muted-foreground",children:"..."})}):o.jsx(_q,{dreams:e,worlds:n,entities:s})}const Aq="modulepreload",Dq=function(e){return"/dream-weaver-log/"+e},L1={},Oq=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Dq(c),c in L1)return;L1[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Aq,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function Iq(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:a,onRegisterError:i}=e;let l,c,u;const d=async(f=!0)=>{await c,u==null||u()};async function h(){if("serviceWorker"in navigator){if(l=await Oq(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/dream-weaver-log/sw.js",{scope:"/dream-weaver-log/",type:"classic"})).catch(f=>{i==null||i(f)}),!l)return;u=()=>{l==null||l.messageSkipWaiting()};{let f=!1;const m=()=>{f=!0,l==null||l.addEventListener("controlling",x=>{x.isUpdate&&window.location.reload()}),n==null||n()};l.addEventListener("installed",x=>{typeof x.isUpdate>"u"?typeof x.isExternal<"u"&&x.isExternal?m():!f&&(r==null||r()):x.isUpdate||r==null||r()}),l.addEventListener("waiting",m)}l.register({immediate:t}).then(f=>{a?a("/dream-weaver-log/sw.js",f):s==null||s(f)}).catch(f=>{i==null||i(f)})}}return c=h(),d}const bM=p.createContext(null);function $q({children:e}){const[t,n]=p.useState(!1),[r,s]=p.useState(!1),[a,i]=p.useState(!1),[l,c]=p.useState(null),u=p.useRef(null),d=p.useRef(null);p.useEffect(()=>{"serviceWorker"in navigator&&(d.current=Iq({immediate:!0,onNeedRefresh(){n(!0)},onRegisteredSW(x,g){u.current=g??null},onRegisterError(x){console.warn("Service worker registration failed:",x)}}))},[]);const h=async()=>{var x;s(!0),c(Date.now());try{await((x=u.current)==null?void 0:x.update())}finally{s(!1)}},f=async()=>{if(d.current){i(!0);try{await d.current(!0)}finally{i(!1)}}},m=p.useMemo(()=>({updateAvailable:t,isChecking:r,isUpdating:a,lastCheckedAt:l,checkForUpdates:h,applyUpdate:f}),[t,r,a,l]);return o.jsx(bM.Provider,{value:m,children:e})}function Lq(){const e=p.useContext(bM);if(!e)throw new Error("useAppUpdate must be used within AppUpdateProvider");return e}const wM="2026.01.31.002";function Fq(){const{updateAvailable:e,isChecking:t,isUpdating:n,lastCheckedAt:r,checkForUpdates:s,applyUpdate:a}=Lq(),[i,l]=p.useState(""),[c,u]=p.useState(!1),[d,h]=p.useState(qa()),f=async m=>{if(m.preventDefault(),!!i.trim()){u(!0);try{await V$(i)?(H$(),h(!0),lt({title:" !",description:" 54 "}),l(""),setTimeout(()=>{window.location.reload()},1500)):lt({title:" ",description:"",variant:"destructive"})}catch(x){console.error("Unlock error:",x),lt({title:"",description:"",variant:"destructive"})}finally{u(!1)}}};return o.jsxs("div",{className:"py-4 space-y-8 pb-20",children:[o.jsx(Tn,{delay:0,duration:400,children:o.jsx("h1",{children:"About / Safety"})}),o.jsxs("div",{className:"space-y-6",children:[o.jsx(Tn,{delay:80,duration:400,children:o.jsxs("section",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(B5,{className:"w-4 h-4 text-primary"}),o.jsx("h2",{className:"text-lg font-medium",children:" Dream book"})]}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Dream book by Bon     structured log    "})]})}),o.jsx(Tn,{delay:120,duration:400,children:o.jsxs("section",{className:"card-minimal space-y-3",children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("h2",{className:"text-lg font-medium",children:""}),o.jsxs("p",{className:"text-sm text-muted-foreground",children:[": ",wM]})]}),o.jsx("div",{className:"flex items-center gap-2",children:e?o.jsxs(ce,{onClick:a,disabled:n,children:[n?o.jsx(pl,{className:"h-4 w-4 mr-2 animate-spin"}):o.jsx(F5,{className:"h-4 w-4 mr-2"}),n?"...":""]}):o.jsxs(ce,{variant:"outline",onClick:s,disabled:t,children:[t?o.jsx(pl,{className:"h-4 w-4 mr-2 animate-spin"}):o.jsx(oh,{className:"h-4 w-4 mr-2"}),t?"...":""]})})]}),o.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-2",children:[o.jsx("span",{className:`h-2 w-2 rounded-full ${e?"bg-emerald-400 animate-pulse":"bg-muted-foreground/40"}`}),t?"...":e?" ":""]}),r&&o.jsxs("div",{className:"text-xs text-muted-foreground",children:[": ",new Date(r).toLocaleString("th-TH")]})]})}),o.jsx(Tn,{delay:160,duration:400,children:o.jsxs("section",{className:"card-minimal space-y-4",children:[o.jsx("div",{className:"mb-3",children:o.jsx("h2",{className:"text-lg font-medium",children:"Redeem Code"})}),d?o.jsx("div",{className:"space-y-2",children:o.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-950/20 border border-emerald-200 dark:border-emerald-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 dark:text-emerald-400",children:[o.jsx(up,{className:"w-5 h-5"}),o.jsx("span",{className:"font-semibold",children:"!"})]}),o.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-500 mt-2",children:" 54  "}),wd().unlockedAt&&o.jsxs("p",{className:"text-xs text-emerald-600/70 dark:text-emerald-500/70 mt-1",children:[":"," ",new Date(wd().unlockedAt).toLocaleString("th-TH")]})]})}):o.jsx("form",{onSubmit:f,className:"space-y-3",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{htmlFor:"secretCode"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Tt,{id:"secretCode",type:"password",value:i,onChange:m=>l(m.target.value),placeholder:"...",className:"font-mono",disabled:c,maxLength:50}),o.jsx(ce,{type:"submit",disabled:c||!i.trim(),children:c?o.jsx(pl,{className:"w-4 h-4 animate-spin"}):o.jsx(up,{className:"w-4 h-4"})})]})]})})]})}),o.jsx(Tn,{delay:200,duration:400,children:o.jsxs("section",{className:"card-minimal text-center",children:[o.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dream book by Bon  ",new Date().getFullYear()]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Personal Dream Logging System"})]})})]})]})}const zq=()=>o.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),o.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),o.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})});function Bq(){const e=p.useRef(null),[,t]=p.useState([]),n=p.useRef(0),r=p.useRef(0),s=p.useRef(),a=vc(),[i,l]=p.useState(!1);return p.useEffect(()=>{const c=()=>{const d=document.documentElement.getAttribute("data-mythic-theme");l(d==="pixelDreamMoon")};c();const u=new MutationObserver(c);return u.observe(document.documentElement,{attributes:!0,attributeFilter:["data-mythic-theme"]}),()=>u.disconnect()},[]),p.useEffect(()=>{if(!i||a)return;const c=()=>{const u=window.scrollY,d=Math.abs(u-r.current);if(d>5){const h=Math.min(Math.floor(d/10),5),f=[];for(let m=0;m<h;m++)f.push({id:n.current++,x:Math.random()*window.innerWidth,y:window.innerHeight*.5+(Math.random()-.5)*200,vx:(Math.random()-.5)*2,vy:(Math.random()-.5)*2,life:0,maxLife:30,size:Math.random()>.5?2:3,color:["#818cf8","#06b6d4","#3b82f6"][Math.floor(Math.random()*3)],type:"dust"});t(m=>[...m,...f])}r.current=u};return window.addEventListener("scroll",c,{passive:!0}),()=>window.removeEventListener("scroll",c)},[i,a]),p.useEffect(()=>{if(!i||a)return;const c=u=>{const h=[];for(let f=0;f<8;f++){const m=f/8*Math.PI*2,x=2+Math.random()*2;h.push({id:n.current++,x:u.clientX+window.scrollX,y:u.clientY+window.scrollY,vx:Math.cos(m)*x,vy:Math.sin(m)*x,life:0,maxLife:40,size:Math.random()>.7?4:3,color:["#ffffff","#06b6d4","#818cf8","#ff8fd6"][Math.floor(Math.random()*4)],type:"sparkle"})}t(f=>[...f,...h])};return document.addEventListener("click",c),()=>document.removeEventListener("click",c)},[i,a]),p.useEffect(()=>{if(!i||a)return;const c=e.current;if(!c)return;const u=c.getContext("2d");if(!u)return;const d=()=>{c.width=window.innerWidth,c.height=document.documentElement.scrollHeight};d(),window.addEventListener("resize",d);const h=()=>{u.clearRect(0,0,c.width,c.height),u.imageSmoothingEnabled=!1,t(f=>f.map(x=>{const g={...x,x:x.x+x.vx,y:x.y+x.vy,life:x.life+1};x.type==="sparkle"&&(g.vy+=.15);const b=1-x.life/x.maxLife;return u.globalAlpha=b,u.fillStyle=x.color,x.type==="sparkle"?(u.fillRect(g.x-x.size/2,g.y-x.size/2,x.size,x.size),u.fillRect(g.x-x.size*1.5,g.y-1,x.size*3,2),u.fillRect(g.x-1,g.y-x.size*1.5,2,x.size*3)):u.fillRect(g.x,g.y,x.size,x.size),b>.5&&(u.globalAlpha=b*.3,u.fillRect(g.x-1,g.y-1,x.size+2,x.size+2)),g}).filter(x=>x.life<x.maxLife)),s.current=requestAnimationFrame(h)};return h(),()=>{s.current&&cancelAnimationFrame(s.current),window.removeEventListener("resize",d)}},[i,a]),!i||a?null:o.jsx("canvas",{ref:e,className:"fixed top-0 left-0 pointer-events-none z-[90]",style:{imageRendering:"pixelated"}})}const Vq=new zD,Uq=()=>{const e=vc();return p.useEffect(()=>{typeof document>"u"||(document.documentElement.dataset.reducedMotion=e?"true":"false")},[e]),p.useEffect(()=>{const{phenomenon:t}=Ea();qi(t),console.log(" Global Moon Theme Applied:",t.name),console.log(` App Version: ${wM} | Build: ${new Date().toISOString()}`)},[]),p.useEffect(()=>{G$()},[]),o.jsx($q,{children:o.jsx(VD,{client:Vq,children:o.jsxs(gD,{children:[o.jsx(ZA,{}),o.jsx(_3,{}),o.jsxs(zO,{basename:"/dream-weaver-log",children:[o.jsx(Bq,{}),o.jsxs(Qx,{children:[o.jsx(Jn,{path:"/",element:o.jsx(bF,{})}),o.jsx(Jn,{path:"/library",element:o.jsx(tq,{})}),o.jsx(Jn,{path:"/story",element:o.jsx(Rq,{})}),o.jsx(Jn,{path:"/*",element:o.jsx(QO,{children:o.jsxs(Qx,{children:[o.jsx(Jn,{path:"/logs",element:o.jsx(Gz,{})}),o.jsx(Jn,{path:"/logs/new",element:o.jsx(r9,{})}),o.jsx(Jn,{path:"/logs/:id",element:o.jsx(y9,{})}),o.jsx(Jn,{path:"/statistics",element:o.jsx(kq,{})}),o.jsx(Jn,{path:"/about",element:o.jsx(Fq,{})}),o.jsx(Jn,{path:"*",element:o.jsx(zq,{})})]})})})]})]})]})})})};o5(document.getElementById("root")).render(o.jsx(Uq,{}));
